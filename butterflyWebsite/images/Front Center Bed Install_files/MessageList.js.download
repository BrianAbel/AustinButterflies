//>>built
require({cache:{"ws/mail/MessageListView":function(){define("ws/mail/MessageListView","dojo/_base/declare dojo/text!ws/mail/MessageListView.html dojo/text!ws/mail/MessageListView.css dojo/window dojo/cookie dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/dom-style dojo/query ws/widget/ListView ws/widget/WSMenu ws/widget/WSMenuItem ws/widget/WSInputableMenuItem ws/widget/WSMenuSeparator ws/widget/Pane ws/widget/Advertisement ws/widget/GeminiNativeAd dojo/request/script dijit/layout/StackContainer dijit/layout/BorderContainer ws/widget/WSSplitContainer ws/widget/DropDownButton dojox/grid/Grid ws/date ws/io ws/lang ws/reporting ws/string ws/widget/util ws/widget/Button ws/widget/WSToolbar ws/widget/SingleLineNotification ws/mail/MessageGridModel".split(" "),
function(v,p,y,d,w,n,r,l,x,u,A,C,q,z,m,f,k,t,h,D){return v(A,{templateString:p,css:{templateString:y},hoverColumnHtml:"\x3csvg class\x3d'gridSVGIcon' title\x3d'"+Config.Strings.DeleteMessageTip+"'\x3e\x3cuse xlink:href\x3d'#iconTrash'\x3e\x3c/use\x3e\x3c/svg\x3e",speedUp:!0,quickActionCol:3,wrapperModelClass:ws.mail.MessageGridModel,currentSearchIn:"alltext",dragType:"message",autosizeColumnId:"Subject",cookiePrefs:null,prefsVer:1.3,lastClickTime:0,lastClickUid:0,fetchNotificationCount:5,cellWidthPad:6>
dojo.isSafari?0:12,initialView:!0,previewPaneUidBucket:{},pPaneConnects:[],shownInboxPromo:!1,searchMode:!1,columnDefaults:{Select:{order:0,width:6>dojo.isSafari?36:26,hidden:!1},Flag:{order:1,width:26,hidden:!1},FromTo:{order:2,width:150,min:75,max:250,hidden:!1},Subject:{order:3,width:250,hidden:!1},Attachment:{order:4,width:26,hidden:!1},Hover:{order:5,width:26,hidden:!1},Received:{order:6,width:90,hidden:!1},Folder:{order:7,width:80,min:80,max:250,hidden:!0}},postCreate:function(){dojo.subscribe("DisplayMessage/deleteMessage",
dojo.hitch(this,"deleteMessages"));dojo.subscribe("ListSpacingResize",dojo.hitch(this,function(){this.grid.update()}))},initView:function(){this.initColumns();this.defineMenus();this.inherited(arguments);this.grid.sortInfo=-(ws.lang.findByProp(this.columns,"id","Received")+1);Settings.UserHash>=Config.HideInactiveButtonsThreshold&&(Config.HideInactiveButtons=!1);dojo.connect(this.model,"modelUpdated",this,"modelUpdated");dojo.connect(this.model,"folderListChanged",this,"updateActionMenuFolders");
dojo.connect(this.toolbar,"wrap",this,"wrapToolbar");dojo.connect(this.model,"search",dojo.hitch(this,function(){this.onSelectionChange(!0)}));dojo.connect(this.model,"onSelectionChange",this,"onSelectionChange");dojo.connect(this.fsButton,"onClick",n.hitch(ws.WebSuite,"advancedSearch"));this.filterButton.getMenu();dojo.subscribe("Suite/onKeyOnPress",this,"onKeyPress");dojo.connect(this.grid,"onCellDblClick",this,"handleCellDblClick");this.subscribe("toolbarLayoutUpdate","resize");this.searchResultsNode.disable();
this.initSplitContainer();!Config.EnablePreviewPane||!Settings.EnablePreviewPane&&Settings.PreviewPaneIntroSeen?this.setPreviewPaneEnabled(!1):(!Settings.PreviewPaneIntroSeen&&Settings.EnablePreviewPane&&this.savePreviewPaneSettings({PreviewPaneIntroSeen:!0}),this.setPreviewPaneEnabled(!0));this.setHover();this.showHeader=Settings.DisplayColHeaders;this.updateHeader();ws.WebSuite.SidePanel.setupAdScroll(this.grid.views.views[0].scrollboxNode,"mlist");this.setupInlineAd()},reinitColumns:function(){this.gridModel.sortableCols=
this.gridModel.origSortableCols;this.initColumns()},initColumns:function(a){this.cookieKeyMap={FromTo:"f",Subject:"s",Received:"r"};var b=this.model.getCurrentFolder();if(this.model.isSearch()){if(this.searchMode)return;this.searchMode=!0}else this.searchMode=!1;this.model.isSearch()||"all"!==this.model.filter?this.gridModel.sortableCols=this.gridModel.searchSortableCols:Settings.ViewNewOld&&(this.model.isFolderType(b,"NEWMAIL")||this.model.isFolderType(b,"OLDMAIL"))?this.gridModel.sortableCols=this.gridModel.searchSortableCols:
this.model.isFolderType(b,"DRAFT")||this.model.isFolderType(b,"SENT")?this.gridModel.sortableCols=this.gridModel.norecipSortableCols:this.gridModel.sortableCols=this.gridModel.origSortableCols;this.columns=[];b={};if("string"==typeof Settings.MessageListPrefs){if(Settings.MessageListPrefs)try{b=this.parseMsgListPrefs(Settings.MessageListPrefs)}catch(E){}}else b=Settings.MessageListPrefs;var c=!0,e;for(e in b){c=!1;break}if(a||!b||""==b||c)b=ws.lang.shallowCopy(this.columnDefaults,!0);!this.cookiePrefs&&
w.isSupported()&&(this.cookiePrefs=ws.io._getObjectCookie("WSCliSettings","\x3d"));e=null;if(this.cookiePrefs&&this.cookiePrefs.cw)for(var c={},g=this.cookiePrefs.cw.split(","),B=0;B<g.length;B++){var f=g[B].split(":");1<f.length&&(c[f[0]]=f[1],e=c)}var c={},d;for(d in this.columnDefaults)if(c[d]=b[d]?ws.lang.shallowCopy(b[d],!0):ws.lang.shallowCopy(this.columnDefaults[d],!0),c[d].width=ws.lang.undefinedOrNull(c[d].width)?this.columnDefaults[d].width:c[d].width,c[d].order=!ws.lang.undefinedOrNull(c[d].order)&&
0<=c[d].order?c[d].order:this.columnDefaults[d].order,!a&&e&&this.cookieKeyMap[d]&&e[this.cookieKeyMap[d]]&&(c[d].width=e[this.cookieKeyMap[d]]),this.columnDefaults[d].min&&c[d].width<this.columnDefaults[d].min||this.columnDefaults[d].max&&c[d].width>this.columnDefaults[d].max)c[d].width=this.columnDefaults[d].width;try{var h=Config.Strings.From+"\x3csvg class\x3d'sortSvg'\x3e\x3cuse xlink:href\x3d'#iconUp'\x3e\x3c/use\x3e\x3c/svg\x3e",k=Config.Strings.Subject+"\x3csvg class\x3d'sortSvg'\x3e\x3cuse xlink:href\x3d'#iconUp'\x3e\x3c/use\x3e\x3c/svg\x3e",
t=Config.Strings.Date+"\x3csvg class\x3d'sortSvg'\x3e\x3cuse xlink:href\x3d'#iconUp'\x3e\x3c/use\x3e\x3c/svg\x3e",q=Config.Strings.Folder+"\x3csvg class\x3d'sortSvg'\x3e\x3cuse xlink:href\x3d'#iconUp'\x3e\x3c/use\x3e\x3c/svg\x3e";this.gridModel.formatTypeCB=dojo.hitch(this,"formatSprite",this.sprites.type,"sel");this.columns[c.Select.order]={id:"Select",name:"\x3csvg class\x3d'gridSVGIcon'\x3e\x3cuse xlink:href\x3d'#iconCheckboxOff'\x3e\x3c/use\x3e\x3c/svg\x3e",classes:"gridColSel",width:this.columnDefaults.Select.width+
"px",hidden:!1,noresize:!0,formatter:dojo.hitch(this,"formatSprite",this.baseSprites.chkBox,"sel")};this.columns[c.Flag.order]={id:"Flag",name:"\x3csvg class\x3d'gridSVGIcon'\x3e\x3cuse xlink:href\x3d'#iconFlag'\x3e\x3c/use\x3e\x3c/svg\x3e",classes:"gridColFlag",width:this.columnDefaults.Flag.width+"px",hidden:!1,noresize:!0,formatter:dojo.hitch(this,"formatSprite",this.sprites.flag,"iconFlag")};this.columns[c.FromTo.order]={id:"FromTo",name:h,classes:"gridColFrom",width:c.FromTo.width+"px",hidden:!1};
this.columns[c.Hover.order]={id:"Hover",name:"\x3csvg class\x3d'gridSVGIcon'\x3e\x3cuse xlink:href\x3d'#iconTrash'\x3e\x3c/use\x3e\x3c/svg\x3e",classes:"gridColHov",width:this.columnDefaults.Hover.width+"px",hidden:!1,noresize:!0};this.columns[c.Subject.order]={id:"Subject",name:k,classes:"gridColSub",width:this.columnDefaults.Subject.width+"px",hidden:!1,noresize:!0};this.columns[c.Attachment.order]={id:"Attachment",name:"\x3csvg class\x3d'gridSVGIcon'\x3e\x3cuse xlink:href\x3d'#iconAttach'\x3e\x3c/use\x3e\x3c/svg\x3e",
classes:"gridColAttach",width:this.columnDefaults.Attachment.width+"px",hidden:!1,noresize:!0,formatter:dojo.hitch(this,"formatSprite",this.sprites.attach,"sel")};this.columns[c.Received.order]={id:"Received",name:t,classes:"gridColDate",width:this.columnDefaults.Received.width+"px",hidden:!1,noresize:!0};this.columns[this.columnDefaults.Folder.order]={id:"Folder",name:q,width:this.columnDefaults.Folder.width+"px",hidden:this.columnDefaults.Folder.hidden};var m=dojo.filter(this.columns,function(a){return a&&
!a.hidden}),l=ws.lang.findByProp(m,"id","Received");a&&(this.grid.setStructure([{cells:[this.columns]}]),this.grid.sortInfo=this.defSort=-(l+1))}catch(E){a||this.initColumns(!0)}},formatAcctSprite:function(a,b,c){if(b)return c=b.sort&&b[1]||"",b=b.sort&&b[0]||b,ws.string.substituteParams("\x3cdiv class\x3d'gridIcon %{0}' title\x3d'%{1}'\x3e\x3c/div\x3e",a&&a[b]?a[b]:a.generic,c)},onHeaderCellClick:function(a){var b=this.model.getCurrentFolder(),b=this.model.isFolderType(b,"NEWMAIL")||this.model.isFolderType(b,
"OLDMAIL"),c=this.model.isSearch()||this.gridModel&&a.cell.index==this.gridModel.columns.Select;if(Config.EnableInboxPromo&&!this.shownInboxPromo&&b&&!c)ws.widget.Dialogs.show(Config.Strings.InboxPromoMsg,[Config.Strings.OK],dojo.hitch(this,function(){this.onHeaderCellClick(a)})),ws.widget.Dialogs.dialog.destroyOnClose=!0,dojo.query(".InboxPromoLink").connect("onclick",this,"linkToSettings"),this.shownInboxPromo=!0;else if(this.inherited(arguments),!b||b&&null!=this.model.getSearchString())b=this.gridModel.getSortColumnIndex(Math.abs(this.grid.sortInfo)-
1),c={FromToAddress:"From",Subject:"Subject",Received:"Date",Flag:"Flag",Attachment:"Attach"},c[b]&&(ws.reporting.reportDLAction("Mail-MessageList-SortBy"+c[b]+(0>this.grid.sortInfo?"Dsc":"Asc")),ws.reporting.report("~rapid~MessageListSort","Mail"))},linkToSettings:function(a){a.stopPropagation();a.preventDefault();ws.widget.Dialogs.dialog.hide();ws.WebSuite.openSettings("generalSettings")},toggleColumn:function(a){this.inherited(arguments);"RESET"==a&&ws.reporting.reportDLAction("Mail-Customize-ResetColumns")},
onHeaderColumnChange:function(a,b){if(!this.columnDefaults.Folder||this.columnDefaults.Folder.hidden){var c={version:this.prefsVer};this.cookiePrefs=this.cookiePrefs||{cw:""};this.cookiePrefs.cw="";var e;if(b){for(e in this.columnDefaults)if("Folder"!=e){var g=this.columnDefaults[e],d={},f;for(f in g)"min"!=f&&"max"!=f&&(d[f]=g[f]);c[e]=d}e=ws.lang.findByProp(this.columns,"id","Received");this.grid.setSortIndex(-(e+2))}else for(g=this.columns,d=this.grid.views.views[0].structure.rows[0],f=0;f<g.length;f++)if((e=
g[f])&&"Folder"!=e.id){var h=ws.lang.findByProp(d,"id",e.id),h=parseInt(-1==h?e.width:d[h].unitWidth);dojo.isWebKit&&(h-=this.cellWidthPad);c[e.id]={order:f,hidden:e.hidden,width:h};e.noresize||(this.cookiePrefs.cw+=this.cookieKeyMap[e.id]+":"+h+",")}w.isSupported()&&ws.io._setObjectCookie(this.cookiePrefs,"WSCliSettings","mail.aol.com","/",365);e=c;Settings.AccountMigratedToOath&&(e=this.createMsgListPrefs(c));Settings.MessageListPrefs=e;ws.settings.save({MessageListPrefs:e});this.replaceInlineAd()}},
modelUpdated:function(a){this.model.validateSelection();this.updateFilterButton();this.updateSearchInfo();this.initColumns();this.updateColumnCaptions();this.onSelectionChange(!1,a);this.splitContainer.layout();this.adWidget&&null==this.adWidget.domNode&&this.replaceInlineAd();ws.WebSuite.SidePanel.setupAdScroll(this.grid.views.views[0].scrollboxNode,"mlist")},updateToolbarState:function(){if(this.model){var a=this.model.getCurrentFolder();if(a){var b=this.model.getButtonViz(a),c=null,e=this.model.isAllSelected();
e||(c=this.model.getSelectedUids());var g=Settings.EnablePreviewPane||!Settings.PreviewPaneIntroSeen,f=e||c&&0<c.length||g&&this.model.currentUid;Config.HideInactiveButtons||(f=!0);var c=e||c&&1<c.length,e=this.model.isFolderType(a,"DRAFT"),d=!e&&f;this.spamButton.setShowing(b[4]&&Config.EnableSpamButton&&f);this.notSpamButton.setShowing(b[5]&&f);this.restoreButton.setShowing(b[8]||this.model.isFolderType(a,"TRASH")&&Settings.ViewNewOld&&f);this.keepNewButton.setShowing(b[12]&&Settings.ViewNewOld&&
f);this.replyButton.setShowing(g&&!e&&f&&!c);this.replyAllButton.setShowing(g&&!e&&f&&!c);this.forwardButton.setShowing(g&&!e&&f&&!c);this.editDraftButton.setShowing(e&&f&&!c);this.deleteButton.setShowing(f);this.actionButton.setShowing(d);this.selectButton.setShowing(!Settings.DisplayColHeaders&&0<this.model.getRowCount());this.fsButton.setShowing(this.model.isSearch());this.filterButton.setShowing(Config.EnableMessageListFilters&&!this.model.isSearch());this.closeButton.setShowing(this.model.isSearch());
this.filterButton.containerNode.innerHTML||this.updateFilterButton();this.restartIMButton.setShowing(this.previewSingle&&this.model.currentUid&&this.previewSingle.msgInfo&&this.previewSingle.msgInfo.containsHchat);"none"!=this.domNode.style.display&&this.toolbar.layout()}}},updateColumnCaptions:function(){var a=this.gridModel.columns.FromTo;if(-1!=a){var b=this.model.getCurrentFolder();if(b){var c=b.name,b=this.model.isFolderType(b,"SENT")||this.model.isFolderType(b,"DRAFT")||"Saved/Auto Saved Sent Mail"==
c?Config.Strings.To:Config.Strings.From;this.model.isSearch()&&(b=Config.Strings.FromTo);this.grid.views.views[0].structure.rows[0][a].name=b+"\x3csvg class\x3d'sortSvg'\x3e\x3cuse xlink:href\x3d'#iconUp'\x3e\x3c/use\x3e\x3c/svg\x3e";this.grid.views.views[0].renderHeader()}}},displayFolder:function(a,b,c,e,g){a=this.model.getFolderByName(ws.string.unescapeXml(a));this.prevPaneDelayTimeoutId=null;this.grid.rows.setOverRow(0);this._unselect0row=!1;var f=this.gridModel.getSortColumnIndex(Math.abs(this.grid.sortInfo)-
1);(f=this.model.sortIndices[f])||(f="received");var d=0>this.grid.sortInfo?"descending":"ascending";c={query:b,searchIn:c};this.initialView&&this.model.isFolderType(a,"INBOX")?this.updateFilterButton():this.model.setFolder(a.name,b?c:null,e,f,d,!1,g);this.initialView=!1;this.scrollIntoView(0)},clearSearch:function(){this.model.search(null);Config.UseOMS&&Config.CrossFolderSearch&&this.toggleColumn("Folder",!0);ws.WebSuite.clearSearch();ws.WebSuite.Navigation.searchActive(!1);dojo.publish("WSFeedbackEnd",
[Config.Strings.Loading])},updateSearchInfo:function(){"messageList"==ws.WebSuite.getCurrentViewId()&&(this.model.isSearch()&&!this.model.isLoading()?(ws.WebSuite.Navigation.searchActive(!0),ws.WebSuite.Navigation.hiliteCurrentApp(),this.columnDefaults.Folder.hidden&&(this.columnDefaults.Folder.hidden=!1,this.toggleColumn("Folder",!1))):(ws.WebSuite.Navigation.searchActive(!1),ws.WebSuite.Navigation.hiliteCurrentApp(),Config.UseOMS&&Config.CrossFolderSearch&&!this.columnDefaults.Folder.hidden&&(this.columnDefaults.Folder.hidden=
!0,this.toggleColumn("Folder",!0))),ws.WebSuite.showNotification(this))},limitStr:function(a,b){return!b||a.length<=b?a:a.substring(0,b)+"\x26hellip;"},addItem:function(a,b,c,e){a[b]?a[b].cnt++:a[b]={cnt:1,fn:c,n:e}},onFilterMenu:function(a){var b=ws.lang.findByProp(this.columns,"id","Received");this.grid.sortInfo=-(b+1);this.model.setFilter(a);ws.reporting.report("Filter Messages - "+a,"Mail")},updateFilterButton:function(){var a=this.model.filter,b=this.model.getRowCount();if(Config.EnableMessageListFilters){var c=
{all:Config.Strings.FilterAll,unread:Config.Strings.FilterUnread,read:Config.Strings.FilterRead,flagged:Config.Strings.FilterFlagged,unflagged:Config.Strings.FilterUnflagged,attachments:Config.Strings.FilterAttachments,images:Config.Strings.FilterImages},e="",e="tag"==a?e+ws.string.substituteParams(c[a],b,this.model.identity):e+ws.string.substituteParams(c[a],b);this.filterButton.setLabel(e)}else this.model.isSearch()||(a=1==b?Config.Strings.OneMessage:0==b?Config.Strings.NoMessages:ws.string.substituteParams(Config.Strings.NMessages,
b),this.searchResultsNode.setLabel(a));this.toolbar.layout()},updateActionMenu:function(){var a=this.actionButton.menu;if(a){var b=a.getChildren(),c=this.model.getSelectedUids(),e=Settings.EnablePreviewPane||!Settings.PreviewPaneIntroSeen,g=!1;if(this.model.allSelected||c&&0<c.length||e&&this.model.currentUid||!Config.HideInactiveButtons)g=!0;"initialChildCount"in a||(a.initialChildCount=b.length);var f=this.model.getCurrentFolder(),c=!this.model.isFolderType(f,"DRAFT")&&!this.model.isFolderType(f,
"TRASH")&&!this.model.isFolderType(f,"SENT")&&this.model.canChangeMessageReadState()&&g,e=g,g=0<this.model.getFoldersCanMoveTo().length&&g,f=!this.model.isFolderType(f,"DRAFT")&&!this.model.isFolderType(f,"SENT")&&Config.EnableFiltersSettings;b[0].setCaption(Settings.ViewNewOld?Config.Strings.KeepAsNewActionLabel:Config.Strings.MarkUnreadActionLabel);b[0].setShowing(c);b[1].setShowing(c);b[2].setShowing(c);b[3].setShowing(e);b[4].setShowing(e);b[5].setShowing(f);b[6].setShowing(f);b[7].setShowing(g);
this.updateActionMenuFolders(g);a.domNode.style.height="auto";a.domNode.style.width="auto";b=dojo.getMarginBox(this.grid.domNode).h;x.set(a.domNode,"max-height",Math.min(b,300)+"px");x.set(a.domNode,"overflow-y","auto")}},updateActionMenuFolders:function(a){var b=this.actionButton.menu;if(b){for(var c=b.getChildren(),e,g=c.length-1;g>=b.initialChildCount;g--)e=c[g],b.removeChild(e),e!=this.newFolderSeparator&&e!=this.newFolderMenu&&e!=this.newFolderInputMenu&&e.destroyRecursive();if(a){e=new q({caption:Config.Strings.MoveActionLabel,
isLabel:!0});e.setShowing(a);b.addChild(e);var f=this.model.getFoldersCanMoveTo();dojo.forEach(this.model.folders,dojo.hitch(this,function(a){if(-1!=dojo.indexOf(f,a.name)){var c=this.model.getFolderDisplayName(a);e=new q({caption:c});e.onClick=dojo.hitch(this,"moveMessages",a.name,c);b.addChild(e);e.startup()}}));this.newFolderSeparator||(this.newFolderSeparator=new m,this.newFolderSeparator.startup(),this.newFolderMenu=new q({caption:Config.Strings.NewFolder}),this.newFolderMenu._onClick=dojo.hitch(this,
"newFolder"),this.newFolderMenu.startup());b.addChild(this.newFolderSeparator);b.addChild(this.newFolderMenu);b._setAboutToShow||(b.aboutToShow=dojo.hitch(this,function(){if(this.newFolderInputMenu){var a=this.actionButton.menu;a&&(a._setAboutToShow=!0);this.newFolderInputMenu.restore()}}))}}},filterMenuMap:{all:0,unread:2,read:3,flagged:5,unflagged:6,attachments:8,images:9},updateFilterMenu:function(){var a=this.filterButton.menu;if(a){var b=a.getChildren();"initialChildCount"in a||(a.initialChildCount=
b.length);var c=this.filterMenuMap[this.model.filter];null!=c&&a.setChecked([c],!0);c=this.model.getCurrentFolder().name;c=!("Draft"==c||"NewMail"==c||"OldMail"==c);b[this.filterMenuMap.unread].setShowing(c);b[this.filterMenuMap.read].setShowing(c);b[4].setShowing(c);for(c=b.length-1;c>=a.initialChildCount;c--)a.removeChild(b[c])}},checkNullUid:function(a,b,c){if(ws.lang.undefinedOrNull(b)){b=this.model.getUidForRow(c);c=this.model.getRowData(c);var e="";window.ws_ErrLgr&&(e=ws.lang.undefinedOrNull(b)?
"index":ws.lang.undefinedOrNull(c)?"row":"rowData",ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,a+" got null uid ("+e+")",null,"MessageListView.js"));return!1}return!0},handleCellClick:function(a){ws.WebSuite.isRecordTimingData&&(ws.WebSuite.messageReadTimerStart=new Date);if(dojo.isWebKit)try{window.focus()}catch(g){}var b=this.model.getRowData(a.rowIndex).id;if(this.checkNullUid("handleCellClick",b,a.rowIndex)){var c=!this.model.getRowData(a.rowIndex).flags.flagged,e=null,e=this.model.getRowData(a.rowIndex).folder.name;
switch(a.cellIndex){case this.gridModel.columns.Flag:this.flagMessages(c,[b],"MLCol");break;default:a=a.timeStamp?a.timeStamp:(new Date).getTime(),c=Settings.ReadInPopup?2500:500,this.lastClickUid==b&&a-this.lastClickTime<c?(this.lastClickUid=b,ws.WebSuite.lastReadPopUp&&ws.WebSuite.lastReadPopUp.focus()):(this.lastClickTime=a,this.lastClickUid=b,this.openMessage(b,!1,!1,!1,!1,e,!0))}}},handleCellDblClick:function(a){ws.html.clearSelection();var b=this.model.getRowData(a.rowIndex).id;if(this.checkNullUid("handleCellDblClick",
b,a.rowIndex)&&(Settings.EnablePreviewPane||!Settings.PreviewPaneIntroSeen)&&Settings.PreviewPaneVisible){var c=null;Config.UseOMS&&Config.CrossFolderSearch&&(c=this.model.getRowData(a.rowIndex).folder.name);this.openMessage(b,!1,!0,!1,!1,c)}},openMessage:function(a,b,c,e,g,f,d){ws.WebSuite.lastReadPopUp=null;var h=!1,h=this.model.getUidData(a),k=this.model.screenName,h=h.folder;f&&!h&&(h=this.model.getFolderByName(f));h=this.model.isFolderType(h,"DRAFT");this.previewSingle&&(this.previewSingle.skipPreviewReporting=
c);!Settings.EnablePreviewPane&&Settings.PreviewPaneIntroSeen||!Settings.PreviewPaneVisible||c||b?(c=this.model.getSelectedUids(),(this.model.allSelected||1<c.length)&&this.model.deselectAll(),h?this.getComposeCB(dojo.hitch(this,function(b){b.openDraft(this.model.currentFolder,a)}),b):this.openMessageCB&&this.openMessageCB(f,a,b,k)):this.previewMessage(a,e,g,!1,f,d)},checkMessageReadState:function(a,b){this.model.checkMessageReadState(null,a,b)},previewMessage:function(a,b,c,e,g,f){ws.lang.ensureLayersLoadedExtra(dojo.hitch(this,
function(){try{dojo.isWebKit||this.grid.views.views[0].focus()}catch(F){}this.model.deselectAll(!0);null==this.prevPaneDelayTimeoutId?(this.__previewMessage(a,b,c,e,g),this.prevPaneDelayTimeoutId=ws.lang.setTimeout(this,function(){this.prevPaneDelayTimeoutId=null},500)):(clearTimeout(this.prevPaneDelayTimeoutId),this.prevPaneDelayTimeoutId=ws.lang.setTimeout(this,"__previewMessage",500,a,b,c,e,g))}),{layers:["DisplayMessage"]})},__previewMessage:function(a,b,c,e,g){this.prevPaneDelayTimeoutId=null;
require(["ws/mail/DisplayMessageWidget"],dojo.hitch(this,function(b){this.createPreviewSingle(b);b=g||this.model.currentFolder;var e=dojo.hitch(this,function(){this.model.setCurrentUid(a);this.updateToolbarState();this.previewPane.selectChild(this.previewSingle)});this.previewSingle.displayMessage(b,a,e,!1,!0,c)}));Settings.PreviewPaneIntroSeen||this.savePreviewPaneSettings({PreviewPaneIntroSeen:!0,EnablePreviewPane:!0})},setCurrentRow:function(a){var b=this.model.getUidForRow(a);a=this.model.getFNameFromRow(this.model.getRowData(a));
b&&this.previewMessage(b,!1,!1,!1,a)},getNextUid:function(a){return this.model.getAdjacentMessageUid(a,1)||this.model.getAdjacentMessageUid(a,-1)},maybePreviewNextMessage:function(a,b,c){this.previewPane&&Settings.PreviewPaneVisible&&a&&1==a.length&&(b?(this.model.checkMessageLocal(this.model.currentFolder,b)&&c&&(this.previewPaneUidBucket[b]=!0),this.previewMessage(b)):this.model.currentUid==a[0]&&this.previewMessage(this.getNextUid(a[0])))},onClickSelect:function(){this.model.isAllInViewSelected()?
this.model.deselectAll():this.model.selectAll()},onSelectionChange:function(a,b){var c=this.model.getSelectedUids().length,e=this.model.getCurrentFolder(),g=-1==this.model.getCurrentRow();b&&Settings.EnablePreviewPane&&this.model.isFolderType(e,"NEWMAIL")&&(g=!1);if(0<c||g)this.model.setCurrentUid(null),c=this.getPreviewPaneBody(c,a),this.emptyPreview&&(this.previewPane.selectChild(this.emptyPreview),this.emptyPreview.domNode.innerHTML="\x3cdiv\x3e"+c+"\x3c/div\x3e");this.updateHeader();this.updateToolbarState()},
updateHeader:function(){this.inherited(arguments);if(!Settings.DisplayColHeaders){var a="#iconCheckboxOff";this.model.isAllInViewSelected()?(a="#iconCheckboxOn",dojo.addClass(this.selectButton.domNode,"chkBoxChecked")):this.model.isAnySelected()?(a="#iconCheckboxPartial",dojo.addClass(this.selectButton.domNode,"chkBoxChecked")):dojo.removeClass(this.selectButton.domNode,"chkBoxChecked");dojo.query("use",this.selectButton.domNode)[0].setAttributeNS("http://www.w3.org/1999/xlink","href",a)}},onSplitterClick:function(){this.previewPane&&
(0==this.previewPane.sizeShare?(this.openPreviewPane(),dojo.query(".dijitSplitContainerSizerV",this.domNode)[0].title=Config.Strings.SplitterTipClose):(this.closePreviewPane(),ws.html.clearSelection(),dojo.query(".dijitSplitContainerSizerV",this.domNode)[0].title=Config.Strings.SplitterTipOpen))},openPreviewPane:function(){if(this.previewPane){this.previewPane.sizeMin=70;if(0>=Settings.PreviewPaneHeight||100<Settings.PreviewPaneHeight)Settings.PreviewPaneHeight=50;this.previewPane.sizeShare=Settings.PreviewPaneHeight;
this.layoutWidget.sizeShare=100-Settings.PreviewPaneHeight;this.splitContainer._forceGrow=!0;this.splitContainer.layout();this.splitContainer._forceGrow=!1;this.savePreviewPaneSettings({PreviewPaneVisible:!0});ws.WebSuite.lastReadMsg=null;this.onSelectionChange();dojo.query(".dijitSplitContainerSizerV .thumb",this.domNode).removeClass("openThumb")}},closePreviewPane:function(){this._closePreviewPane();this.savePreviewPaneSettings({PreviewPaneVisible:!1})},_closePreviewPane:function(){this.model.setCurrentUid(null);
this.previewPane&&(this.previewPane.sizeMin=this.previewPane.sizeShare=0,this.splitContainer.layout(),dojo.query(".dijitSplitContainerSizerV .thumb",this.domNode).addClass("openThumb"),dojo.query(".dijitSplitContainerSizerV",this.domNode)[0].title=Config.Strings.SplitterTipOpen)},setPreviewPaneEnabled:function(a){if(a)this.createEmptyPreviewPane(),Settings.PreviewPaneVisible?this.openPreviewPane():this._closePreviewPane(),this.onSelectionChange();else{if(this.previewPane){try{this.splitContainer.removeChild(this.previewPane),
this.splitContainer.removeChild(this.emptyPreview),this.previewPane.destroyRecursive(),this.previewSingle&&this.previewSingle.destroyRecursive(),this.emptyPreview&&this.emptyPreview.destroyRecursive()}catch(b){dijit.registry.remove(this.previewPane.id),dijit.registry.remove(this.emptyPreview.id)}this.previewPane=this.previewSingle=this.emptyPreview=null}this.model.setCurrentUid(null)}this.updateToolbarState()},togglePreviewPane:function(){var a=!(Settings.EnablePreviewPane||!Settings.PreviewPaneIntroSeen);
Settings.PreviewPaneIntroSeen?this.savePreviewPaneSettings({EnablePreviewPane:a}):this.savePreviewPaneSettings({EnablePreviewPane:a,PreviewPaneIntroSeen:!0});this.setPreviewPaneEnabled(a)},showPreviewPane:function(){var a={EnablePreviewPane:!0};Settings.PreviewPaneIntroSeen||(a.PreviewPaneIntroSeen=!0);this.savePreviewPaneSettings(a);this.setPreviewPaneEnabled(!0)},hidePreviewPane:function(){var a={EnablePreviewPane:!1};Settings.PreviewPaneIntroSeen||(a.PreviewPaneIntroSeen=!0);this.savePreviewPaneSettings(a);
this.setPreviewPaneEnabled(!1)},mapHeightType:function(a){var b=0;switch(a){case 0:case 1:b=a;break;default:b=2}return b},setSpacing:function(a){if("undefined"!=typeof a){var b=Settings.ListSpacingType;a=+a;a!=b&&(Settings.ListSpacingType=a,ws.settings.save({ListSpacingType:Settings.ListSpacingType}),0==Settings.ListSpacingType&&(a=ws.WebSuite.getAutoSpacingType()),ws.WebSuite.heightMode=a,dojo.removeClass(dojo.body(),"spacing1"),dojo.removeClass(dojo.body(),"spacing2"),dojo.removeClass(dojo.body(),
"spacing3"),dojo.addClass(dojo.body(),"spacing"+a),dojo.publish(["ListSpacingResize"]))}},toggleSnippet:function(){Settings.ShowMessageSnippet=!Settings.ShowMessageSnippet;ws.settings.save({ShowMessageSnippet:Settings.ShowMessageSnippet});dojo.publish(["ListSpacingResize"])},toggleButtonLabels:function(){dojo.hasClass(dojo.body(),"btnLabelsOn2")?(Settings.ToolbarButtonType=3,dojo.removeClass(dojo.body(),"btnLabelsOn2")):(Settings.ToolbarButtonType=2,dojo.addClass(dojo.body(),"btnLabelsOn2"));ws.settings.save({ToolbarButtonType:Settings.ToolbarButtonType});
dojo.publish("toolbarLayoutUpdate");this.onSelectionChange()},setHover:function(){var a=this.layoutWidget.domNode;l.remove(a,"hoverNone hoverPlain");0==Settings.MsgListHoverState?l.add(a,"hoverNone"):2==Settings.MsgListHoverState&&l.add(a,"hoverPlain")},savePreviewPaneSettings:function(a){if(a){"undefined"==typeof a.EnablePreviewPane||a.EnablePreviewPane||(a.PreviewPaneHeight=50,a.PreviewPaneVisible=!0);for(var b in a)Settings[b]=a[b];ws.settings.save(a)}},getPreviewPaneBody:function(a,b){var c="",
e=this.model.isAllInViewSelected(),g=this.model.getOpSize();0==a&&(a=g.opSize);if(a||e)e=1==a?Config.Strings.PreviewPane_OneSelected:e?Config.Strings.PreviewPane_AllSelected:ws.string.substituteParams(Config.Strings.PreviewPane_NSelected,a),c=c+("\x3cdiv class\x3d'PreviewPane_emptyTipHeader'\x3e"+e+"\x3c/div\x3e")+('\x3cdiv class\x3d"PreviewPane_tipIcon"\x3e\x3cimg src\x3d"'+Config.SpacerImageURL+'"\x3e\x3c/div\x3e'),c+=ws.string.substituteParams("\x3cdiv class\x3d'PreviewPane_tip'\x3e\x3cspan class\x3d'tipPrefix'\x3e{0}\x3c/span\x3e {1}\x3c/div\x3e",
Config.Strings.PreviewPane_Tip,Config.Strings.PreviewPane_SelectedTipMsg1);else if(0==this.model.getRowCount()&&Settings.PreviewPaneIntroSeen&&!b)c="";else if(Settings.PreviewPaneIntroSeen){if(!this._previewPaneEmptyMsgCount){e=1;g=this.model.getFolderByType("TRASH");for(g=this.model.getFolderDisplayName(g);Config.Strings["PreviewPane_EmptyTipMsg"+e];)e++;Config.Strings.PreviewPane_EmptyTipMsg3=ws.string.substituteParams(Config.Strings.PreviewPane_EmptyTipMsg3,g);Config.Strings.PreviewPane_EmptyTipMsg1=
ws.string.substituteParams(Config.Strings.PreviewPane_EmptyTipMsg1,"\x3cspan class\x3d'wsLink' onclick\x3d'ws.WebSuite.openSettings()'\x3e","\x3c/span\x3e");this._previewPaneEmptyMsgCount=e-1;this._lastEmptyMsgRotate=0;this._lastEmptyMsgR=1}this._previewPaneEmptyMsgCount&&(e=(new Date).getTime(),2E3>e-this._lastEmptyMsgRotate?g=this._lastEmptyMsgR:(g=Math.floor(Math.random()*this._previewPaneEmptyMsgCount)+1,g>this._previewPaneEmptyMsgCount&&(g=this._previewPaneEmptyMsgCount),this._lastEmptyMsgRotate=
e,this._lastEmptyMsgR=g),c+="\x3cdiv class\x3d'PreviewPane_emptyTipHeader'\x3e"+Config.Strings.PreviewPane_EmptyTipHeader+"\x3c/div\x3e",c+='\x3cdiv class\x3d"PreviewPane_tipIcon"\x3e\x3cimg src\x3d"'+Config.SpacerImageURL+'"\x3e\x3c/div\x3e',c+=ws.string.substituteParams("\x3cdiv class\x3d'PreviewPane_tip'\x3e\x3cspan class\x3d'tipPrefix'\x3e{0}\x3c/span\x3e {1}\x3c/div\x3e",Config.Strings.PreviewPane_Tip,Config.Strings["PreviewPane_EmptyTipMsg"+g]))}else c="\x3cdiv class\x3d'PreviewPane_introTip'\x3e\x3cdiv class\x3d'PreviewPane_introTipHeader'\x3e"+
Config.Strings.PreviewPane_IntroHeader+"\x3c/div\x3e"+("\x3cdiv class\x3d'PreviewPane_offPreviewPane'\x3e"+Config.Strings.PreviewPane_NoThanks+" \x3cspan class\x3d'wsLink' onclick\x3d'if(ws.WebSuite\x26\x26ws.WebSuite.msgLstTogglePreviewPane)ws.WebSuite.msgLstTogglePreviewPane()'\x3e"+Config.Strings.PreviewPane_Off+"\x3c/span\x3e\x3c/div\x3e"),ws.WebSuite.msgLstTogglePreviewPane=dojo.hitch(this,"togglePreviewPane");return c},createEmptyPreviewPane:function(){if(!this.emptyPreview){var a=new f({id:"previewEmpty"});
a.domNode.className="emptyPreviewPane";a.domNode.style.width="0px";a.domNode.style.height="0px";var b=this.getPreviewPaneBody();a.domNode.innerHTML="\x3cdiv\x3e"+b+"\x3c/div\x3e";this.addPreviewPane(a);this.emptyPreview=a;ws.WebSuite.SidePanel.setupAdScroll(a.domNode,"mlistprev")}},createPreviewSingle:function(a){if(!this.previewSingle){var b={className:"previewSingle",model:this.model,getComposeCB:this.getComposeCB,backToListCB:function(){ws.WebSuite.selectTab("messageList")},getAddEditWidgetCB:dojo.hitch(ws.WebSuite,
"getAddEditWidget"),showFullMessageCB:dojo.hitch(this,"openMessageCB"),showFullMessageLink:!0,showNewWindowLink:!1,calendarModel:ws.WebSuite.theCalendarModel,beaconSuffix:"Preview Pane",showToolbar:!1,enableKeyboardShortcuts:!1,isPreviewPane:!0};this.previewSingle=new a(b);this.pPaneConnects.push(dojo.connect(this.previewSingle,"messageReceived",this,"updateToolbarState"));this.pPaneConnects.push(dojo.connect(this.model,"preUpdateExistingDraft",this,"preSaveMessage"));this.addPreviewPane(this.previewSingle)}},
preSaveMessage:function(a,b){if(a&&this.previewPane){var c=this.model.isFolderType(this.model.getCurrentFolder(),"DRAFT"),e=this.previewPane.selectedChildWidget;if(e==this.previewSingle){var g=a==e.uid,g=g&&e.uid==this.model.currentUid;c&&g&&this.previewPane.isShowing()&&b&&this.previewMessage(b,!0,!0)}}},addPreviewPane:function(a){this.previewPane||(this.previewPane=new D,this.splitContainer.addChild(this.previewPane),this.splitContainer.addClickFunc(dojo.hitch(this,"onSplitterClick")),dojo.query(".dijitSplitContainerSizerV",
this.domNode)[0].title=Config.Strings.SplitterTipClose);if(0>=Settings.PreviewPaneHeight||100<Settings.PreviewPaneHeight)Settings.PreviewPaneHeight=50;this.layoutWidget.sizeShare=100-Settings.PreviewPaneHeight;this.previewPane.sizeShare=Settings.PreviewPaneHeight;this.previewPane.collapsable=!0;this.previewPane.addChild(a);Settings.PreviewPaneVisible||this._closePreviewPane();ws.lang.setTimeout(this,"setPreviewPaneMinSize",0)},setPreviewPaneMinSize:function(){if(this.previewPane){if(0<this.domNode.offsetHeight){var a=
dojo._getMarginSize(this.toolbar.domNode).h,b=dojo._getMarginSize(this.notification.domNode).h;this.layoutWidget.sizeMin=a+b+66;this.previewPane.sizeMin=70}this.previewPane&&this.previewPane.coords&&0==this.previewPane.coords.h?dojo.query(".dijitSplitContainerSizerV",this.domNode)[0].title=Config.Strings.SplitterTipOpen:dojo.query(".dijitSplitContainerSizerV",this.domNode)[0].title=Config.Strings.SplitterTipClose}},initSplitContainer:function(){dojo.connect(this.splitContainer,"layout",this,"setPreviewPaneMinSize");
dojo.connect(this.splitContainer,"beginSizing",dojo.hitch(this,function(){}));dojo.connect(this.splitContainer,"endSizing",dojo.hitch(this,function(){var a=this.previewPane,b=Math.round(a.sizeActual/(this.layoutWidget.sizeActual+a.sizeActual)*100);if(0<a.sizeActual){if(0>b||100<b)b=50;this.savePreviewPaneSettings({PreviewPaneHeight:b,PreviewPaneVisible:!0});ws.WebSuite.previewPaneToLastReadMsg(this)}0==a.sizeActual&&(this.savePreviewPaneSettings({PreviewPaneVisible:!1}),this.model.setCurrentUid(null))}))},
restartIM:function(){this.previewPane&&this.previewPane.selectedChildWidget==this.previewSingle&&this.previewSingle.restartIM()},reply:function(){this._respond("reply")},replyAll:function(){this._respond("replyAll")},forward:function(){this._respond("forward")},_respond:function(a,b,c){(b=this.getMessageActionUids(b))&&1==b.length?(c&&c.preventDefault(),this.previewPane&&this.previewPane.selectedChildWidget==this.previewSingle&&b[0]==this.model.currentUid?this.previewSingle.composeResponse(a):this.getComposeCB(dojo.hitch(this,
function(c){c.fetchAndRespond(this.model.currentFolder,b[0],a)}))):1<b.length?ws.widget.Dialogs.ok(Config.Strings.TooManyMsgSelected):this.model.deselectAll()},savePreviewPaneSelection:function(){this.previewPane&&this.previewPane.selectedChildWidget==this.previewSingle&&this.previewSingle.saveSelection()},viewMessageSource:function(a){a=ws.Jws.getMessageSourceUrl(a);ws.io.openWindow(a,"","status\x3dyes,resizable\x3dyes,menubar\x3dyes,scrollbars\x3dyes");ws.reporting.report("Message Source","Mail")},
deleteMessages:function(a,b,c,e){var g=this.model.isAllSelected();a&&a.length&&(g=!1);var f=this.model.isSearch();if(!g&&!a&&(a=this.getMessageActionUids(a,!1,!0),!a))return;var d=!1;if(this.model.isFolderType(this.model.getCurrentFolder(),"TRASH")||this.model.isFolderType(this.model.getCurrentFolder(),"BULK"))d=!0;f&&(d=this.model.anyUidsInTrash(a)?!0:!1);if(d)this.model.isAllSelReal()?(ws.reporting.reportDLAction("Mail-MessageList-SelectAll-DeleteSpamTrash"),ws.widget.Dialogs.okCancel(Config.Strings.PermDeleteSelectedConfirmation,
dojo.hitch(this,function(b){b&&this._deleteMessages(a,null,!0,c,f?!1:g,e)}))):(b=this.model.getFolderDisplayName(this.model.getFolderByType("TRASH")),d=this.model.getFolderDisplayName(this.model.getFolderByType("BULK")),ws.widget.Dialogs.okCancel(ws.string.substituteParams(Config.Strings.PermDeleteSomeConfirmation,b,d),dojo.hitch(this,function(b){b&&this._deleteMessages(a,null,!0,c,!1,e)})));else{var d=this.model.getSelectedUids().length,h=this.model.getOpSize(a);0==d&&(d=h.opSize);var k=this.model.isAllSelReal()&&
1<d,t=g;!b&&(k||d>Config.DeleteMessageWarningCount)?h.opSize>=Config.JWSMaxSelectSize?ws.widget.Dialogs.show(ws.string.substituteParams(Config.Strings.WarnMaxMessageSelection,Config.JWSMaxSelectSize,Config.JWSMaxSelectSize),[Config.Strings.Yes,Config.Strings.No],dojo.hitch(this,function(b){0==b?(ws.reporting.reportDLAction("Mail-MessageList-MaxSelectProceed"),this._deleteMessages(a,null,t,c,f?!1:g,e)):ws.reporting.reportDLAction("Mail-MessageList-MaxSelectCancel")})):(this.model.isAllSelReal()?ws.reporting.reportDLAction("Mail-MessageList-SelectAll-Delete"):
ws.reporting.reportDLAction("Mail-MessageList-Delete15Plus"),ws.widget.Dialogs.okCancel(ws.string.substituteParams(Config.Strings.DeleteNumMessages,d),dojo.hitch(this,function(b){b&&this._deleteMessages(a,null,t,c,f?!1:g,e)}))):this._deleteMessages(a,null,t,c,f?!1:g,e)}},_deleteMessages:function(a,b,c,e,g,f){var d="";f=this.model.getOpSize(a);var h=c?null:this.model.makeUidList(a);b&&"string"==typeof b?(b=ws.string.unescapeXml(b),d=1==f.opSize?ws.string.substituteParams(Config.Strings.MessageMoved,
b):g&&!f.havexuids?ws.string.substituteParams(Config.Strings.MessagesMovedAll,b):ws.string.substituteParams(Config.Strings.MessagesMoved,f.opSize,b)):d=1==f.opSize?Config.Strings.MessageDeleted:g&&!f.havexuids?Config.Strings.MessagesDeletedAll:ws.string.substituteParams(Config.Strings.MessagesDeleted,a?a.length:f.opSize);e||(e="unknown");a&&1==a.length&&this.model.currentUid&&this.model.currentUid!=a[0]||(e=this.model.getAdjacentMessageUid(this.model.currentUid,1),this.model.setCurrentUid(e),window.clearTimeout(this._previewTO),
this._previewTO=window.setTimeout(dojo.hitch(this,"maybePreviewNextMessage",a,e,!0),100));this.model.deleteMessages(a).then(dojo.hitch(this,function(){var a=null;h&&(a=dojo.hitch(this.model,"undoMoveMessages",h));g&&(this.model.activeCachedList.Clear({preserveSort:!0}),this.model.setFolder(this.model.getCurrentFolder().name,null,null,null,null,!0));ws.lang.setTimeout(this,function(){dojo.publish("WSFeedbackStart",[d,!0,a])},200)}),dojo.hitch(this,function(a){this.model.deselectAll();this.model.setFolder(this.model.getCurrentFolder().name,
null,null,null,null,!0);window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for model.deleteMessages-_deleteMessages",a,"MessageListView.js");ws.widget.Dialogs.ok(Config.Strings.ErrorDeleting)}))},onClickDelete:function(){this.deleteMessages(null,!1,"delebtn")},restoreMessages:function(a){if(a=this.getMessageActionUids(a)){this.maybePreviewNextMessage(a);var b=this.model.getOpSize(a);this.model.restoreMessages(a).then(dojo.hitch(this,function(){var a=1==
b.opSize?Config.Strings.MessageRestored:this.model.isAllSelected()&&!b.havexuids?Config.Strings.MessagesRestoredAll:ws.string.substituteParams(Config.Strings.MessagesRestored,b.opSize);dojo.publish("WSFeedbackStart",[a,!0])}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for model.restoreMessages-restoreMessages",a,"MessageListView.js");ws.widget.Dialogs.ok(Config.Strings.ErrorRestoring)})}},onClickRestore:function(){this.restoreMessages()},
moveMessages:function(a,b){var c=this.model.getFolderByName(a),e=this.getMessageActionUids(null);if(e){var g=this.model.getOpSize(e);!this.model.isFolderType(this.model.getCurrentFolder(),"TRASH")&&this.model.isFolderType(c,"TRASH")?this._deleteMessages(e,b,!1,"movtrsh",!1):this.model.isFolderType(c,"BULK")?this.spamAction(!0,e):g.opSize>=Config.JWSMaxSelectSize?ws.widget.Dialogs.show(ws.string.substituteParams(Config.Strings.WarnMaxMessageSelection,Config.JWSMaxSelectSize,Config.JWSMaxSelectSize),
[Config.Strings.Yes,Config.Strings.No],dojo.hitch(this,function(c){0==c?(ws.reporting.reportDLAction("Mail-MessageList-MaxSelectProceed"),this._moveMessages(e,a,b,!1,g)):ws.reporting.reportDLAction("Mail-MessageList-MaxSelectCancel")})):this._moveMessages(e,a,b,!1,g)}},_moveMessages:function(a,b,c,e,g){var f=this.model.makeUidList(a),d=null;a&&1==a.length&&(d=this.getNextUid(a[0]));100<g.opSize&&dojo.publish("WSFeedbackStart",[Config.Strings.Working]);this.model.moveMessages(a,b).then(dojo.hitch(this,
function(){dojo.publish("WSFeedbackEnd",[Config.Strings.Loading]);var b=null,h=ws.string.unescapeXml(c);f&&!e&&(b=dojo.hitch(this.model,"undoMoveMessages",f));1==g.opSize?dojo.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.MessageMoved,h),!0,b]):e&&!g.havexuids?dojo.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.MessagesMovedAll,h),!0,b]):dojo.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.MessagesMoved,a?a.length:g.opSize,h),!0,b]);
e&&(this.model.allSelected=!1,this.model.activeCachedList.Clear({preserveSort:!0}),this.model.setFolder(this.model.getCurrentFolder().name,null,null,null,"descending",!0));setTimeout(dojo.hitch(this,"maybePreviewNextMessage",a,d),0)}),dojo.hitch(this,function(a){this.model.deselectAll();this.model.setFolder(this.model.getCurrentFolder().name,null,null,null,"descending",!0);dojo.publish("WSFeedbackEnd",[Config.Strings.Loading]);window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for model.moveMessages-moveMessages",
a,"MessageListView.js");ws.widget.Dialogs.ok(Config.Strings.MoveMessageError)}))},moveToNewFolder:function(a){a&&a.newName&&ws.mail.folderName.validate(a.newName,null,this.model.folders,null)&&this.model.createFolder(a.newName).then(n.hitch(this,function(){dojo.publish("WSFeedbackStart",[Config.Strings.FolderCreated,!0]);this.moveMessages(a.newName,a.newName)}),function(b){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for model.createFolder-moveToNewFolder",
b,"MessageListView.js");ws.widget.Dialogs.ok(ws.string.substituteParams(Config.Strings.ErrorCreatingFolder,a.newName))})},newFolder:function(a){a&&a.stopPropagation();if(a=this.actionButton.menu)this.newFolderMenu.hide(),this.newFolderInputMenu||(this.newFolderInputMenu=new z({okCB:dojo.hitch(this,"moveToNewFolder"),defaultValue:Config.Strings.NewFolder,originalMenuItem:this.newFolderMenu,maxlength:ws.mail.folderName.MaxLength})),a.addChild(this.newFolderInputMenu),this.newFolderInputMenu.show(),
this.newFolderInputMenu.initializeText(Config.Strings.NewFolder),d.scrollIntoView(this.newFolderInputMenu.domNode)},reportNotSpam:function(){this.spamAction(!1)},reportSpam:function(){this.spamAction(!0)},spamAction:function(a,b){b||(b=this.getMessageActionUids(b));var c=this.model.getAdjacentMessageUid(this.model.currentUid,1);this.model.setCurrentUid(c);window.clearTimeout(this._previewTO);this._previewTO=window.setTimeout(dojo.hitch(this,"maybePreviewNextMessage",b,c,!0),100);c=b&&1===b.length?
this.model.getUidData(b[0]):null;if(a&&Config.EnableUnsubscribe&&null!=c&&ws.settings.loadConsolidated("EnableUnsubscribing")&&this.model.getDeco(c,"USB")){var c=this.model.getSenderInfo(c),e=c.email||Config.Strings.None,g=Settings.ShowSenderDisplayName?ws.string.escapeXml(c.name):null;ws.widget.Dialogs.showUnsubDialog(e,g,n.hitch(this,function(c){c?ws.Jws.unsubscribe(b[0]).then(function(){var a=c?ws.string.substituteParams(Config.Strings.UnsubConfirm,null!=g?g:e):Config.Strings.MessageMarkedSpam;
dojo.publish("WSFeedbackStart",[ws.string.unescapeXml(a),!0,null])},function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for unsubscribe",a,"MessageListView.js");ws.widget.Dialogs.ok(ws.string.substituteParams(Config.Strings.UnsubError,null!=g?g:e))}):this._spamAction(b,a)}))}else this.model.getOpSize(b).opSize>=Config.JWSMaxSelectSize?ws.widget.Dialogs.show(ws.string.substituteParams(Config.Strings.WarnMaxMessageSelection,Config.JWSMaxSelectSize,
Config.JWSMaxSelectSize),[Config.Strings.Yes,Config.Strings.No],dojo.hitch(this,function(c){0==c?(ws.reporting.reportDLAction("Mail-MessageList-MaxSelectProceed"),this._spamAction(b,a)):ws.reporting.reportDLAction("Mail-MessageList-MaxSelectCancel")})):this._spamAction(b,a)},_spamAction:function(a,b){var c=this.model.getOpSize(a),e=this.model.isAllSelected();this.model.reportSpamMessages(a,b).then(dojo.hitch(this,function(){var g;g=b?1==c.opSize?Config.Strings.MessageMarkedSpam:ws.string.substituteParams(Config.Strings.MessagesMarkedSpam,
c.opSize):1==c.opSize?Config.Strings.MessageMarkedNotSpam:e&&!c.havexuids?Config.Strings.MessagesMarkedNotSpamAll:ws.string.substituteParams(Config.Strings.MessagesMarkedNotSpam,a?a.length:c.opSize);dojo.publish("WSFeedbackStart",[ws.string.unescapeXml(g),!0,null])}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for model.reportSpamMessages-spamAction",a,"MessageListView.js");ws.widget.Dialogs.ok(Config.Strings.ReportSpamError)})},markMessagesRead:function(){this.changeMessagesReadState(!0)},
markMessagesUnread:function(){this.changeMessagesReadState(!1)},changeMessagesReadState:function(a,b){var c=this.model.getCurrentFolder();b&&ws.lang.isArray(b)||(b=this.getMessageActionUids(b));!a&&this.model.isFolderType(c,"NewMail")&&(b=this.fixReadStateUids(b));if(this.model.isAllSelected()||b&&0!=b.length){(a&&Config.EnableMoveForMarkSeen&&this.model.isFolderType(c,"NEWMAIL")||!a&&Config.EnableMoveForMarkUnseen&&this.model.isFolderType(c,"OLDMAIL"))&&this.maybePreviewNextMessage(b);var e=this.model.getOpSize(b);
this.model.isAllSelected();e.opSize>=Config.JWSMaxSelectSize?ws.widget.Dialogs.show(ws.string.substituteParams(Config.Strings.WarnMaxMessageSelection,Config.JWSMaxSelectSize,Config.JWSMaxSelectSize),[Config.Strings.Yes,Config.Strings.No],dojo.hitch(this,function(c){0==c?(ws.reporting.reportDLAction("Mail-MessageList-MaxSelectProceed"),this._changeMessagesReadState(a,e,b)):ws.reporting.reportDLAction("Mail-MessageList-MaxSelectCancel")})):this._changeMessagesReadState(a,e,b)}else this.model.deselectAll()},
_changeMessagesReadState:function(a,b,c){this.model.changeMessagesReadState(c,a).then(dojo.hitch(this,function(){var e="",e=1==b.opSize?a?Config.Strings.MessageMarkedRead:Config.Strings.MessageMarkedNew:ws.string.substituteParams(a?Config.Strings.MessagesMarkedRead:Config.Strings.MessagesMarkedNew,c?c.length:b.opSize);dojo.publish("WSFeedbackStart",[e,!0])}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for model.changeMessagesReadState-changeMessagesReadState",
a,"MessageListView.js");ws.widget.Dialogs.ok(Config.Strings.MarkReadError)})},fixReadStateUids:function(a){var b=[];a&&a.forEach(dojo.hitch(this,function(a){var c=this.model.getRowForUid(a);-1!=c&&(c=this.model.getRowData(c),(c.flags.read||c.flags.recent)&&b.push(a))}));return b},flagMessages:function(a,b,c){b||(b=this.getMessageActionUids(b));if(b){var e=this.model.getOpSize(b);e.opSize>=Config.JWSMaxSelectSize?ws.widget.Dialogs.show(ws.string.substituteParams(Config.Strings.WarnMaxMessageSelection,
Config.JWSMaxSelectSize,Config.JWSMaxSelectSize),[Config.Strings.Yes,Config.Strings.No],dojo.hitch(this,function(g){0==g?(ws.reporting.reportDLAction("Mail-MessageList-MaxSelectProceed"),this._flagMessages(a,e,b,c)):ws.reporting.reportDLAction("Mail-MessageList-MaxSelectCancel")})):this._flagMessages(a,e,b,c)}else ws.reporting.reportDLAction("Mail-MessageList-Action-NoSelFlag")},_flagMessages:function(a,b,c,e){var g=this.model.isAllSelected();this.model.flagMessages(c,a,e).then(n.hitch(this,function(){var e=
"",e=1==b.opSize?a?Config.Strings.MessageFlagged:Config.Strings.MessageUnflagged:g&&!b.havexuids?a?Config.Strings.MessagesFlaggedAll:Config.Strings.MessagesUnflaggedAll:ws.string.substituteParams(a?Config.Strings.MessagesFlagged:Config.Strings.MessagesUnflagged,c?c.length:b.opSize);dojo.publish("WSFeedbackStart",[e,!0])}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for model.flagMessages-flagMessages",a,"MessageListView.js");ws.widget.Dialogs.ok(a||
Config.Strings.ErrorSettingFlag)})},onClickFlag:function(){this.flagMessages(!0,null,"MLAct")},onClickUnflag:function(){this.flagMessages(!1,null,"MLAct")},createFilter:function(a){require(["ws/mail/EditFilter"],dojo.hitch(this,function(b){var c={};if((a=this.getMessageActionUids(a,!0))&&1==a.length){var e=this.model.getUidData(a[0]);if(e){var g=this.model.getSenderInfo(e);c.subject=e.headers.subject;c.from=g.email}}else e=this.model.getSearchString(),g=this.model.getSearchIn(),"subject"==g?c.subject=
e||"":"fromto"==g&&(c.from=e||"");b=new b({filterModel:c});dojo.body().appendChild(b.domNode);b.startup()}))},getRowClasses:function(a){var b=this.inherited(arguments),c=this.model.getRowData(a),e=this.model.getCurrentFolder(),g=this.model.isSearch();if(c){var f=c.flags.read;g&&(e=c.folder);Settings.ViewNewOld&&this.model.isFolderType(e,"NEWMAIL")&&(f=c.flags.hasOwnProperty("recent")?!c.flags.recent:!0);if(this.model.isFolderType(e,"DRAFT")||this.model.isFolderType(e,"SENT")||this.model.isFolderType(e,
"OLDMAIL"))f=!0;f&&b.push("row-read")}return b},handleHoverControlClick:function(a){a=this.model.getRowData(a.rowIndex).id;this.deleteMessages([a],!0,"clktrsh",!0)},handleQuickAction:function(a){var b=this.model.getRowData(this.quickActionRow),c=this.model.getSenderInfo(b);switch(a){case "changeMessagesReadState":a=this.model.getRowData(this.quickActionRow).flags.read;this.changeMessagesReadState(!a,[b.id]);break;case "searchSubject":b=this.model.getRowData(this.quickActionRow).headers.subject;b=
ws.WebSuite.Navigation.removeSpecialCharacters(this.model.getBaseSubject(b));ws.WebSuite.setFolderHistory();this.model.search({subject:b});break;case "searchFrom":ws.WebSuite.setFolderHistory();a=ws.WebSuite.Navigation.removeSpecialCharacters(c.email);this.model.search({from:a});break;case "searchTo":a=(a=b.headers.to)&&0<a.length?a[0].email:"";this.model.search({to:a});break;case "reply":case "replyAll":case "forward":this._respond(a,[b.id]);break;case "spam":this.spamAction(!0,[b.id]);break;case "notSpam":this.spamAction(!1,
[b.id]);break;case "restore":this.restoreMessages([b.id]);break;case "openInNewWindow":this.openMessage(b.id,!0);break;case "viewMessageSource":this.viewMessageSource(b.id);break;case "flagMessage":a=this.model.getRowData(this.quickActionRow).flags.flagged;this.flagMessages(!a,[b.id],"MLCon");break;case "delete":this.deleteMessages([b.id],!1,"clckdel");break;case "addToCalendar":this.addToCalendar(this.model.currentFolder,b.id);break;case "addSenderToContact":a=c.email;(b=this.isContactExist(a))?
this.editContact(b):this.addContact(a);break;case "addRecipientToContact":a=c.email;(b=this.isContactExist(a))?this.editContact(b):this.addContact(a);break;case "createFilter":this.createFilter([b.id])}},isContactExist:function(a){if(!a)return null;a=a.toLowerCase();return ws.WebSuite.theAddressModel.getRecordByEmail(a)},addContact:function(a){},editContact:function(a){},addToCalendar:function(a,b){},onMouseOverRow:function(a){this._unselect0row||(this._unselect0row=!0,0!=a.rowIndex&&(this._overRow=
-1,this.grid.updateRow(0)));this.inherited(arguments)},getZeroRowsMessage:function(){var a="",a=Config.UseOMS&&Config.CrossFolderSearch?"\x3cdiv class\x3d'search'\x3e"+Config.Strings.SearchMessageNoMatchNoFolder+"\x3c/div\x3e":"\x3cdiv class\x3d'search'\x3e"+Config.Strings.SearchMessageNoMatch+"\x3c/div\x3e",a=a+("\x3cdiv class\x3d'zero'\x3e\x3cdiv class\x3d'zeroRowHeader'\x3e"+Config.Strings.FolderEmptyList+"\x3c/div\x3e\x3cdiv class\x3d'mainLargeIcon sunIcon'\x3e\x3c/div\x3e");0<Config.WelcomeMessage.length&&
(a+="\x3cdiv class\x3d'zeroTodayPromo'\x3e"+ws.string.substituteParams(Config.Strings.GetLatestFromTodayOnAOL,"\x3ca href\x3d'#' class\x3d'wsLink' onclick\x3dws.WebSuite.showTodayPage()\x3e",Config.Strings.TodayOnAOL,"\x3c/a\x3e")+"\x3c/div\x3e");return a+"\x3c/div\x3e"},updateZeroRowsView:function(){this.isShowingEmptyFolderAd&&(this.emptyFolderAdDiv.style.display="none",this.splitContainer.domNode.style.display="block",this.isShowingEmptyFolderAd=!1,ws.WebSuite.SidePanel.show(!1,1E3));this.inherited(arguments)},
beforeShowZeroRowsMessage:function(a,b){var c=dojo.query(".search",this.zeroRowsNode)[0],e=dojo.query(".zero",this.zeroRowsNode)[0];this.model.isSearch()||"all"!=this.model.filter?(ws.html.setShowing(e,!1),ws.html.setShowing(c,!0)):(ws.html.setShowing(e,!0),ws.html.setShowing(c,!1));Settings.UserHash>=Config.EmptyFolderAdThreshold&&Config.AdInfo&&Config.AdInfo.emptyFolder_all&&(this.isShowingEmptyFolderAd=!1,!a&&!b&&this.model&&this.model.activeCachedList&&!1===this.model.activeCachedList.isInbox&&
(this.isShowingEmptyFolderAd=!0),this.isShowingEmptyFolderAd?(this.emptyFolderAd||(c=document.createElement("div"),this.emptyFolderAdDiv.appendChild(c),dojo.addClass(c,"wsToolbar wsToolbarControls emptyFolderAdHeader"),c.innerHTML=Config.Strings.FolderEmptyList.replace(/\./g,""),c=new k({adtype:"emptyFolder",blocked:!1,checkForHiddenB4Rotate:!0,postAdRender:function(a){if(Config.showAdChoice){var b=null,c=null,e=dojo.query("\x3e div",a);e&&e.length&&(b=e[0],(e=dojo.query("\x3e a",b))&&e.length&&(c=
e[0]));b&&c&&(dojo.style(a,{top:"15px"}),dojo.style(b,{position:"absolute",top:"-15px",left:"0px",width:"80px"}),dojo.style(c,{position:"static",width:"auto"}))}}}),c.startup(),this.emptyFolderAdDiv.appendChild(c.domNode),this.emptyFolderAd=c),ws.WebSuite.SidePanel.hide(),this.emptyFolderAdDiv.style.display="block",this.splitContainer.domNode.style.display="none"):(this.emptyFolderAdDiv.style.display="none",this.splitContainer.domNode.style.display="block"),this.emptyFolderAd&&this.emptyFolderAd.block(!this.isShowingEmptyFolderAd,
!1))},getLoadingMessage:function(){var a=this.model.searchInProgress?Config.Strings.Searching:Config.Strings.Loading;this.errorMessageSearchState=this.model.searchInProgress;this.model.searchInProgress=!1;return a},getErrorMessage:function(){var a="\x3ca href\x3d'#' onclick\x3d'"+('dijit.byId("'+this.id+'").retryFetch()')+"' class\x3d'wsLink'\x3e",b=Config.Strings.ErrorRetrievingMessages;this.errorMessageSearchState&&(b="500:21003"==this.model.getErrCode()?Config.Strings.SearchErrorReindexing:Config.Strings.SearchErrorRetrievingMessages);
var c=b;-1<b.indexOf("{0}")&&-1<b.indexOf("{1}")&&(c=ws.string.substituteParams(b,a,"\x3c/a\x3e"));return c},retryFetch:function(){var a=this.model.getSearchString(),b=this.model.getSearchIn();this.errorMessageSearchState&&a&&b?this.model.search({query:a,searchIn:b}):this.model.setFolder(this.model.currentFolder)},getDragObjectLabel:function(a){var b=this.getMessageActionUids(null,!0),b=this.model.getOpSize(b),c=this.model.getRowData(a).id,b=this.model.isSelected(c)?b.opSize:1;return 1==b?this.model.getRowData(a).headers.subject:
ws.string.substituteParams(Config.Strings.NMessages,b)},getMessageActionUids:function(a,b,c){c=null;a&&a.length?c=a:this.model.currentUid?c=[this.model.currentUid]:this.model.allSelected&&!this.model.isSearch()?c=[]:(a=this.model.getSelectedUids(),a.length?c=a:(b||ws.widget.Dialogs.ok(Config.Strings.NoMessagesCheckedErrorMsg),c=null));return c},sprites:{type:{NONE:"",SEEN:"iconCheckMark",OFFICIAL:"iconOfficial",CERTIFIED:"iconCertified",VOICEMAIL:"",ANSWERED:"iconReply",FORWARDED:"iconForward"},attach:{NONE:"",
INLINE:"iconInlineImage",ATTACHMENT:"iconAttach"},flag:{NONE:"msgUnflagged",FLAGGED:"msgFlagged"}},defineMenus:function(){this.filterButton.menuDefinition=[{caption:Config.Strings.FilterAllMenuItem,onClick:dojo.hitch(this,"onFilterMenu","all")},{separator:!0},{caption:Config.Strings.FilterUnreadMenuItem,onClick:dojo.hitch(this,"onFilterMenu","unread")},{caption:Config.Strings.FilterReadMenuItem,onClick:dojo.hitch(this,"onFilterMenu","read")},{separator:!0},{caption:Config.Strings.FilterFlaggedMenuItem,
onClick:dojo.hitch(this,"onFilterMenu","flagged")},{caption:Config.Strings.FilterUnflaggedMenuItem,onClick:dojo.hitch(this,"onFilterMenu","unflagged")},{separator:!0},{caption:Config.Strings.FilterAttachmentsMenuItem,onClick:dojo.hitch(this,"onFilterMenu","attachments")},{caption:Config.Strings.FilterImagesMenuItem,onClick:dojo.hitch(this,"onFilterMenu","images")}];this.actionButton.menuDefinition=[{caption:Settings.ViewNewOld?Config.Strings.KeepAsNewActionLabel:Config.Strings.MarkUnreadActionLabel,
onClick:dojo.hitch(this,"changeMessagesReadState",!1,null)},{caption:Config.Strings.MarkReadActionLabel,onClick:dojo.hitch(this,"changeMessagesReadState",!0,null)},{separator:!0},{caption:Config.Strings.FlagQuickActionLabel,onClick:dojo.hitch(this,"onClickFlag")},{caption:Config.Strings.ClearFlag,onClick:dojo.hitch(this,"onClickUnflag")},{separator:!0},{caption:Config.Strings.MailFilter_CreateFilter,onClick:dojo.hitch(this,"createFilter")},{separator:!0}];this.rightClickMenuDefinition={INBOX:[{caption:Config.Strings.OpenInNewWindow,
onClick:dojo.hitch(this,"handleQuickAction","openInNewWindow",!0),shortCutKey:Config.Strings.KeyMailPopout},{separator:!0},{caption:Config.Strings.DisplayReply,onClick:dojo.hitch(this,"handleQuickAction","reply",!0),shortCutKey:Config.Strings.KeyMailReply},{caption:Config.Strings.DisplayReplyAll,onClick:dojo.hitch(this,"handleQuickAction","replyAll",!0),shortCutKey:Config.Strings.KeyMailReplyAll},{caption:Config.Strings.DisplayForward,onClick:dojo.hitch(this,"handleQuickAction","forward",!0),shortCutKey:Config.Strings.KeyMailForward},
{separator:!0},{caption:"",onClick:dojo.hitch(this,"handleQuickAction","changeMessagesReadState",!0)},{caption:"",onClick:dojo.hitch(this,"handleQuickAction","flagMessage",!0)},{caption:Config.Strings.Delete,onClick:dojo.hitch(this,"handleQuickAction","delete",!0)},{caption:Config.Strings.ReportSpam,onClick:dojo.hitch(this,"handleQuickAction","spam",!0)},{caption:Config.Strings.MailFilter_CreateFilter1,onClick:dojo.hitch(this,"handleQuickAction","createFilter",!0)},{separator:!0},{caption:Config.Strings.SearchForFromTo,
onClick:dojo.hitch(this,"handleQuickAction","searchFrom",!0)},{caption:Config.Strings.SearchForSubject,onClick:dojo.hitch(this,"handleQuickAction","searchSubject",!0)},{separator:!0},{caption:"",onClick:dojo.hitch(this,"handleQuickAction","addSenderToContact",!0)},{caption:Config.Strings.AddMessageToCalendar,onClick:dojo.hitch(this,"handleQuickAction","addToCalendar",!0)},{separator:!0},{caption:Config.Strings.ViewMessageSource,onClick:dojo.hitch(this,"handleQuickAction","viewMessageSource",!0)}],
DRAFT:[{caption:Config.Strings.OpenInNewWindow,onClick:dojo.hitch(this,"handleQuickAction","openInNewWindow",!0),shortCutKey:Config.Strings.KeyMailPopout},{separator:!0},{caption:"",onClick:dojo.hitch(this,"handleQuickAction","flagMessage",!0)},{caption:Config.Strings.Delete,onClick:dojo.hitch(this,"handleQuickAction","delete",!0)}],SENT:[{caption:Config.Strings.OpenInNewWindow,onClick:dojo.hitch(this,"handleQuickAction","openInNewWindow",!0),shortCutKey:Config.Strings.KeyMailPopout},{separator:!0},
{caption:Config.Strings.DisplayReply,onClick:dojo.hitch(this,"handleQuickAction","reply",!0),shortCutKey:Config.Strings.KeyMailReply},{caption:Config.Strings.DisplayReplyAll,onClick:dojo.hitch(this,"handleQuickAction","replyAll",!0),shortCutKey:Config.Strings.KeyMailReplyAll},{caption:Config.Strings.DisplayForward,onClick:dojo.hitch(this,"handleQuickAction","forward",!0),shortCutKey:Config.Strings.KeyMailForward},{separator:!0},{caption:"",onClick:dojo.hitch(this,"handleQuickAction","changeMessagesReadState",
!0)},{caption:"",onClick:dojo.hitch(this,"handleQuickAction","flagMessage",!0)},{caption:Config.Strings.Delete,onClick:dojo.hitch(this,"handleQuickAction","delete",!0)},{separator:!0},{caption:Config.UseOMS&&Config.CrossFolderSearch?Config.Strings.SearchForFromTo:Config.Strings.SearchForTo,onClick:dojo.hitch(this,"handleQuickAction","searchTo")},{caption:Config.Strings.SearchForSubject,onClick:dojo.hitch(this,"handleQuickAction","searchSubject",!0)},{separator:!0},{caption:"",onClick:dojo.hitch(this,
"handleQuickAction","addRecipientToContact",!0)}],BULK:[{caption:Config.Strings.OpenInNewWindow,onClick:dojo.hitch(this,"handleQuickAction","openInNewWindow",!0),shortCutKey:Config.Strings.KeyMailPopout},{separator:!0},{caption:Config.Strings.DisplayReply,onClick:dojo.hitch(this,"handleQuickAction","reply",!0),shortCutKey:Config.Strings.KeyMailReply},{caption:Config.Strings.DisplayReplyAll,onClick:dojo.hitch(this,"handleQuickAction","replyAll",!0),shortCutKey:Config.Strings.KeyMailReplyAll},{caption:Config.Strings.DisplayForward,
onClick:dojo.hitch(this,"handleQuickAction","forward",!0),shortCutKey:Config.Strings.KeyMailForward},{separator:!0},{caption:"",onClick:dojo.hitch(this,"handleQuickAction","changeMessagesReadState",!0)},{caption:"",onClick:dojo.hitch(this,"handleQuickAction","flagMessage",!0)},{caption:Config.Strings.Delete,onClick:dojo.hitch(this,"handleQuickAction","delete",!0)},{caption:Config.Strings.NotSpamButton,onClick:dojo.hitch(this,"handleQuickAction","notSpam",!0)},{separator:!0},{caption:Config.Strings.SearchForFromTo,
onClick:dojo.hitch(this,"handleQuickAction","searchFrom",!0)},{caption:Config.Strings.SearchForSubject,onClick:dojo.hitch(this,"handleQuickAction","searchSubject",!0)},{separator:!0},{caption:Config.Strings.ViewMessageSource,onClick:dojo.hitch(this,"handleQuickAction","viewMessageSource",!0)}],TRASH:[{caption:Config.Strings.OpenInNewWindow,onClick:dojo.hitch(this,"handleQuickAction","openInNewWindow",!0),shortCutKey:Config.Strings.KeyMailPopout},{separator:!0},{caption:Config.Strings.DisplayReply,
onClick:dojo.hitch(this,"handleQuickAction","reply",!0),shortCutKey:Config.Strings.KeyMailReply},{caption:Config.Strings.DisplayReplyAll,onClick:dojo.hitch(this,"handleQuickAction","replyAll",!0),shortCutKey:Config.Strings.KeyMailReplyAll},{caption:Config.Strings.DisplayForward,onClick:dojo.hitch(this,"handleQuickAction","forward",!0),shortCutKey:Config.Strings.KeyMailForward},{separator:!0},{caption:Config.Strings.RestoreButton,onClick:dojo.hitch(this,"handleQuickAction","restore",!0)},{caption:"",
onClick:dojo.hitch(this,"handleQuickAction","changeMessagesReadState",!0)},{caption:"",onClick:dojo.hitch(this,"handleQuickAction","flagMessage",!0)},{caption:Config.Strings.Delete,onClick:dojo.hitch(this,"handleQuickAction","delete",!0)},{caption:Config.Strings.ReportSpam,onClick:dojo.hitch(this,"handleQuickAction","spam",!0)},{separator:!0},{caption:Config.Strings.SearchForFromTo,onClick:dojo.hitch(this,"handleQuickAction","searchFrom",!0)},{caption:Config.Strings.SearchForSubject,onClick:dojo.hitch(this,
"handleQuickAction","searchSubject",!0)},{separator:!0},{caption:"",onClick:dojo.hitch(this,"handleQuickAction","addSenderToContact",!0)},{caption:Config.Strings.AddMessageToCalendar,onClick:dojo.hitch(this,"handleQuickAction","addToCalendar",!0)},{separator:!0},{caption:Config.Strings.ViewMessageSource,onClick:dojo.hitch(this,"handleQuickAction","viewMessageSource",!0)}]};dojo.connect(this.actionButton,"updateMenu",this,"updateActionMenu");dojo.connect(this.filterButton,"updateMenu",this,"updateFilterMenu")},
createRightClickMenu:function(a){var b=this.rightClickMenuDefinition[a];b||(b=this.rightClickMenuDefinition.Inbox);this.rightClickMenu[a]=ws.widget.createMenu(b);dojo.connect(this.rightClickMenu[a],"close",dojo.hitch(this,function(){var a=this.quickActionRow;-1!=this.gridModel.columns.Hover&&this.grid.update(a,this.gridModel.columns.Hover)}));return this.rightClickMenu[a]},getRightClickMenu:function(a){this.rightClickMenu||(this.rightClickMenu={});var b=this.model.getFolderByName(this.model.currentFolder).types[0];
this.rightClickMenuDefinition[b]||(b="INBOX");var c=this.rightClickMenu[b];c||a||(c=this.createRightClickMenu(b),dojo.connect(c,"onClose",this,"OnCloseContextMenu"));return c},updateRightClickMenu:function(a){var b=null,c=null,e=null,g=a.getChildren(),f=this.model.getRowData(this.quickActionRow);g[0].setShowing(ws.settings.allowPopups());g[1].setShowing(ws.settings.allowPopups());if(a==this.rightClickMenu.INBOX||a==this.rightClickMenu.BULK||a==this.rightClickMenu.SENT)b=g[6],c=g[7],g[2].setShowing(!0),
g[3].setShowing(!0),g[4].setShowing(!0),g[5].setShowing(!0);a==this.rightClickMenu.INBOX&&(e=g[15],g[9].setShowing(Config.EnableSpamButton),g[10].setShowing(Config.EnableFiltersSettings),g[17].setShowing(!0),g[18].setShowing(!0));a==this.rightClickMenu.SENT&&(e=g[13],b.setShowing(!1),b=null);a==this.rightClickMenu.TRASH&&(b=g[7],c=g[8],e=g[15],g[16].setShowing(!0),g[17].setShowing(!0),g[2].setShowing(!0),g[3].setShowing(!0),g[4].setShowing(!0),g[5].setShowing(!0),g[6].setShowing(Config.EnableRestoreButton||
Settings.ViewNewOld),g[9].setShowing(Config.EnableSpamButton));a==this.rightClickMenu.DRAFT&&(c=g[2]);a==this.rightClickMenu.BULK&&g[9].setShowing(Config.EnableSpamButton);if(b){a=Settings.ViewNewOld?Config.Strings.KeepAsNewActionLabel:Config.Strings.MarkUnreadActionLabel;var d=Config.Strings.MarkReadActionLabel;b.setCaption(f.flags.read?a:d);b.setShowing(this.model.canChangeMessageReadState())}c&&c.setCaption(f.flags.flagged?Config.Strings.ClearFlag:Config.Strings.FlagForFollowUp);e&&(b=this.model.getSenderInfo(f).email,
e.setCaption(this.isContactExist(b)?Config.Strings.EditContact:Config.Strings.AddToContact));this.model.isSearch()&&g[12].setCaption(Config.Strings.SearchForFromTo)},onEnterKeyPress:function(a){var b=this.model.getRowData(a).id;if(this.checkNullUid("onEnterKeyPress",b,a)){var c=null;Config.UseOMS&&Config.CrossFolderSearch&&(c=this.model.getRowData(a).folder.name);this.openMessage(b,!1,!0,!1,!1,c)}},onDelKeyPress:function(a){var b;this.model.isAllSelected()?a=null:dojo.isArray(a)?b=!1:(a=[this.model.getRowData(a).id],
b=!0);this.deleteMessages(a,b,"delekey")},onKeyPress:function(a){this.isShowing()&&this._onKeyPress(a)},onOtherKeyPress:function(a,b){if("undefined"==typeof b||null==b)b=-1;var c=-1<b?b:this.grid.rows.overRow;if(!(0>c)&&Config.EnableKeyboardShortcuts&&a.keyChar&&dojo.isString(a.keyChar)&&!(a.ctrlKey||a.altKey||a.metaKey)){var e=this.model.getRowData(c).id;if(this.checkNullUid("onOtherKeyPress",e,c))switch(a.keyChar.toLowerCase()){case Config.Strings.KeyMailReply:this._respond("reply",[e],a);break;
case Config.Strings.KeyMailReplyAll:this._respond("replyAll",[e],a);break;case Config.Strings.KeyMailForward:this._respond("forward",[e],a);break;case Config.Strings.KeyMailKeepAsNew:this.changeMessagesReadState(!1,[e]);break;case Config.Strings.KeyMailSpam:if(c=null,this.spamButton.isShowing()?c=!0:this.notSpamButton.isShowing()&&(c=!1),null!=c){var f=[];dojo.isFunction(this.model.getSelectedUids)?f=this.model.getSelectedUids():dojo.isFunction(this.gridModel.getSelectedUids)&&(f=this.gridModel.getSelectedUids());
f&&f.length||(f=[e]);this.spamAction(c,f)}}}},onResized:function(){var a=dojo.query(".dojoxGrid-scrollbox",this.domNode)[0],b=null;a&&(b=a.scrollTop);this.splitContainer.resize();dojo.isFF&&null!=b&&setTimeout(function(){a.scrollTop=b},0)},wrapToolbar:function(){this.toolbar.skipLayout=!0;this.layoutWidget.resize()},onShow:function(){(Settings.EnablePreviewPane||!Settings.PreviewPaneIntroSeen)!=!!this.previewPane&&ws.lang.setTimeout(this,"setPreviewPaneEnabled",0,Settings.EnablePreviewPane);if(this.previewPane)this.previewPane.onShow();
this.inherited(arguments)},editDraft:function(){var a=this.getMessageActionUids();a&&1==a.length?this.openMessage(a[0],!1,!0):this.model.deselectAll()},setupInlineAd:function(){if(Config.GeminiNativeAdUrl&&!Settings.CMIPref_noAds&&!this.adWidget){var a=u(".dojoxGrid-scrollbox",this.domNode)[0],a=r.create("div",{className:"mlistAd"},a,"first"),b=null;Config.AdSearchUrl&&Settings.UserHash<Config.AdSearchThreshold&&(b=this.model);this.adWidget=new t({region:"top",mailModel:b},a);this.adWidget.startup();
this.adWidget.domNode.style.display="block";this.layoutWidget.layout()}},replaceInlineAd:function(){this.adWidget&&(this.adWidget.destroy(),this.adWidget=null,this.setupInlineAd())},parseMsgListPrefs:function(a){var b=ws.lang.shallowCopy(this.columnDefaults,!0);b.version=1.3;var c=a.split(",");if("v1.3"==c[0]||"v1.2"==c[0])for(a=1;a<c.length;a++){var e=c[a].split(" "),f;for(f in b)if(f.substr(0,2).toLowerCase()===e[0]){b[f].order=+e[1];b[f].width=+e[2];break}}else"{"==a.charAt(0)&&(b=dojo.fromJson(a));
return b},createMsgListPrefs:function(a){var b="v1.3",c;for(c in a)"version"!=c&&(b+=","+c.substring(0,2).toLowerCase()+" "+a[c].order+" "+a[c].width);return b},adjustGridHeader:function(a,b,c){a&&(a=ws.lang.findByProp(this.columns,"id",c?"Received":ws.string.initialCap(a))+1,b="descending"==b?-1:1,-1!=a&&(this.grid.sortInfo=b*a),this.gridModel.sortableCols=c?this.gridModel.noSortableCols:this.gridModel.origSortableCols,this.updateHeader())}})})},"ws/widget/GeminiNativeAd":function(){define("ws/widget/GeminiNativeAd",
"dojo/_base/declare dojo/text!ws/widget/GeminiNativeAd.html dojo/text!ws/widget/GeminiNativeAd.css dojo dijit dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dijit/_Container dojo/topic dojo/request/script dojo/request/xhr dojo/on dojo/dom-geometry ws/external/geminiTracking ws/widget/DropDownButton".split(" "),function(v,p,y,d,w,n,r,l,x,u,A,C,q,z,m){return v([n,r,x],{templateString:p,css:{templateString:y},trackImg:[],lastRotateTime:0,geminiTracker:null,locale:"en_US",mailModel:null,startup:function(f,
k){this.inherited(arguments);var t=Settings.Locale.split("-");2<=t.length&&(this.locale=t[0].toLowerCase()+"_"+t[1].toUpperCase(),this.localeDash=t[0].toLowerCase()+"-"+t[1].toUpperCase());for(var h=function(a){window.open(Config.GeminiAboutAdUrl,"_blank");a.preventDefault();a.stopPropagation()},t=function(a){window.open(Config.GeminiAdWithUs,"_blank");a.preventDefault();a.stopPropagation()},m=function(a){window.open(Config.GeminiAdFreeUrl,"_blank");a.preventDefault();a.stopPropagation()},a=d.hitch(this,
function(a){this.rotate(!0);a.preventDefault();a.stopPropagation()}),b=d.query(".AdInfo",this.domNode),c=(Config.StringGeminiAD||Config.Strings.GeminiAD).toLowerCase(),e=0;e<b.length;e++)b[e].innerHTML=c;this.own(q(this.logoItem,"click",h),q(this.domNode,"click",d.hitch(this,this.divClick)),q(this.AdInfo,"click",h),q(this.gem_AdInfo,"click",h),q(this.upLink,"click",m),q(this.gem_confirmClose,"click",a),u.subscribe("cachedListUpdated",d.hitch(this,function(){this.rotate()})),u.subscribe("MailModelSearchChanged",
d.hitch(this,function(){this.rotate(!0)})),d.connect(window,"focus",this,d.hitch(this,function(){this.rotate(!0)})));h=[{caption:Config.Strings.GemFBWhy,onClick:h,className:"wsMenuItem GeminiNativeAdFdbckMenuItem"},{caption:Config.Strings.GemFBLike,onClick:l.hitch(this,"gem_DoFdbck",!0),className:"wsMenuItem GeminiNativeAdFdbckMenuItem"},{caption:Config.Strings.GemFBDislike,onClick:l.hitch(this,"gem_DoFdbck",!1),className:"wsMenuItem GeminiNativeAdFdbckMenuItem"}];Config.GeminiAdWithUs&&h.push({caption:Config.Strings.GemFBAdWithUs,
onClick:t,className:"wsMenuItem GeminiNativeAdFdbckMenuItem"});Config.GeminiAdFreeUrl&&h.push({caption:Config.Strings.GemFBGoAdFree,onClick:m,className:"wsMenuItem GeminiNativeAdFdbckMenuItem"});this.gem_fdbckMenu=ws.widget.createMenu(h);this.gem_fdbckMenu.bindDomNode(this.gem_fdbckMenuCaret);this.gem_fdbckMenu.menuOrient={BR:"TR"};this.gem_fdbckMenu.connect(this.gem_fdbckMenu,"openMyself",d.hitch(this,"gem_fdbckMenuOpen"));this.onDocClk=ws.browser.addDocumentOnClick(this,"onDocumentClick");this.rotate(!0)},
destroy:function(){this.reset();!this.domNode&&this.geminiConfigReset&&this.geminiConfigReset();this.inherited(arguments)},divClick:function(f){this.clickUrl&&(window.open(this.clickUrl,"_blank"),this.rapidReport(),f.preventDefault(),f.stopPropagation())},rapidReport:function(){ws.reporting.reportDLAction("msglst_ad-pencilAdClicked")},onResized:function(){var f=d._getMarginSize(this.domNode);f&&f.w&&(this.textItem.style.width=Math.max(30,f.w-440)+"px")},isScrolledOff:function(){var f=!1;if(!this.domNode)return!0;
var k=d.query("#messageList .dojoxGrid-scrollbox")[0],t=d._getMarginSize(this.domNode);k&&t&&(f=k.scrollTop>t.h);return f},rotate:function(f){var d=(new Date).getTime();d-this.lastRotateTime<1E3*Config.GeminiAdRotationInterval&&!f||ws.dom.checkParentNodeForHidden(this.domNode)||this.isScrolledOff()||(this.lastRotateTime=d,this.fetch())},reset:function(f){this.domNode&&(f?(this.gem_Ad.style.display="",this.searchResultAd.style.display="none"):(this.gem_Ad.style.display="none",this.searchResultAd.style.display=
""),this.adFdBckCnfrm.style.display="none",this.adClick&&(this.adClick.remove(),this.adClick=null),this.iconImgLoad&&(this.iconImgLoad.remove(),this.iconImgLoad=null),this.iconImgError&&(this.iconImgError.remove(),this.iconImgError=null),d.removeClass(this.domNode,"centerItem"),d.removeClass(this.domNode,"searchHighlight"),this.gem_adTag.href="#",this.gem_imgItem.innerHTML="",this.gem_fdbckMenuCaret.style.display="none",this.gem_AdInfo.style.display="none",this.gem_sourceItem.innerHTML="",this.gem_textItem.innerHTML=
"",this.gem_feedbackUrl=null,this.adTag.href="#",this.imgItem.innerHTML="",this.logoItem.style.display="none",this.AdInfo.style.display="none",this.sourceItem.innerHTML="",this.textItem.innerHTML="")},fetch:function(){var f="",k="";this.cmpWatchdog=window.setTimeout(d.hitch(this,function(d,h){this._fetch(f,k)}),1E3);window.__tcfapi?window.__tcfapi("getTCData",2,d.hitch(this,function(t,h){t&&h?(f=void 0===t.gdprApplies?"":t.gdprApplies,k=void 0===t.tcString?"":t.tcString,this._fetch(f,k)):window.__cmp?
window.__cmp("getConsentData",null,d.hitch(this,function(d,a){d&&a&&(k=void 0===d.consentData?"":d.consentData,f=void 0===d.gdprApplies?"":d.gdprApplies);this._fetch(f,k)})):this._fetch(f,k)})):window.__cmp?window.__cmp("getConsentData",null,d.hitch(this,function(d,h){d&&h&&(k=void 0===d.consentData?"":d.consentData,f=void 0===d.gdprApplies?"":d.gdprApplies);this._fetch(f,k)})):this._fetch(f,k)},_fetch:function(f,d){var k=this.mailModel?this.mailModel.getSearchArgs():null,h=null;k&&(k.query?h=k.query:
k.subject?h=k.subject:k.from?h=k.from:k.to&&(h=k.to));Config.AdSearchUrl&&Settings.UserHash<Config.AdSearchThreshold&&h?this._fetchAdSearch(h,f,d):this._fetchGemini(f,d)},_fetchGemini:function(f,k){this.cmpWatchdog&&(window.clearTimeout(this.cmpWatchdog),this.cmpWatchdog=null);A.get(Config.GeminiNativeAdUrl,{jsonp:"cb",query:{agentVersion:"205",adTrackingEnabled:"true",locale:this.locale,publisherUrl:"https://mail.aol.com",apiKey:Config.GeminiNativeAdAPIKey,adUnitCode:Config.GeminiNativeAdUnitCodeInline,
gdpr:f.toString(),euconsent:k},timeout:5E3,preventCache:!0}).then(d.hitch(this,"renderGemini"))},renderGemini:function(f){if(this.domNode){var k=null,t=null,h=null,l=null,a=null;if(f&&!f.error&&f.ads&&f.ads.length){this.reset(!0);var b=f.section.id;f.ads=f.ads.slice(0,1);var c=f.ads[0];"NATIVE"==c.adType&&c.tag&&(a=c.tag,this.gem_feedbackUrl=a.adFeedbackUrl||null,k=a.secImage||a.secOrigImg||a.secHqImage,t=a.source,h=a.headline,l=a.summary,this.clickUrl=a=a.clickUrl,t&&h&&l&&a&&(k&&(this.gem_imgItem.innerHTML=
"\x3cimg onerror\x3d\"this.style.display\x3d'none'\" src\x3d'"+k+"'/\x3e"),this.gem_adTag.href=a,this.adClick=q(this.gem_adTag,"click",d.hitch(this,function(a){this.rapidReport();a.stopPropagation()})),this.gem_fdbckMenuCaret.style.display="",this.gem_AdInfo.style.display="",this.gem_sourceItem.innerHTML=ws.string.escapeXml(t),this.gem_textItem.innerHTML=ws.string.escapeXml(h)+"\x3cspan class\x3d'text'\x3e : "+ws.string.escapeXml(l)+"\x3c/span\x3e",this.gem_adTag.id="gemini-"+b+"-"+(c.creativeId||
c.demandSourceCreativeId||c.dynamicProductAdId||0),this.geminiConfigReset=m(f)))}}},gem_fdbckMenuOpen:function(f){this.gem_feedbackUrl?(this.gem_fdbckMenu.showChild(2),this.gem_fdbckMenu.showChild(3)):(this.gem_fdbckMenu.hideChild(2),this.gem_fdbckMenu.hideChild(3));f.preventDefault();f.stopPropagation()},gem_DoFdbck:function(f){if(this.gem_feedbackUrl&&-1!=this.gem_feedbackUrl.indexOf("$(AD_FEEDBACK)")){this.gem_feedbackReq||(this.gem_feedbackReq=d.create("img",{"class":"hiddenEl"},d.body()));var k=
(new Date).getTime();f=this.gem_feedbackUrl.replace("$(AD_FEEDBACK)","(type$fdb_submit,subo$"+(f?"100":"10")+",afv$2.0)")+"\x26nocash_\x3d"+k;this.gem_feedbackReq.src=f;this.gem_showFBConfirm()}},gem_showFBConfirm:function(){Config.GeminiAdFreeUrl||(this.gem_goAdFree.style.display="none");Config.Strings.GemFBUpgrade;this.clickUrl=null;this.gem_Ad.style.display="none";this.searchResultAd.style.display="none";this.adFdBckCnfrm.style.display=""},_fetchAdSearch:function(f,k,m){this.cmpWatchdog&&(window.clearTimeout(this.cmpWatchdog),
this.cmpWatchdog=null);ws&&ws.Jws&&ws.Jws.jwsData&&ws.Jws.jwsData.wssid&&(this.WSSId=ws.Jws.jwsData.wssid);var h=Config.AdSearchUrl,h=ws.string.substituteOptionalParams(h,{jasHost:window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}),h=h+("\x26"+ws.io.createYmreqid()),q={data:JSON.stringify({count:1,sourceTag:"aol_desktop_mail_search",device:"desktop",market:this.localeDash,query:f,features:"ads.north"}),
handleAs:"json",timeout:6E3,method:"POST",withCredentials:!0,headers:{"Content-Type":"application/json"}},a=d.hitch(this,function(){C(this.WSSId?h+"\x26wssid\x3d"+this.WSSId:h,q).then(d.hitch(this,function(a,c){this.renderAdSearch(a,f,k,m)}),d.hitch(this,function(b){if(b&&b.response&&b.response.status&&"403"==b.response.status&&b.response.data&&b.response.data.wssid&&(this.WSSId=b.response.data.wssid)){a();return}this._fetchGemini(k,m)}))});a()},renderAdSearch:function(f,k,m,h){if(this.domNode){var l=
null,a=!1;if(f.result.ads.searchad.length){var b=null,c=null,e=null,g=null;if(f.result.ads.searchad.length)for(b=0;b<f.result.ads.searchad.length;b++){c=f.result.ads.searchad[b];if(c.content&&c.content.data&&c.content.data.length)for(e=0;e<c.content.data.length;e++)if(g=c.content.data[e],g.url&&g.title&&g.abstract&&g.abstract){l=g;break}if(l)break}l&&(b=l.displayDomain,c=l.title,e=l.abstract,g=l.url,b&&c&&e&&g&&(this.reset(),this.clickUrl=g,l.iconUrl&&(this.iconImg=d.create("img",{src:l.iconUrl},
this.imgItem),d.isIE||ws.browser.isIE11?this.iconImgLoad=q(this.iconImg,"load",d.hitch(this,function(a){a=z.getContentBox(this.imgItem);var b=z.getContentBox(this.iconImg),c=Math.round(Math.max(0,a.w-b.w)/2);this.iconImg.style.marginTop=Math.round(Math.max(0,a.h-b.h)/2)+"px";this.iconImg.style.marginLeft=c+"px"})):d.addClass(this.domNode,"centerItem"),this.iconImgError=q(this.iconImg,"error",function(a){this.style.display="none"})),this.adTag.href=g,this.adClick=q(this.adTag,"click",d.hitch(this,
function(a){this.rapidReport();a.stopPropagation()})),this.logoItem.style.display="",this.AdInfo.style.display="",this.sourceItem.innerHTML=this.addSearchTerms(b,k),this.textItem.innerHTML=this.addSearchTerms(c,k)+"\x3cspan class\x3d'text'\x3e : "+this.addSearchTerms(e,k)+"\x3c/span\x3e",a=!0,d.addClass(this.domNode,"searchHighlight")))}a||this._fetchGemini(m,h)}},addSearchTerms:function(f,d){f=f.replace(/\xC2/g,"\x26nbsp;");var k=ws.string.escapeXml(d);if(-1!=f.toLowerCase().indexOf(k.toLowerCase())){for(var h=
f,m=h.toLowerCase(),a=k.length,k=k.toLowerCase(),b=[],c=m.indexOf(k);-1!=c;)b.push(h.substr(0,c)),b.push("\x3cspan class\x3d'searchTerm'\x3e",h.substr(c,a),"\x3c/span\x3e"),h=h.substr(c+a),m=m.substr(c+a),c=m.indexOf(k);b.push(h);f=b.join("")}return f},onDocumentClick:function(f){this.lastClickEvent=f;setTimeout(d.hitch(this,function(){ws.io.openingWindow||this.rotate()}),20)}})})},"ws/external/geminiTracking":function(){(function(v,p){"object"===typeof exports&&"undefined"!==typeof module?module.exports=
p():"function"===typeof define&&define.amd?define(p):v.Gemini=p()})(this,function(){var v=function(){return{positions:[],beacons:{},clickBeacons:{},elements:{},timer:null,paused:!1}},p=v(),y=function(d){if(d&&"NOT_PROVIDED"!==d&&"NULL"!==d)return(new Image).src=d},d=function(d,l,q,n){var m=q.a,f=q.c,k=q.d,t=q.t,h=p.beacons,r=p.positions;q=q.p/100;h[d]||(h[d]={});h[d][l]={urls:n,threshold:q,duration:k,type:t,consecutive:f,audio:m};r[r.length]={uid:d,threshold:q,duration:k,consecutive:f,audio:m,callback:function(){for(var a=
h[d][l].urls,b=a.length,c=Gemini.beaconCallback,e=0;e<b;e++){var f=a.shift();if(-1<l.indexOf("viewabilityDefStatic"))var k=(new Date).getTime()/1E3|0,m=Math.floor(9007199254740990*Math.random()),f=f.replace("$(AD_POSN)",encodeURIComponent("pp\x3dm,pi\x3d0")).replace("{REQUEST_ID}",m).replace("[timestamp]",k).replace("[CACHEBUSTER]",k).replace("[RANDOM_NUMBER]",m);y(f);"function"===typeof c&&c(h[d][l],d,l,f)}},history:null}},w=function(d,l){var q,n;q=document;n=window;var m=q.body,f=q.documentElement;
q=n.innerHeight||f.clientHeight||m&&m.clientHeight;n=n.innerWidth||f.clientWidth||m&&m.clientWidth;m=d.getBoundingClientRect();q=Math.max(0,Math.min(m.bottom,q)-Math.max(m.top,0))/(m.height||d.offsetHeight)||0;n=Math.max(0,Math.min(m.right,n)-Math.max(m.left,0))/(m.width||d.offsetWidth)||0;if(f=window.addEventListener){for(var f=Math.floor(m.width/10),k=Math.floor(m.height/10),t=Math.max(0,m.left),h=m.top,m=[],r=1;10>r;r++)for(var a=t+f*r,b=1;10>b;b++)m[m.length]=[a,h+k*b];k=f=0;for(t=m.length;k<
t;k++){h=document.elementFromPoint(m[k][0],m[k][1]);if(!(r=h===d))b:{for(h=h&&h.parentNode;null!==h;){if(h===d){r=!0;break b}h=h.parentNode}r=!1}r||f++}f=100-f/m.length*100>=100*l?!1:!0}return f?0:Math.min(q,n)},n=function(d,l,q){return window.addEventListener?d.addEventListener(l,q,!1):d.attachEvent("on"+l,q)},r=function(d){return document.getElementById(d)||document.querySelector("."+d)},l=function(){for(var d=p.positions.length,l=0;l<d;l++){var q=p.positions[l];!p.paused&&q&&function(){var d=q.uid,
m=p.elements[d]||r(d);if(!m)return"continue";p.elements[d]||(p.elements[d]=m,p.clickBeacons[d]&&n(m,"click",function(){var f=p.clickBeacons[d];if(f&&(!f||f.length))for(var k=0,l=f.length;k<l;k++)y(f[k])}));if(w(m,q.threshold)<q.threshold)q.history=null;else if(q.history||(q.history=(new Date).getTime()),((new Date).getTime()-q.history)/1E3>=q.duration&&(q.callback(q),q.history=(new Date).getTime(),p.positions.splice(l,1),--l,!p.positions.length))return clearInterval(p.timer),p.timer=null,"break"}()}},
x=function(){"hidden"in document&&document.addEventListener("visibilitychange",function(){return p.paused=document.hidden})},u=function(l){var n=l.ads;l=l.section.id;for(var q=n.length,w=0;w<q;w++){var m=n[w],f="gemini-"+l+"-"+(m.creativeId||m.demandSourceCreativeId||m.dynamicProductAdId||0);r(f);m.tag="string"===typeof m.tag?JSON.parse(m.tag):m.tag;m.beacon=m.beacon.replace("$(AD_POSN)",encodeURIComponent("pp\x3dm,pi\x3d"+m.index));var k=m,m=k.rules,t=m.viewabilityDefStatic,m=m.viewabilityDefStatic3P,
h=k.tag,x=h.clickTrackingUrl,a=h.imprTrackingUrl,b=h.imprTrackingUrls;if((h=k.actionUrls)&&h.PARTIAL_VIEW)for(var c=h.PARTIAL_VIEW,e={p:.01,d:0,t:21},g=0,u=c.length;g<u;g++)d(f,"viewabilityDefStaticPartial:"+g,e,c);if(h&&(h.IMPR_INTERNAL||h.CLICK_INTERNAL))for(c=[],h.IMPR_INTERNAL&&(c=c.concat(h.IMPR_INTERNAL)),h.CLICK_INTERNAL&&(c=c.concat(h.CLICK_INTERNAL)),g=0,u=c.length;g<u;g++)d(f,"viewabilityDefStatic:"+g,t||{c:1,d:1,p:50},c);if(t||!t&&k.beacon)k=[k.beacon],b&&b.length?k=k.concat(b):a&&(a instanceof
Array?k=k.concat(a):k[k.length]=a),d(f,"viewabilityDefStatic",t||{c:1,d:1,p:50},k);if(h&&h.STATIC_VIEW_3P&&m)for(t=m.length,k=h.STATIC_VIEW_3P,a=0;a<t;a++)k[a]=k[a].replace("$(S_VIEW_TYPE)",m[a].t),d(f,"viewabilityDefStatic3P:"+a,m[a],k);x&&x.length&&(p.clickBeacons[f]=x)}};return function(d){function n(d){var n=d instanceof Array;if(!(!d||n&&!d.length||d&&"object"!==typeof d)){d&&!n&&(d=[d]);for(var n=d.length,m=0;m<n;m++){var f=d[m],k=f.sectionads;if(k)for(f=0;f<k.length;f++)u(k[f]);else u(f)}p.timer||
(p.timer=setInterval(l,150));return function(){p=v()}}}x();return d.Gemini=n}(window)})},"ws/mail/MessageGridModel":function(){define("ws/mail/MessageGridModel",["dojo/_base/declare","dojo","dojox/grid/data/Dynamic","dojox/grid/Grid"],function(v,p,y){v=v([y],{columns:{Select:0,Flag:1,FromTo:2,Hover:3,Subject:4,Attachment:5,Received:6,Folder:7},columnIndex:"select flag fromtoname hover subject attachments received folder".split(" "),origSortableCols:"FromTo Attachment Subject Received Flag Folder".split(" "),
norecipSortableCols:["Attachment","Subject","Received","Flag","Folder"],searchSortableCols:["Received","Attachment"],noSortableCols:[],constructor:function(d,w,n){this.sortableCols=this.origSortableCols;this.model=n;p.connect(this.model,"changeRow",this,"onChangeRow");p.connect(this.model,"modelUpdated",this,"modelUpdated")},modelUpdated:function(){},getRowCount:function(){this.model.getRowCount();return this.model.getRowCount()},typeTips:{ANSWERED:Config.Strings.RepliedTip,FORWARDED:Config.Strings.ForwardedTip,
OFFICIAL:Config.Strings.AOLOfficialMail,CERTIFIED:Config.Strings.AOLCertifiedMail,VOICEMAIL:Config.Strings.AOLVoiceMail},getDatum:function(d,w){if(0==this.model.getRowCount()||isNaN(d))return"";var n=this.model.getRowData(d);if(null==n)return w==this.columns.Subject?"...":"";var r=n.id,l="Invalid Column";switch(w){case this.columns.Select:l=[this.model.isSelected(r)?"ON":"OFF",Config.Strings.CheckboxTip];break;case this.columns.FromTo:var p=n.folder.name,r=this.model.getSenderInfo(n),u=l="";if(this.model.isFolderType(n.folder,
"SENT")||this.model.isFolderType(n.folder,"DRAFT")||"Saved/Auto Saved Sent Mail"==p)n.headers&&n.headers.to&&0<n.headers.to.length?(l=this.model.createRecipientStringML(n),r.email=l[0],r.name=l[1]):r.email=r.name="";u=l=ws.string.escapeXml(r.email||Config.Strings.None);""!==r.name&&(u=ws.string.escapeXml(r.name));r="";Settings.ShowSenderDisplayName||this.model.activeCachedList.CurrentIndex===this.model.sortIndices.FromToAddress&&!this.model.isSearch()?(p=u,r=l):(p=l,r=u);l=this.markupSearchString(p,
"fromto");p=u="";this.formatTypeCB&&!p&&(p=this.model.getTypeName(n),p="\x3cspan class\x3d'typeIcon'\x3e"+this.formatTypeCB([p,this.typeTips[p],"typeIcon"])+"\x3c/span\x3e");!this.model.isFolderType(n.folder,"BULK")&&(Config.EnableSpamWarning&&this.model.hasDeco(n,"FTSP")||Config.EnablePhishWarning&&this.model.hasDeco(n,"BDM"))&&(u="\x3cspan class\x3d'sdIcon'\x3e\x3csvg class\x3d'gridSVGIcon'\x3e\x3cuse xlink:href\x3d'#iconSpam'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/span\x3e");l=u+"\x3cspan title\x3d'"+
r+"' style\x3d'white-space:nowrap' class\x3d'fromAddress'\x3e"+l+"\x3c/span\x3e"+p;break;case this.columns.Hover:l=this.getHoverColumnCB?this.getHoverColumnCB(d):"";break;case this.columns.Attachment:l="NONE";for(r=0;r<n.attachments.length;r++)if("attachment"==n.attachments[r].disposition){l=["ATTACHMENT",Config.Strings.Access_ContainsAttachmentsHeader];break}else"inline"==n.attachments[r].disposition&&(l=["INLINE",Config.Strings.Access_ContainsInlinesHeader]);break;case this.columns.Subject:l=n.headers.subject||
Config.Strings.NoSubject;l=ws.string.escapeXml(l);n=ws.string.escapeXml(n.snippet).substring(0,100);l="\x3cspan title\x3d'"+l+"' style\x3d'white-space: nowrap;'\x3e"+this.markupSearchString(l,"subject")+"\x3c/span\x3e";Settings.ShowMessageSnippet&&""!=n&&(l+="\x3cspan class\x3d'frag'\x3e\x26nbsp;:\x26nbsp;"+n+"\x3c/span\x3e");break;case this.columns.Received:l=ws.date.shortestDate(1E3*parseInt(n.headers.internalDate,10),!0);break;case this.columns.Flag:l=1==n.flags.flagged?["FLAGGED",Config.Strings.FlaggedTip]:
["NONE",Config.Strings.FlagTip];break;case this.columns.Folder:l=this.model.getFolderDisplayName(n.folder),Settings.ViewNewOld&&this.model.isFolderType(n.folder,"INBOX")&&(l=n.flags.read?Config.Strings.Folder_OldMail:Config.Strings.Folder_NewMail)}return l},getDisplaySize:function(d){1024>d&&(d=1024);return 1048576>d?Math.round(d/1024)+Config.Strings.KilobytesShort:1073741824>d?Math.round(d/1048576)+Config.Strings.MegabytesShort:Math.round(d/1073741824)+Config.Strings.GigabytesShort},getSortColumnIndex:function(d){var p=
"";switch(d){case this.columns.Type:p="Info";break;case this.columns.FromTo:p="FromToAddress";break;case this.columns.Hover:p="QuickAction";break;case this.columns.Attachment:p="Attachment";break;case this.columns.Subject:p="Subject";break;case this.columns.Received:p="Received";break;case this.columns.Flag:p="Flag";break;case this.columns.Folder:p="Folder"}return p},getSortColumn:function(d){return this.columnIndex.indexOf(d.toLowerCase())},addSearchTerms:function(d,p){var n=ws.string.escapeXml(p);
if(-1!=d.toLowerCase().indexOf(n.toLowerCase())){for(var r=d,l=r.toLowerCase(),w=n.length,n=n.toLowerCase(),u=[],v=l.indexOf(n);-1!=v;)u.push(r.substr(0,v)),u.push("\x3cspan class\x3d'searchTerm'\x3e",r.substr(v,w),"\x3c/span\x3e"),r=r.substr(v+w),l=l.substr(v+w),v=l.indexOf(n);u.push(r);d=u.join("")}return d},markupSearchString:function(d,p){var n=this.model.getSearchString(),r=this.model.getSearchIn(),l=this.model.getSearchArgs();"subject"==p&&l&&l.subject&&(d=this.addSearchTerms(d,l.subject));
"fromto"==p&&l&&l.from&&(d=this.addSearchTerms(d,l.from));"fromto"==p&&l&&l.to&&(d=this.addSearchTerms(d,l.to));!n||r!=p&&"alltext"!=r||(d=this.addSearchTerms(d,n));return d},onChangeRow:function(d){this.rowChange(null,d)},canSort:function(d){d=Math.abs(d)-1;return p.some(this.sortableCols,function(p){return d==this.columns[p]},this)},sort:function(d){var p=this.getSortColumnIndex(Math.abs(d)-1);this.model.sort(p,0>d?"descending":"ascending")}});return ws.mail.MessageGridModel=v})},"url:ws/mail/MessageListView.html":'\x3cdiv\x3e\n\t\x3cdiv data-dojo-type\x3d"ws/widget/WSSplitContainer" style\x3d"height: 100%; width: 100%;" data-dojo-attach-point\x3d"splitContainer" sizerWidth\x3d"10" orientation\x3d"vertical" persist\x3d"false"\x3e\n\t\t\x3cdiv class\x3d"listView messageListView" data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"layoutWidget"\x3e\n            \x3cdiv data-dojo-type\x3d"ws/widget/SingleLineNotification" data-dojo-attach-point\x3d"notification" class\x3d"notification" data-dojo-props\x3d"region:\'top\'" style\x3d"display:none"\x3e\x3c/div\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/WSToolbar" data-dojo-attach-point\x3d"toolbar" data-dojo-props\x3d"region:\'top\'" vizType\x3d"Controls"\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-point\x3d"selectButton" svgID\x3d"iconCheckboxOff" style\x3d"display:none" class\x3d"selectBtn" data-dojo-attach-event\x3d"onClick: onClickSelect"\x3e\x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-point\x3d"restoreButton" svgID\x3d"iconRestore" style\x3d"display:none" data-dojo-attach-event\x3d"onClick: onClickRestore" title\x3d"${RestoreButton}"\x3e${RestoreButton}\x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-point\x3d"keepNewButton" svgID\x3d"iconNewMail" style\x3d"display:none" data-dojo-attach-event\x3d"onClick: markMessagesUnread" title\x3d"${MsgListKeepAsNewTip}" tip\x3d"${KeepAsNewActionLabel} \x3cspan\x3e(${KeyMailKeepAsNew})\x3c/span\x3e"\x3e${KeepAsNewActionLabel}\x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-event\x3d"onClick: editDraft, onMouseDown: savePreviewPaneSelection" style\x3d"display:none" data-dojo-attach-point\x3d"editDraftButton" svgID\x3d"iconEdit" title\x3d"${EditDraft}"\x3e${EditDraft}\x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-event\x3d"onClick: reply, onMouseDown: savePreviewPaneSelection" data-dojo-attach-point\x3d"replyButton" svgID\x3d"iconReply" style\x3d"display:none" title\x3d"${DisplayReply} (${KeyMailReply})" tip\x3d"${DisplayReply} \x3cspan\x3e(${KeyMailReply})\x3c/span\x3e"\x3e${DisplayReply}\x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-event\x3d"onClick: replyAll, onMouseDown: savePreviewPaneSelection" data-dojo-attach-point\x3d"replyAllButton" svgID\x3d"iconReplyAll" style\x3d"display:none" title\x3d"${DisplayReplyAll} (${KeyMailReplyAll})" tip\x3d"${DisplayReplyAll} \x3cspan\x3e(${KeyMailReplyAll})\x3c/span\x3e"\x3e${DisplayReplyAll}\x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-event\x3d"onClick: forward, onMouseDown: savePreviewPaneSelection" data-dojo-attach-point\x3d"forwardButton" svgID\x3d"iconForward" style\x3d"display:none" title\x3d"${DisplayForward} (${KeyMailForward})" tip\x3d"${DisplayForward} \x3cspan\x3e(${KeyMailForward})\x3c/span\x3e"\x3e${DisplayForward}\x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-point\x3d"restartIMButton" data-dojo-attach-event\x3d"onClick: restartIM" svgID\x3d"iconIM" style\x3d"display:none" title\x3d"${DisplayIM}"\x3e${DisplayIM}\x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-point\x3d"deleteButton" svgID\x3d"iconTrash" data-dojo-attach-event\x3d"onClick:onClickDelete" style\x3d"display:none" tip\x3d"${DeleteButton} \x3cspan\x3e(${DeleteKey})\x3c/span\x3e"\x3e${DeleteButton}\x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-point\x3d"spamButton" svgID\x3d"iconSpam" data-dojo-attach-event\x3d"onClick: reportSpam" style\x3d"display:none" title\x3d"${MsgListSpamTip}" tip\x3d"${ReportSpamTooltip} \x3cspan\x3e(${KeyMailSpam})\x3c/span\x3e"\x3e${ReportSpamButton}\x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-point\x3d"notSpamButton" svgID\x3d"iconNotSpam" data-dojo-attach-event\x3d"onClick: reportNotSpam" style\x3d"display:none" tip\x3d"${NotSpamButton} \x3cspan\x3e(${KeyMailSpam})\x3c/span\x3e" title\x3d"${NotSpamButton}"\x3e${NotSpamButton}\x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/DropDownButton" data-dojo-attach-point\x3d"actionButton" style\x3d"display:none" tip\x3d"${ActionButtonTip}" title\x3d"${ActionButtonTip}"\x3e${ActionButton}\x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-props\x3d"toolbarPosition: \'right\'" data-dojo-type\x3d"ws/widget/Pane" class\x3d"msgListTbRight"\x3e\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-point\x3d"fsButton" svgID\x3d"iconSearch" style\x3d"display:none" tip\x3d"${AdvancedSearch}"\x3e${AdvancedSearchBtn}\x3c/div\x3e\n\t\t\t\t\t\x3cdiv class\x3d"searchData" data-dojo-type\x3d"ws/widget/DropDownButton" data-dojo-attach-point\x3d"searchResultsNode" showArrow\x3dfalse\x3e\x3c/div\x3e\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/DropDownButton" data-dojo-attach-point\x3d"filterButton" widgetId\x3d"filterDropDown" menuicons\x3d"true"\x3e\x3c/div\x3e\n\t\t\t\t\t\x3cdiv class\x3d"invertBtn" data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-point\x3d"closeButton" svgID\x3d"iconClose" data-dojo-attach-event\x3d"onClick: clearSearch" tip\x3d"${ClearSearchResults}"\x3e\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" data-dojo-props\x3d"region:\'center\'"\x3e\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"grid" data-dojo-type\x3d"dojox.grid.Grid"\x3e\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"emptyFolderAdDiv" style\x3d"display:none;height: 100%; width: 100%;" data-dojo-attach-point\x3d"emptyFolderAdDiv"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/mail/MessageListView.css":"","url:ws/widget/GeminiNativeAd.html":'\x3cdiv class\x3d"GeminiNativeAd"\x3e\n\t\x3cdiv class\x3d"AdDiv searchResultAd" data-dojo-attach-point\x3d"searchResultAd" style\x3d"display:none"\x3e\n\t\t\x3ca href\x3d"#" target\x3d"_blank" rel\x3d"noopener noreferrer" data-dojo-attach-point\x3d"adTag"\x3e\n\t\t\t\x3cdiv class\x3d"item imgItem" data-dojo-attach-point\x3d"imgItem"\x3e\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"item logoItem" data-dojo-attach-point\x3d"logoItem" style\x3d"display:none"\x3e\x3csvg class\x3d"svgIcon"\x3e\x3cuse xlink:href\x3d"#geminiAd"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"item sourceItem" data-dojo-attach-point\x3d"sourceItem"\x3e\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"item textItem" data-dojo-attach-point\x3d"textItem"\x3e\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"item AdInfo" data-dojo-attach-point\x3d"AdInfo" style\x3d"display:none"\x3e\x3c/div\x3e\n\t\t\x3c/a\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"AdDiv gem_Ad" data-dojo-attach-point\x3d"gem_Ad"\x3e\n\t\t\x3ca href\x3d"#" target\x3d"_blank" rel\x3d"noopener noreferrer" data-dojo-attach-point\x3d"gem_adTag"\x3e\n\t\t\t\x3cdiv class\x3d"item imgItem" data-dojo-attach-point\x3d"gem_imgItem"\x3e\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"item AdInfo" data-dojo-attach-point\x3d"gem_AdInfo" style\x3d"display:none"\x3e\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"item sourceItem" data-dojo-attach-point\x3d"gem_sourceItem"\x3e\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"item textItem" data-dojo-attach-point\x3d"gem_textItem"\x3e\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"item gem_fdbckMenuCaret" data-dojo-attach-point\x3d"gem_fdbckMenuCaret"\x3e\x3csvg\x3e\x3cuse xlink:href\x3d"#iconDown"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n\t\t\x3c/a\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"" data-dojo-attach-point\x3d"adFdBckCnfrm" style\x3d"display:none"\x3e\n\t\t\x3cdiv class\x3d"item confirmMsg" data-dojo-attach-point\x3d"adFdBckMsg"\x3e${GemFBThanks}\x3cspan data-dojo-attach-point\x3d"gem_goAdFree"\x3e ${GemFBUpgrade}\x3cspan data-dojo-attach-point\x3d"upLink" class\x3d"wsLink upLink"\x3e ${GemFBUpLink}\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\n\t\t\x3cspan class\x3d"item gem_confirmClose" data-dojo-attach-point\x3d"gem_confirmClose"\x3e\x3csvg class\x3d"svgIcon"\x3e\x3cuse xlink:href\x3d"#iconClose"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/span\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e',
"url:ws/widget/GeminiNativeAd.css":""}});define("release/MessageList",[],1);
//# sourceMappingURL=MessageList.js.map