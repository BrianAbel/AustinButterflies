//>>built
(function(f,k){var d,b=function(){return"undefined"!==typeof u&&"function"!==typeof u?u:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this}(),a=function(){},h=function(a){for(var b in a)return 0;return 1},l={}.toString,e=function(a){return"[object Function]"==l.call(a)},p=function(a){return"[object String]"==l.call(a)},g=function(a){return"[object Array]"==l.call(a)},n=function(a,b){if(a)for(var d=0;d<a.length;)b(a[d++])},t=function(a,b){for(var d in b)a[d]=b[d];return a},q=function(a,
b){return t(Error(a),{src:"dojoLoader",info:b})},m=1,w=function(){return"_"+m++},v=function(a,b,d){return Ra(a,b,d,0,v)},u=b,z=u.document,B=z&&z.createElement("DiV"),x=v.has=function(a){return e(D[a])?D[a]=D[a](u,z,B):D[a]},D=x.cache=k.hasCache;e(f)&&(f=f(b));x.add=function(a,b,d,g){(void 0===D[a]||g)&&(D[a]=b);return d&&x(a)};x.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);x("host-webworker")&&(t(k.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,
"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),k.loaderPatch={injectUrl:function(a,b){try{importScripts(a),b()}catch(Qa){}}});for(var E in f.has)x.add(E,f.has[E],0,1);var A=0,F=[],K=0,I=a,J=a,G;v.isXdUrl=a;v.initSyncLoader=function(a,b,d){K||(K=a,I=b,J=d);return{sync:"sync",requested:1,arrived:2,nonmodule:3,executing:4,executed:5,syncExecStack:F,modules:N,execQ:V,getModule:ca,injectModule:va,setArrived:ia,signal:H,finishExec:ma,execModule:na,dojoRequirePlugin:K,
getLegacyMode:function(){return A},guardCheckComplete:oa}};var O=location.protocol,R=location.host;v.isXdUrl=function(a){return/^\./.test(a)?!1:/^\/\//.test(a)?!0:(a=a.match(/^([^\/\:]+\:)\/+([^\/]+)/))&&(a[1]!=O||R&&a[2]!=R)};x.add("dojo-force-activex-xhr",!z.addEventListener&&"file:"==window.location.protocol);x.add("native-xhr","undefined"!=typeof XMLHttpRequest);if(x("native-xhr")&&!x("dojo-force-activex-xhr"))G=function(){return new XMLHttpRequest};else{var Z=["Msxml2.XMLHTTP","Microsoft.XMLHTTP",
"Msxml2.XMLHTTP.4.0"],Q;for(d=0;3>d;)try{Q=Z[d++];new ActiveXObject(Q);break}catch(fb){}G=function(){return new ActiveXObject(Q)}}v.getXhr=G;x.add("dojo-gettext-api",1);v.getText=function(a,b,d){var g=G();g.open("GET",wa(a),!1);g.send(null);if(200==g.status||!location.host&&!g.status)d&&d(g.responseText,b);else throw q("xhrFailed",g.status);return g.responseText};var M=x("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");v.eval=function(a,b){return M(a+"\r\n//# sourceURL\x3d"+
b)};var C={},H=v.signal=function(a,b){var d=C[a];n(d&&d.slice(0),function(a){a.apply(null,g(b)?b:[b])})},L=v.on=function(a,b){var d=C[a]||(C[a]=[]);d.push(b);return{remove:function(){for(var a=0;a<d.length;a++)if(d[a]===b){d.splice(a,1);break}}}},P=[],aa={},W=[],T={},pa=v.map={},X=[],N={},da="",S={},ja={},U={},ea=0;if(!x("foreign-loader"))var fa=function(a,b){b=!1!==b;var d,g,e,n;for(d in ja)g=ja[d],(e=d.match(/^url\:(.+)/))?S["url:"+Sa(e[1],a)]=g:"*now"==d?n=g:"*noref"!=d&&(e=qa(d,a,!0),S[e.mid]=
S["url:"+e.url]=g);n&&n(Ia(a));b&&(ja={})};var Ta=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},Ja=function(a,b){b.splice(0,b.length);for(var d in a)b.push([d,a[d],new RegExp("^"+Ta(d)+"(/|$)"),d.length]);b.sort(function(a,b){return b[3]-a[3]});return b},ib=function(a,b){n(a,function(a){b.push([p(a[0])?new RegExp("^"+Ta(a[0])+"$"):a[0],a[1]])})},Ua=function(a){var b=a.name;b||(b=a,a={name:b});a=t({main:"main"},a);a.location=a.location?a.location:b;a.packageMap&&
(pa[b]=a.packageMap);a.main.indexOf("./")||(a.main=a.main.substring(2));T[b]=a},Va=[],ka=function(a,b,d){for(var g in a){"waitSeconds"==g&&(v.waitms=1E3*(a[g]||0));"cacheBust"==g&&(da=a[g]?p(a[g])?a[g]:(new Date).getTime()+"":"");if("baseUrl"==g||"combo"==g)v[g]=a[g];if("async"==g){var e=a[g];v.legacyMode=A=p(e)&&/sync|legacyAsync/.test(e)?e:e?!1:"sync";v.async=!A}a[g]!==D&&(v.rawConfig[g]=a[g],"has"!=g&&x.add("config-"+g,a[g],0,b))}v.baseUrl||(v.baseUrl="./");/\/$/.test(v.baseUrl)||(v.baseUrl+="/");
for(g in a.has)x.add(g,a.has[g],0,b);n(a.packages,Ua);for(var m in a.packagePaths)n(a.packagePaths[m],function(a){var b=m+"/"+a;p(a)&&(a={name:a});a.location=b;Ua(a)});Ja(t(pa,a.map),X);n(X,function(a){a[1]=Ja(a[1],[]);"*"==a[0]&&(X.star=a)});Ja(t(aa,a.paths),W);ib(a.aliases,P);if(!x("foreign-loader")){if(b)Va.push({config:a.config});else for(g in a.config)b=ca(g,d),b.config=t(b.config||{},a.config[g]);a.cache&&(fa(),ja=a.cache,fa(0,!!a.cache["*noref"]))}H("config",[a,v.rawConfig])};x("dojo-cdn");
var xa=z.getElementsByTagName("script");d=0;for(var ba,ha,ya,ra;d<xa.length;)if(ba=xa[d++],(ya=ba.getAttribute("src"))&&(ra=ya.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(ha=ra[3]||"",k.baseUrl=k.baseUrl||ha,ea=ba),ya=ba.getAttribute("data-dojo-config")||ba.getAttribute("djConfig"))U=v.eval("({ "+ya+" })","data-dojo-config"),ea=ba;v.rawConfig={};ka(k,1);x("dojo-cdn")&&((T.dojo.location=ha)&&(ha+="/"),T.dijit.location=ha+"../dijit/",T.dojox.location=ha+"../dojox/");ka(f,1);ka(U,1);if(!x("foreign-loader"))var sa=
function(a){oa(function(){n(a.deps,va)})},Ra=function(b,d,e,n,m){var h;if(p(b)){if((h=ca(b,n,!0))&&h.executed)return h.result;throw q("undefinedModule",b);}g(b)||(ka(b,0,n),b=d,d=e);if(g(b))if(b.length){e="require*"+w();for(var l,u=[],f=0;f<b.length;)l=b[f++],u.push(ca(l,n));h=t(za("",e,0,""),{injected:2,deps:u,def:d||a,require:n?n.require:v,gc:1});N[h.mid]=h;sa(h);var k=ta&&"sync"!=A;oa(function(){na(h,k)});h.executed||V.push(h);la()}else d&&d();return m},Ia=function(a){if(!a)return v;var b=a.require;
b||(b=function(d,g,e){return Ra(d,g,e,a,b)},a.require=t(b,v),b.module=a,b.toUrl=function(b){return Sa(b,a)},b.toAbsMid=function(b){return Ka(b,a)},b.syncLoadNls=function(b){b=qa(b,a);var d=N[b.mid];if(!d||!d.executed)if(ga=S[b.mid]||S["url:"+b.url])Aa(ga),d=N[b.mid];return d&&d.executed&&d.result});return b},V=[],Ba=[],Y={},kb=function(a){a.injected=1;Y[a.mid]=1;a.url&&(Y[a.url]=a.pack||1);Wa()},ia=function(a){a.injected=2;delete Y[a.mid];a.url&&delete Y[a.url];h(Y)&&(Ca(),"xd"==A&&(A="sync"))},lb=
v.idle=function(){return!Ba.length&&h(Y)&&!V.length&&!ta};var Da=function(a,b){if(b)for(var d=0;d<b.length;d++)if(b[d][2].test(a))return b[d];return 0},Xa=function(a){var b=[],d,g;for(a=a.replace(/\\/g,"/").split("/");a.length;)d=a.shift(),".."==d&&b.length&&".."!=g?(b.pop(),g=b[b.length-1]):"."!=d&&b.push(g=d);return b.join("/")},za=function(a,b,d,g){var e=v.isXdUrl(g);return{pid:a,mid:b,pack:d,url:g,executed:0,def:0,isXd:e,isAmd:!!(e||T[a]&&T[a].isAmd)}},Ya=function(a,b,d,g,m,h,l,p,t,u){var w,f,
k,v;v=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||v&&!b)return za(0,a,0,a);a=Xa(v?b.mid+"/../"+a:a);if(/^\./.test(a))throw q("irrationalPath",a);u||v||!h.star||(k=Da(a,h.star[1]));!k&&b&&(k=(k=Da(b.mid,h))&&Da(a,k[1]));k&&(a=k[1]+a.substring(k[3]));b=(ra=a.match(/^([^\/]+)(\/(.+))?$/))?ra[1]:"";(w=d[b])?a=b+"/"+(f=ra[3]||w.main):b="";var z=0;n(p,function(b){var d=a.match(b[0]);d&&0<d.length&&(z=e(b[1])?a.replace(b[0],b[1]):b[1])});if(z)return Ya(z,0,d,g,m,h,l,p,t);if(d=g[a])return t?za(d.pid,d.mid,
d.pack,d.url):g[a];g=(k=Da(a,l))?k[1]+a.substring(k[3]):b?("/"===w.location.slice(-1)?w.location.slice(0,-1):w.location)+"/"+f:x("config-tlmSiblingOfDojo")?"../"+a:a;/(^\/)|(\:)/.test(g)||(g=m+g);return za(b,a,w,Xa(g+".js"))},qa=function(a,b,d){return Ya(a,b,T,N,v.baseUrl,X,W,P,void 0,d)};if(!x("foreign-loader"))var Za=function(a,b,d){return a.normalize?a.normalize(b,function(a){return Ka(a,d)}):Ka(b,d)},$a=0,ca=function(a,b,d){var g,e;(g=a.match(/^(.+?)\!(.*)$/))?(e=ca(g[1],b,d),"sync"!=A||e.executed||
(va(e),2!==e.injected||e.executed||oa(function(){na(e)}),e.executed?Ea(e):V.unshift(e)),5!==e.executed||e.load||Ea(e),e.load?(g=Za(e,g[2],b),a=e.mid+"!"+(e.dynamic?++$a+"!":"")+g):(g=g[2],a=e.mid+"!"+ ++$a+"!waitingForPlugin"),a={plugin:e,mid:a,req:Ia(b),prid:g}):a=qa(a,b);return N[a.mid]||!d&&(N[a.mid]=a)};var Ka=v.toAbsMid=function(a,b){return qa(a,b).mid},Sa=v.toUrl=function(a,b){var d=qa(a+"/x",b),g=d.url;return wa(0===d.pid?a:g.substring(0,g.length-5))};if(!x("foreign-loader"))var ab={injected:2,
executed:5,def:3,result:3},La=function(a){return N[a]=t({mid:a},ab)},mb=La("require"),nb=La("exports"),ob=La("module"),Fa={},Ma=0,Ea=function(a){var b=a.result;a.dynamic=b.dynamic;a.normalize=b.normalize;a.load=b.load;return a},pb=function(a){var b={};n(a.loadQ,function(d){var g=Za(a,d.prid,d.req.module),e=a.dynamic?d.mid.replace(/waitingForPlugin$/,g):a.mid+"!"+g,g=t(t({},d),{mid:e,prid:g,injected:0});N[e]&&N[e].injected||bb(N[e]=g);b[d.mid]=N[e];ia(d);delete N[d.mid]});a.loadQ=0;var d=function(a){for(var d=
a.deps||[],g=0;g<d.length;g++)(a=b[d[g].mid])&&(d[g]=a)},g;for(g in N)d(N[g]);n(V,d)},ma=function(a){v.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=Ma++;n(a.provides,function(a){a()});a.loadQ&&(Ea(a),pb(a));for(d=0;d<V.length;)V[d]===a?V.splice(d,1):d++;/^require\*/.test(a.mid)&&delete N[a.mid]},qb=[],na=function(a,b){if(4===a.executed)return v.trace("loader-circular-dependency",[qb.concat(a.mid).join("-\x3e")]),!a.def||b?Fa:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return Fa;
var d=a.mid,g=a.deps||[],n,m=[],h=0;for(a.executed=4;n=g[h++];){n=n===mb?Ia(a):n===nb?a.cjs.exports:n===ob?a.cjs:na(n,b);if(n===Fa)return a.executed=0,v.trace("loader-exec-module",["abort",d]),Fa;m.push(n)}v.trace("loader-run-factory",[a.mid]);var d=a.def,l;F.unshift(a);if(x("config-dojo-loader-catches"))try{l=e(d)?d.apply(null,m):d}catch(jb){H("error",a.result=q("factoryThrew",[a,jb]))}else l=e(d)?d.apply(null,m):d;a.result=void 0===l&&a.cjs?a.cjs.exports:l;F.shift(a);ma(a)}return a.result},ta=0,
oa=function(a){try{ta++,a()}catch(gb){throw gb;}finally{ta--}lb()&&H("idle",[])},la=function(){ta||oa(function(){I();for(var a,b,d=0;d<V.length;)a=Ma,b=V[d],na(b),a!=Ma?(I(),d=0):d++})};var wa="function"==typeof f.fixupUrl?f.fixupUrl:function(a){a+="";return a+(da?(/\?/.test(a)?"\x26":"?")+da:"")};void 0===x("dojo-loader-eval-hint-url")&&x.add("dojo-loader-eval-hint-url",1);var bb=function(a){var b=a.plugin;5!==b.executed||b.load||Ea(b);var d=function(b){a.result=b;ia(a);ma(a);la()};b.load?b.load(a.prid,
a.req,d):b.loadQ?b.loadQ.push(a):(b.loadQ=[a],V.unshift(b),va(b))},ga=0,ua=0,Na=0,Aa=function(a,b){x("config-stripStrict")&&(a=a.replace(/(["'])use strict\1/g,""));Na=1;if(x("config-dojo-loader-catches"))try{a===ga?ga.call(null):v.eval(a,x("dojo-loader-eval-hint-url")?b.url:b.mid)}catch(Qa){H("error",q("evalModuleThrew",b))}else a===ga?ga.call(null):v.eval(a,x("dojo-loader-eval-hint-url")?b.url:b.mid);Na=0},va=function(a){var b=a.mid,d=a.url;if(!(a.executed||a.injected||Y[b]||a.url&&(a.pack&&Y[a.url]===
a.pack||1==Y[a.url])))if(kb(a),a.plugin)bb(a);else{var g=function(){cb(a);if(2!==a.injected){if(x("dojo-enforceDefine")){H("error",q("noDefine",a));return}ia(a);t(a,ab);v.trace("loader-define-nonmodule",[a.url])}A?!F.length&&la():la()};if(ga=S[b]||S["url:"+a.url])v.trace("loader-inject",["cache",a.mid,d]),Aa(ga,a),g();else{if(A)if(a.isXd)"sync"==A&&(A="xd");else if(!a.isAmd||"sync"==A){var e=function(e){if("sync"==A){F.unshift(a);Aa(e,a);F.shift();cb(a);a.cjs||(ia(a),ma(a));if(a.finish){e=b+"*finish";
var m=a.finish;delete a.finish;Ga(e,["dojo",("dojo/require!"+m.join(",")).replace(/\./g,"/")],function(a){n(m,function(b){a.require(b)})});V.unshift(ca(e))}g()}else(e=J(a,e))?(Aa(e,a),g()):(ua=a,v.injectUrl(wa(d),g,a),ua=0)};v.trace("loader-inject",["xhr",a.mid,d,"sync"!=A]);if(x("config-dojo-loader-catches"))try{v.getText(d,"sync"!=A,e)}catch(hb){H("error",q("xhrInjectFailed",[a,hb]))}else v.getText(d,"sync"!=A,e);return}v.trace("loader-inject",["script",a.mid,d]);ua=a;v.injectUrl(wa(d),g,a);ua=
0}}},Oa=function(a,b,d){v.trace("loader-define-module",[a.mid,b]);var g=a.mid;if(2===a.injected)return H("error",q("multipleDefine",a)),a;t(a,{deps:b,def:d,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(b){a.cjs.exports=b},config:function(){return a.config}}});for(var n=0;b[n];n++)b[n]=ca(b[n],a);A&&!Y[g]&&(sa(a),V.push(a),la());ia(a);e(d)||b.length||(a.result=d,ma(a));return a},cb=function(a,b){for(var d=[],g,e;Ba.length;)e=Ba.shift(),b&&(e[0]=b.shift()),g=e[0]&&ca(e[0])||a,d.push([g,
e[1],e[2]]);fa(a);n(d,function(a){sa(Oa.apply(null,a))})},Ha=0,Ca=a,Wa=a,Ca=function(){Ha&&clearTimeout(Ha);Ha=0},Wa=function(){Ca();v.waitms&&(Ha=u.setTimeout(function(){Ca();H("error",q("timeout",Y))},v.waitms))};x.add("ie-event-behavior",z.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var Pa=function(a,b,d,g){if(x("ie-event-behavior"))return a.attachEvent(d,g),function(){a.detachEvent(d,g)};a.addEventListener(b,g,!1);return function(){a.removeEventListener(b,
g,!1)}},rb=Pa(window,"load","onload",function(){v.pageLoaded=1;try{"complete"!=z.readyState&&(z.readyState="complete")}catch(fb){}rb()}),xa=z.getElementsByTagName("script");for(d=0;!ea;)/^dojo/.test((ba=xa[d++])&&ba.type)||(ea=ba);v.injectUrl=function(a,b,d){d=d.node=z.createElement("script");var g=Pa(d,"load","onreadystatechange",function(a){a=a||window.event;var d=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(d.readyState))g(),e(),b&&b()}),e=Pa(d,"error","onerror",function(b){g();
e();H("error",q("scriptError: "+a,[a,b]))});d.type="text/javascript";d.charset="utf-8";d.src=a;ea.parentNode.insertBefore(d,ea);return d};v.log=a;v.trace=a;if(x("foreign-loader"))Ga=a;else{var Ga=function(a,b,d){var g=arguments.length,n=["require","exports","module"],m=[0,a,b];1==g?m=[0,e(a)?n:[],a]:2==g&&p(a)?m=[a,e(b)?n:[],b]:3==g&&(m=[a,b,d]);v.trace("loader-define",m.slice(0,2));if((g=m[0]&&ca(m[0]))&&!Y[g.mid])sa(Oa(g,m[1],m[2]));else if(!x("ie-event-behavior")||Na)Ba.push(m);else{g=g||ua;if(!g)for(a in Y)if((n=
N[a])&&n.node&&"interactive"===n.node.readyState){g=n;break}g?(fa(g),sa(Oa(g,m[1],m[2]))):H("error",q("ieDefineFailed",m[0]));la()}};Ga.amd={vendor:"dojotoolkit.org"}}t(t(v,k.loaderPatch),f.loaderPatch);L("error",function(a){try{if(a instanceof Error)for(var b in a);}catch(Qa){}});t(v,{uid:w,cache:S,packs:T});if(!u.define&&(u.define=Ga,u.require=v,!x("foreign-loader"))){n(Va,function(a){ka(a)});var db=U.deps||f.deps||k.deps,eb=U.callback||f.callback||k.callback;v.boot=db||eb?[db||[],eb]:0}})(function(f){return f.dojoConfig||
f.djConfig||f.require||{}},{async:0,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../ws",main:"dojo",name:"ws"},{location:"../linkify",name:"linkify"},{location:"../util/doh",name:"doh"}]});
require({cache:{"dojo/main":function(){define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color ./has!dojo-firebug?./_firebug/firebug ./_base/browser ./_base/loader".split(" "),function(f,k,d,b,a,h,l,e){l.isDebug&&d(["./_firebug/firebug"]);var p=l.require;p&&(p=h.map(a.isArray(p)?p:[p],function(a){return a.replace(/\./g,"/")}),f.isAsync?d(p):e(1,function(){d(p)}));return f})},"dojo/_base/kernel":function(){define(["../global",
"../has","./config","require","module"],function(f,k,d,b,a){var h,l={},e={},p={config:d,global:f,dijit:l,dojox:e},l={dojo:["dojo",p],dijit:["dijit",l],dojox:["dojox",e]};a=b.map&&b.map[a.id.match(/[^\/]+/)[0]];for(h in a)l[h]?l[h][0]=a[h]:l[h]=[a[h],{}];for(h in l)a=l[h],a[1]._scopeName=a[0],d.noGlobals||(f[a[0]]=a[1]);p.scopeMap=l;p.baseUrl=p.config.baseUrl=b.baseUrl;p.isAsync=b.async;p.locale=d.locale;f="$Rev:$".match(/[0-9a-f]{7,}/);p.version={major:1,minor:16,patch:2,flag:"",revision:f?f[0]:NaN,
toString:function(){var a=p.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};k("csp-restrictions")||Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(p);p.exit=function(){};k("host-webworker");k.add("console-as-object",function(){return Function.prototype.bind&&console&&"object"===typeof console.log});"undefined"!=typeof console||(console={});a="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");
var g;for(f=0;g=a[f++];)console[g]?k("console-as-object")&&(console[g]=Function.prototype.bind.call(console[g],console)):function(){var a=g+"";console[a]="log"in console?function(){var b=Array.prototype.slice.call(arguments);b.unshift(a+":");console.log(b.join(" "))}:function(){};console[a]._fake=!0}();k.add("dojo-debug-messages",!!d.isDebug);p.deprecated=p.experimental=function(){};k("dojo-debug-messages")&&(p.deprecated=function(a,b,d){},p.experimental=function(a,b){});if(d.modulePaths){p.deprecated("dojo.modulePaths",
"use paths configuration");k={};for(h in d.modulePaths)k[h.replace(/\./g,"/")]=d.modulePaths[h];b({paths:k})}p.moduleUrl=function(a,d){p.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var g=null;a&&(g=b.toUrl(a.replace(/\./g,"/")+(d?"/"+d:"")+"/*.*").replace(/\/\*\.\*/,"")+(d?"":"/"));return g};p._hasResource={};return p})},"dojo/global":function(){define(function(){return"undefined"!==typeof global&&"function"!==typeof global?global:"undefined"!==typeof window?window:"undefined"!==typeof self?
self:this})},"dojo/has":function(){define(["./global","require","module"],function(f,k,d){var b=k.has||function(){};b.add("dom-addeventlistener",!!document.addEventListener);b.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints);b.add("touch-events","ontouchstart"in document);b.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window);b.add("MSPointer",window.navigator.msPointerEnabled);
b.add("touch-action",b("touch")&&b("pointer-events"));b.add("device-width",screen.availWidth||innerWidth);f=document.createElement("form");b.add("dom-attributes-explicit",0==f.attributes.length);b.add("dom-attributes-specified-flag",0<f.attributes.length&&40>f.attributes.length);b.clearElement=function(a){a.innerHTML="";return a};b.normalize=function(a,d){var h=a.match(/[\?:]|[^:\?]*/g),e=0,p=function(a){var d=h[e++];if(":"==d)return 0;if("?"==h[e++]){if(!a&&b(d))return p();p(!0);return p(a)}return d||
0};return(a=p())&&d(a)};b.load=function(a,b,d){a?b([a],d):d()};return b})},"dojo/_base/config":function(){define(["../global","../has","require"],function(f,k,d){f={};d=d.rawConfig;for(var b in d)f[b]=d[b];!f.locale&&"undefined"!=typeof navigator&&(b=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(f.locale=b.toLowerCase());return f})},"dojo/sniff":function(){define(["./has"],function(f){var k=navigator,d=k.userAgent,k=k.appVersion,
b=parseFloat(k);f.add("air",0<=d.indexOf("AdobeAIR"));f.add("wp",parseFloat(d.split("Windows Phone")[1])||void 0);f.add("msapp",parseFloat(d.split("MSAppHost/")[1])||void 0);f.add("khtml",0<=k.indexOf("Konqueror")?b:void 0);f.add("edge",parseFloat(d.split("Edge/")[1])||void 0);f.add("opr",parseFloat(d.split("OPR/")[1])||void 0);f.add("webkit",!f("wp")&&!f("edge")&&parseFloat(d.split("WebKit/")[1])||void 0);f.add("chrome",!f("edge")&&!f("opr")&&parseFloat(d.split("Chrome/")[1])||void 0);f.add("android",
!f("wp")&&parseFloat(d.split("Android ")[1])||void 0);f.add("safari",!(0<=k.indexOf("Safari"))||f("wp")||f("chrome")||f("android")||f("edge")||f("opr")?void 0:parseFloat(k.split("Version/")[1]));f.add("mac",0<=k.indexOf("Macintosh"));f.add("quirks","BackCompat"==document.compatMode);if(!f("wp")&&d.match(/(iPhone|iPod|iPad)/)){var a=RegExp.$1.replace(/P/,"p"),h=d.match(/OS ([\d_]+)/)?RegExp.$1:"1",h=parseFloat(h.replace(/_/,".").replace(/_/g,""));f.add(a,h);f.add("ios",h)}f.add("bb",(0<=d.indexOf("BlackBerry")||
0<=d.indexOf("BB10"))&&parseFloat(d.split("Version/")[1])||void 0);f.add("trident",parseFloat(k.split("Trident/")[1])||void 0);f.add("svg","undefined"!==typeof SVGAngle);f("webkit")||(0<=d.indexOf("Opera")&&f.add("opera",9.8<=b?parseFloat(d.split("Version/")[1])||b:b),!(0<=d.indexOf("Gecko"))||f("wp")||f("khtml")||f("trident")||f("edge")||f.add("mozilla",b),f("mozilla")&&f.add("ff",parseFloat(d.split("Firefox/")[1]||d.split("Minefield/")[1])||void 0),document.all&&!f("opera")&&(d=parseFloat(k.split("MSIE ")[1])||
void 0,(k=document.documentMode)&&5!=k&&Math.floor(d)!=k&&(d=k),f.add("ie",d)),f.add("wii","undefined"!=typeof opera&&opera.wiiremote));return f})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(f,k){k.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var d=k("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],b=d.length,a=function(a,b,d){d||(d=
a[0]&&f.scopeMap[a[0]]?f.scopeMap[a.shift()][1]:f.global);try{for(var g=0;g<a.length;g++){var e=a[g];if(!(e in d))if(b)d[e]={};else return;d=d[e]}return d}catch(w){}},h=Object.prototype.toString,l=function(a,b,d){return(d||[]).concat(Array.prototype.slice.call(a,b||0))},e=/\{([^\}]+)\}/g,p={_extraNames:d,_mixin:function(a,e,h){var g,m,n,l={};for(g in e)m=e[g],g in a&&(a[g]===m||g in l&&l[g]===m)||(a[g]=h?h(m):m);if(k("bug-for-in-skips-shadowed")&&e)for(n=0;n<b;++n)g=d[n],m=e[g],g in a&&(a[g]===m||
g in l&&l[g]===m)||(a[g]=h?h(m):m);return a},mixin:function(a,b){a||(a={});for(var d=1,g=arguments.length;d<g;d++)p._mixin(a,arguments[d]);return a},setObject:function(b,d,e){var g=b.split(".");b=g.pop();return(e=a(g,!0,e))&&b?e[b]=d:void 0},getObject:function(b,d,e){return b?a(b.split("."),d,e):e},exists:function(a,b){return void 0!==p.getObject(a,!1,b)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:Array.isArray||function(a){return"[object Array]"==h.call(a)},isFunction:function(a){return"[object Function]"===
h.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||p.isArray(a)||p.isFunction(a))},isArrayLike:function(a){return!!a&&!p.isString(a)&&!p.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(p.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!p.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(String(a))},extend:function(a,b){for(var d=1,g=arguments.length;d<g;d++)p._mixin(a.prototype,arguments[d]);return a},_hitchArgs:function(a,b){var d=p._toArray(arguments,
2),g=p.isString(b);return function(){var e=p._toArray(arguments),n=g?(a||f.global)[b]:b;return n&&n.apply(a||this,d.concat(e))}},hitch:function(a,b){if(2<arguments.length)return p._hitchArgs.apply(f,arguments);b||(b=a,a=null);if(p.isString(b)){a=a||f.global;if(!a[b])throw['lang.hitch: scope["',b,'"] is null (scope\x3d"',a,'")'].join("");return function(){return a[b].apply(a,arguments||[])}}return a?function(){return b.apply(a,arguments||[])}:b},delegate:function(){function a(){}return function(b,
d){a.prototype=b;var g=new a;a.prototype=null;d&&p._mixin(g,d);return g}}(),_toArray:k("ie")?function(){function a(a,b,d){d=d||[];for(b=b||0;b<a.length;b++)d.push(a[b]);return d}return function(b){return(b.item?a:l).apply(this,arguments)}}():l,partial:function(a){return p.hitch.apply(f,[null].concat(p._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||p.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof
RegExp)return new RegExp(a);var b,d,g;if(p.isArray(a))for(b=[],d=0,g=a.length;d<g;++d)d in a&&(b[d]=p.clone(a[d]));else b=a.constructor?new a.constructor:{};return p._mixin(b,a,p.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,b,d){return a.replace(d||e,p.isFunction(b)?b:function(a,d){return p.getObject(d,!1,b)})}};p.mixin(f,p);return p})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],
function(f,k,d){function b(a){return l[a]=new Function("item","index","array",a)}function a(a){var d=!a;return function(g,e,m){var n=0,h=g&&g.length||0,q;h&&"string"==typeof g&&(g=g.split(""));"string"==typeof e&&(e=l[e]||b(e));if(m)for(;n<h;++n){if(q=!e.call(m,g[n],n,g),a^q)return!q}else for(;n<h;++n)if(q=!e(g[n],n,g),a^q)return!q;return d}}function h(a){var b=1,d=0,g=0;a||(b=d=g=-1);return function(m,n,h,q){if(q&&0<b)return p.lastIndexOf(m,n,h);q=m&&m.length||0;var l=a?q+g:d;h===e?h=a?d:q+g:0>h?
(h=q+h,0>h&&(h=d)):h=h>=q?q+g:h;for(q&&"string"==typeof m&&(m=m.split(""));h!=l;h+=b)if(m[h]==n)return h;return-1}}var l={},e,p={every:a(!1),some:a(!0),indexOf:h(!0),lastIndexOf:h(!1),forEach:function(a,d,e){var g=0,m=a&&a.length||0;m&&"string"==typeof a&&(a=a.split(""));"string"==typeof d&&(d=l[d]||b(d));if(e)for(;g<m;++g)d.call(e,a[g],g,a);else for(;g<m;++g)d(a[g],g,a)},map:function(a,d,e,h){var g=0,n=a&&a.length||0;h=new (h||Array)(n);n&&"string"==typeof a&&(a=a.split(""));"string"==typeof d&&
(d=l[d]||b(d));if(e)for(;g<n;++g)h[g]=d.call(e,a[g],g,a);else for(;g<n;++g)h[g]=d(a[g],g,a);return h},filter:function(a,d,e){var g=0,m=a&&a.length||0,n=[],h;m&&"string"==typeof a&&(a=a.split(""));"string"==typeof d&&(d=l[d]||b(d));if(e)for(;g<m;++g)h=a[g],d.call(e,h,g,a)&&n.push(h);else for(;g<m;++g)h=a[g],d(h,g,a)&&n.push(h);return n},clearCache:function(){l={}}};d.mixin(f,p);return p})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(f,k,
d,b,a){var h=0,l=[],e=0;k=function(){h=1;f._postLoad=f.config.afterOnLoad=!0;p()};var p=function(){if(!e){for(e=1;h&&(!b||0==b._Q.length)&&(d.idle?d.idle():1)&&l.length;){var a=l.shift();try{a()}catch(q){if(q.info=q.message,d.signal)d.signal("error",q);else throw q;}}e=0}};d.on&&d.on("idle",p);b&&(b._onQEmpty=p);var g=f.ready=f.addOnLoad=function(b,d,g){var e=a._toArray(arguments);"number"!=typeof b?(g=d,d=b,b=1E3):e.shift();g=g?a.hitch.apply(f,e):function(){d()};g.priority=b;for(e=0;e<l.length&&
b>=l[e].priority;e++);l.splice(e,0,g);p()},n=f.config.addOnLoad;if(n)g[a.isArray(n)?"apply":"call"](f,n);f.config.parseOnLoad&&!f.isAsync&&g(99,function(){f.parser||(f.deprecated("Add explicit require(['dojo/parser']);","","2.0"),d(["dojo/parser"]))});b?b(k):k();return g})},"dojo/domReady":function(){define(["./global","./has"],function(f,k){function d(a){p.push(a);e&&b()}function b(){if(!g){for(g=!0;p.length;)try{p.shift()(a)}catch(v){}g=!1;d._onQEmpty()}}var a=document,h={loaded:1,complete:1},l=
"string"!=typeof a.readyState,e=!!h[a.readyState],p=[],g;d.load=function(a,b,g){d(g)};d._Q=p;d._onQEmpty=function(){};l&&(a.readyState="loading");if(!e){var n=[],t=function(d){d=d||f.event;e||"readystatechange"==d.type&&!h[a.readyState]||(l&&(a.readyState="complete"),e=1,b())},q=function(a,b){a.addEventListener(b,t,!1);p.push(function(){a.removeEventListener(b,t,!1)})};if(!k("dom-addeventlistener")){var q=function(a,b){b="on"+b;a.attachEvent(b,t);p.push(function(){a.detachEvent(b,t)})},m=a.createElement("div");
try{m.doScroll&&null===f.frameElement&&n.push(function(){try{return m.doScroll("left"),1}catch(v){}})}catch(v){}}q(a,"DOMContentLoaded");q(f,"load");"onreadystatechange"in a?q(a,"readystatechange"):l||n.push(function(){return h[a.readyState]});if(n.length){var w=function(){if(!e){for(var a=n.length;a--;)if(n[a]()){t("poller");return}setTimeout(w,30)}};w()}}return d})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(f,k,d){function b(a,b){throw Error("declare"+(b?" "+
b:"")+": "+a);}function a(a,d){for(var g=[],e=[{cls:0,refs:[]}],m={},n=1,h=a.length,q=0,l,p,t,u,w;q<h;++q){(l=a[q])?"[object Function]"!=E.call(l)&&b("mixin #"+q+" is not a callable constructor.",d):b("mixin #"+q+" is unknown. Did you use dojo.require to pull it in?",d);p=l._meta?l._meta.bases:[l];t=0;for(l=p.length-1;0<=l;--l)u=p[l].prototype,u.hasOwnProperty("declaredClass")||(u.declaredClass="uniqName_"+F++),u=u.declaredClass,m.hasOwnProperty(u)||(m[u]={count:0,refs:[],cls:p[l]},++n),u=m[u],t&&
t!==u&&(u.refs.push(t),++t.count),t=u;++t.count;e[0].refs.push(t)}for(;e.length;){t=e.pop();g.push(t.cls);for(--n;w=t.refs,1==w.length;){t=w[0];if(!t||--t.count){t=0;break}g.push(t.cls);--n}if(t)for(q=0,h=w.length;q<h;++q)t=w[q],--t.count||e.push(t)}n&&b("can't build consistent linearization",d);l=a[0];g[0]=l?l._meta&&l===g[g.length-l._meta.bases.length]?l._meta.bases.length:1:0;return g}function h(a,d,g,e){var m,n,h,q,l,p,t=this._inherited=this._inherited||{};"string"===typeof a&&(m=a,a=d,d=g,g=
e);if("function"===typeof a)h=a,a=d,d=g;else try{h=a.callee}catch(P){if(P instanceof TypeError)b("strict mode inherited() requires the caller function to be passed before arguments",this.declaredClass);else throw P;}(m=m||h.nom)||b("can't deduce a name to call inherited()",this.declaredClass);g=e=0;q=this.constructor._meta;e=q.bases;p=t.p;if("constructor"!=m){if(t.c!==h&&(p=0,l=e[0],q=l._meta,q.hidden[m]!==h)){(n=q.chains)&&"string"==typeof n[m]&&b("calling chained method with inherited: "+m,this.declaredClass);
do if(q=l._meta,n=l.prototype,q&&(n[m]===h&&n.hasOwnProperty(m)||q.hidden[m]===h))break;while(l=e[++p]);p=l?p:-1}if(l=e[++p])if(n=l.prototype,l._meta&&n.hasOwnProperty(m))g=n[m];else{h=D[m];do if(n=l.prototype,(g=n[m])&&(l._meta?n.hasOwnProperty(m):g!==h))break;while(l=e[++p])}g=l&&g||D[m]}else{if(t.c!==h&&(p=0,(q=e[0]._meta)&&q.ctor!==h)){for((n=q.chains)&&"manual"===n.constructor||b("calling chained constructor with inherited",this.declaredClass);(l=e[++p])&&(!(q=l._meta)||q.ctor!==h););p=l?p:-1}for(;(l=
e[++p])&&!(g=(q=l._meta)?q.ctor:l););g=l&&g}t.c=g;t.p=p;if(g)return!0===d?g:g.apply(this,d||a)}function l(a,b,d){return"string"===typeof a?"function"===typeof b?this.__inherited(a,b,d,!0):this.__inherited(a,b,!0):"function"===typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function e(a,b,d,g){var e=this.getInherited(a,b,d);if(e)return e.apply(this,g||d||b||a)}function p(a){for(var b=this.constructor._meta.bases,d=0,g=b.length;d<g;++d)if(b[d]===a)return!0;return this instanceof a}function g(a,
b){for(var g in b)"constructor"!=g&&b.hasOwnProperty(g)&&(a[g]=b[g]);if(k("bug-for-in-skips-shadowed"))for(var e=d._extraNames,m=e.length;m;)g=e[--m],"constructor"!=g&&b.hasOwnProperty(g)&&(a[g]=b[g])}function n(a){B.safeMixin(this.prototype,a);return this}function t(a,b){a instanceof Array||"function"===typeof a||(b=a,a=void 0);b=b||{};a=a||[];return B([this].concat(a),b)}function q(a,b){return function(){var d=arguments,g=d,e=d[0],m,n;n=a.length;var h;if(!(this instanceof d.callee))return z(d);
if(b&&(e&&e.preamble||this.preamble))for(h=Array(a.length),h[0]=d,m=0;;){(e=d[0])&&(e=e.preamble)&&(d=e.apply(this,d)||d);e=a[m].prototype;(e=e.hasOwnProperty("preamble")&&e.preamble)&&(d=e.apply(this,d)||d);if(++m==n)break;h[m]=d}for(m=n-1;0<=m;--m)e=a[m],(e=(n=e._meta)?n.ctor:e)&&e.apply(this,h?h[m]:d);(e=this.postscript)&&e.apply(this,g)}}function m(a,b){return function(){var d=arguments,g=d,e=d[0];if(!(this instanceof d.callee))return z(d);b&&(e&&(e=e.preamble)&&(g=e.apply(this,g)||g),(e=this.preamble)&&
e.apply(this,g));a&&a.apply(this,d);(e=this.postscript)&&e.apply(this,d)}}function w(a){return function(){var b=arguments,d=0,g,e;if(!(this instanceof b.callee))return z(b);for(;g=a[d];++d)if(g=(e=g._meta)?e.ctor:g){g.apply(this,b);break}(g=this.postscript)&&g.apply(this,b)}}function v(a,b,d){return function(){var g,e,m=0,n=1;d&&(m=b.length-1,n=-1);for(;g=b[m];m+=n)e=g._meta,(g=(e?e.hidden:g.prototype)[a])&&g.apply(this,arguments)}}function u(a){A.prototype=a.prototype;a=new A;A.prototype=null;return a}
function z(a){var b=a.callee,d=u(b);b.apply(d,a);return d}function B(e,f,z){"string"!=typeof e&&(z=f,f=e,e="");z=z||{};var A,F,I,J,G,C,H,L=1,P=f;"[object Array]"==E.call(f)?(C=a(f,e),I=C[0],L=C.length-I,f=C[L]):(C=[0],f?"[object Function]"==E.call(f)?(I=f._meta,C=C.concat(I?I.bases:f)):b("base class is not a callable constructor.",e):null!==f&&b("unknown base class. Did you use dojo.require to pull it in?",e));if(f)for(F=L-1;;--F){A=u(f);if(!F)break;I=C[F];(I._meta?g:x)(A,I.prototype);J=k("csp-restrictions")?
function(){}:new Function;J.superclass=f;J.prototype=A;f=A.constructor=J}else A={};B.safeMixin(A,z);I=z.constructor;I!==D.constructor&&(I.nom="constructor",A.constructor=I);for(F=L-1;F;--F)(I=C[F]._meta)&&I.chains&&(H=x(H||{},I.chains));A["-chains-"]&&(H=x(H||{},A["-chains-"]));f&&f.prototype&&f.prototype["-chains-"]&&(H=x(H||{},f.prototype["-chains-"]));I=!H||!H.hasOwnProperty("constructor");C[0]=J=H&&"manual"===H.constructor?w(C):1==C.length?m(z.constructor,I):q(C,I);J._meta={bases:C,hidden:z,chains:H,
parents:P,ctor:z.constructor};J.superclass=f&&f.prototype;J.extend=n;J.createSubclass=t;J.prototype=A;A.constructor=J;A.getInherited=l;A.isInstanceOf=p;A.inherited=K;A.__inherited=h;e&&(A.declaredClass=e,d.setObject(e,J));if(H)for(G in H)A[G]&&"string"==typeof H[G]&&"constructor"!=G&&(I=A[G]=v(G,C,"after"===H[G]),I.nom=G);return J}var x=d.mixin,D=Object.prototype,E=D.toString,A,F=0;A=k("csp-restrictions")?function(){}:new Function;var K=f.config.isDebug?e:h;f.safeMixin=B.safeMixin=function(a,b){var g,
e;for(g in b)e=b[g],e===D[g]&&g in D||"constructor"==g||("[object Function]"==E.call(e)&&(e.nom=g),a[g]=e);if(k("bug-for-in-skips-shadowed")&&b)for(var m=d._extraNames,n=m.length;n;)g=m[--n],e=b[g],e===D[g]&&g in D||"constructor"==g||("[object Function]"==E.call(e)&&(e.nom=g),a[g]=e);return a};return f.declare=B})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(f,k,d,b,a,h,l,e){function p(a,d,g,n,q){n=e.hitch(g,
n);if(!a||!a.addEventListener&&!a.attachEvent)return b.after(a||f.global,d,n,!0);"string"==typeof d&&"on"==d.substring(0,2)&&(d=d.substring(2));a||(a=f.global);if(!q)switch(d){case "keypress":d=m;break;case "mouseenter":d=h.enter;break;case "mouseleave":d=h.leave}return k(a,d,n,q)}function g(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}l.add("events-keypress-typed",function(){var a={charCode:0};try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||
a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(u){}return 0==a.charCode&&!l("opera")});var n={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},t=l("mac")?"metaKey":"ctrlKey",q=function(a,b){var d=e.mixin({},a,b);g(d);d.preventDefault=function(){a.preventDefault()};d.stopPropagation=function(){a.stopPropagation()};return d},m;m=l("events-keypress-typed")?function(a,b){var d=k(a,"keydown",function(a){var d=a.keyCode,g=13!=d&&32!=
d&&(27!=d||!l("ie"))&&(48>d||90<d)&&(96>d||111<d)&&(186>d||192<d)&&(219>d||222<d)&&229!=d;if(g||a.ctrlKey){g=g?0:d;if(a.ctrlKey){if(3==d||13==d)return b.call(a.currentTarget,a);g=95<g&&106>g?g-48:!a.shiftKey&&65<=g&&90>=g?g+32:n[g]||g}d=q(a,{type:"keypress",faux:!0,charCode:g});b.call(a.currentTarget,d);if(l("ie"))try{a.keyCode=d.keyCode}catch(A){}}}),g=k(a,"keypress",function(a){var d=a.charCode;a=q(a,{charCode:32<=d?d:0,faux:!0});return b.call(this,a)});return{remove:function(){d.remove();g.remove()}}}:
l("opera")?function(a,b){return k(a,"keypress",function(a){var d=a.which;3==d&&(d=99);d=32>d&&!a.shiftKey?0:d;a.ctrlKey&&!a.shiftKey&&65<=d&&90>=d&&(d+=32);return b.call(this,q(a,{charCode:d}))})}:function(a,b){return k(a,"keypress",function(a){g(a);return b.call(this,a)})};var w={_keypress:m,connect:function(a,b,d,g,e){var m=arguments,n=[],h=0;n.push("string"==typeof m[0]?null:m[h++],m[h++]);var q=m[h+1];n.push("string"==typeof q||"function"==typeof q?m[h++]:null,m[h++]);for(q=m.length;h<q;h++)n.push(m[h]);
return p.apply(this,n)},disconnect:function(a){a&&a.remove()},subscribe:function(a,b,g){return d.subscribe(a,e.hitch(b,g))},publish:function(a,b){return d.publish.apply(d,[a].concat(b))},connectPublisher:function(a,b,d){var g=function(){w.publish(a,arguments)};return d?w.connect(b,d,g):w.connect(b,g)},isCopyKey:function(a){return a[t]}};w.unsubscribe=w.disconnect;e.mixin(f,w);return w})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(f,k,d){function b(a,
b,g,n,h){if(n=b.match(/(.*):(.*)/))return b=n[2],n=n[1],e.selector(n,b).call(h,a,g);d("touch")&&(p.test(b)&&(g=A(g)),d("event-orientationchange")||"orientationchange"!=b||(b="resize",a=window,g=A(g)));m&&(g=m(g));if(a.addEventListener){var q=b in t,l=q?t[b]:b;a.addEventListener(l,g,q);return{remove:function(){a.removeEventListener(l,g,q)}}}if(z&&a.attachEvent)return z(a,"on"+b,g);throw Error("Target must be an event emitter");}function a(){this.cancelable=!1;this.defaultPrevented=!0}function h(){this.bubbles=
!1}var l=window.ScriptEngineMajorVersion;d.add("jscript",l&&l()+ScriptEngineMinorVersion()/10);d.add("event-orientationchange",d("touch")&&!d("android"));d.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);d.add("event-focusin",function(a,b,d){return"onfocusin"in d});d("touch")&&d.add("touch-can-modify-event-delegate",function(){var a=function(){};a.prototype=document.createEvent("MouseEvents");try{var b=new a;b.target=
null;return null===b.target}catch(I){return!1}});var e=function(a,d,g,m){return"function"!=typeof a.on||"function"==typeof d||a.nodeType?e.parse(a,d,g,b,m,this):a.on(d,g)};e.pausable=function(a,b,d,g){var m;a=e(a,b,function(){if(!m)return d.apply(this,arguments)},g);a.pause=function(){m=!0};a.resume=function(){m=!1};return a};e.once=function(a,b,d,g){var m=e(a,b,function(){m.remove();return d.apply(this,arguments)});return m};e.parse=function(a,b,d,g,m,n){var h;if(b.call)return b.call(n,a,d);b instanceof
Array?h=b:-1<b.indexOf(",")&&(h=b.split(/\s*,\s*/));if(h){var q=[];b=0;for(var l;l=h[b++];)q.push(e.parse(a,l,d,g,m,n));q.remove=function(){for(var a=0;a<q.length;a++)q[a].remove()};return q}return g(a,b,d,m,n)};var p=/^touch/;e.matches=function(a,b,d,g,e){e=e&&"function"==typeof e.matches?e:k.query;g=!1!==g;1!=a.nodeType&&(a=a.parentNode);for(;!e.matches(a,b,d);)if(a==d||!1===g||!(a=a.parentNode)||1!=a.nodeType)return!1;return a};e.selector=function(a,b,d){return function(g,m){function n(b){return e.matches(b,
a,g,d,h)}var h="function"==typeof a?{matches:a}:this,q=b.bubble;return q?e(g,q(n),m):e(g,b,function(a){var b=n(a.target);if(b)return a.selectorTarget=b,m.call(b,a)})}};var g=[].slice,n=e.emit=function(b,d,e){var m=g.call(arguments,2),n="on"+d;if("parentNode"in b){var q=m[0]={},l;for(l in e)q[l]=e[l];q.preventDefault=a;q.stopPropagation=h;q.target=b;q.type=d;e=q}do b[n]&&b[n].apply(b,m);while(e&&e.bubbles&&(b=b.parentNode));return e&&e.cancelable&&e},t=d("event-focusin")?{}:{focusin:"focus",focusout:"blur"};
if(!d("event-stopimmediatepropagation"))var q=function(){this.modified=this.immediatelyStopped=!0},m=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=q,a.apply(this,arguments)}};if(d("dom-addeventlistener"))e.emit=function(a,b,d){if(a.dispatchEvent&&document.createEvent){var g=(a.ownerDocument||document).createEvent("HTMLEvents");g.initEvent(b,!!d.bubbles,!!d.cancelable);for(var m in d)m in g||(g[m]=d[m]);return a.dispatchEvent(g)&&g}return n.apply(e,arguments)};
else{e._fixEvent=function(a,b){a||(a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event);if(!a)return a;try{w&&a.type==w.type&&a.srcElement==w.target&&(a=w)}catch(J){}if(!a.target)switch(a.target=a.srcElement,a.currentTarget=b||a.srcElement,"mouseover"==a.type&&(a.relatedTarget=a.fromElement),"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||(a.stopPropagation=B,a.preventDefault=x),a.type){case "keypress":var d="charCode"in a?a.charCode:a.keyCode;10==d?(d=0,a.keyCode=
13):13==d||27==d?d=0:3==d&&(d=99);a.charCode=d;d=a;d.keyChar=d.charCode?String.fromCharCode(d.charCode):"";d.charOrCode=d.keyChar||d.keyCode}return a};var w,v=function(a){this.handle=a};v.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var u=function(a){return function(b){b=e._fixEvent(b,this);var d=a.call(this,b);b.modified&&(w||setTimeout(function(){w=null}),w=b);return d}},z=function(a,b,g){g=u(g);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=
top||5.8>d("jscript"))&&!d("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var e=a[b];if(!e||!e.listeners){var m=e,e=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");e.listeners=[];a[b]=e;e.global=this;m&&e.listeners.push(_dojoIEListeners_.push(m)-1)}e.listeners.push(a=e.global._dojoIEListeners_.push(g)-
1);return new v(a)}return f.after(a,b,g,!0)},B=function(){this.cancelBubble=!0},x=e._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(F){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(d("touch"))var D=function(){},E=window.orientation,A=function(a){return function(b){var g=b.corrected;if(!g){var e=b.type;try{delete b.type}catch(R){}if(b.type){if(d("touch-can-modify-event-delegate"))D.prototype=b,g=new D;else{var g={},m;for(m in b)g[m]=
b[m]}g.preventDefault=function(){b.preventDefault()};g.stopPropagation=function(){b.stopPropagation()}}else g=b,g.type=e;b.corrected=g;if("resize"==e){if(E==window.orientation)return null;E=window.orientation;g.type="orientationchange";return a.call(this,g)}"rotation"in g||(g.rotation=0,g.scale=1);if(window.TouchEvent&&b instanceof TouchEvent){var e=g.changedTouches[0],n;for(n in e)delete g[n],g[n]=e[n]}}return a.call(this,g)}};return e})},"dojo/topic":function(){define(["./Evented"],function(f){var k=
new f;return{publish:function(d,b){return k.emit.apply(k,arguments)},subscribe:function(d,b){return k.on.apply(k,arguments)}}})},"dojo/Evented":function(){define(["./aspect","./on"],function(f,k){function d(){}var b=f.after;d.prototype={on:function(a,d){return k.parse(this,a,d,function(a,e){return b(a,"on"+e,d,!0)})},emit:function(a,b){var d=[this];d.push.apply(d,arguments);return k.emit.apply(k,d)}};return d})},"dojo/aspect":function(){define([],function(){function f(a,b,d,g){var e=a[b],h="around"==
b,q;if(h){var m=d(function(){return e.advice(this,arguments)});q={remove:function(){m&&(m=a=d=null)},advice:function(a,b){return m?m.apply(a,b):e.advice(a,b)}}}else q={remove:function(){if(q.advice){var g=q.previous,e=q.next;e||g?(g?g.next=e:a[b]=e,e&&(e.previous=g)):delete a[b];a=d=q.advice=null}},id:a.nextId++,advice:d,receiveArguments:g};if(e&&!h)if("after"==b){for(;e.next&&(e=e.next););e.next=q;q.previous=e}else"before"==b&&(a[b]=q,q.next=e,e.previous=q);else a[b]=q;return q}function k(a){return function(b,
h,g,n){var e=b[h],q;e&&e.target==b||(b[h]=q=function(){for(var a=q.nextId,b=arguments,g=q.before;g;)g.advice&&(b=g.advice.apply(this,b)||b),g=g.next;if(q.around)var e=q.around.advice(this,b);for(g=q.after;g&&g.id<a;){if(g.advice)if(g.receiveArguments)var n=g.advice.apply(this,b),e=n===d?e:n;else e=g.advice.call(this,e,b);g=g.next}return e},e&&(q.around={advice:function(a,b){return e.apply(a,b)}}),q.target=b,q.nextId=q.nextId||0);b=f(q||e,a,g,n);g=null;return b}}var d,b=k("after"),a=k("before"),h=
k("around");return{before:a,around:h,after:b}})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(f,k,d,b){if(k._fixEvent){var a=k._fixEvent;k._fixEvent=function(d,e){(d=a(d,e))&&b.normalizeEvent(d);return d}}var h={fix:function(a,b){return k._fixEvent?k._fixEvent(a,b):a},stop:function(a){d("dom-addeventlistener")||a&&a.preventDefault?(a.preventDefault(),a.stopPropagation()):(a=a||window.event,a.cancelBubble=!0,k._preventDefault.call(a))}};f.fixEvent=h.fix;
f.stopEvent=h.stop;return h})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(f,k,d,b){function a(a,b,d,g,e,h){h=h||"px";a=a.style;isNaN(b)||(a.left=b+h);isNaN(d)||(a.top=d+h);0<=g&&(a.width=g+h);0<=e&&(a.height=e+h)}function h(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function l(a){return"border-box"==p.boxModel||"table"==a.tagName.toLowerCase()||h(a)}function e(a){var b=
{x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0},d;try{d=a.getBoundingClientRect()}catch(m){return b}return"undefined"===typeof d.left?b:d}var p={boxModel:"content-box"};f("ie")&&(p.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");p.getPadExtents=function(a,g){a=d.byId(a);var e=g||b.getComputedStyle(a),m=b.toPixelValue,n=m(a,e.paddingLeft),h=m(a,e.paddingTop),l=m(a,e.paddingRight),e=m(a,e.paddingBottom);return{l:n,t:h,r:l,b:e,w:n+l,h:h+e}};p.getBorderExtents=function(a,
g){a=d.byId(a);var e=b.toPixelValue,m=g||b.getComputedStyle(a),n="none"!=m.borderLeftStyle?e(a,m.borderLeftWidth):0,h="none"!=m.borderTopStyle?e(a,m.borderTopWidth):0,l="none"!=m.borderRightStyle?e(a,m.borderRightWidth):0,e="none"!=m.borderBottomStyle?e(a,m.borderBottomWidth):0;return{l:n,t:h,r:l,b:e,w:n+l,h:h+e}};p.getPadBorderExtents=function(a,g){a=d.byId(a);var e=g||b.getComputedStyle(a),m=p.getPadExtents(a,e),e=p.getBorderExtents(a,e);return{l:m.l+e.l,t:m.t+e.t,r:m.r+e.r,b:m.b+e.b,w:m.w+e.w,
h:m.h+e.h}};p.getMarginExtents=function(a,g){a=d.byId(a);var e=g||b.getComputedStyle(a),m=b.toPixelValue,h=m(a,e.marginLeft),n=m(a,e.marginTop),l=m(a,e.marginRight),e=m(a,e.marginBottom);return{l:h,t:n,r:l,b:e,w:h+l,h:n+e}};p.getMarginBox=function(a,g){a=d.byId(a);var e=g||b.getComputedStyle(a),e=p.getMarginExtents(a,e),m=a.offsetLeft-e.l,h=a.offsetTop-e.t,n=a.parentNode,l=b.toPixelValue;8==f("ie")&&!f("quirks")&&n&&(n=b.getComputedStyle(n),m-="none"!=n.borderLeftStyle?l(a,n.borderLeftWidth):0,h-=
"none"!=n.borderTopStyle?l(a,n.borderTopWidth):0);return{l:m,t:h,w:a.offsetWidth+e.w,h:a.offsetHeight+e.h}};p.getContentBox=function(a,g){a=d.byId(a);var e=g||b.getComputedStyle(a),m=a.clientWidth,h,n=p.getPadExtents(a,e);h=p.getBorderExtents(a,e);var e=a.offsetLeft+n.l+h.l,l=a.offsetTop+n.t+h.t;m?h=a.clientHeight:(m=a.offsetWidth-h.w,h=a.offsetHeight-h.h);if(8==f("ie")&&!f("quirks")){var t=a.parentNode,k=b.toPixelValue;t&&(t=b.getComputedStyle(t),e-="none"!=t.borderLeftStyle?k(a,t.borderLeftWidth):
0,l-="none"!=t.borderTopStyle?k(a,t.borderTopWidth):0)}return{l:e,t:l,w:m-n.w,h:h-n.h}};p.setContentSize=function(b,g,e){b=d.byId(b);var m=g.w;g=g.h;l(b)&&(e=p.getPadBorderExtents(b,e),0<=m&&(m+=e.w),0<=g&&(g+=e.h));a(b,NaN,NaN,m,g)};var g={l:0,t:0,w:0,h:0};p.setMarginBox=function(e,t,q){e=d.byId(e);var m=q||b.getComputedStyle(e);q=t.w;var n=t.h,k=l(e)?g:p.getPadBorderExtents(e,m),m=p.getMarginExtents(e,m);if(f("webkit")&&h(e)){var u=e.style;0<=q&&!u.width&&(u.width="4px");0<=n&&!u.height&&(u.height=
"4px")}0<=q&&(q=Math.max(q-k.w-m.w,0));0<=n&&(n=Math.max(n-k.h-m.h,0));a(e,t.l,t.t,q,n)};p.isBodyLtr=function(a){a=a||k.doc;return"ltr"==(k.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};p.docScroll=function(a){a=a||k.doc;var b=a.parentWindow||a.defaultView;return"pageXOffset"in b?{x:b.pageXOffset,y:b.pageYOffset}:(b=f("quirks")?k.body(a):a.documentElement)&&{x:p.fixIeBiDiScrollLeft(b.scrollLeft||0,a),y:b.scrollTop||0}};p.getIeDocumentElementOffset=function(a){return{x:0,y:0}};p.fixIeBiDiScrollLeft=
function(a,b){b=b||k.doc;var d=f("ie");if(d&&!p.isBodyLtr(b)){var g=f("quirks"),e=g?k.body(b):b.documentElement,h=k.global;6==d&&!g&&h.frameElement&&e.scrollHeight>e.clientHeight&&(a+=e.clientLeft);return 8>d||g?a+e.clientWidth-e.scrollWidth:-a}return a};p.position=function(a,b){a=d.byId(a);var g=k.body(a.ownerDocument),m=e(a),m={x:m.left,y:m.top,w:m.right-m.left,h:m.bottom-m.top};9>f("ie")&&(m.x-=f("quirks")?g.clientLeft+g.offsetLeft:0,m.y-=f("quirks")?g.clientTop+g.offsetTop:0);b&&(g=p.docScroll(a.ownerDocument),
m.x+=g.x,m.y+=g.y);return m};p.getMarginSize=function(a,g){a=d.byId(a);var h=p.getMarginExtents(a,g||b.getComputedStyle(a)),m=e(a);return{w:m.right-m.left+h.w,h:m.bottom-m.top+h.h}};p.normalizeEvent=function(a){"layerX"in a||(a.layerX=a.offsetX,a.layerY=a.offsetY);if(!("pageX"in a)){var b=a.target,b=b&&b.ownerDocument||document,d=f("quirks")?b.body:b.documentElement;a.pageX=a.clientX+p.fixIeBiDiScrollLeft(d.scrollLeft||0,b);a.pageY=a.clientY+(d.scrollTop||0)}};return p})},"dojo/_base/window":function(){define(["./kernel",
"./lang","../sniff"],function(f,k,d){var b={global:f.global,doc:f.global.document||null,body:function(a){a=a||f.doc;return a.body||a.getElementsByTagName("body")[0]},setContext:function(a,d){f.global=b.global=a;f.doc=b.doc=d},withGlobal:function(a,d,l,e){var h=f.global;try{return f.global=b.global=a,b.withDoc.call(null,a.document,d,l,e)}finally{f.global=b.global=h}},withDoc:function(a,h,l,e){var p=b.doc,g=d("quirks"),n=d("ie"),t,q,m;try{return f.doc=b.doc=a,f.isQuirks=d.add("quirks","BackCompat"==
f.doc.compatMode,!0,!0),d("ie")&&(m=a.parentWindow)&&m.navigator&&(t=parseFloat(m.navigator.appVersion.split("MSIE ")[1])||void 0,(q=a.documentMode)&&5!=q&&Math.floor(t)!=q&&(t=q),f.isIE=d.add("ie",t,!0,!0)),l&&"string"==typeof h&&(h=l[h]),h.apply(l,e||[])}finally{f.doc=b.doc=p,f.isQuirks=d.add("quirks",g,!0,!0),f.isIE=d.add("ie",n,!0,!0)}}};k.mixin(f,b);return b})},"dojo/dom":function(){define(["./sniff","./_base/window","./_base/kernel"],function(f,k,d){if(7>=f("ie"))try{document.execCommand("BackgroundImageCache",
!1,!0)}catch(h){}var b={};f("ie")?b.byId=function(a,b){if("string"!=typeof a)return a||null;var d=b||k.doc;if(!d||!d.getElementById)return null;var h=a&&d.getElementById(a);if(!h||h.attributes.id.value!=a&&h.id!=a){d=d.all[a];if(!d||d.nodeName)d=[d];for(var g=0;h=d[g++];)if(h.attributes&&h.attributes.id&&h.attributes.id.value==a||h.id==a)return h}else return h;return null}:b.byId=function(a,b){return("string"==typeof a?(b||k.doc).getElementById(a):a)||null};d=d.global.document||null;f.add("dom-contains",
!(!d||!d.contains));b.isDescendant=f("dom-contains")?function(a,d){return!(!(d=b.byId(d))||!d.contains(b.byId(a)))}:function(a,d){try{for(a=b.byId(a),d=b.byId(d);a;){if(a==d)return!0;a=a.parentNode}}catch(e){}return!1};f.add("css-user-select",function(a,b,d){if(!d)return!1;a=d.style;b=["Khtml","O","Moz","Webkit"];d=b.length;var e="userSelect";do if("undefined"!==typeof a[e])return e;while(d--&&(e=b[d]+"UserSelect"));return!1});var a=f("css-user-select");b.setSelectable=a?function(d,l){b.byId(d).style[a]=
l?"":"none"}:function(a,d){a=b.byId(a);var e=a.getElementsByTagName("*"),h=e.length;if(d)for(a.removeAttribute("unselectable");h--;)e[h].removeAttribute("unselectable");else for(a.setAttribute("unselectable","on");h--;)e[h].setAttribute("unselectable","on")};return b})},"dojo/dom-style":function(){define(["./sniff","./dom","./_base/window"],function(f,k,d){function b(a,b,d){b=b.toLowerCase();if("auto"==d){if("height"==b)return a.offsetHeight;if("width"==b)return a.offsetWidth}if("fontweight"==b)switch(d){case 700:return"bold";
default:return"normal"}b in n||(n[b]=t.test(b));return n[b]?l(a,d):d}var a,h={};a=f("webkit")?function(a){var b;if(1==a.nodeType){var d=a.ownerDocument.defaultView;b=d.getComputedStyle(a,null);!b&&a.style&&(a.style.display="",b=d.getComputedStyle(a,null))}return b||{}}:f("ie")&&(9>f("ie")||f("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){if(1===a.nodeType){var b=a.ownerDocument.defaultView;return(b.opener?b:d.global.window).getComputedStyle(a,null)}return{}};
h.getComputedStyle=a;var l;l=f("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var d=a.style,g=a.runtimeStyle,e=d.left,m=g.left;g.left=a.currentStyle.left;try{d.left=b,b=d.pixelLeft}catch(x){b=0}d.left=e;g.left=m;return b}:function(a,b){return parseFloat(b)||0};h.toPixelValue=l;var e=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(v){return b?{}:null}},p=9>f("ie")||10>f("ie")&&f("quirks")?function(a){try{return e(a).Opacity/
100}catch(w){return 1}}:function(b){return a(b).opacity},g=9>f("ie")||10>f("ie")&&f("quirks")?function(a,b){""===b&&(b=1);var d=100*b;1===b?(a.style.zoom="",e(a)&&(a.style.filter=a.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(a.style.zoom=1,e(a)?e(a,1).Opacity=d:a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+d+")",e(a,1).Enabled=!0);if("tr"==a.tagName.toLowerCase())for(d=a.firstChild;d;d=d.nextSibling)"td"==d.tagName.toLowerCase()&&g(d,
b);return b}:function(a,b){return a.style.opacity=b},n={left:!0,top:!0},t=/margin|padding|width|height|max|min|offset/,q={cssFloat:1,styleFloat:1,"float":1};h.get=function(a,d){var g=k.byId(a),e=arguments.length;if(2==e&&"opacity"==d)return p(g);d=q[d]?"cssFloat"in g.style?"cssFloat":"styleFloat":d;var m=h.getComputedStyle(g);return 1==e?m:b(g,d,m[d]||g.style[d])};h.set=function(a,b,d){var e=k.byId(a),m=arguments.length,n="opacity"==b;b=q[b]?"cssFloat"in e.style?"cssFloat":"styleFloat":b;if(3==m)return n?
g(e,d):e.style[b]=d;for(var l in b)h.set(a,l,b[l]);return h.getComputedStyle(e)};return h})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(f,k,d,b,a){function h(a,d){var e=function(g,e){return k(g,a,function(a){if(d)return d(a,e);if(!b.isDescendant(a.relatedTarget,g))return e.call(this,a)})};e.bubble=function(b){return h(a,function(a,d){var g=b(a.target),e=a.relatedTarget;if(g&&g!=(e&&1==e.nodeType&&b(e)))return d.call(g,a)})};return e}d.add("dom-quirks",
a.doc&&"BackCompat"==a.doc.compatMode);d.add("events-mouseenter",a.doc&&"onmouseenter"in a.doc.createElement("div"));d.add("events-mousewheel",a.doc&&"onmousewheel"in a.doc);a=d("dom-quirks")&&d("ie")||!d("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(a,b){return a.button&b},isLeft:function(a){return a.button&1},isMiddle:function(a){return a.button&4},isRight:function(a){return a.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(a,b){return a.button==b},isLeft:function(a){return 0==
a.button},isMiddle:function(a){return 1==a.button},isRight:function(a){return 2==a.button}};f.mouseButtons=a;f=d("events-mousewheel")?"mousewheel":function(a,b){return k(a,"DOMMouseScroll",function(a){a.wheelDelta=-a.detail;b.call(this,a)})};return{_eventHandler:h,enter:h("mouseover"),leave:h("mouseout"),wheel:f,isLeft:a.isLeft,isMiddle:a.isMiddle,isRight:a.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(f,k,d){f._name="browser";k.mixin(f,{isBrowser:!0,isFF:d("ff"),
isIE:d("ie"),isKhtml:d("khtml"),isWebKit:d("webkit"),isMozilla:d("mozilla"),isMoz:d("mozilla"),isOpera:d("opera"),isSafari:d("safari"),isChrome:d("chrome"),isMac:d("mac"),isIos:d("ios"),isAndroid:d("android"),isWii:d("wii"),isQuirks:d("quirks"),isAir:d("air")});return d})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(f,k){return f.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:k("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,
END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,
UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:k("mac")&&!k("air")?k("safari")?91:224:17}})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(f,k,d,b,a,h,l){var e=function(){},p=Object.freeze||function(){},g=f.Deferred=function(n){function l(a){if(f)throw Error("This deferred has already been resolved");m=a;f=!0;q()}function q(){for(var b;!b&&x;){var d=x;x=x.next;if(b=d.progress==e)f=!1;
var g=z?d.error:d.resolved;a("config-useDeferredInstrumentation")&&z&&k.instrumentRejected&&k.instrumentRejected(m,!!g);if(g)try{var n=g(m);n&&"function"===typeof n.then?n.then(h.hitch(d.deferred,"resolve"),h.hitch(d.deferred,"reject"),h.hitch(d.deferred,"progress")):(g=b&&void 0===n,b&&!g&&(z=n instanceof Error),d.deferred[g&&z?"reject":"resolve"](g?m:n))}catch(J){d.deferred.reject(J)}else z?d.deferred.reject(m):d.deferred.resolve(m)}}var m,f,v,u,z,B,x,D=this.promise=new d;this.isResolved=D.isResolved=
function(){return 0==u};this.isRejected=D.isRejected=function(){return 1==u};this.isFulfilled=D.isFulfilled=function(){return 0<=u};this.isCanceled=D.isCanceled=function(){return v};this.resolve=this.callback=function(a){this.fired=u=0;this.results=[a,null];l(a)};this.reject=this.errback=function(b){z=!0;this.fired=u=1;a("config-useDeferredInstrumentation")&&k.instrumentRejected&&k.instrumentRejected(b,!!x);l(b);this.results=[null,b]};this.progress=function(a){for(var b=x;b;){var d=b.progress;d&&
d(a);b=b.next}};this.addCallbacks=function(a,b){this.then(a,b,e);return this};D.then=this.then=function(a,b,d){var m=d==e?this:new g(D.cancel);a={resolved:a,error:b,progress:d,deferred:m};x?B=B.next=a:x=B=a;f&&q();return m.promise};var E=this;D.cancel=this.cancel=function(){if(!f){var a=n&&n(E);f||(a instanceof Error||(a=new b(a)),a.log=!1,E.reject(a))}v=!0};p(D)};h.extend(g,{addCallback:function(a){return this.addCallbacks(h.hitch.apply(f,arguments))},addErrback:function(a){return this.addCallbacks(null,
h.hitch.apply(f,arguments))},addBoth:function(a){var b=h.hitch.apply(f,arguments);return this.addCallbacks(b,b)},fired:-1});g.when=f.when=l;return g})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(f,k,d,b,a){var h=Object.freeze||function(){},l=function(a,b,d,g,h){2===b&&n.instrumentRejected&&0===a.length&&n.instrumentRejected(d,!1,g,h);for(h=0;h<a.length;h++)e(a[h],b,d,g)},e=function(a,b,d,e){var m=a[b],
h=a.deferred;if(m)try{var q=m(d);if(0===b)"undefined"!==typeof q&&g(h,b,q);else{if(q&&"function"===typeof q.then){a.cancel=q.cancel;q.then(p(h,1),p(h,2),p(h,0));return}g(h,1,q)}}catch(B){g(h,2,B)}else g(h,b,d);2===b&&n.instrumentRejected&&n.instrumentRejected(d,!!m,e,h.promise)},p=function(a,b){return function(d){g(a,b,d)}},g=function(a,b,d){if(!a.isCanceled())switch(b){case 0:a.progress(d);break;case 1:a.resolve(d);break;case 2:a.reject(d)}},n=function(a){var g=this.promise=new b,m=this,p,t,u,f=
!1,k=[];Error.captureStackTrace&&(Error.captureStackTrace(m,n),Error.captureStackTrace(g,n));this.isResolved=g.isResolved=function(){return 1===p};this.isRejected=g.isRejected=function(){return 2===p};this.isFulfilled=g.isFulfilled=function(){return!!p};this.isCanceled=g.isCanceled=function(){return f};this.progress=function(a,b){if(p){if(!0===b)throw Error("This deferred has already been fulfilled.");return g}l(k,0,a,null,m);return g};this.resolve=function(a,b){if(p){if(!0===b)throw Error("This deferred has already been fulfilled.");
return g}l(k,p=1,t=a,null,m);k=null;return g};var x=this.reject=function(a,b){if(p){if(!0===b)throw Error("This deferred has already been fulfilled.");return g}Error.captureStackTrace&&Error.captureStackTrace(u={},x);l(k,p=2,t=a,u,m);k=null;return g};this.then=g.then=function(a,b,d){var m=[d,a,b];m.cancel=g.cancel;m.deferred=new n(function(a){return m.cancel&&m.cancel(a)});p&&!k?e(m,p,t,u):k.push(m);return m.deferred.promise};this.cancel=g.cancel=function(b,g){if(!p){if(a){var e=a(b);b="undefined"===
typeof e?b:e}f=!0;if(!p)return"undefined"===typeof b&&(b=new d),x(b),b;if(2===p&&t===b)return b}else if(!0===g)throw Error("This deferred has already been fulfilled.");};h(g)};n.prototype.toString=function(){return"[object Deferred]"};a&&a(n);return n})},"dojo/errors/CancelError":function(){define(["./create"],function(f){return f("CancelError",null,null,{dojoType:"cancel",log:!1})})},"dojo/errors/create":function(){define(["../_base/lang"],function(f){return function(k,d,b,a){b=b||Error;var h=function(a){if(b===
Error){Error.captureStackTrace&&Error.captureStackTrace(this,h);var e=Error.call(this,a),l;for(l in e)e.hasOwnProperty(l)&&(this[l]=e[l]);this.message=a;this.stack=e.stack}else b.apply(this,arguments);d&&d.apply(this,arguments)};h.prototype=f.delegate(b.prototype,a);h.prototype.name=k;return h.prototype.constructor=h}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(f){function k(){throw new TypeError("abstract");}return f.extend(function(){},{then:function(d,b,a){k()},cancel:function(d,
b){k()},isResolved:function(){k()},isRejected:function(){k()},isFulfilled:function(){k()},isCanceled:function(){k()},"finally":function(d){return this.then(function(b){var a=d();return a&&"function"===typeof a.then?a.then(function(){return b}):b},function(b){var a=d();if(a&&"function"===typeof a.then)return a.then(function(){throw b;});throw b;})},always:function(d){return this.then(d,d)},"catch":function(d){return this.then(null,d)},otherwise:function(d){return this.then(null,d)},trace:function(){return this},
traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(f,k,d,b){function a(a,b,d){if(!a||!1!==a.log){var g="";a&&a.stack&&(g+=a.stack);b&&b.stack&&(g+="\n    ----------------------------------------\n    rejected"+b.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));d&&d.stack&&(g+="\n    ----------------------------------------\n"+d.stack);window.ws_ErrLgr&&
window.ws_ErrLgr_config&&window.ws_ErrLgr_config.ReportDfdErrors&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"Exception in deferred promise: ",a)}}function h(b,d,g,e){d||a(b,g,e)}function l(a,d,m,h){b.some(p,function(b){if(b.error===a)return d&&(b.handled=!0),!0})||p.push({error:a,rejection:m,handled:d,deferred:h,timestamp:(new Date).getTime()});g||(g=setTimeout(e,n))}function e(){var d=(new Date).getTime(),h=d-n;p=b.filter(p,function(b){return b.timestamp<h?(b.handled||a(b.error,b.rejection,b.deferred),
!1):!0});g=p.length?setTimeout(e,p[0].timestamp+n-d):!1}k.add("config-useDeferredInstrumentation","report-unhandled-rejections");var p=[],g=!1,n=1E3;return function(a){var b=k("config-useDeferredInstrumentation");if(b){f.on("resolved",d.hitch(console,"log","resolved"));f.on("rejected",d.hitch(console,"log","rejected"));f.on("progress",d.hitch(console,"log","progress"));var g=[];"string"===typeof b&&(g=b.split(","),b=g.shift());if("report-rejections"===b)a.instrumentRejected=h;else if("report-unhandled-rejections"===
b||!0===b||1===b)a.instrumentRejected=l,n=parseInt(g[0],10)||n;else throw Error("Unsupported instrumentation usage \x3c"+b+"\x3e");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(f,k,d){function b(b){setTimeout(function(){h.apply(a,b)},0)}var a=new d,h=a.emit;a.emit=null;k.prototype.trace=function(){var a=f._toArray(arguments);this.then(function(d){b(["resolved",d].concat(a))},function(d){b(["rejected",d].concat(a))},function(d){b(["progress",d].concat(a))});
return this};k.prototype.traceRejected=function(){var a=f._toArray(arguments);this.otherwise(function(d){b(["rejected",d].concat(a))});return this};return a})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(f,k){return function(d,b,a,h){var l=d&&"function"===typeof d.then,e=l&&d instanceof k;if(!l)return 1<arguments.length?b?b(d):d:(new f).resolve(d);e||(l=new f(d.cancel),d.then(l.resolve,l.reject,l.progress),d=l.promise);return b||a||h?d.then(b,a,h):d}})},"dojo/_base/json":function(){define(["./kernel",
"../json"],function(f,k){f.fromJson=function(d){return eval("("+d+")")};f._escapeString=k.stringify;f.toJsonIndentStr="\t";f.toJson=function(d,b){return k.stringify(d,function(a,b){if(b){var d=b.__json__||b.json;if("function"==typeof d)return d.call(b)}return b},b&&f.toJsonIndentStr)};return f})},"dojo/json":function(){define(["./has"],function(f){var k="undefined"!=typeof JSON;f.add("json-parse",k);f.add("json-stringify",k&&'{"a":1}'==JSON.stringify({a:0},function(b,a){return a||1}));if(f("json-stringify"))return JSON;
var d=function(b){return('"'+b.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:f("json-parse")?JSON.parse:function(b,a){if(a&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(b))throw new SyntaxError("Invalid characters in JSON");return eval("("+b+")")},stringify:function(b,a,h){function l(b,g,n){a&&(b=a(n,b));var p;p=typeof b;if("number"==
p)return isFinite(b)?b+"":"null";if("boolean"==p)return b+"";if(null===b)return"null";if("string"==typeof b)return d(b);if("function"==p||"undefined"==p)return e;if("function"==typeof b.toJSON)return l(b.toJSON(n),g,n);if(b instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,d,g){a=b["getUTC"+d]()+(g?1:0);return 10>a?"0"+a:a});if(b.valueOf()!==b)return l(b.valueOf(),g,n);var q=h?g+h:"",m=h?" ":"",f=h?"\n":"";if(b instanceof Array){var m=
b.length,k=[];for(n=0;n<m;n++)p=l(b[n],q,n),"string"!=typeof p&&(p="null"),k.push(f+q+p);return"["+k.join(",")+f+g+"]"}k=[];for(n in b){var u;if(b.hasOwnProperty(n)){if("number"==typeof n)u='"'+n+'"';else if("string"==typeof n)u=d(n);else continue;p=l(b[n],q,n);"string"==typeof p&&k.push(f+q+u+":"+m+p)}}return"{"+k.join(",")+f+g+"}"}var e;"string"==typeof a&&(h=a,a=null);return l(b,"","")}}})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(f,k,d,b){var a=
f.Color=function(a){a&&this.setColor(a)};a.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:b.transparentColor||[0,0,0,0]};k.extend(a,{r:255,g:255,b:255,a:1,_set:function(a,b,d,p){this.r=a;this.g=b;this.b=d;this.a=p},setColor:function(b){k.isString(b)?a.fromString(b,
this):k.isArray(b)?a.fromArray(b,this):(this._set(b.r,b.g,b.b,b.a),b instanceof a||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+d.map(["r","g","b"],function(a){a=this[a].toString(16);return 2>a.length?"0"+a:a},this).join("")},toCss:function(a){var b=this.r+", "+this.g+", "+this.b;return(a?"rgba("+b+", "+this.a:"rgb("+b)+")"},toString:function(){return this.toCss(!0)}});
a.blendColors=f.blendColors=function(b,d,e,p){p=p||new a;p.r=Math.round(b.r+(d.r-b.r)*e);p.g=Math.round(b.g+(d.g-b.g)*e);p.b=Math.round(b.b+(d.b-b.b)*e);p.a=b.a+(d.a-b.a)*e;return p.sanitize()};a.fromRgb=f.colorFromRgb=function(b,d){var e=b.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return e&&a.fromArray(e[1].split(/\s*,\s*/),d)};a.fromHex=f.colorFromHex=function(b,l){var e=l||new a,h=4==b.length?4:8,g=(1<<h)-1;b=Number("0x"+b.substr(1));if(isNaN(b))return null;d.forEach(["b","g","r"],function(a){var d=
b&g;b>>=h;e[a]=4==h?17*d:d});e.a=1;return e};a.fromArray=f.colorFromArray=function(b,d){var e=d||new a;e._set(Number(b[0]),Number(b[1]),Number(b[2]),Number(b[3]));isNaN(e.a)&&(e.a=1);return e.sanitize()};a.fromString=f.colorFromString=function(b,d){var e=a.named[b];return e&&a.fromArray(e,d)||a.fromRgb(b,d)||a.fromHex(b,d)};return a})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),
function(f){return f})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(f,k,d){var b=window,a={addOnWindowUnload:function(a,l){f.windowUnloaded||d(b,"unload",f.windowUnloaded=function(){});d(b,"unload",k.hitch(a,l))},addOnUnload:function(a,l){d(b,"beforeunload",k.hitch(a,l))}};f.addOnWindowUnload=a.addOnWindowUnload;f.addOnUnload=a.addOnUnload;return a})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),
function(f,k,d,b,a,h,l,e){f.byId=k.byId;f.isDescendant=k.isDescendant;f.setSelectable=k.setSelectable;f.getAttr=b.get;f.setAttr=b.set;f.hasAttr=b.has;f.removeAttr=b.remove;f.getNodeProp=b.getNodeProp;f.attr=function(a,d,e){return 2==arguments.length?b["string"==typeof d?"get":"set"](a,d):b.set(a,d,e)};f.hasClass=h.contains;f.addClass=h.add;f.removeClass=h.remove;f.toggleClass=h.toggle;f.replaceClass=h.replace;f._toDom=f.toDom=l.toDom;f.place=l.place;f.create=l.create;f.empty=function(a){l.empty(a)};
f._destroyElement=f.destroy=function(a){l.destroy(a)};f._getPadExtents=f.getPadExtents=e.getPadExtents;f._getBorderExtents=f.getBorderExtents=e.getBorderExtents;f._getPadBorderExtents=f.getPadBorderExtents=e.getPadBorderExtents;f._getMarginExtents=f.getMarginExtents=e.getMarginExtents;f._getMarginSize=f.getMarginSize=e.getMarginSize;f._getMarginBox=f.getMarginBox=e.getMarginBox;f.setMarginBox=e.setMarginBox;f._getContentBox=f.getContentBox=e.getContentBox;f.setContentSize=e.setContentSize;f._isBodyLtr=
f.isBodyLtr=e.isBodyLtr;f._docScroll=f.docScroll=e.docScroll;f._getIeDocumentElementOffset=f.getIeDocumentElementOffset=e.getIeDocumentElementOffset;f._fixIeBiDiScrollLeft=f.fixIeBiDiScrollLeft=e.fixIeBiDiScrollLeft;f.position=e.position;f.marginBox=function(a,b){return b?e.setMarginBox(a,b):e.getMarginBox(a)};f.contentBox=function(a,b){return b?e.setContentSize(a,b):e.getContentBox(a)};f.coords=function(a,b){f.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");a=k.byId(a);var g=
d.getComputedStyle(a),g=e.getMarginBox(a,g),h=e.position(a,b);g.x=h.x;g.y=h.y;return g};f.getProp=a.get;f.setProp=a.set;f.prop=function(b,d,e){return 2==arguments.length?a["string"==typeof d?"get":"set"](b,d):a.set(b,d,e)};f.getStyle=d.get;f.setStyle=d.set;f.getComputedStyle=d.getComputedStyle;f.__toPixelValue=f.toPixelValue=d.toPixelValue;f.style=function(a,b,e){switch(arguments.length){case 1:return d.get(a);case 2:return d["string"==typeof b?"get":"set"](a,b)}return d.set(a,b,e)};return f})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),
function(f,k,d,b,a,h){function l(a,b){var d=a.getAttributeNode&&a.getAttributeNode(b);return!!d&&d.specified}var e={innerHTML:1,textContent:1,className:1,htmlFor:k("ie")?1:0,value:1},p={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};f.has=function(a,d){var g=d.toLowerCase();return!!e[h.names[g]||d]||l(b.byId(a),p[g]||d)};f.get=function(a,n){a=b.byId(a);var g=n.toLowerCase(),q=h.names[g]||n,m=a[q];if(e[q]&&"undefined"!=typeof m)return m;if("textContent"==q)return h.get(a,
q);if("href"!=q&&("boolean"==typeof m||d.isFunction(m)))return m;g=p[g]||n;return l(a,g)?a.getAttribute(g):null};f.set=function(g,n,l){g=b.byId(g);if(2==arguments.length){for(var q in n)f.set(g,q,n[q]);return g}q=n.toLowerCase();var m=h.names[q]||n,t=e[m];if("style"==m&&"string"!=typeof l)return a.set(g,l),g;if(t||"boolean"==typeof l||d.isFunction(l))return h.set(g,n,l);g.setAttribute(p[q]||n,l);return g};f.remove=function(a,d){b.byId(a).removeAttribute(p[d.toLowerCase()]||d)};f.getNodeProp=function(a,
d){a=b.byId(a);var g=d.toLowerCase(),e=h.names[g]||d;if(e in a&&"href"!=e)return a[e];g=p[g]||d;return l(a,g)?a.getAttribute(g):null}})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(f,k,d,b,a,h,l,e){function p(a){var b="";a=a.childNodes;for(var d=0,g;g=a[d];d++)8!=g.nodeType&&(b=1==g.nodeType?b+p(g):b+g.nodeValue);return b}var g={},n=1,t=k._scopeName+"attrid";d.add("dom-textContent",function(a,
b,d){return"textContent"in d});f.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};f.get=function(b,g){b=a.byId(b);var e=g.toLowerCase(),e=f.names[e]||g;return"textContent"!=e||d("dom-textContent")?b[e]:p(b)};f.set=function(q,m,p){q=a.byId(q);if(2==arguments.length&&"string"!=typeof m){for(var k in m)f.set(q,k,m[k]);return q}k=m.toLowerCase();k=f.names[k]||
m;if("style"==k&&"string"!=typeof p)return h.set(q,p),q;if("innerHTML"==k)return d("ie")&&q.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(l.empty(q),q.appendChild(l.toDom(p,q.ownerDocument))):q[k]=p,q;if("textContent"==k&&!d("dom-textContent"))return l.empty(q),q.appendChild(q.ownerDocument.createTextNode(p)),q;if(b.isFunction(p)){var u=q[t];u||(u=n++,q[t]=u);g[u]||(g[u]={});var w=g[u][k];if(w)e.disconnect(w);else try{delete q[k]}catch(B){}p?g[u][k]=e.connect(q,
k,p):q[k]=null;return q}q[k]=p;return q}})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(f,k,d,b,a,h){function l(a,b){var d=b.parentNode;d&&d.insertBefore(a,b)}function e(a){if("innerHTML"in a)try{a.innerHTML="";return}catch(x){}for(var b;b=a.lastChild;)a.removeChild(b)}var p={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],
caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},g=/<\s*([\w\:]+)/,n={},t=0,q="__"+k._scopeName+"ToDomId",m;for(m in p)p.hasOwnProperty(m)&&(k=p[m],k.pre="option"==m?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+k.join("\x3e\x3c")+"\x3e",k.post="\x3c/"+k.reverse().join("\x3e\x3c/")+"\x3e");var w;8>=d("ie")&&(w=function(a){a.__dojo_html5_tested="yes";var b=v("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},a.body);1!==b.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,
function(b){a.createElement(b)});u(b)});f.toDom=function(a,e){e=e||b.doc;var m=e[q];m||(e[q]=m=++t+"",n[m]=e.createElement("div"));8>=d("ie")&&!e.__dojo_html5_tested&&e.body&&w(e);a+="";var h=a.match(g),l=h?h[1].toLowerCase():"",m=n[m];if(h&&p[l])for(h=p[l],m.innerHTML=h.pre+a+h.post,h=h.length;h;--h)m=m.firstChild;else m.innerHTML=a;if(1==m.childNodes.length)return m.removeChild(m.firstChild);for(l=e.createDocumentFragment();h=m.firstChild;)l.appendChild(h);return l};f.place=function(b,d,g){d=a.byId(d);
"string"==typeof b&&(b=/^\s*</.test(b)?f.toDom(b,d.ownerDocument):a.byId(b));if("number"==typeof g){var e=d.childNodes;!e.length||e.length<=g?d.appendChild(b):l(b,e[0>g?0:g])}else switch(g){case "before":l(b,d);break;case "after":g=b;(e=d.parentNode)&&(e.lastChild==d?e.appendChild(g):e.insertBefore(g,d.nextSibling));break;case "replace":d.parentNode.replaceChild(b,d);break;case "only":f.empty(d);d.appendChild(b);break;case "first":if(d.firstChild){l(b,d.firstChild);break}default:d.appendChild(b)}return b};
var v=f.create=function(d,g,e,m){var n=b.doc;e&&(e=a.byId(e),n=e.ownerDocument);"string"==typeof d&&(d=n.createElement(d));g&&h.set(d,g);e&&f.place(d,e,m);return d};f.empty=function(b){e(a.byId(b))};var u=f.destroy=function(b){if(b=a.byId(b)){var g=b;b=b.parentNode;g.firstChild&&e(g);b&&(d("ie")&&b.canHaveChildren&&"removeNode"in g?g.removeNode(!1):b.removeChild(g))}}})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(f,k,d){function b(a){if("string"==typeof a||
a instanceof String){if(a&&!h.test(a))return l[0]=a,l;a=a.split(h);a.length&&!a[0]&&a.shift();a.length&&!a[a.length-1]&&a.pop();return a}return a?k.filter(a,function(a){return a}):[]}var a,h=/\s+/,l=[""],e={};return a={contains:function(a,b){return 0<=(" "+d.byId(a).className+" ").indexOf(" "+b+" ")},add:function(a,g){a=d.byId(a);g=b(g);var e=a.className,h,e=e?" "+e+" ":" ";h=e.length;for(var l=0,m=g.length,p;l<m;++l)(p=g[l])&&0>e.indexOf(" "+p+" ")&&(e+=p+" ");h<e.length&&(a.className=e.substr(1,
e.length-2))},remove:function(a,g){a=d.byId(a);var e;if(void 0!==g){g=b(g);e=" "+a.className+" ";for(var h=0,l=g.length;h<l;++h)e=e.replace(" "+g[h]+" "," ");e=f.trim(e)}else e="";a.className!=e&&(a.className=e)},replace:function(b,g,h){b=d.byId(b);e.className=b.className;a.remove(e,h);a.add(e,g);b.className!==e.className&&(b.className=e.className)},toggle:function(e,g,h){e=d.byId(e);if(void 0===h){g=b(g);for(var n=0,l=g.length,m;n<l;++n)m=g[n],a[a.contains(e,m)?"remove":"add"](e,m)}else a[h?"add":
"remove"](e,g);return h}}})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(f,k,d){k=k.NodeList;var b=k.prototype;b.connect=k._adaptAsForEach(function(){return f.connect.apply(this,arguments)});b.coords=k._adaptAsMap(f.coords);k.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");d.forEach(k.events,function(a){var d="on"+a;b[d]=function(a,
b){return this.connect(d,a,b)}});return f.NodeList=k})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(f,k,d,b,a,h,l,e){function p(b,g){var e=function(a,e){if("string"==typeof e&&(e=d.byId(e),!e))return new g([]);var m="string"==typeof a?b(a,e):a?a.end&&a.on?a:[a]:[];return m.end&&m.on?m:new g(m)};e.matches=b.match||function(a,b,d){return 0<e.filter([a],b,d).length};e.filter=b.filter||function(b,
d,g){return e(d,g).filter(function(d){return-1<a.indexOf(b,d)})};if("function"!=typeof b){var m=b.search;b=function(a,b){return m(b||document,a)}}return e}k.add("array-extensible",function(){return 1==h.delegate([],{length:1}).length&&!k("bug-for-in-skips-shadowed")});var g=Array.prototype,n=g.slice,t=g.concat,q=a.forEach,m=function(a,b,d){b=[0].concat(n.call(b,0));d=d||f.global;return function(g){b[0]=g;return a.apply(d,b)}},w=function(a){var b=this instanceof v&&k("array-extensible");"number"==
typeof a&&(a=Array(a));var d=a&&"length"in a?a:arguments;if(b||!d.sort){for(var g=b?this:[],e=g.length=d.length,m=0;m<e;m++)g[m]=d[m];if(b)return g;d=g}h._mixin(d,u);d._NodeListCtor=function(a){return v(a)};return d},v=w,u=v.prototype=k("array-extensible")?[]:{};v._wrap=u._wrap=function(a,b,d){a=new (d||this._NodeListCtor||v)(a);return b?a._stash(b):a};v._adaptAsMap=function(a,b){return function(){return this.map(m(a,arguments,b))}};v._adaptAsForEach=function(a,b){return function(){this.forEach(m(a,
arguments,b));return this}};v._adaptAsFilter=function(a,b){return function(){return this.filter(m(a,arguments,b))}};v._adaptWithCondition=function(a,b,d){return function(){var g=arguments,e=m(a,g,d);if(b.call(d||f.global,g))return this.map(e);this.forEach(e);return this}};q(["slice","splice"],function(a){var b=g[a];u[a]=function(){return this._wrap(b.apply(this,arguments),"slice"==a?this:null)}});q(["indexOf","lastIndexOf","every","some"],function(b){var d=a[b];u[b]=function(){return d.apply(f,[this].concat(n.call(arguments,
0)))}});h.extend(w,{constructor:v,_NodeListCtor:v,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,d){var g=this.map(function(g){return b(g,a,d)});g.remove=function(){for(var a=0;a<g.length;a++)g[a].remove()};return g},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(b){var d=n.call(this,0),g=a.map(arguments,function(a){return n.call(a,0)});return this._wrap(t.apply(d,g),this)},map:function(b,d){return this._wrap(a.map(this,
b,d),this)},forEach:function(a,b){q(this,a,b);return this},filter:function(b){var d=arguments,g=this,e=0;if("string"==typeof b){g=z._filterResult(this,d[0]);if(1==d.length)return g._stash(this);e=1}return this._wrap(a.filter(g,d[e],d[e+1]),this)},instantiate:function(a,b){var d=h.isFunction(a)?a:h.getObject(a);b=b||{};return this.forEach(function(a){new d(b,a)})},at:function(){var a=new this._NodeListCtor(0);q(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});
var z=p(e,w);f.query=p(e,function(a){return w(a)});z.load=function(a,b,d){l.load(a,b,function(a){d(p(a,w))})};f._filterQueryResult=z._filterResult=function(a,b,d){return new w(z.filter(a,b,d))};f.NodeList=z.NodeList=w;return z})},"dojo/selector/_loader":function(){define(["../has","require"],function(f,k){if("undefined"!==typeof document){var d=document.createElement("div");f.add("dom-qsa2.1",!!d.querySelectorAll);f.add("dom-qsa3",function(){try{return d.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",
1==d.querySelectorAll(".TEST:empty").length}catch(a){}})}var b;return{load:function(a,d,l,e){if(e&&e.isBuild)l();else{e=k;a="default"==a?f("config-selectorEngine")||"css3":a;a="css2"==a||"lite"==a?"./lite":"css2.1"==a?f("dom-qsa2.1")?"./lite":"./acme":"css3"==a?f("dom-qsa3")?"./lite":"./acme":"acme"==a?"./acme":(e=d)&&a;if("?"==a.charAt(a.length-1)){a=a.substring(0,a.length-1);var h=!0}if(h&&(f("dom-compliant-qsa")||b))return l(b);e([a],function(d){"./lite"!=a&&(b=d);l(d)})}}}})},"dojo/selector/acme":function(){define(["../dom",
"../sniff","../_base/array","../_base/lang","../_base/window"],function(f,k,d,b,a){var h=b.trim,l=d.forEach,e="BackCompat"==a.doc.compatMode,p=!1,g=function(){return!0},n=function(a){a=0<="\x3e~+".indexOf(a.slice(-1))?a+" * ":a+" ";for(var b=function(b,d){return h(a.slice(b,d))},d=[],g=-1,e=-1,m=-1,n=-1,l=-1,q=-1,t=-1,u,f="",k="",w,z=0,v=a.length,B=null,C=null,x=function(){0<=q&&(B.id=b(q,z).replace(/\\/g,""),q=-1);if(0<=t){var a=t==z?null:b(t,z);B[0>"\x3e~+".indexOf(a)?"tag":"oper"]=a;t=-1}0<=l&&
(B.classes.push(b(l+1,z).replace(/\\/g,"")),l=-1)};f=k,k=a.charAt(z),z<v;z++)"\\"!=f&&(B||(w=z,B={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return p?this.otag:this.tag}},t=z),u?k==u&&(u=null):"'"==k||'"'==k?u=k:0<=g?"]"==k?(C.attr?C.matchFor=b(m||g+1,z):C.attr=b(g+1,z),!(g=C.matchFor)||'"'!=g.charAt(0)&&"'"!=g.charAt(0)||(C.matchFor=g.slice(1,-1)),C.matchFor&&(C.matchFor=C.matchFor.replace(/\\/g,"")),B.attrs.push(C),C=null,g=m=-1):"\x3d"==k&&(m=0<="|~^$*".indexOf(f)?
f:"",C.type=m+k,C.attr=b(g+1,z-m.length),m=z+1):0<=e?")"==k&&(0<=n&&(C.value=b(e+1,z)),n=e=-1):"#"==k?(x(),q=z+1):"."==k?(x(),l=z):":"==k?(x(),n=z):"["==k?(x(),g=z,C={}):"("==k?(0<=n&&(C={name:b(n+1,z),value:null},B.pseudos.push(C)),e=z):" "==k&&f!=k&&(x(),0<=n&&B.pseudos.push({name:b(n+1,z)}),B.loops=B.pseudos.length||B.attrs.length||B.classes.length,B.oquery=B.query=b(w,z),B.otag=B.tag=B.oper?null:B.tag||"*",B.tag&&(B.tag=B.tag.toUpperCase()),d.length&&d[d.length-1].oper&&(B.infixOper=d.pop(),B.query=
B.infixOper.query+" "+B.query),d.push(B),B=null));return d},t=function(a,b){return a?b?function(){return a.apply(window,arguments)&&b.apply(window,arguments)}:a:b},q=function(a,b){var d=b||[];a&&d.push(a);return d},m=function(a){return 1==a.nodeType},w=function(a,b){return a?"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(p?a.getAttribute(b):a.getAttribute(b,2))||"":""},v={"*\x3d":function(a,b){return function(d){return 0<=w(d,a).indexOf(b)}},"^\x3d":function(a,b){return function(d){return 0==
w(d,a).indexOf(b)}},"$\x3d":function(a,b){return function(d){d=" "+w(d,a);var g=d.lastIndexOf(b);return-1<g&&g==d.length-b.length}},"~\x3d":function(a,b){var d=" "+b+" ";return function(b){return 0<=(" "+w(b,a)+" ").indexOf(d)}},"|\x3d":function(a,b){var d=b+"-";return function(g){g=w(g,a);return g==b||0==g.indexOf(d)}},"\x3d":function(a,b){return function(d){return w(d,a)==b}}};b=a.doc.documentElement;var u=!(b.nextElementSibling||"nextElementSibling"in b),z=u?"nextSibling":"nextElementSibling",
B=u?"previousSibling":"previousElementSibling",x=u?m:g,D=function(a){for(;a=a[B];)if(x(a))return!1;return!0},E=function(a){for(;a=a[z];)if(x(a))return!1;return!0},A=function(a){var b=a.parentNode,b=7!=b.nodeType?b:b.nextSibling,d=0,g=b.children||b.childNodes,e=a._i||a.getAttribute("_i")||-1,m=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!g)return-1;g=g.length;if(m==g&&0<=e&&0<=m)return e;k("ie")&&"undefined"!==typeof b.setAttribute?b.setAttribute("_l",g):b._l=g;e=-1;for(b=
b.firstElementChild||b.firstChild;b;b=b[z])x(b)&&(k("ie")?b.setAttribute("_i",++d):b._i=++d,a===b&&(e=d));return e},F=function(a){return!(A(a)%2)},K=function(a){return A(a)%2},I={checked:function(a,b){return function(a){return!("checked"in a?!a.checked:!a.selected)}},disabled:function(a,b){return function(a){return a.disabled}},enabled:function(a,b){return function(a){return!a.disabled}},"first-child":function(){return D},"last-child":function(){return E},"only-child":function(a,b){return function(a){return D(a)&&
E(a)}},empty:function(a,b){return function(a){var b=a.childNodes;for(a=a.childNodes.length-1;0<=a;a--){var d=b[a].nodeType;if(1===d||3==d)return!1}return!0}},contains:function(a,b){var d=b.charAt(0);if('"'==d||"'"==d)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var d=n(b)[0],g={el:1};"*"!=d.tag&&(g.tag=1);d.classes.length||(g.classes=1);var e=G(d,g);return function(a){return!e(a)}},"nth-child":function(a,b){var d=parseInt;if("odd"==b)return K;if("even"==
b)return F;if(-1!=b.indexOf("n")){var g=b.split("n",2),e=g[0]?"-"==g[0]?-1:d(g[0]):1,m=g[1]?d(g[1]):0,h=0,n=-1;0<e?0>m?m=m%e&&e+m%e:0<m&&(m>=e&&(h=m-m%e),m%=e):0>e&&(e*=-1,0<m&&(n=m,m%=e));if(0<e)return function(a){a=A(a);return a>=h&&(0>n||a<=n)&&a%e==m};b=m}var l=d(b);return function(a){return A(a)==l}}},J=9>k("ie")||9==k("ie")&&k("quirks")?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(d){return p?d.getAttribute(a):d[a]||d[b]}}:function(a){return function(b){return b&&
b.getAttribute&&b.hasAttribute(a)}},G=function(a,b){if(!a)return g;b=b||{};var d=null;"el"in b||(d=t(d,m));"tag"in b||"*"!=a.tag&&(d=t(d,function(b){return b&&(p?b.tagName:b.tagName.toUpperCase())==a.getTag()}));"classes"in b||l(a.classes,function(a,b,g){var e=new RegExp("(?:^|\\s)"+a+"(?:\\s|$)");d=t(d,function(a){return e.test(a.className)});d.count=b});"pseudos"in b||l(a.pseudos,function(a){var b=a.name;I[b]&&(d=t(d,I[b](b,a.value)))});"attrs"in b||l(a.attrs,function(a){var b,g=a.attr;a.type&&
v[a.type]?b=v[a.type](g,a.matchFor):g.length&&(b=J(g));b&&(d=t(d,b))});"id"in b||a.id&&(d=t(d,function(b){return!!b&&b.id==a.id}));d||"default"in b||(d=g);return d},O=function(a){return function(b,d,g){for(;b=b[z];)if(!u||m(b)){g&&!U(b,g)||!a(b)||d.push(b);break}return d}},R=function(a){return function(b,d,g){for(b=b[z];b;){if(x(b)){if(g&&!U(b,g))break;a(b)&&d.push(b)}b=b[z]}return d}},Z=function(a,b){var e=function(a){var b=[];try{b=Array.prototype.slice.call(a)}catch(ba){for(var d=0,g=a.length;d<
g;d++)b.push(a[d])}return b};a=a||g;return function(g,m,h){var n=0,l=[],l=e(g.children||g.childNodes);for(b&&d.forEach(l,function(a){1===a.nodeType&&(l=l.concat(e(a.getElementsByTagName("*"))))});g=l[n++];)x(g)&&(!h||U(g,h))&&a(g,n)&&m.push(g);return m}},Q=function(a,b){for(var d=a.parentNode;d&&d!=b;)d=d.parentNode;return!!d},M={},C=function(b){var m=M[b.query];if(m)return m;var h=b.infixOper,h=h?h.oper:"",n=G(b,{el:1}),l="*"==b.tag,p=a.doc.getElementsByClassName;if(h)p={el:1},l&&(p.tag=1),n=G(b,
p),"+"==h?m=O(n):"~"==h?m=R(n):"\x3e"==h&&(m=Z(n));else if(b.id)n=!b.loops&&l?g:G(b,{el:1,id:1}),m=function(a,g){var e=f.byId(b.id,a.ownerDocument||a);a.ownerDocument&&!Q(a,a.ownerDocument)&&d.some(11===a.nodeType?a.childNodes:[a],function(a){a=Z(function(a){return a.id===b.id},!0)(a,[]);if(a.length)return e=a[0],!1});if(e&&n(e)&&(9==a.nodeType||Q(e,a)))return q(e,g)};else if(p&&/\{\s*\[native code\]\s*\}/.test(String(p))&&b.classes.length&&!e)var n=G(b,{el:1,classes:1,id:1}),t=b.classes.join(" "),
m=function(a,b,d){b=q(0,b);for(var g,e=0,m=a.getElementsByClassName(t);g=m[e++];)n(g,a)&&U(g,d)&&b.push(g);return b};else l||b.loops?(n=G(b,{el:1,tag:1,id:1}),m=function(a,d,g){d=q(0,d);for(var e,m=0,h=(e=b.getTag())?a.getElementsByTagName(e):[];e=h[m++];)n(e,a)&&U(e,g)&&d.push(e);return d}):m=function(a,d,g){d=q(0,d);for(var e=0,m=b.getTag(),m=m?a.getElementsByTagName(m):[];a=m[e++];)U(a,g)&&d.push(a);return d};return M[b.query]=m},H={},L={},P=function(a){var b=n(h(a));if(1==b.length){var d=C(b[0]);
return function(a){if(a=d(a,[]))a.nozip=!0;return a}}return function(a){a=q(a);for(var d,g,e=b.length,m,h,n=0;n<e;n++){h=[];d=b[n];g=a.length-1;0<g&&(m={},h.nozip=!0);g=C(d);for(var l=0;d=a[l];l++)g(d,h,m);if(!h.length)break;a=h}return h}},aa=k("ie")?"commentStrip":"nozip",W=!!a.doc.querySelectorAll,T=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,pa=function(a,b,d,g){return d?(b?b+" ":"")+d+(g?" "+g:""):a},X=/([^[]*)([^\]]*])?/g,N=function(a,b,d){return b.replace(T,pa)+(d||"")},da=function(a,b){a=a.replace(X,
N);if(W){var d=L[a];if(d&&!b)return d}if(d=H[a])return d;var d=a.charAt(0),g=-1==a.indexOf(" ");0<=a.indexOf("#")&&g&&(b=!0);if(!W||b||-1!="\x3e~+".indexOf(d)||k("ie")&&-1!=a.indexOf(":")||e&&0<=a.indexOf(".")||-1!=a.indexOf(":contains")||-1!=a.indexOf(":checked")||-1!=a.indexOf("|\x3d")){var m=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return H[a]=2>m.length?P(a):function(a){for(var b=0,d=[],g;g=m[b++];)d=d.concat(P(g)(a));return d}}var h=0<="\x3e~+".indexOf(a.charAt(a.length-
1))?a+" *":a;return L[a]=function(b){if(9==b.nodeType||g)try{var d=b.querySelectorAll(h);d[aa]=!0;return d}catch(ha){}return da(a,!0)(b)}},S=0,ja=k("ie")?function(a){return p?a.getAttribute("_uid")||a.setAttribute("_uid",++S)||S:a.uniqueID}:function(a){return a._uid||(a._uid=++S)},U=function(a,b){if(!b)return 1;var d=ja(a);return b[d]?0:b[d]=1},ea=function(a){if(a&&a.nozip)return a;if(!a||!a.length)return[];if(2>a.length)return[a[0]];var b=[];S++;var d,g;if(k("ie")&&p){var e=S+"";for(d=0;d<a.length;d++)(g=
a[d])&&g.getAttribute("_zipIdx")!=e&&(b.push(g),g.setAttribute("_zipIdx",e))}else if(k("ie")&&a.commentStrip)try{for(d=0;d<a.length;d++)(g=a[d])&&m(g)&&b.push(g)}catch(ka){}else for(d=0;d<a.length;d++)(g=a[d])&&g._zipIdx!=S&&(b.push(g),g._zipIdx=S);return b},fa=function(b,d){d=d||a.doc;p="div"===(d.ownerDocument||d).createElement("div").tagName;var g=da(b)(d);return g&&g.nozip?g:ea(g)};fa.filter=function(a,b,g){for(var e=[],m=n(b),m=1!=m.length||/[^\w#\.]/.test(b)?function(a){return-1!=d.indexOf(fa(b,
f.byId(g)),a)}:G(m[0]),h=0,l;l=a[h];h++)m(l)&&e.push(l);return e};return fa})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(f,k,d,b,a,h,l,e,p){function g(a){return function(b,d,g){return 2==arguments.length?a["string"==typeof d?"get":"set"](b,d):a.set(b,d,g)}}var n=function(a){return 1==a.length&&"string"==typeof a[0]},t=function(a){var b=a.parentNode;b&&b.removeChild(a)},
q=k.NodeList,m=q._adaptWithCondition,w=q._adaptAsForEach,v=q._adaptAsMap;b.extend(q,{_normalize:function(a,d){var g=!0===a.parse;if("string"==typeof a.template){var e=a.templateFunc||f.string&&f.string.substitute;a=e?e(a.template,a):a}e=typeof a;"string"==e||"number"==e?(a=h.toDom(a,d&&d.ownerDocument),a=11==a.nodeType?b._toArray(a.childNodes):[a]):b.isArrayLike(a)?b.isArray(a)||(a=b._toArray(a)):a=[a];g&&(a._runParse=!0);return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,
b,d,g){if(1==b.nodeType||"only"!=d)for(var e,m=a.length,n=m-1;0<=n;n--){var l=g?this._cloneNode(a[n]):a[n];if(a._runParse&&f.parser&&f.parser.parse)for(e||(e=b.ownerDocument.createElement("div")),e.appendChild(l),f.parser.parse(e),l=e.firstChild;e.firstChild;)e.removeChild(e.firstChild);n==m-1?h.place(l,b,d):b.parentNode.insertBefore(l,b);b=l}},position:v(l.position),attr:m(g(e),n),style:m(g(p),n),addClass:w(a.add),removeClass:w(a.remove),toggleClass:w(a.toggle),replaceClass:w(a.replace),empty:w(h.empty),
removeAttr:w(e.remove),marginBox:v(l.getMarginBox),place:function(a,b){var d=k(a)[0];return this.forEach(function(a){h.place(a,d,b)})},orphan:function(a){return(a?k._filterResult(this,a):this).forEach(t)},adopt:function(a,b){return k(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new q;this.map(function(d){k(a,d).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,g=this,e=0;if("string"==typeof a){g=k._filterResult(this,
b[0]);if(1==b.length)return g._stash(this);e=1}return this._wrap(d.filter(g,b[e],b[e+1]),this)},addContent:function(a,b){a=this._normalize(a,this[0]);for(var d=0,g;g=this[d];d++)a.length?this._place(a,g,b,0<d):h.empty(g);return this}});return q})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),function(f,k,d,b,a,h,l,e,p,g,n,t,q,m,w,v){f._xhrObj=
w._create;var u=f.config;f.objectToQuery=b.objectToQuery;f.queryToObject=b.queryToObject;f.fieldToObject=h.fieldToObject;f.formToObject=h.toObject;f.formToQuery=h.toQuery;f.formToJson=h.toJson;f._blockAsync=!1;var z=f._contentHandlers=f.contentHandlers={text:function(a){return a.responseText},json:function(a){return p.fromJson(a.responseText||null)},"json-comment-filtered":function(a){a=a.responseText;var b=a.indexOf("/*"),d=a.lastIndexOf("*/");if(-1==b||-1==d)throw Error("JSON was not comment filtered");
return p.fromJson(a.substring(b+2,d))},javascript:function(a){return f.eval(a.responseText)},xml:function(a){var b=a.responseXML;b&&k("dom-qsa2.1")&&!b.querySelectorAll&&k("dom-parser")&&(b=(new DOMParser).parseFromString(a.responseText,"application/xml"));if(k("ie")&&(!b||!b.documentElement)){var d=function(a){return"MSXML"+a+".DOMDocument"},d=["Microsoft.XMLDOM",d(6),d(4),d(3),d(2)];n.some(d,function(d){try{var g=new ActiveXObject(d);g.async=!1;g.loadXML(a.responseText);b=g}catch(G){return!1}return!0})}return b},
"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?z["json-comment-filtered"](a):z.json(a)}};f._ioSetArgs=function(d,e,m,n){var q={args:d,url:d.url},p=null;if(d.form){var p=a.byId(d.form),t=p.getAttributeNode("action");q.url=q.url||(t?t.value:f.doc?f.doc.URL:null);p=h.toObject(p)}t={};p&&g.mixin(t,p);d.content&&g.mixin(t,d.content);d.preventCache&&(t["dojo.preventCache"]=(new Date).valueOf());q.query=b.objectToQuery(t);q.handleAs=d.handleAs||"text";var k=
new l(function(a){a.canceled=!0;e&&e(a);var b=a.ioArgs.error;b||(b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b);return b});k.addCallback(m);var w=d.load;w&&g.isFunction(w)&&k.addCallback(function(a){return w.call(d,a,q)});var z=d.error;z&&g.isFunction(z)&&k.addErrback(function(a){return z.call(d,a,q)});var v=d.handle;v&&g.isFunction(v)&&k.addBoth(function(a){return v.call(d,a,q)});k.addErrback(function(a){return n(a,k)});u.ioPublish&&f.publish&&!1!==q.args.ioPublish&&(k.addCallbacks(function(a){f.publish("/dojo/io/load",
[k,a]);return a},function(a){f.publish("/dojo/io/error",[k,a]);return a}),k.addBoth(function(a){f.publish("/dojo/io/done",[k,a]);return a}));k.ioArgs=q;return k};var B=function(a){a=z[a.ioArgs.handleAs](a.ioArgs.xhr);return void 0===a?null:a},x=function(a,b){return a},D=function(a){0>=E&&(E=0,u.ioPublish&&f.publish&&(!a||a&&!1!==a.ioArgs.args.ioPublish)&&f.publish("/dojo/io/stop"))},E=0;q.after(m,"_onAction",function(){--E});q.after(m,"_onInFlight",D);f._ioCancelAll=m.cancelAll;f._ioNotifyStart=function(a){u.ioPublish&&
f.publish&&!1!==a.ioArgs.args.ioPublish&&(E||f.publish("/dojo/io/start"),E+=1,f.publish("/dojo/io/send",[a]))};f._ioWatch=function(a,b,d,e){a.ioArgs.options=a.ioArgs.args;g.mixin(a,{response:a.ioArgs,isValid:function(d){return b(a)},isReady:function(b){return d(a)},handleResponse:function(b){return e(a)}});m(a);D(a)};f._ioAddQueryToUrl=function(a){a.query.length&&(a.url+=(-1==a.url.indexOf("?")?"?":"\x26")+a.query,a.query=null)};f.xhr=function(a,b,d){var g,e=f._ioSetArgs(b,function(a){g&&g.cancel()},
B,x),m=e.ioArgs;"postData"in b?m.query=b.postData:"putData"in b?m.query=b.putData:"rawBody"in b?m.query=b.rawBody:(2<arguments.length&&!d||-1==="POST|PUT".indexOf(a.toUpperCase()))&&f._ioAddQueryToUrl(m);var h={method:a,handleAs:"text",timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:m};"undefined"!==typeof b.headers&&(h.headers=b.headers);"undefined"!==typeof b.contentType&&(h.headers||(h.headers={}),h.headers["Content-Type"]=b.contentType);"undefined"!==typeof m.query&&(h.data=m.query);
"undefined"!==typeof b.sync&&(h.sync=b.sync);f._ioNotifyStart(e);try{g=w(m.url,h,!0)}catch(R){return e.cancel(),e}e.ioArgs.xhr=g.response.xhr;e.rDfd=g;g.then(function(){e.resolve(e)}).otherwise(function(a){m.error=a;a.response&&(a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr);e.reject(a)});return e};f.xhrGet=function(a){return f.xhr("GET",a)};f.rawXhrPost=f.xhrPost=function(a){return f.xhr("POST",a,!0)};f.rawXhrPut=f.xhrPut=function(a){return f.xhr("PUT",a,!0)};f.xhrDelete=
function(a){return f.xhr("DELETE",a)};f._isDocumentOk=function(a){return v.checkStatus(a.status)};f._getText=function(a){var b;f.xhrGet({url:a,sync:!0,load:function(a){b=a}});return b};g.mixin(f.xhr,{_xhrObj:f._xhrObj,fieldToObject:h.fieldToObject,formToObject:h.toObject,objectToQuery:b.objectToQuery,formToQuery:h.toQuery,formToJson:h.toJson,queryToObject:b.queryToObject,contentHandlers:z,_ioSetArgs:f._ioSetArgs,_ioCancelAll:f._ioCancelAll,_ioNotifyStart:f._ioNotifyStart,_ioWatch:f._ioWatch,_ioAddQueryToUrl:f._ioAddQueryToUrl,
_isDocumentOk:f._isDocumentOk,_getText:f._getText,get:f.xhrGet,post:f.xhrPost,put:f.xhrPut,del:f.xhrDelete});return f.xhr})},"dojo/io-query":function(){define(["./_base/lang"],function(f){var k={};return{objectToQuery:function(d){var b=encodeURIComponent,a=[],h;for(h in d){var l=d[h];if(l!=k[h]){var e=b(h)+"\x3d";if(f.isArray(l))for(var p=0,g=l.length;p<g;++p)a.push(e+b(l[p]));else a.push(e+b(l))}}return a.join("\x26")},queryToObject:function(d){var b=decodeURIComponent;d=d.split("\x26");for(var a=
{},h,l,e=0,p=d.length;e<p;++e)if(l=d[e],l.length){var g=l.indexOf("\x3d");0>g?(h=b(l),l=""):(h=b(l.slice(0,g)),l=b(l.slice(g+1)));"string"==typeof a[h]&&(a[h]=[a[h]]);f.isArray(a[h])?a[h].push(l):a[h]=l}return a}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(f,k,d,b){var a={fieldToObject:function(a){var b=null;if(a=k.byId(a)){var d=a.name,h=(a.type||"").toLowerCase();if(d&&h&&!a.disabled)if("radio"==h||"checkbox"==h)a.checked&&(b=a.value);else if(a.multiple)for(b=
[],a=[a.firstChild];a.length;)for(d=a.pop();d;d=d.nextSibling)if(1==d.nodeType&&"option"==d.tagName.toLowerCase())d.selected&&b.push(d.value);else{d.nextSibling&&a.push(d.nextSibling);d.firstChild&&a.push(d.firstChild);break}else b=a.value}return b},toObject:function(b){var d={};b=k.byId(b).elements;for(var e=0,h=b.length;e<h;++e){var g=b[e],n=g.name,t=(g.type||"").toLowerCase();if(n&&t&&0>"file|submit|image|reset|button".indexOf(t)&&!g.disabled){var q=d,m=n,g=a.fieldToObject(g);if(null!==g){var w=
q[m];"string"==typeof w?q[m]=[w,g]:f.isArray(w)?w.push(g):q[m]=g}"image"==t&&(d[n+".x"]=d[n+".y"]=d[n].x=d[n].y=0)}}return d},toQuery:function(b){return d.objectToQuery(a.toObject(b))},toJson:function(d,l){return b.stringify(a.toObject(d),null,l?4:0)}};return a})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(f,k,d,b,a,h){function l(){for(var a=
+new Date,b=0,d;b<g.length&&(d=g[b]);b++){var m=d.response,h=m.options;d.isCanceled&&d.isCanceled()||d.isValid&&!d.isValid(m)?(g.splice(b--,1),e._onAction&&e._onAction()):d.isReady&&d.isReady(m)?(g.splice(b--,1),d.handleResponse(m),e._onAction&&e._onAction()):d.startTime&&d.startTime+(h.timeout||0)<a&&(g.splice(b--,1),d.cancel(new k("Timeout exceeded",m)),e._onAction&&e._onAction())}e._onInFlight&&e._onInFlight(d);g.length||(clearInterval(p),p=null)}function e(a){a.response.options.timeout&&(a.startTime=
+new Date);a.isFulfilled()||(g.push(a),p||(p=setInterval(l,50)),a.response.options.sync&&l())}var p=null,g=[];e.cancelAll=function(){try{b.forEach(g,function(a){try{a.cancel(new d("All requests canceled."))}catch(t){}})}catch(n){}};a&&h&&a.doc.attachEvent&&h(a.global,"unload",function(){e.cancelAll()});return e})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise ../has".split(" "),function(f,
k,d,b,a,h,l,e,p){function g(a){return p("native-arraybuffer")&&a instanceof ArrayBuffer}function n(a){return p("native-blob")&&a instanceof Blob}function t(a){return m(a)}function q(a){return void 0!==a.data?a.data:a.text}f.deepCopy=function(a,b){for(var d in b){var e=a[d],m=b[d];if("__proto__"!==d&&e!==m){var h=m,q;(q=!h||"object"!==typeof h)||(q=h,q=p("native-formdata")&&q instanceof FormData);q||("undefined"!==typeof Element?h instanceof Element:1===h.nodeType)||n(h)||g(h)?a[d]=m:"[object Date]"===
Object.prototype.toString.call(m)?a[d]=new Date(m):l.isArray(m)?a[d]=f.deepCopyArray(m):e&&"object"===typeof e?f.deepCopy(e,m):a[d]=f.deepCopy({},m)}}return a};f.deepCopyArray=function(a){for(var b=[],d=0,g=a.length;d<g;d++){var e=a[d];"object"===typeof e?b.push(f.deepCopy({},e)):b.push(e)}return b};f.deepCreate=function(a,b){b=b||{};var d=l.delegate(a),g,e;for(g in a)(e=a[g])&&"object"===typeof e&&(d[g]=f.deepCreate(e,b[g]));return f.deepCopy(d,b)};var m=Object.freeze||function(a){return a};f.deferred=
function(a,g,h,n,p,x){var u=new b(function(b){g&&g(u,a);return b&&(b instanceof k||b instanceof d)?b:new d("Request canceled",a)});u.response=a;u.isValid=h;u.isReady=n;u.handleResponse=p;h=u.then(t).otherwise(function(b){b.response=a;throw b;});f.notify&&h.then(l.hitch(f.notify,"emit","load"),l.hitch(f.notify,"emit","error"));n=h.then(q);p=new e;for(var w in n)n.hasOwnProperty(w)&&(p[w]=n[w]);p.response=h;m(p);x&&u.then(function(a){x.call(u,a)},function(b){x.call(u,a,b)});u.promise=p;u.then=p.then;
return u};f.addCommonMethods=function(a,b){h.forEach(b||["GET","POST","PUT","DELETE"],function(b){a[("DELETE"===b?"DEL":b).toLowerCase()]=function(d,g){g=l.delegate(g||{});g.method=b;return a(d,g)}})};f.parseArgs=function(b,d,e){var m=d.data,h=d.query;!m||e||"object"!==typeof m||p("native-xhr2")&&(g(m)||n(m))||(d.data=a.objectToQuery(m));h?("object"===typeof h&&(h=a.objectToQuery(h)),d.preventCache&&(h+=(h?"\x26":"")+"request.preventCache\x3d"+ +new Date)):d.preventCache&&(h="request.preventCache\x3d"+
+new Date);b&&h&&(b+=(~b.indexOf("?")?"\x26":"?")+h);return{url:b,options:d,getHeader:function(a){return null}}};f.checkStatus=function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"dojo/errors/RequestError":function(){define(["./create"],function(f){return f("RequestError",function(f,d){this.response=d})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(f,k){return f("RequestTimeoutError",null,k,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError",
"./watch","./handlers","./util","../has"],function(f,k,d,b,a){function h(a,g){var e=a.xhr;a.status=a.xhr.status;try{a.text=e.responseText}catch(x){}"xml"===a.options.handleAs&&(a.data=e.responseXML);var m;if(g)this.reject(g);else{try{d(a)}catch(x){m=x}b.checkStatus(e.status)?m?this.reject(m):this.resolve(a):(g=m?new f("Unable to load "+a.url+" status: "+e.status+" and an error in handleAs: transformation of response",a):new f("Unable to load "+a.url+" status: "+e.status,a),this.reject(g))}}function l(a){return this.xhr.getResponseHeader(a)}
function e(d,u,z){var v=a("native-formdata")&&u&&u.data&&u.data instanceof FormData,x=b.parseArgs(d,b.deepCreate(w,u),v);d=x.url;u=x.options;var D=!u.data&&"POST"!==u.method&&"PUT"!==u.method;10>=a("ie")&&(d=d.split("#")[0]);var E,A=b.deferred(x,q,g,n,h,function(){E&&E()}),F=x.xhr=e._create();if(!F)return A.cancel(new f("XHR was not created")),z?A:A.promise;x.getHeader=l;t&&(E=t(F,A,x,u.uploadProgress));var K="undefined"===typeof u.data?null:u.data,I=!u.sync,J=u.method;try{F.open(J,d,I,u.user||m,
u.password||m);u.withCredentials&&(F.withCredentials=u.withCredentials);a("native-response-type")&&u.handleAs in p&&(F.responseType=p[u.handleAs]);var G=u.headers;d=v||D?!1:"application/x-www-form-urlencoded";if(G)for(var O in G)"content-type"===O.toLowerCase()?d=G[O]:G[O]&&F.setRequestHeader(O,G[O]);d&&!1!==d&&F.setRequestHeader("Content-Type",d);G&&"X-Requested-With"in G||F.setRequestHeader("X-Requested-With","XMLHttpRequest");b.notify&&b.notify.emit("send",x,A.promise.cancel);F.send(K)}catch(R){A.reject(R)}k(A);
F=null;return z?A:A.promise}a.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});a.add("dojo-force-activex-xhr",function(){return a("activex")&&"file:"===window.location.protocol});a.add("native-xhr2",function(){if(a("native-xhr")&&!a("dojo-force-activex-xhr")){var b=new XMLHttpRequest;return"undefined"!==typeof b.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof b.upload)}});a.add("native-formdata",function(){return"undefined"!==typeof FormData});a.add("native-blob",
function(){return"undefined"!==typeof Blob});a.add("native-arraybuffer",function(){return"undefined"!==typeof ArrayBuffer});a.add("native-response-type",function(){return a("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});a.add("native-xhr2-blob",function(){if(a("native-response-type")){var b=new XMLHttpRequest;b.open("GET","https://dojotoolkit.org/",!0);b.responseType="blob";var d=b.responseType;b.abort();return"blob"===d}});var p={blob:a("native-xhr2-blob")?"blob":"arraybuffer",
document:"document",arraybuffer:"arraybuffer"},g,n,t,q;a("native-xhr2")?(g=function(a){return!this.isFulfilled()},q=function(a,b){b.xhr.abort()},t=function(a,b,d,g){function e(a){b.handleResponse(d)}function m(a){a=new f("Unable to load "+d.url+" status: "+a.target.status,d);b.handleResponse(d,a)}function h(a,g){d.transferType=a;g.lengthComputable?(d.loaded=g.loaded,d.total=g.total,b.progress(d)):3===d.xhr.readyState&&(d.loaded="loaded"in g?g.loaded:g.position,b.progress(d))}function n(a){return h("download",
a)}function l(a){return h("upload",a)}a.addEventListener("load",e,!1);a.addEventListener("error",m,!1);a.addEventListener("progress",n,!1);g&&a.upload&&a.upload.addEventListener("progress",l,!1);return function(){a.removeEventListener("load",e,!1);a.removeEventListener("error",m,!1);a.removeEventListener("progress",n,!1);a.upload.removeEventListener("progress",l,!1);a=null}}):(g=function(a){return a.xhr.readyState},n=function(a){return 4===a.xhr.readyState},q=function(a,b){var d=b.xhr,g=typeof d.abort;
"function"!==g&&"object"!==g&&"unknown"!==g||d.abort()});var m,w={data:null,query:null,sync:!1,method:"GET"};e._create=function(){throw Error("XMLHTTP not available");};if(a("native-xhr")&&!a("dojo-force-activex-xhr"))e._create=function(){return new XMLHttpRequest};else if(a("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),e._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(v){try{new ActiveXObject("Microsoft.XMLHTTP"),e._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(u){}}b.addCommonMethods(e);
return e})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(f,k,d,b){function a(a){var b=g[a.options.handleAs];a.data=b?b(a):a.data||a.text;return a}b.add("activex","undefined"!==typeof ActiveXObject);b.add("dom-parser",function(a){return"DOMParser"in a});var h;if(b("activex")){var l=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],e;h=function(a){function g(a){try{var b=
new ActiveXObject(a);b.async=!1;b.loadXML(m);h=b;e=a}catch(u){return!1}return!0}var h=a.data,m=a.text;h&&b("dom-qsa2.1")&&!h.querySelectorAll&&b("dom-parser")&&(h=(new DOMParser).parseFromString(m,"application/xml"));h&&h.documentElement||e&&g(e)||d.some(l,g);return h}}var p=function(a){return b("native-xhr2-blob")||"blob"!==a.options.handleAs||"undefined"===typeof Blob?a.xhr.response:new Blob([a.xhr.response],{type:a.xhr.getResponseHeader("Content-Type")})},g={javascript:function(a){return k.eval(a.text||
"")},json:function(a){return f.parse(a.text||null)},xml:h,blob:p,arraybuffer:p,document:p};a.register=function(a,b){g[a]=b};return a})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(f,k,d,b,a,h,l,e,p){var g=d.mixin,n={},t=n._Line=function(a,b){this.start=a;this.end=b};t.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var q=n.Animation=function(a){g(this,a);d.isArray(this.curve)&&(this.curve=
new t(this.curve[0],this.curve[1]))};q.prototype=new b;d.extend(q,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var d=b||[];if(this[a])if(k.debugAtAllCosts)this[a].apply(this,d);else try{this[a].apply(this,d)}catch(E){}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;
this._fire("beforeBegin",[this.node]);var g=a||this.delay,e=d.hitch(this,"_play",b);if(0<g)return this._delayTimer=setTimeout(e,g),this;e();return this},_play:function(a){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",
[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);
this._active=this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,
!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var m=0,w=null,v={run:function(){}};d.extend(q,{_startTimer:function(){this._timer||(this._timer=h.after(v,"run",d.hitch(this,"_cycle"),!0),m++);w||(w=setInterval(d.hitch(v,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),
this._timer=null,m--);0>=m&&(clearInterval(w),w=null,m=0)}});var u=l("ie")?function(a){var b=a.style;b.width.length||"auto"!=p.get(a,"width")||(b.width="auto")}:function(){};n._fade=function(a){a.node=e.byId(a.node);var b=g({properties:{}},a);a=b.properties.opacity={};a.start="start"in b?b.start:function(){return+p.get(b.node,"opacity")||0};a.end=b.end;a=n.animateProperty(b);h.after(a,"beforeBegin",d.partial(u,b.node),!0);return a};n.fadeIn=function(a){return n._fade(g({end:1},a))};n.fadeOut=function(a){return n._fade(g({end:0},
a))};n._defaultEasing=function(a){return.5+Math.sin((a+1.5)*Math.PI)/2};var z=function(b){this._properties=b;for(var d in b){var g=b[d];g.start instanceof a&&(g.tempColor=new a)}};z.prototype.getValue=function(b){var g={},e;for(e in this._properties){var m=this._properties[e],h=m.start;h instanceof a?g[e]=a.blendColors(h,m.end,b,m.tempColor).toCss():d.isArray(h)||(g[e]=(m.end-h)*b+h+("opacity"!=e?m.units||"px":0))}return g};n.animateProperty=function(b){var m=b.node=e.byId(b.node);b.easing||(b.easing=
f._defaultEasing);b=new q(b);h.after(b,"beforeBegin",d.hitch(b,function(){var b={},e;for(e in this.properties){var h=function(a,b){var d={height:a.offsetHeight,width:a.offsetWidth}[b];if(void 0!==d)return d;d=p.get(a,b);return"opacity"==b?+d:l?d:parseFloat(d)};if("width"==e||"height"==e)this.node.display="block";var n=this.properties[e];d.isFunction(n)&&(n=n(m));n=b[e]=g({},d.isObject(n)?n:{end:n});d.isFunction(n.start)&&(n.start=n.start(m));d.isFunction(n.end)&&(n.end=n.end(m));var l=0<=e.toLowerCase().indexOf("color");
"end"in n?"start"in n||(n.start=h(m,e)):n.end=h(m,e);l?(n.start=new a(n.start),n.end=new a(n.end)):n.start="opacity"==e?+n.start:parseFloat(n.start)}this.curve=new z(b)}),!0);h.after(b,"onAnimate",d.hitch(p,"set",b.node),!0);return b};n.anim=function(a,b,d,g,e,m){return n.animateProperty({node:a,duration:d||q.prototype.duration,properties:b,easing:g,onEnd:e}).play(m||0)};g(f,n);f._Animation=q;return n})},"dojo/_base/loader":function(){define("./kernel ../has require module ../json ./lang ./array".split(" "),
function(f,k,d,b,a,h,l){var e=function(a){return a.replace(/\./g,"/")},p=/\/\/>>built/,g=[],n=[],t=function(a,b,d){g.push(d);l.forEach(a.split(","),function(a){a=G(a,b.module);n.push(a);O(a)});q()},q=function(){var a,b;for(b in I)if(a=I[b],void 0===a.noReqPluginCheck&&(a.noReqPluginCheck=/loadInit\!/.test(b)||/require\!/.test(b)?1:0),!a.executed&&!a.noReqPluginCheck&&a.injected==x)return;H(function(){var a=g;g=[];l.forEach(a,function(a){a(1)})})},m=/\/\/.*|\/\*[\s\S]*?\*\/|("(?:\\.|[^"])*"|'(?:\\.|[^'])*'|`(?:\\.|[^`])*`)/mg,
w=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,v=/(^|\s)(require|define)\s*\(/m,u=function(a,b){var d,g,e,h=[],n=[];d=[];for(b=b||a.replace(m,"$1");d=w.exec(b);){g=w.lastIndex;e=g-d[0].length;var l=b,q=/\(|\)/g,p=1,t=void 0;for(q.lastIndex=g;(t=q.exec(l))&&(p=")"==t[0]?p-1:p+1,0!=p););if(0!=p)throw"unmatched paren around character "+q.lastIndex+" in: "+l;g=[f.trim(l.substring(e,q.lastIndex))+";\n",q.lastIndex];"loadInit"==d[2]?h.push(g[0]):
n.push(g[0]);w.lastIndex=g[1]}d=h.concat(n);return d.length||!v.test(b)?[a.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 \x26\x26 dojo.loadInit("),d.join(""),d]:0},z=d.initSyncLoader(t,q,function(b,d){var g,e,m=[],h=[];if(p.test(d)||!(g=u(d)))return 0;e=b.mid+"-*loadInit";for(var n in G("dojo",b).result.scopeMap)m.push(n),h.push('"'+n+'"');return"// xdomain rewrite of "+b.mid+"\ndefine('"+e+"',{\n\tnames:"+a.stringify(m)+",\n\tdef:function("+m.join(",")+"){"+g[1]+"}});\n\ndefine("+a.stringify(m.concat(["dojo/loadInit!"+
e]))+", function("+m.join(",")+"){\n"+g[0]+"});"}),B=z.sync,x=z.requested,D=z.arrived,E=z.nonmodule,A=z.executing,F=z.executed,K=z.syncExecStack,I=z.modules,J=z.execQ,G=z.getModule,O=z.injectModule,R=z.setArrived,Z=z.signal,Q=z.finishExec,M=z.execModule,C=z.getLegacyMode,H=z.guardCheckComplete,t=z.dojoRequirePlugin;f.provide=function(a){var b=K[0],g=h.mixin(G(e(a),d.module),{executed:A,result:h.getObject(a,!0)});R(g);b&&(b.provides||(b.provides=[])).push(function(){g.result=h.getObject(a);delete g.provides;
g.executed!==F&&Q(g)});return g.result};k.add("config-publishRequireResult",1,0,0);f.require=function(a,b){var g=function(a,b){var g=G(e(a),d.module);if(K.length&&K[0].finish)K[0].finish.push(a);else{if(g.executed)return g.result;b&&(g.result=E);var m=C();O(g);m=C();g.executed!==F&&g.injected===D&&z.guardCheckComplete(function(){M(g)});if(g.executed)return g.result;m==B?g.cjs?J.unshift(g):K.length&&(K[0].finish=[a]):J.push(g)}}(a,b);k("config-publishRequireResult")&&!h.exists(a)&&void 0!==g&&h.setObject(a,
g);return g};f.loadInit=function(a){a()};f.registerModulePath=function(a,b){var g={};g[a.replace(/\./g,"/")]=b;d({paths:g})};f.platformRequire=function(a){a=(a.common||[]).concat(a[f._name]||a["default"]||[]);for(var b;a.length;)h.isArray(b=a.shift())?f.require.apply(f,b):f.require(b)};f.requireIf=f.requireAfterIf=function(a,b,d){a&&f.require(b,d)};f.requireLocalization=function(a,b,g){d(["../i18n"],function(d){d.getLocalization(a,b,g)})};return{extractLegacyApiApplications:u,require:t,loadInit:function(a,
d,g){d([a],function(a){d(a.names,function(){for(var m="",h=[],n=0;n<arguments.length;n++)m+="var "+a.names[n]+"\x3d arguments["+n+"]; ",h.push(arguments[n]);eval(m);var l=d.module,q=[],p,m={provide:function(a){a=e(a);a=G(a,l);a!==l&&R(a)},require:function(a,b){a=e(a);b&&(G(a,l).result=E);q.push(a)},requireLocalization:function(a,b,d){p||(p=["dojo/i18n"]);d=(d||f.locale).toLowerCase();a=e(a)+"/nls/"+(/root/i.test(d)?"":d+"/")+e(b);G(a,l).isXd&&p.push("dojo/i18n!"+a)},loadInit:function(a){a()}},n={},
k;try{for(k in m)n[k]=f[k],f[k]=m[k];a.def.apply(null,h)}catch(U){Z("error",[{src:b.id,id:"failedDojoLoadInit"},U])}finally{for(k in m)f[k]=n[k]}p&&(q=q.concat(p));q.length?t(q.join(","),d,g):g()})})}}})},"dijit/_base":function(){define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),function(f){return f._base})},"dijit/main":function(){define(["dojo/_base/kernel"],function(f){return f.dijit})},
"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(f,k,d,b,a,h,l){var e={_isElementShown:function(a){var g=b.get(a);return"hidden"!=g.visibility&&"collapsed"!=g.visibility&&"none"!=g.display&&"hidden"!=d.get(a,"type")},hasDefaultTabStop:function(a){switch(a.nodeName.toLowerCase()){case "a":return d.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var b;
try{var e=a.contentDocument;if("designMode"in e&&"on"==e.designMode)return!0;b=e.body}catch(t){try{b=a.contentWindow.document.body}catch(q){return!1}}return b&&("true"==b.contentEditable||b.firstChild&&"true"==b.firstChild.contentEditable);default:return"true"==a.contentEditable}},effectiveTabIndex:function(a){if(!d.get(a,"disabled"))return d.has(a,"tabIndex")?+d.get(a,"tabIndex"):e.hasDefaultTabStop(a)?0:void 0},isTabNavigable:function(a){return 0<=e.effectiveTabIndex(a)},isFocusable:function(a){return-1<=
e.effectiveTabIndex(a)},_getTabNavigable:function(a){function b(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}function n(a){return z[b(a)]||a}var l,q,m,p,f,k,z={},B=e._isElementShown,x=e.effectiveTabIndex,D=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(!(1!=a.nodeType||9>=h("ie")&&"HTML"!==a.scopeName)&&B(a)){var g=x(a);if(0<=g){if(0==g)l||(l=a),q=a;else if(0<g){if(!m||g<p)p=g,m=a;if(!f||g>=k)k=g,f=a}g=b(a);d.get(a,"checked")&&
g&&(z[g]=a)}"SELECT"!=a.nodeName.toUpperCase()&&D(a)}};B(a)&&D(a);return{first:n(l),last:n(q),lowest:n(m),highest:n(f)}},getFirstInTabbingOrder:function(a,b){var d=e._getTabNavigable(k.byId(a,b));return d.lowest?d.lowest:d.first},getLastInTabbingOrder:function(a,b){var d=e._getTabNavigable(k.byId(a,b));return d.last?d.last:d.highest}};a.mixin(l,e);return e})},"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(f,k,d,b){var a=k("dijit.WidgetSet",
null,{constructor:function(){this._hash={};this.length=0},add:function(a){if(this._hash[a.id])throw Error("Tried to register widget with id\x3d\x3d"+a.id+" but that id is already registered");this._hash[a.id]=a;this.length++},remove:function(a){this._hash[a]&&(delete this._hash[a],this.length--)},forEach:function(a,b){b=b||d.global;var e=0,h;for(h in this._hash)a.call(b,this._hash[h],e++,this._hash);return this},filter:function(b,l){l=l||d.global;var e=new a,h=0,g;for(g in this._hash){var n=this._hash[g];
b.call(l,n,h++,this._hash)&&e.add(n)}return e},byId:function(a){return this._hash[a]},byClass:function(b){var d=new a,e,h;for(e in this._hash)h=this._hash[e],h.declaredClass==b&&d.add(h);return d},toArray:function(){var a=[],b;for(b in this._hash)a.push(this._hash[b]);return a},map:function(a,b){return f.map(this.toArray(),a,b)},every:function(a,b){b=b||d.global;var e=0,h;for(h in this._hash)if(!a.call(b,this._hash[h],e++,this._hash))return!1;return!0},some:function(a,b){b=b||d.global;var e=0,h;for(h in this._hash)if(a.call(b,
this._hash[h],e++,this._hash))return!0;return!1}});f.forEach("forEach filter byClass map every some".split(" "),function(d){b[d]=a.prototype[d]});return a})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(f,k,d){var b={},a={},h={length:0,add:function(b){if(a[b.id])throw Error("Tried to register widget with id\x3d\x3d"+b.id+" but that id is already registered");a[b.id]=b;this.length++},remove:function(b){a[b]&&(delete a[b],this.length--)},byId:function(b){return"string"==
typeof b?a[b]:b},byNode:function(b){return a[b.getAttribute("widgetId")]},toArray:function(){var b=[],d;for(d in a)b.push(a[d]);return b},getUniqueId:function(h){var e;do e=h+"_"+(h in b?++b[h]:b[h]=0);while(a[e]);return"dijit"==d._scopeName?e:d._scopeName+"_"+e},findWidgets:function(b,d){function e(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType){var h=b.getAttribute("widgetId");h?(h=a[h])&&g.push(h):b!==d&&e(b)}}var g=[];e(b);return g},_destroyAll:function(){d._curFocus=null;d._prevFocus=
null;d._activeStack=[];f.forEach(h.findWidgets(k.body()),function(a){a._destroyed||(a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy())})},getEnclosingWidget:function(b){for(;b;){var d=1==b.nodeType&&b.getAttribute("widgetId");if(d)return a[d];b=b.parentNode}return null},_hash:a};return d.registry=h})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),function(f,k,d,b,a,h,l,e){h.focus=
function(b){if(b){var d="node"in b?b.node:b,n=b.bookmark;b=b.openedForWindow;var l=n?n.isCollapsed:!1;if(d){var q="iframe"==d.tagName.toLowerCase()?d.contentWindow:d;if(q&&q.focus)try{q.focus()}catch(m){}h._onFocusNode(d)}if(n&&a.withGlobal(b||a.global,e.isCollapsed)&&!l){b&&b.focus();try{a.withGlobal(b||a.global,e.moveToBookmark,null,[n])}catch(m){}}}};h.watch("curNode",function(a,d,h){e._curFocus=h;e._prevFocus=d;h&&b.publish("focusNode",h)});h.watch("activeStack",function(a,b,d){e._activeStack=
d});h.on("widget-blur",function(a,d){b.publish("widgetBlur",a,d)});h.on("widget-focus",function(a,d){b.publish("widgetFocus",a,d)});d.mixin(e,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return e.getBookmark().isCollapsed},getBookmark:function(){return(a.global==window?l:new l.SelectionManager(a.global)).getBookmark()},moveToBookmark:function(b){return(a.global==window?l:new l.SelectionManager(a.global)).moveToBookmark(b)},getFocus:function(b,d){var g=!h.curNode||b&&k.isDescendant(h.curNode,
b.domNode)?e._prevFocus:h.curNode;return{node:g,bookmark:g&&g==h.curNode&&a.withGlobal(d||a.global,e.getBookmark),openedForWindow:d}},_activeStack:[],registerIframe:function(a){return h.registerIframe(a)},unregisterIframe:function(a){a&&a.remove()},registerWin:function(a,b){return h.registerWin(a,b)},unregisterWin:function(a){a&&a.remove()}});return e})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(f,k,d,b,a,h,l,e,p,g,n,t,q,m,w,v,u){var z,B,x=new (k([t,l],{curNode:null,activeStack:[],constructor:function(){var a=e.hitch(this,function(a){d.isDescendant(this.curNode,a)&&this.set("curNode",null);d.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});f.before(h,"empty",a);f.before(h,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var d=this,g=a.document&&a.document.body;if(g){var e=n("pointer-events")?"pointerdown":n("MSPointer")?
"MSPointerDown":n("touch-events")?"mousedown, touchstart":"mousedown",m=p(a.document,e,function(a){a&&a.target&&null==a.target.parentNode||d._onTouchNode(b||a.target,"mouse")}),h=p(g,"focusin",function(a){if(a.target.tagName){var g=a.target.tagName.toLowerCase();"#document"!=g&&"body"!=g&&(w.isFocusable(a.target)?d._onFocusNode(b||a.target):d._onTouchNode(b||a.target))}}),l=p(g,"focusout",function(a){d._onBlurNode(b||a.target)});return{remove:function(){m.remove();h.remove();l.remove();g=m=h=l=null}}}},
_onBlurNode:function(a){a=(new Date).getTime();a<z+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(e.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<B+100||(this._clearActiveWidgetsTimer=setTimeout(e.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(d,g){B=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);a.contains(d,"dijitPopup")&&(d=d.firstChild);var e=[];try{for(;d;){var h=b.get(d,"dijitPopupParent");if(h)d=v.byId(h).domNode;else if(d.tagName&&"body"==d.tagName.toLowerCase()){if(d===q.body())break;d=m.get(d.ownerDocument).frameElement}else{var n=d.getAttribute&&d.getAttribute("widgetId"),l=n&&v.byId(n);!l||"mouse"==g&&l.get("disabled")||e.unshift(n);d=d.parentNode}}}catch(G){}this._setStack(e,
g)},_onFocusNode:function(a){a&&9!=a.nodeType&&(z=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var d=this.activeStack,g=d.length-1,e=a.length-1;if(a[e]!=d[g]){this.set("activeStack",a);var m;for(m=g;0<=m&&d[m]!=a[m];m--)if(g=v.byId(d[m]))g._hasBeenBlurred=!0,g.set("focused",!1),g._focusManager==this&&g._onBlur(b),
this.emit("widget-blur",g,b);for(m++;m<=e;m++)if(g=v.byId(a[m]))g.set("focused",!0),g._focusManager==this&&g._onFocus(b),this.emit("widget-focus",g,b)}},focus:function(a){if(a)try{a.focus()}catch(A){}}}));g(function(){var a=x.registerWin(m.get(document));n("ie")&&p(window,"unload",function(){a&&(a.remove(),a=null)})});u.focus=function(a){x.focus(a)};for(var D in x)/^_/.test(D)||(u.focus[D]="function"==typeof x[D]?e.hitch(x,D):x[D]);x.watch(function(a,b,d){u.focus[a]=d});return x})},"dojo/Stateful":function(){define(["./_base/declare",
"./_base/lang","./_base/array","./when"],function(f,k,d,b){return f("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;return b[a]?b[a]:b[a]={s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,b){return"function"===typeof this[b.g]?this[b.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,d){if("object"===typeof a){for(var h in a)a.hasOwnProperty(h)&&"_watchCallbacks"!=h&&this.set(h,
a[h]);return this}h=this._getAttrNames(a);var e=this._get(a,h);h=this[h.s];var p;"function"===typeof h?p=h.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=d;if(this._watchCallbacks){var g=this;b(p,function(){g._watchCallbacks(a,e,d)})}return this},_changeAttrValue:function(a,b){var d=this.get(a);this[a]=b;this._watchCallbacks&&this._watchCallbacks(a,d,b);return this},watch:function(a,b){var h=this._watchCallbacks;if(!h)var e=this,h=this._watchCallbacks=function(a,b,d,g){var m=function(g){if(g){g=
g.slice();for(var m=0,h=g.length;m<h;m++)g[m].call(e,a,b,d)}};m(h["_"+a]);g||m(h["*"])};b||"function"!==typeof a?a="_"+a:(b=a,a="*");var p=h[a];"object"!==typeof p&&(p=h[a]=[]);p.push(b);var g={};g.unwatch=g.remove=function(){var a=d.indexOf(p,b);-1<a&&p.splice(a,1)};return g}})})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(f,k,d,b,a,h,l){k.add("rtl-adjust-position-for-verticalScrollBar",function(b,g){var e=
d.body(g),h=l.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},e,"last"),q=l.create("div",{style:{overflow:"hidden",direction:"ltr"}},h,"last"),m=0!=a.position(q).x;h.removeChild(q);e.removeChild(h);return m});k.add("position-fixed-support",function(b,g){var e=d.body(g),h=l.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},e,"last"),q=l.create("span",{style:{position:"fixed",
left:"0",top:"0"}},h,"last"),m=a.position(q).x!=a.position(h).x;h.removeChild(q);e.removeChild(h);return m});var e={getBox:function(b){b=b||d.doc;var g="BackCompat"==b.compatMode?d.body(b):b.documentElement,h=a.docScroll(b);if(k("touch")){var l=e.get(b);b=l.innerWidth||g.clientWidth;g=l.innerHeight||g.clientHeight}else b=g.clientWidth,g=g.clientHeight;return{l:h.x,t:h.y,w:b,h:g}},get:function(a){if(k("ie")&&e!==document.parentWindow){a.parentWindow.execScript("document._parentWindow \x3d window;",
"Javascript");var b=a._parentWindow;a._parentWindow=null;return b}return a.parentWindow||a.defaultView},scrollIntoView:function(e,g){try{e=b.byId(e);var n=e.ownerDocument||d.doc,l=d.body(n),q=n.documentElement||l.parentNode,m=k("ie")||k("trident"),p=k("webkit");if(e!=l&&e!=q)if(!(k("mozilla")||m||p||k("opera")||k("trident")||k("edge"))&&"scrollIntoView"in e)e.scrollIntoView(!1);else{var f="BackCompat"==n.compatMode,u=Math.min(l.clientWidth||q.clientWidth,q.clientWidth||l.clientWidth),z=Math.min(l.clientHeight||
q.clientHeight,q.clientHeight||l.clientHeight),n=p||f?l:q,B=g||a.position(e),x=e.parentNode,p=function(a){return 6>=m||7==m&&f?!1:k("position-fixed-support")&&"fixed"==h.get(a,"position").toLowerCase()},D=this,E=function(a,b,d){"BODY"==a.tagName||"HTML"==a.tagName?D.get(a.ownerDocument).scrollBy(b,d):(b&&(a.scrollLeft+=b),d&&(a.scrollTop+=d))};if(!p(e))for(;x;){x==l&&(x=n);var A=a.position(x),F=p(x),K="rtl"==h.getComputedStyle(x).direction.toLowerCase();if(x==n)A.w=u,A.h=z,n==q&&(m||k("trident"))&&
K&&(A.x+=n.offsetWidth-A.w),A.x=0,A.y=0;else{var I=a.getPadBorderExtents(x);A.w-=I.w;A.h-=I.h;A.x+=I.l;A.y+=I.t;var J=x.clientWidth,G=A.w-J;0<J&&0<G&&(K&&k("rtl-adjust-position-for-verticalScrollBar")&&(A.x+=G),A.w=J);J=x.clientHeight;G=A.h-J;0<J&&0<G&&(A.h=J)}F&&(0>A.y&&(A.h+=A.y,A.y=0),0>A.x&&(A.w+=A.x,A.x=0),A.y+A.h>z&&(A.h=z-A.y),A.x+A.w>u&&(A.w=u-A.x));var O=B.x-A.x,R=B.y-A.y,Z=O+B.w-A.w,Q=R+B.h-A.h,M,C;0<Z*O&&(x.scrollLeft||x==n||x.scrollWidth>x.offsetHeight)&&(M=Math[0>O?"max":"min"](O,Z),
K&&(8==m&&!f||5<=k("trident"))&&(M=-M),C=x.scrollLeft,E(x,M,0),M=x.scrollLeft-C,B.x-=M);0<Q*R&&(x.scrollTop||x==n||x.scrollHeight>x.offsetHeight)&&(M=Math.ceil(Math[0>R?"max":"min"](R,Q)),C=x.scrollTop,E(x,0,M),M=x.scrollTop-C,B.y-=M);x=x!=n&&!F&&x.parentNode}}}catch(H){e.scrollIntoView(!1)}}};f.setObject("dojo.window",e);return e})},"dijit/selection":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/sniff dojo/_base/window dijit/focus".split(" "),function(f,k,d,b,a,h){var l=function(e){var g=
e.document;this.getType=function(){if(g.getSelection){var a="text",b;try{b=e.getSelection()}catch(q){}b&&1==b.rangeCount&&(b=b.getRangeAt(0),b.startContainer==b.endContainer&&1==b.endOffset-b.startOffset&&3!=b.startContainer.nodeType&&(a="control"));return a}return g.selection.type.toLowerCase()};this.getSelectedText=function(){if(g.getSelection){var a=e.getSelection();return a?a.toString():""}return"control"==this.getType()?null:g.selection.createRange().text};this.getSelectedHtml=function(){if(g.getSelection){var a=
e.getSelection();if(a&&a.rangeCount){var b,d="";for(b=0;b<a.rangeCount;b++){var m=a.getRangeAt(b).cloneContents(),h=g.createElement("div");h.appendChild(m);d+=h.innerHTML}return d}return null}return"control"==this.getType()?null:g.selection.createRange().htmlText};this.getSelectedElement=function(){if("control"==this.getType()){if(g.getSelection){var a=e.getSelection();return a.anchorNode.childNodes[a.anchorOffset]}if((a=g.selection.createRange())&&a.item)return g.selection.createRange().item(0)}return null};
this.getParentElement=function(){if("control"==this.getType()){var a=this.getSelectedElement();if(a)return a.parentNode}else if(g.getSelection){if(a=g.getSelection()){for(a=a.anchorNode;a&&1!=a.nodeType;)a=a.parentNode;return a}}else return a=g.selection.createRange(),a.collapse(!0),a.parentElement();return null};this.hasAncestorElement=function(a){return null!=this.getAncestorElement.apply(this,arguments)};this.getAncestorElement=function(a){var b=this.getSelectedElement()||this.getParentElement();
return this.getParentOfType(b,arguments)};this.isTag=function(a,b){if(a&&a.tagName)for(var d=a.tagName.toLowerCase(),g=0;g<b.length;g++){var e=String(b[g]).toLowerCase();if(d==e)return e}return""};this.getParentOfType=function(a,b){for(;a;){if(this.isTag(a,b).length)return a;a=a.parentNode}return null};this.collapse=function(a){if(g.getSelection){var b=e.getSelection();b.removeAllRanges?a?b.collapseToStart():b.collapseToEnd():b.collapse(a)}else b=g.selection.createRange(),b.collapse(a),b.select()};
this.remove=function(){var a=g.selection;g.getSelection?(a=e.getSelection(),a.deleteFromDocument()):"none"!=a.type.toLowerCase()&&a.clear();return a};this.selectElementChildren=function(a,d){var h;a=k.byId(a);if(g.getSelection){var m=e.getSelection();b("opera")?(h=m.rangeCount?m.getRangeAt(0):g.createRange(),h.setStart(a,0),h.setEnd(a,3==a.nodeType?a.length:a.childNodes.length),m.addRange(h)):m.selectAllChildren(a)}else if(h=a.ownerDocument.body.createTextRange(),h.moveToElementText(a),!d)try{h.select()}catch(w){}};
this.selectElement=function(d,e){var h;d=k.byId(d);if(g.getSelection){var m=g.getSelection();h=g.createRange();m.removeAllRanges&&(b("opera")&&m.getRangeAt(0)&&(h=m.getRangeAt(0)),h.selectNode(d),m.removeAllRanges(),m.addRange(h))}else try{m=d.tagName?d.tagName.toLowerCase():"",h="img"===m||"table"===m?a.body(g).createControlRange():a.body(g).createRange(),h.addElement(d),e||h.select()}catch(w){this.selectElementChildren(d,e)}};this.inSelection=function(a){if(a){var b,d;if(g.getSelection){var m=e.getSelection();
m&&0<m.rangeCount&&(d=m.getRangeAt(0));if(d&&d.compareBoundaryPoints&&g.createRange)try{if(b=g.createRange(),b.setStart(a,0),1===d.compareBoundaryPoints(d.START_TO_END,b))return!0}catch(w){}}else{d=g.selection.createRange();try{b=a.ownerDocument.body.createTextRange(),b.moveToElementText(a)}catch(w){}if(d&&b&&1===d.compareEndPoints("EndToStart",b))return!0}}return!1};this.getBookmark=function(){var a,b,d=g.selection,m=h.curNode;if(g.getSelection){if(d=e.getSelection())if(d.isCollapsed){if(a=m?m.tagName:
"")if(a=a.toLowerCase(),"textarea"==a||"input"==a&&(!m.type||"text"==m.type.toLowerCase()))return d={start:m.selectionStart,end:m.selectionEnd,node:m,pRange:!0},{isCollapsed:d.end<=d.start,mark:d};a={isCollapsed:!0};d.rangeCount&&(a.mark=d.getRangeAt(0).cloneRange())}else b=d.getRangeAt(0),a={isCollapsed:!1,mark:b.cloneRange()}}else if(d){a=m?m.tagName:"";a=a.toLowerCase();if(m&&a&&("button"==a||"textarea"==a||"input"==a)){if(d.type&&"none"==d.type.toLowerCase())return{isCollapsed:!0,mark:null};b=
d.createRange();return{isCollapsed:b.text&&b.text.length?!1:!0,mark:{range:b,pRange:!0}}}a={};try{b=d.createRange(),a.isCollapsed=!("Text"==d.type?b.htmlText.length:b.length)}catch(w){return a.isCollapsed=!0,a}if("CONTROL"==d.type.toUpperCase())if(b.length)for(a.mark=[],d=0,m=b.length;d<m;)a.mark.push(b.item(d++));else a.isCollapsed=!0,a.mark=null;else a.mark=b.getBookmark()}return a};this.moveToBookmark=function(a){if(a=a.mark)if(g.getSelection){var b=e.getSelection();b&&b.removeAllRanges&&(a.pRange?
(b=a.node,b.selectionStart=a.start,b.selectionEnd=a.end):(b.removeAllRanges(),b.addRange(a)))}else if(g.selection&&a){var h;a.pRange?h=a.range:d.isArray(a)?(h=g.body.createControlRange(),f.forEach(a,function(a){h.addElement(a)})):(h=g.body.createTextRange(),h.moveToBookmark(a));h.select()}};this.isCollapsed=function(){return this.getBookmark().isCollapsed}},e=new l(window);e.SelectionManager=l;return e})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang",
"../registry","../main"],function(f,k,d,b,a){var h={};f.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(a){h[a]=b[a]});d.mixin(h,{defaultDuration:k.defaultDuration||200});d.mixin(a,h);return a})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(f,k,d,b,a){var h={getViewport:function(){return d.getBox()}};h.placeOnScreen=b.at;h.placeOnScreenAroundElement=function(a,d,h,g){var e;
if(k.isArray(h))e=h;else{e=[];for(var l in h)e.push({aroundCorner:l,corner:h[l]})}return b.around(a,d,e,!0,g)};h.placeOnScreenAroundNode=h.placeOnScreenAroundElement;h.placeOnScreenAroundRectangle=h.placeOnScreenAroundElement;h.getPopupAroundAlignment=function(a,b){var d={};f.forEach(a,function(a){var g=b;switch(a){case "after":d[b?"BR":"BL"]=b?"BL":"BR";break;case "before":d[b?"BL":"BR"]=b?"BR":"BL";break;case "below-alt":g=!g;case "below":d[g?"BL":"BR"]=g?"TL":"TR";d[g?"BR":"BL"]=g?"TR":"TL";break;
case "above-alt":g=!g;default:d[g?"TL":"TR"]=g?"BL":"BR",d[g?"TR":"TL"]=g?"BR":"BL"}});return d};k.mixin(a,h);return a})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(f,k,d,b,a,h,l){function e(b,e,l,q){var g=h.getEffectiveBox(b.ownerDocument);b.parentNode&&"body"==String(b.parentNode.tagName).toLowerCase()||a.body(b.ownerDocument).appendChild(b);var n=null;f.some(e,function(a){var d=a.corner,
e=a.pos,m=0,h={w:{L:g.l+g.w-e.x,R:e.x-g.l,M:g.w}[d.charAt(1)],h:{T:g.t+g.h-e.y,B:e.y-g.t,M:g.h}[d.charAt(0)]},p=b.style;p.left=p.right="auto";l&&(m=l(b,a.aroundCorner,d,h,q),m="undefined"==typeof m?0:m);var f=b.style,t=f.display,u=f.visibility;"none"==f.display&&(f.visibility="hidden",f.display="");p=k.position(b);f.display=t;f.visibility=u;t={L:e.x,R:e.x-p.w,M:Math.max(g.l,Math.min(g.l+g.w,e.x+(p.w>>1))-p.w)}[d.charAt(1)];u={T:e.y,B:e.y-p.h,M:Math.max(g.t,Math.min(g.t+g.h,e.y+(p.h>>1))-p.h)}[d.charAt(0)];
e=Math.max(g.l,t);f=Math.max(g.t,u);t=Math.min(g.l+g.w,t+p.w)-e;u=Math.min(g.t+g.h,u+p.h)-f;m+=p.w-t+(p.h-u);if(null==n||m<n.overflow)n={corner:d,aroundCorner:a.aroundCorner,x:e,y:f,w:t,h:u,overflow:m,spaceAvailable:h};return!m});n.overflow&&l&&l(b,n.aroundCorner,n.corner,n.spaceAvailable,q);e=n.y;var p=n.x,t=a.body(b.ownerDocument);/relative|absolute/.test(d.get(t,"position"))&&(e-=d.get(t,"marginTop"),p-=d.get(t,"marginLeft"));t=b.style;t.top=e+"px";t.left=p+"px";t.right="auto";return n}var p={TL:"BR",
TR:"BL",BL:"TR",BR:"TL"};return l.place={at:function(a,b,d,h,m){d=f.map(d,function(a){var d={corner:a,aroundCorner:p[a],pos:{x:b.x,y:b.y}};h&&(d.pos.x+="L"==a.charAt(1)?h.x:-h.x,d.pos.y+="T"==a.charAt(0)?h.y:-h.y);return d});return e(a,d,m)},around:function(a,h,l,q,m){function g(a,b){I.push({aroundCorner:a,corner:b,pos:{x:{L:E,R:E+F,M:E+(F>>1)}[a.charAt(1)],y:{T:A,B:A+K,M:A+(K>>1)}[a.charAt(0)]}})}var n;if("string"==typeof h||"offsetWidth"in h||"ownerSVGElement"in h){if(n=k.position(h,!0),/^(above|below)/.test(l[0])){var p=
k.getBorderExtents(h),t=h.firstChild?k.getBorderExtents(h.firstChild):{t:0,l:0,b:0,r:0},B=k.getBorderExtents(a),x=a.firstChild?k.getBorderExtents(a.firstChild):{t:0,l:0,b:0,r:0};n.y+=Math.min(p.t+t.t,B.t+x.t);n.h-=Math.min(p.t+t.t,B.t+x.t)+Math.min(p.b+t.b,B.b+x.b)}}else n=h;if(h.parentNode)for(p="absolute"==d.getComputedStyle(h).position,h=h.parentNode;h&&1==h.nodeType&&"BODY"!=h.nodeName;){t=k.position(h,!0);B=d.getComputedStyle(h);/relative|absolute/.test(B.position)&&(p=!1);if(!p&&/hidden|auto|scroll/.test(B.overflow)){var x=
Math.min(n.y+n.h,t.y+t.h),D=Math.min(n.x+n.w,t.x+t.w);n.x=Math.max(n.x,t.x);n.y=Math.max(n.y,t.y);n.h=x-n.y;n.w=D-n.x}"absolute"==B.position&&(p=!0);h=h.parentNode}var E=n.x,A=n.y,F="w"in n?n.w:n.w=n.width,K="h"in n?n.h:(b.deprecated("place.around: dijit/place.__Rectangle: { x:"+E+", y:"+A+", height:"+n.height+", width:"+F+" } has been deprecated.  Please use { x:"+E+", y:"+A+", h:"+n.height+", w:"+F+" }","","2.0"),n.h=n.height),I=[];f.forEach(l,function(a){var b=q;switch(a){case "above-centered":g("TM",
"BM");break;case "below-centered":g("BM","TM");break;case "after-centered":b=!b;case "before-centered":g(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":g(b?"TL":"TR",b?"TR":"TL");g(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":g(b?"BL":"BR",b?"TL":"TR");g(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":g(b?"TL":"TR",b?"BL":"BR");g(b?"TR":"TL",b?"BR":"BL");break;default:g(a.aroundCorner,a.corner)}});a=e(a,I,m,{w:F,h:K});a.aroundNodePos=n;return a}}})},
"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(f,k,d,b,a){var h=new f,l;d(function(){var d=a.getBox();h._rlh=k(window,"resize",function(){var b=a.getBox();if(d.h!=b.h||d.w!=b.w)d=b,h.emit("resize")});if(8==b("ie")){var p=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=p&&(p=screen.deviceXDPI,h.emit("resize"))},500)}b("ios")&&(k(document,"focusin",function(a){l=a.target}),k(document,"focusout",function(a){l=null}))});h.getEffectiveBox=
function(d){d=a.getBox(d);var e=l&&l.tagName&&l.tagName.toLowerCase();b("ios")&&l&&!l.readOnly&&("textarea"==e||"input"==e&&/^(color|email|number|password|search|tel|text|url)$/.test(l.type))&&(d.h*=0==orientation||180==orientation?.66:.4,e=l.getBoundingClientRect(),d.h=Math.max(d.h,e.top+e.height));return d};return h})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(f,k,d){var b=d._createWrapper;d._createWrapper=function(a){a.declaredClass||
(a={_popupWrapper:a.parentNode&&f.contains(a.parentNode,"dijitPopup")?a.parentNode:null,domNode:a,destroy:function(){},ownerDocument:a.ownerDocument,ownerDocumentBody:k.body(a.ownerDocument)});return b.call(this,a)};var a=d.open;d.open=function(b){if(b.orient&&"string"!=typeof b.orient&&!("length"in b.orient)){var d=[],e;for(e in b.orient)d.push({aroundCorner:e,corner:b.orient[e]});b.orient=d}return a.call(this,b)};return d})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),
function(f,k,d,b,a,h,l,e,p,g,n,t,q,m,w,v){function u(){this._popupWrapper&&(h.destroy(this._popupWrapper),delete this._popupWrapper)}d=d(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var a=this._firstAroundPosition,b=l.position(this._firstAroundNode,!0),d=b.x-a.x,a=b.y-a.y;if(d||a)for(this._firstAroundPosition=b,b=0;b<this._stack.length;b++){var g=this._stack[b].wrapper.style;g.top=parseFloat(g.top)+a+"px";"auto"==g.right?g.left=parseFloat(g.left)+d+
"px":g.right=parseFloat(g.right)-d+"px"}this._aroundMoveListener=setTimeout(n.hitch(this,"_repositionAll"),d||a?10:50)}},_createWrapper:function(a){var b=a._popupWrapper,d=a.domNode;b||(b=h.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),b.appendChild(d),d=d.style,d.display="",d.visibility="",d.position="",d.top="0px",a._popupWrapper=b,k.after(a,"destroy",u,!0),"ontouchend"in document&&t(b,"touchend",
function(a){/^(input|button|textarea)$/i.test(a.target.tagName)||a.preventDefault()}),b.dojoClick=!0);return b},moveOffScreen:function(a){var b=this._createWrapper(a);a=l.isBodyLtr(a.ownerDocument);var d={visibility:"hidden",top:"-9999px",display:""};d[a?"left":"right"]="-9999px";d[a?"right":"left"]="auto";e.set(b,d);return b},hide:function(a){var b=this._createWrapper(a);e.set(b,{display:"none",height:"auto",overflowY:"visible",border:""});a=a.domNode;"_originalStyle"in a&&(a.style.cssText=a._originalStyle)},
getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(d){for(var h=this._stack,f=d.popup,k=f.domNode,u=d.orient||["below","below-alt","above","above-alt"],z=d.parent?d.parent.isLeftToRight():l.isBodyLtr(f.ownerDocument),v=d.around,K=d.around&&d.around.id?d.around.id+"_dropdown":"popup_"+this._idGen++;h.length&&(!d.parent||!b.isDescendant(d.parent.domNode,h[h.length-1].widget.domNode));)this.close(h[h.length-1].widget);var I=this.moveOffScreen(f);
f.startup&&!f._started&&f.startup();var J,G=l.position(k);if("maxHeight"in d&&-1!=d.maxHeight)J=d.maxHeight||Infinity;else{J=w.getEffectiveBox(this.ownerDocument);var O=v?l.position(v,!1):{y:d.y-(d.padding||0),h:2*(d.padding||0)};J=Math.floor(Math.max(O.y,J.h-(O.y+O.h)))}G.h>J&&(G=e.getComputedStyle(k),e.set(I,{overflowY:"scroll",height:J+"px",border:G.borderLeftWidth+" "+G.borderLeftStyle+" "+G.borderLeftColor}),k._originalStyle=k.style.cssText,k.style.border="none");a.set(I,{id:K,style:{zIndex:this._beginZIndex+
h.length},"class":"dijitPopup "+(f.baseClass||f["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:d.parent?d.parent.id:""});0==h.length&&v&&(this._firstAroundNode=v,this._firstAroundPosition=l.position(v,!0),this._aroundMoveListener=setTimeout(n.hitch(this,"_repositionAll"),50));p("config-bgIframe")&&!f.bgIframe&&(f.bgIframe=new m(I));K=f.orient?n.hitch(f,"orient"):null;u=v?q.around(I,v,u,z,K):q.at(I,d,"R"==u?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],d.padding,K);I.style.visibility="visible";
k.style.visibility="visible";k=[];k.push(t(I,"keydown",n.hitch(this,function(a){if(a.keyCode==g.ESCAPE&&d.onCancel)a.stopPropagation(),a.preventDefault(),d.onCancel();else if(a.keyCode==g.TAB&&(a.stopPropagation(),a.preventDefault(),(a=this.getTopPopup())&&a.onCancel))a.onCancel()})));f.onCancel&&d.onCancel&&k.push(f.on("cancel",d.onCancel));k.push(f.on(f.onExecute?"execute":"change",n.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));h.push({widget:f,wrapper:I,parent:d.parent,
onExecute:d.onExecute,onCancel:d.onCancel,onClose:d.onClose,handlers:k});if(f.onOpen)f.onOpen(u);return u},close:function(a){for(var b=this._stack;a&&f.some(b,function(b){return b.widget==a})||!a&&b.length;){var d=b.pop(),g=d.widget,e=d.onClose;g.bgIframe&&(g.bgIframe.destroy(),delete g.bgIframe);if(g.onClose)g.onClose();for(var m;m=d.handlers.pop();)m.remove();g&&g.domNode&&this.hide(g);e&&e()}0==b.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=
this._aroundMoveListener=null)}});return v.popup=new d})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(f,k,d,b,a,h,l,e){e.add("config-bgIframe",(e("ie")||e("trident"))&&!/IEMobile\/10\.0/.test(navigator.userAgent));var p=new function(){var g=[];this.pop=function(){var h;g.length?(h=g.pop(),h.style.display=""):(9>e("ie")?(h=d.dojoBlankHtmlUrl||f.toUrl("dojo/resources/blank.html")||
'javascript:""',h=document.createElement("\x3ciframe src\x3d'"+h+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")):(h=b.create("iframe"),h.src='javascript:""',h.className="dijitBackgroundIframe",h.setAttribute("role","presentation"),a.set(h,"opacity",.1)),h.tabIndex=-1);return h};this.push=function(a){a.style.display="none";g.push(a)}};k.BackgroundIframe=function(b){if(!b.id)throw Error("no id");if(e("config-bgIframe")){var d=
this.iframe=p.pop();b.appendChild(d);7>e("ie")||e("quirks")?(this.resize(b),this._conn=l(b,"resize",h.hitch(this,"resize",b))):a.set(d,{width:"100%",height:"100%"})}};h.extend(k.BackgroundIframe,{resize:function(b){this.iframe&&a.set(this.iframe,{width:b.offsetWidth+"px",height:b.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),p.push(this.iframe),delete this.iframe)}});return k.BackgroundIframe})},
"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(f,k,d,b,a,h,l,e,p,g){function n(a,b,d){return w&&d?function(a,b){return h(a,d,b)}:u?function(d,g){var e=h(d,b,function(a){g.call(this,a);J=(new Date).getTime()}),m=h(d,a,function(a){(!J||(new Date).getTime()>J+1E3)&&g.call(this,a)});return{remove:function(){e.remove();m.remove()}}}:function(b,d){return h(b,a,d)}}function t(a){do if(void 0!==a.dojoClick)return a;
while(a=a.parentNode)}function q(a,m,l){if(!e.isRight(a)){var n=t(a.target);if(B=!a.target.disabled&&n&&n.dojoClick)if(D=(x="useTarget"==B)?n:a.target,x&&a.preventDefault(),E=a.changedTouches?a.changedTouches[0].pageX-g.global.pageXOffset:a.clientX,A=a.changedTouches?a.changedTouches[0].pageY-g.global.pageYOffset:a.clientY,F=("object"==typeof B?B.x:"number"==typeof B?B:0)||4,K=("object"==typeof B?B.y:"number"==typeof B?B:0)||4,!z){a=function(a){g.doc.addEventListener(a,function(d){var g=d.target;
B&&!d._dojo_click&&(new Date).getTime()<=I+1E3&&("INPUT"!=g.tagName||!b.contains(g,"dijitOffScreen"))&&(d.stopPropagation(),d.stopImmediatePropagation&&d.stopImmediatePropagation(),"click"==a&&("INPUT"!=g.tagName||"radio"==g.type&&(b.contains(g,"dijitCheckBoxInput")||b.contains(g,"mblRadioButton"))||"checkbox"==g.type&&(b.contains(g,"dijitCheckBoxInput")||b.contains(g,"mblCheckBox")))&&"TEXTAREA"!=g.tagName&&"AUDIO"!=g.tagName&&"VIDEO"!=g.tagName&&d.preventDefault())},!0)};var q=function(a){B=x?d.isDescendant(g.doc.elementFromPoint(a.changedTouches?
a.changedTouches[0].pageX-g.global.pageXOffset:a.clientX,a.changedTouches?a.changedTouches[0].pageY-g.global.pageYOffset:a.clientY),D):B&&(a.changedTouches?a.changedTouches[0].target:a.target)==D&&Math.abs((a.changedTouches?a.changedTouches[0].pageX-g.global.pageXOffset:a.clientX)-E)<=F&&Math.abs((a.changedTouches?a.changedTouches[0].pageY-g.global.pageYOffset:a.clientY)-A)<=K};z=!0;g.doc.addEventListener(m,function(a){e.isRight(a)||(q(a),x&&a.preventDefault())},!0);g.doc.addEventListener(l,function(a){if(!e.isRight(a)&&
(q(a),B)){var b=function(b){var d=document.createEvent("MouseEvents");d._dojo_click=!0;d.initMouseEvent(b,!0,!0,a.view,a.detail,m.screenX,m.screenY,m.clientX,m.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);return d};I=(new Date).getTime();var g=x?D:a.target;"LABEL"===g.tagName&&(g=d.byId(g.getAttribute("for"))||g);var m=a.changedTouches?a.changedTouches[0]:a,l=b("mousedown"),n=b("mouseup"),p=b("click");setTimeout(function(){h.emit(g,"mousedown",l);h.emit(g,"mouseup",n);h.emit(g,"click",
p);I=(new Date).getTime()},0)}},!0);a("click");a("mousedown");a("mouseup")}}}var m=5>l("ios"),w=l("pointer-events")||l("MSPointer"),v=function(){var a={},b;for(b in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[b]=l("MSPointer")?"MSPointer"+b.charAt(0).toUpperCase()+b.slice(1):"pointer"+b;return a}(),u=l("touch-events"),z,B,x=!1,D,E,A,F,K,I,J,G;l("touch")&&(w?p(function(){g.doc.addEventListener(v.down,function(a){q(a,v.move,v.up)},!0)}):p(function(){function b(b){var d=a.delegate(b,{bubbles:!0});6<=
l("ios")&&(d.touches=b.touches,d.altKey=b.altKey,d.changedTouches=b.changedTouches,d.ctrlKey=b.ctrlKey,d.metaKey=b.metaKey,d.shiftKey=b.shiftKey,d.targetTouches=b.targetTouches);return d}G=g.body();g.doc.addEventListener("touchstart",function(a){J=(new Date).getTime();var b=G;G=a.target;h.emit(b,"dojotouchout",{relatedTarget:G,bubbles:!0});h.emit(G,"dojotouchover",{relatedTarget:b,bubbles:!0});q(a,"touchmove","touchend")},!0);h(g.doc,"touchmove",function(a){J=(new Date).getTime();var d=g.doc.elementFromPoint(a.pageX-
(m?0:g.global.pageXOffset),a.pageY-(m?0:g.global.pageYOffset));d&&(G!==d&&(h.emit(G,"dojotouchout",{relatedTarget:d,bubbles:!0}),h.emit(d,"dojotouchover",{relatedTarget:G,bubbles:!0}),G=d),h.emit(d,"dojotouchmove",b(a))||a.preventDefault())});h(g.doc,"touchend",function(a){J=(new Date).getTime();var d=g.doc.elementFromPoint(a.pageX-(m?0:g.global.pageXOffset),a.pageY-(m?0:g.global.pageYOffset))||g.body();h.emit(d,"dojotouchend",b(a))})}));k={press:n("mousedown","touchstart",v.down),move:n("mousemove",
"dojotouchmove",v.move),release:n("mouseup","dojotouchend",v.up),cancel:n(e.leave,"touchcancel",w?v.cancel:null),over:n("mouseover","dojotouchover",v.over),out:n("mouseout","dojotouchout",v.out),enter:e._eventHandler(n("mouseover","dojotouchover",v.over)),leave:e._eventHandler(n("mouseout","dojotouchout",v.out))};return f.touch=k})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(f,k){k.scrollIntoView=function(d,b){f.scrollIntoView(d,b)}})},"dijit/_base/sniff":function(){define(["dojo/uacss"],
function(){})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(f,k,d,b,a){var h=a.doc.documentElement;a=b("ie");var l=b("trident"),e=b("opera"),p=Math.floor,g=b("ff"),n=f.boxModel.replace(/-/,""),e={dj_quirks:b("quirks"),dj_opera:e,dj_khtml:b("khtml"),dj_webkit:b("webkit"),dj_safari:b("safari"),dj_chrome:b("chrome"),dj_edge:b("edge"),dj_gecko:b("mozilla"),dj_ios:b("ios"),dj_android:b("android")};a&&(e.dj_ie=!0,e["dj_ie"+p(a)]=!0,e.dj_iequirks=
b("quirks"));l&&(e.dj_trident=!0,e["dj_trident"+p(l)]=!0);g&&(e["dj_ff"+p(g)]=!0);e["dj_"+n]=!0;var t="",q;for(q in e)e[q]&&(t+=q+" ");h.className=k.trim(h.className+" "+t);d(function(){if(!f.isBodyLtr()){var a="dj_rtl dijitRtl "+t.replace(/ /g,"-rtl ");h.className=k.trim(h.className+" "+a+"dj_rtl dijitRtl "+t.replace(/ /g,"-rtl "))}});return b})},"dijit/_base/typematic":function(){define(["../typematic"],function(){})},"dijit/typematic":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "),
function(f,k,d,b,a,h){var l=h.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(d.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(a,b,g,h,l,q,m,f){if(l!=this._obj){this.stop();this._initialDelay=m||500;this._subsequentDelay=
q||.9;this._minDelay=f||10;this._obj=l;this._node=g;this._count=this._currentTimeout=-1;this._callback=d.hitch(b,h);this._evt={faux:!0};for(var e in a)"layerX"!=e&&"layerY"!=e&&(b=a[e],"function"!=typeof b&&"undefined"!=typeof b&&(this._evt[e]=b));this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null);this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(a,h,g,n,t,q,m){var e="keyCode"in h?"keyCode":"charCode"in
h?"charCode":"charOrCode",p=[b(a,"keyCode"in h?"keydown":"charCode"in h?"keypress":k._keypress,d.hitch(this,function(b){b[e]!=h[e]||void 0!==h.ctrlKey&&h.ctrlKey!=b.ctrlKey||void 0!==h.altKey&&h.altKey!=b.altKey||void 0!==h.metaKey&&h.metaKey!=(b.metaKey||!1)||void 0!==h.shiftKey&&h.shiftKey!=b.shiftKey?l._obj==h&&l.stop():(b.stopPropagation(),b.preventDefault(),l.trigger(b,g,a,n,h,t,q,m))})),b(a,"keyup",d.hitch(this,function(){l._obj==h&&l.stop()}))];return{remove:function(){f.forEach(p,function(a){a.remove()})}}},
addMouseListener:function(e,h,g,n,k,q){var m=[b(e,"mousedown",d.hitch(this,function(a){a.preventDefault();l.trigger(a,h,e,g,e,n,k,q)})),b(e,"mouseup",d.hitch(this,function(a){this._obj&&a.preventDefault();l.stop()})),b(e,"mouseout",d.hitch(this,function(a){this._obj&&a.preventDefault();l.stop()})),b(e,"dblclick",d.hitch(this,function(b){b.preventDefault();9>a("ie")&&(l.trigger(b,h,e,g,e,n,k,q),setTimeout(d.hitch(this,l.stop),50))}))];return{remove:function(){f.forEach(m,function(a){a.remove()})}}},
addListener:function(a,b,d,h,l,q,m,k){var g=[this.addKeyListener(b,d,h,l,q,m,k),this.addMouseListener(a,h,l,q,m,k)];return{remove:function(){f.forEach(g,function(a){a.remove()})}}}};return l})},"dijit/_base/wai":function(){define(["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(f,k,d){k.mixin(d,{hasWaiRole:function(b,a){var d=this.getWaiRole(b);return a?-1<d.indexOf(a):0<d.length},getWaiRole:function(b){return k.trim((f.get(b,"role")||"").replace("wairole:",""))},setWaiRole:function(b,
a){f.set(b,"role",a)},removeWaiRole:function(b,a){var d=f.get(b,"role");d&&(a?(d=k.trim((" "+d+" ").replace(" "+a+" "," ")),f.set(b,"role",d)):b.removeAttribute("role"))},hasWaiState:function(b,a){return b.hasAttribute?b.hasAttribute("aria-"+a):!!b.getAttribute("aria-"+a)},getWaiState:function(b,a){return b.getAttribute("aria-"+a)||""},setWaiState:function(b,a,d){b.setAttribute("aria-"+a,d)},removeWaiState:function(b,a){b.removeAttribute("aria-"+a)}});return d})},"dijit/hccss":function(){define(["dojo/dom-class",
"dojo/hccss","dojo/domReady","dojo/_base/window"],function(f,k,d,b){d(function(){k("highcontrast")&&f.add(b.body(),"dijit_a11y")});return k})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(f,k,d,b,a,h,l){a.add("highcontrast",function(){var d=l.doc.createElement("div");try{d.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(k.blankGif||
f.toUrl("./resources/blank.gif"))+'");';l.body().appendChild(d);var h=b.getComputedStyle(d),g=h.backgroundImage;return h.borderTopColor==h.borderRightColor||g&&("none"==g||"url(invalid-url:)"==g)}catch(n){return!1}finally{8>=a("ie")?d.outerHTML="":l.body().removeChild(d)}});h(function(){a("highcontrast")&&d.add(l.body(),"dj_a11y")});return a})},"dijit/_base/window":function(){define(["dojo/window","../main"],function(f,k){k.getDocumentWindow=function(d){return f.get(d)}})},"ws/bootstrap":function(){define("ws/bootstrap",
"dojo/_base/declare dojo/_base/lang ws/mail/MailModel ws/mail/folderName ws/dojofixes ws/io ws/themes/ThemeConfig".split(" "),function(f,k,d){k.setObject("ws.bootstrap",{init:function(){_ws.updateProgress(100);ws.CalSolo||(this.theMailModel=new d,_ws.updateProgress(125),ws.themes.ThemeConfig.init(),ws.mail.folderName.init());ws.WebSuite.initialize()},doToday:function(){},parseAppQueryCmd:function(){var b={at:["tid",null,"promoteTheme","tlabel",null],as:["sid",null,"promoteStationery","slabel",null]},
a=ws.io.getQueryParameter("cmd");a||(a="");for(var d=a.split(","),l=d.length-1;0<=l;l--){var e=!1;if(a=d[l]){var p=ws.io.getQueryParameter(b[a][0]);null!=p&&(b[a][1]=p,e=!0,("as"==a||"at"==a)&&(p=ws.io.getQueryParameter(b[a][3]))&&(b[a][4]=p))}e||d.splice(l,1)}return{cmds:d,cmdMap:b}},isAddCommandParams:function(){var b=ws.bootstrap.parseAppQueryCmd();return b.cmds&&0<b.cmds.length?!0:!1}})})},"ws/mail/MailModel":function(){define("ws/mail/MailModel","dojo/_base/declare ws/mail/folderName ws/mail/folder ws/CachedList ws/cache ws/mail/JwsApi ws/idleMonitor dojo/request/registry dojo/json dojo/_base/lang dojo/_base/array dojo/Deferred dojo/promise/all ws/lang ws/io ws/UserContext".split(" "),
function(f,k,d,b,a,h,l,e,p,g,n,t,q){ws.mail||(ws.mail={});ws.mail.folderName=new k;return f(null,{inboxStateToken:"-1",nCheckNewMessageCount:0,newestMsgTime:null,skipCachedMsg:!1,sortIndices:{FromToAddress:"fromToName",Subject:"subject",Attachment:"attachments",Received:"received",Flag:"flagged",Size:"size",Folder:"folder",Account:"account"},accountTypes:["SENDAS","IMAPIN","DEA","ALIAS"],constructor:function(d){this.checkVersionTimer=this.checkNewMessagesTimer=null;ws.Jws=new h;ws.Jws.model=this;
this.getInfo();this.standAloneMailModel=d;this.inboxCachedList=new b(Config.ClientSideMaxCache,Config.ClientSideMaxMessageFetch,!0,this);this.otherCachedList=new b(Config.ClientSideMaxCache,Config.ClientSideMaxMessageFetch,!1,this);this.activeCachedList=this.inboxCachedList;d=[this.inboxCachedList,this.otherCachedList];for(var e=0;e<d.length;e++){var m=d[e];dojo.connect(m,"FoldersChanged",this,"_folderListChanged");dojo.connect(m,"Cleared",g.hitch(this,"cachedListUpdated",m));dojo.connect(m,"IndexUpdated",
g.hitch(this,"cachedListUpdated",m));dojo.connect(m,"RowsUpdated",g.hitch(this,"changeRows",m))}this.folders=[];this.selectedUids={};this.exclUids={};this.filter="all";this.allSelected=this.fetchingNewMail=!1;this.fetchIndexCB=null;this.messageCache=new a(10,1);d=this.getInboxFolderName();this.setFolder(d,null,null,null,null,"descending",!0);dojo.subscribe("SettingsChanged/Compose",this,"composeSettingsChanged");dojo.subscribe("WSSessionExpired",this,"onSessionExpired");dojo.subscribe("NotifyExpiredSession",
this,"onSessionExpired");this.checkNewMessagesTimer=setInterval(g.hitch(this,"checkNewMessages"),1E3*Config.StandardMessagePolling);this.setupVersionCheckTimer();this.sendAddresses=[[ws.UserContext.UserAddress,ws.UserContext.UserAddress]];this._messagesInFlight={}},setupVersionCheckTimer:function(){Config.StandardCheckVersionPolling&&(null!==this.checkVersionTimer&&clearInterval(this.checkVersionTimer),this.checkVersionTimer=setInterval(g.hitch(this,"checkVersion"),1E3*Config.StandardCheckVersionPolling))},
sort:function(a,b){a in this.sortIndices&&("Flag"!=a&&"Attachment"!=a||this.sortIndices[a]==this.activeCachedList.CurrentIndex||(b="descending"),"Flag"==a?(this.activeCachedList.SetSort(this.sortIndices[a],b,this.flagsDirty),this.flagsDirty=!1):this.activeCachedList.SetSort(this.sortIndices[a],b))},newMsgCheck:function(a){var b=this.inboxCachedList,d=this.getCurrentFolder(),g=function(){if(b&&0<b.GetRowCount()&&b.GetRow(0)){var d=b.GetRow(0).headers.internalDate;a&&a(d)}};if(d){d=(this.isFolderType(d,
"INBOX")||this.isFolderType(d,"NEWMAIL"))&&"received"==b.CurrentIndex&&"descending"==b.IndexDirection;if(this.isSearch())if(d||this.fetchingNewMail)g();else{ws.Jws.checkMostRecent(a);return}else if(d)g();else{ws.Jws.checkMostRecent(a);return}this.fetchingNewMail=!1}},updateNewestMsgTime:function(a){this.fetchingNewMail&&this.newestMsgTime&&a&&a>this.newestMsgTime&&this.newMailReceived();this.newestMsgTime=a;this.fetchingNewMail=!1},cachedListUpdated:function(a,b){this.fetchIndexCB?(this.fetchIndexCB(),
this.fetchIndexCB=null):(a==this.activeCachedList&&(this.modelUpdated(b),Config.EnableClientSideMessagePrefetch&&ws.lang.setTimeout(this,"prefetchUnreadMessages",3E3)),a==this.inboxCachedList&&this.newMsgCheck(g.hitch(this,"updateNewestMsgTime")));dojo.publish("WSFeedbackEnd",[Config.Strings.Loading]);dojo.publish("cachedListUpdated")},modelUpdated:function(a){},changeRow:function(){},onSelectionChange:function(){},newMailReceived:function(){},folderCountUpdated:function(){},moveListChanged:function(){},
changeRows:function(a,b){if(a==this.activeCachedList)if(b)for(var d=0;d<b.length;d++)this.changeRow(b[d]);else this.modelUpdated()},isLoading:function(){return this.activeCachedList.IsLoading()&&!this.activeCachedList.errorState},isErrorState:function(){return this.activeCachedList.errorState},isNetErrorState:function(){return this.activeCachedList.netErrorState},getErrorObj:function(){return this.activeCachedList.errorObj},getErrCode:function(){return this.activeCachedList.errCode},setFolder:function(a,
b,d,g,e,h,l){ws.lang.undefinedOrNull(a);this.screenName=ws.UserContext.ActiveScreenName;d=a!=this.currentFolder;this.currentFolder=a;this.currentUid=null;this.selectedUids={};this.exclUids={};this.filter="all";this.allSelected=!1;var m=this.getFolderByName(a),n=dijit.byId("messageList"),q=("NewMail"==a||"OldMail"==a)&&!b,m="fromToName"==g&&(this.isFolderType(m,"DRAFT")||this.isFolderType(m,"SENT"));n&&(q||b||m)&&(g="received",e="descending",n.grid.sortInfo=-(ws.lang.findByProp(n.columns,"id","Received")+
1));a==this.getInboxFolderName()?this.activeCachedList=this.inboxCachedList:this.activeCachedList=this.otherCachedList;this.screenName!=ws.UserContext.ActiveScreenName&&this.activeCachedList.Clear();ws.lang.undefinedOrNull(g)||ws.lang.undefinedOrNull(e)?(g=this.activeCachedList.CurrentIndex,e=this.activeCachedList.SortDirection):(this.activeCachedList.Clear(),this.activeCachedList.CurrentIndex=g,this.activeCachedList.SortDirection=e,this.activeCachedList.IndexDirection=e);m=(m=dijit.byId("GeneralSettings"))&&
m.viewNewOldChanged;n&&(Settings.ViewNewOld||m)&&(n.adjustGridHeader(g,e,q),n.grid.views.views[0].renderHeader());this.activeCachedList.isFilter=!1;g=this.getSearchArgs();this.activeCachedList.SetFolder(a,b,this.screenName,d,h,l);Config.AdSearchUrl&&Settings.UserHash<Config.AdSearchThreshold&&(!g&&b||g&&!b)&&dojo.publish("MailModelSearchChanged");b&&(b.subject?ws.WebSuite.Navigation.addRecentSearch("subject",b.subject):b.from?ws.WebSuite.Navigation.addRecentSearch("fromto",b.from):b.to&&ws.WebSuite.Navigation.addRecentSearch("fromto",
b.to))},saveDisplayName:function(a,b){Settings.FromDisplayName=b;ws.settings.save({FromDisplayName:b});this.updateIdentityWithFromDisplayName()},updateIdentityWithFromDisplayName:function(){for(var a=this.getIdentities(),b=0;b<a.length;b++)a[b][0]=Settings.FromDisplayName;dojo.publish("friendlyNameUpdated")},isPrimaryAddrs:function(a){for(var b=this.sendAddresses,d=0;d<b.length;d++)if(-1!=a.indexOf(b[d][1]))return b[d][2];return!1},getIdentities:function(){return this.sendAddresses||[]},getIdentityDN:function(a){var b=
this.sendAddresses;if(b)for(var d=0;d<b.length;d++)if(b[d][1]==a)return Settings.FromDisplayName;return a},isMyAddress:function(a){for(var b=0;b<this.sendAddresses.length;b++)if(a.toLowerCase()==this.sendAddresses[b][1].toLowerCase())return!0;return!1},getInboxFolderName:function(){var a=Settings.ViewNewOld?"NewMail":"Inbox";if(this.folders){var b=this.getFolderByType(Settings.ViewNewOld?"NEWMAIL":"INBOX");b&&(a=b.name)}return a},getFNameFromRow:function(a){return"1"==a.folder.id&&Settings.ViewNewOld?
this.currentFolder:a.folder.name},search:function(a){a?(this.searchInProgress=!0,ws.WebSuite.currentFolder=this.currentFolder):this.searchInProgress=!1;var b=this.currentFolder,b=this.getInboxFolderName();this.filter="all";this.setFolder(b,a,null,null,"descending",!1)},isSearch:function(){return null!=this.activeCachedList.searchArgs},getSearchArgs:function(){return this.activeCachedList.searchArgs},getSearchString:function(){return"all"==this.filter&&this.activeCachedList&&this.activeCachedList.searchArgs&&
this.activeCachedList.searchArgs.query||null},getSearchIn:function(){return this.activeCachedList.searchArgs?this.activeCachedList.searchArgs.searchIn:null},allowAllTextSearch:function(){return Config.ImapSearchEnabled&&(Config.AllowSearchAllTextTrash||!this.isFolderType(this.getCurrentFolder(),"TRASH"))},setFilter:function(a){this.filter=a;this.selectedUids={};this.exclUids={};this.allSelected=!1;this.currentUid=null;this.activeCachedList.SetFilter({all:"",attachments:"has:attachment",images:"has:image",
unread:"is:unread",read:"is:read",flagged:"is:flagged",unflagged:"NOT is:flagged"}[a])},setArchiveFilter:function(a){this.activeCachedList.SetSearch(a,"before",null,!0)},preUpdateExistingDraft:function(){},hasDeco:function(a,b){return a.decos.some(function(a){return a.id==b})},updateAfterSave:function(a){if(!this.standAloneMailModel){var b=this.getFolderByType("DRAFT");this.refetchFolderIndex(b.name)}a.inReplyTo&&((b=this.getUidData(a.inReplyTo))&&a.isReply&&this.changeMessagesLocal(b.folder.name,
[a.inReplyTo],"answered",!0),b&&a.isForward&&this.changeMessagesLocal(b.folder.name,[a.inReplyTo],"forwarded",!0))},saveMessage:function(a){var b=new t;ws.Jws.saveMessage(a).then(g.hitch(this,function(d){this.updateAfterSave(a);b.resolve(d)}),g.hitch(this,function(a){b.reject(a)}));return b.promise},inboxTypeUpdated:function(){},folderListChanged:function(){if(Settings.ViewNewOld){var a=this.getFolderByName(this.currentFolder);this.isFolderType(a,"INBOX")&&(this.currentFolder=this.getInboxFolderName(),
this.inboxTypeUpdated())}else if("NewMail"==this.currentFolder||"OldMail"==this.currentFolder)this.currentFolder=this.getInboxFolderName(),this.inboxTypeUpdated()},_folderListChanged:function(a){this.folders=a;if(a=this.getFolderByType("INBOX"))Settings.ViewNewOld?(a.name="NewMail",a.types[0]="NEWMAIL",a=g.clone(a),a.name="OldMail",a.types[0]="OLDMAIL",a.id="1",this.folders.push(a)):1==ws.Jws.getFolderId(this.currentFolder)&&(this.currentFolder=a.name);(a=this.getFolderByName("Saved"))&&(a.types[0]=
"SAVED");this.sortFolders();this.folderListChanged()},getFolderDisplayName:function(a){var b=a.name;this.isFolderType(a,"TRASH")?b=Settings.ViewNewOld?Config.Strings.Folder_Deleted_Traditional:Config.Strings.Folder_Deleted:this.isFolderType(a,"SENT")?b=Config.Strings.Folder_Sent:this.isFolderType(a,"DRAFT")?b=Config.Strings.Folder_Drafts:this.isFolderType(a,"BULK")?b=Config.Strings.Folder_Spam:this.isFolderType(a,"ARCHIVE")?b=Config.Strings.Folder_Archive:this.isFolderType(a,"CHATS")?b=Config.Strings.Folder_SavedIMs:
this.isFolderType(a,"INBOX")?b=Config.Strings.Folder_Inbox:this.isFolderType(a,"NEWMAIL")?b=Config.Strings.Folder_NewMail:this.isFolderType(a,"OLDMAIL")?b=Config.Strings.Folder_OldMail:this.isFolderType(a,"SAVED")&&(b=Config.Strings.Folder_Saved);a=b.lastIndexOf("/");-1!=a&&(b=b.substring(a+1));return ws.string.escapeXml(b)},getFolderByName:function(a){if(!a)return null;var b;for(b=0;b<this.folders.length;b++)if(this.folders[b].name==a)return this.folders[b];if("new mail"==a.toLowerCase())a="NewMail";
else if("old mail"==a.toLowerCase())a="OldMail";else return null;for(b=0;b<this.folders.length;b++)if(this.folders[b].name==a)return this.folders[b];return null},getFolderByType:function(a){for(var b=0;b<this.folders.length;b++)if(-1!=this.folders[b].types.indexOf(a))return this.folders[b];return null},getFolderById:function(a){for(var b=0;b<this.folders.length;b++)if(this.folders[b].id==a)return this.folders[b];return null},getCurrentFolder:function(){return this.getFolderByName(this.currentFolder)},
isInboxNewOld:function(a){a=this.getFolderByName(a);return this.isFolderType(a,"INBOX")||this.isFolderType(a,"NEWMAIL")||this.isFolderType(a,"OLDMAIL")},isFolderType:function(a,b){return a&&a.types?-1!=a.types.indexOf(b):!1},sign:function(a){return 0>a?-1:0<a?1:0},sortFolders:function(){this.folders.sort(g.hitch(this,function(a,b){var d=Math.sign?Math.sign:this.sign,g=this.isFolderType(a,"USER")||this.isFolderType(a,"CHATS")||this.isFolderType(a,"ARCHIVE"),e=this.isFolderType(b,"USER")||this.isFolderType(b,
"CHATS")||this.isFolderType(b,"ARCHIVE"),h=this.isFolderType(a,"TRASH"),m=this.isFolderType(b,"TRASH");return!g&&e?-1:g&&!e?1:g||e?this.getFolderDisplayName(a).localeCompare(this.getFolderDisplayName(b)):h?1:m?-1:d(+a.id-+b.id)}))},createFolder:function(a){var b=new t,d=this.getFolderByName(this.getInboxFolderName());ws.Jws.createFolder(d.acctId,a).then(g.hitch(this,function(a){this.folders.push(a);this.sortFolders();this.folderListChanged();b.resolve(a)}),function(a){b.reject(a)});return b.promise},
renameFolder:function(a,b,d){var e=new t,h=this.getCurrentFolder().id==a;ws.Jws.renameFolder(a,b,d).then(g.hitch(this,function(b){for(var g=0;g<this.folders.length;g++)if(this.folders[g].id==a){this.folders[g]=b;h&&(this.currentFolder=d);this.folderListChanged();break}e.resolve(b)}),function(a){e.reject(a)});return e.promise},deleteFolder:function(a){var b=new t;this.emptyFolder(a).then(g.hitch(this,function(){ws.Jws.deleteFolder(a.id).then(g.hitch(this,function(){a.name==this.activeCachedList.folder&&
this.setFolder(this.getInboxFolderName());for(var d=0;d<this.folders.length;d++)if(this.folders[d].id==a.id){this.folders.splice(d,1);this.folderListChanged();break}b.resolve()}),function(a){b.reject(a)})}),function(a){b.reject(a)});return b.promise},emptyFolder:function(a){var b=new t;this.deleteMessages(null,a).then(g.hitch(this,function(d){a.name==this.currentFolder&&(this.activeCachedList.rowCount=0,this.modelUpdated());b.resolve(d)}),function(a){b.reject(a)});return b.promise},getRowCount:function(){return this.activeCachedList.GetRowCount()},
getUidForRow:function(a){return this.activeCachedList.GetUID(a)},getRowForUid:function(a){a=this.activeCachedList.GetAvailableRowsForUIDs([a]);return 1==a.length?a[0]:-1},getRowData:function(a){if(0==this.activeCachedList.GetRowCount())return null;a=this.activeCachedList.GetRow(a);return null==a?null:a},getUidData:function(a){return a&&0!=this.activeCachedList.GetRowCount()?this.activeCachedList.Cache.get(a):null},getOpSize:function(a){var b=0,d=!1;this.isAllSelected()?(b=this.getRowCount()-ws.lang.getPropCount(this.exclUids),
ws.lang.isEmptyObject(this.exclUids)||(d=!0)):a&&(b=a.length);return{opSize:b,havexuids:d}},isKnownDomain:function(a,b){if(!ws.lang.undefinedOrNull(a))for(var d=0;d<a.length;d++)if(-1!=b.indexOf(a[d].domain))return!0;return!1},getTypeName:function(a){return this.isKnownDomain(a.verifiedDomains,Config.CertifiedDomains)?"CERTIFIED":this.isKnownDomain(a.verifiedDomains,Config.OfficialDomains)?"OFFICIAL":a.flags.answered?"ANSWERED":a.flags.forwarded?"FORWARDED":"NONE"},getDeco:function(a,b){for(var d=
0;d<a.decos.length;d++)if(a.decos[d].id==b)return!0;return!1},removeDeco:function(a,b){for(var d=0;d<a.decos.length;d++)a.decos[d].id==b&&a.decos.splice(d,1)},getBaseSubject:function(a){a||(a="");var b=a;a=a.replace(/^([\(\[\{\<\-\s]*(re|fwd|fw|antwort|aw|wg|wtr|trans\. )[:\)\]\}\>\-\s][\s]*)+/i,"");b!=a&&0==b.indexOf("[")&&(a=a.replace(/\]$/,""));return a},checkVersion:function(){var a=1E3*Config.MinRefreshDelay,b=Math.round(a+(1E3*Config.MaxRefreshDelay-a)*Math.random());dojo.xhrGet({url:"/webmail-std/version",
handleAs:"json",content:{staticVersion:Config.ClientVersion,refreshDelay:b},load:g.hitch(this,function(a){a&&a.staticVersion&&a.staticVersion!==Config.ClientVersion&&(null!==this.checkVersionTimer&&clearInterval(this.checkVersionTimer),setTimeout(g.hitch(this,function(){var a=ws.io.getQueryParameter("debugIdleTimer");this.idleMonitor=new l(a);dojo.publish("IdleMonitor/started")}),b))})})},checkNewMessages:function(){ws.Jws.listFolders().then(g.hitch(this,function(a){ws.Jws.checkNewMessages(a)}))},
onSessionExpired:function(){null!=this.checkNewMessagesTimer&&clearInterval(this.checkNewMessagesTimer);null!=this.checkVersionTimer&&clearInterval(this.checkVersionTimer)},refetchFolderIndex:function(a,b){a==this.getInboxFolderName()?this.inboxCachedList.RefetchIndex({automatic:b}):a==this.otherCachedList.folder&&this.otherCachedList.RefetchIndex()},resetCachedLists:function(a){this.standAloneMailModel||(this.inboxCachedList.Clear({keepSort:!0}),this.otherCachedList.Clear({keepSort:!0}),a&&(this.activeCachedList.folder=
this.getInboxFolderName()),this.activeCachedList.GetData({reqRows:!0}))},validateSelection:function(){for(var a=this.getSelectedUids(),b=0;b<a.length;b++)-1==ws.lang.findByProp(this.activeCachedList.rows,"id",a[b])&&delete this.selectedUids[a[b]]},fetchIndexForSel:function(a,b,d){for(var g=!1,e=a,h=a;h<a+b;h++)if(ws.lang.undefinedOrNull(this.activeCachedList.rows[h])){g=!0;e=h;break}g?(b=(Math.trunc(b/Config.ClientSideMaxMessageFetch)+1)*Config.ClientSideMaxMessageFetch,this.activeCachedList.GetData({row:e,
count:b,segment:!0}),this.fetchIndexCB=d):d()},checkMessageReadState:function(a,b,d){var g=this.getCachedListForFolder(b),g=(g=g&&g.Cache.get(d))&&!g.flags.read;a&&g?this.changeMessagesReadState([d],!0,!0):this.changeMessagesLocal(b,[d],"read",!0)},getMessage:function(a,b,d){var e=new t,h=this.messageCache.get(a),m=this.getFolderByName(b);m&&this.isFolderType(m,"DRAFT")&&this.checkMessageReadState(h,b,a);d!==this.hasBlockedContent(h)&&(h=null);this.cacheSuccess=h?"hit":"miss";if(h&&!this.skipCachedMsg)return this.checkMessageReadState(h,
b,a),this.changeMessagesLocal(b,[a],"read",!0),e.resolve(h),ws.WebSuite.isRecordTimingData&&(ws.WebSuite.messageSize=h.body.length,ws.WebSuite.messageReadTimerEnd=new Date),e.promise;this.skipCachedMsg=!1;ws.Jws.getMessage(a,b,d).then(g.hitch(this,function(d){this.changeMessagesLocal(b,[a],"read",!0);this.messageCache.add(d.message.id,d);e.resolve(d)}),g.hitch(this,function(a){e.reject(a)}));return e.promise},prefetchAdjacentMessages:function(a){Config.EnableClientSideMessagePrefetch&&(a=this.activeCachedList.GetAvailableRowsForUIDs([a])[0],
"undefined"!=typeof a&&(this._prefetchRow(a+1),this._prefetchRow(a-1)))},prefetchUnreadMessages:function(){if(Config.EnableClientSideMessagePrefetch)for(var a=Math.min(this.getRowCount(),30),b=0,d=0;d<a&&4>b;d++){var g=this.getRowData(d);g&&!g.read&&(this._prefetchRow(d),b++)}},_prefetchRow:function(a){var b=this.activeCachedList.GetUID(a);b&&(a=this.getRowData(a))&&(a=a.size)&&1E5>a&&this.getMessage({folder:this.currentFolder,uid:b,peek:!0})},getAdjacentMessageUid:function(a,b){var d=this.activeCachedList.GetAvailableRowsForUIDs([a]);
return 1>d.length?null:this.activeCachedList.GetUID(d[0]+b)},flagMessages:function(a,b,d){var e=new t;d&&ws.reporting.reportDLAction({MLAct:"Mail-MessageList-Action-",MLCon:"Mail-MessageList-Context-",MLCol:"Mail-MessageList-Column-",DMAct:"Mail-ReadMessage-Action-",DMHdr:"Mail-ReadMessage-Header-"}[d]+(b?"SetFlag":"ClearFlag"));ws.Jws.updateMessages(this.currentFolder,a,{flags:{flagged:b}},this.getSelectedXUids(),this.activeCachedList.filters).then(g.hitch(this,function(){this.changeMessagesLocal(this.currentFolder,
a,"flagged",b);this.messageCache.update(a,"flags","flagged",b);this.deselectAll(!0);e.resolve();dojo.publish("MessageList/flagMessage",[a,b])}),g.hitch(this,function(a){e.reject(a)}));return e.promise},changeMessagesReadState:function(a,b,d){Settings.ViewNewOld&&!b&&ws.reporting.reportDLAction("Mail-Message-KeepAsNew");var e=new t,h={flags:{read:b}};b&&(h.flags.recent=!1);ws.Jws.updateMessages(this.currentFolder,a,h,this.getSelectedXUids(),this.activeCachedList.filters).then(g.hitch(this,function(){this.changeMessagesLocal(this.currentFolder,
a,"read",b);this.messageCache.update(a,"flags","read",b);var g=this.getCurrentFolder().name,h=!0;this.allSelected||!a||0==a.length?this.refetchFolderIndex(g):b&&!d&&"NewMail"==g?(Config.EnableMoveForMarkSeen&&this.removeMessagesLocal(this.currentFolder,a),this.updateFolderCount("OldMail",a.length,!0)):b||d||!Config.EnableMoveForMarkUnseen&&!Settings.ViewNewOld||"OldMail"!=g?b||"NewMail"!=g||(this.refetchFolderIndex("NewMail",!0),h=!1):(this.removeMessagesLocal(this.currentFolder,a,this.allSelected),
this.updateFolderCount("NewMail",a.length,!0),this.refetchFolderIndex("NewMail"));h&&this.deselectAll(!0);e.resolve()}),g.hitch(this,function(a){e.reject(a)}));return e.promise},canChangeMessageReadState:function(a){return Config.EnableMarkOutsideInbox||this.isInboxNewOld(a)},deleteMessages:function(a,b){var d=new t,e=b||this.getFolderByName(this.currentFolder),h=[],m=[],l=null,l=null,n=[],l=!1;null==a&&(a=[],l=!0);if(this.isSearch())for(var p=0;p<a.length;p++){var f=this.getUidData(a[p]);f&&(this.isFolderType(f.folder,
"TRASH")||this.isFolderType(f.folder,"BULK")?h.push(a[p]):m.push(a[p]))}else this.isFolderType(e,"TRASH")||this.isFolderType(e,"BULK")?h=a:m=a;var k=this.getFolderByType("TRASH");if(0<h.length||l)l=ws.Jws.deleteMessages(e.name,h,this.getSelectedXUids(),this.activeCachedList.filters),n.push(l);if(0<m.length||this.isAllSelected())l=ws.Jws.updateMessages(e.name,m,{folder:{id:k.id}},this.getSelectedXUids(),this.activeCachedList.filters,!0),n.push(l);q(n).then(g.hitch(this,function(){this.deselectAll(!0);
this.isSearch()?(this.inboxCachedList.Clear({keepSearch:!0}),this.inboxCachedList.RefetchIndex()):(this.removeMessagesLocal(e.name,a,this.isAllSelected()),this.isInboxNewOld(this.activeCachedList.folder)&&this.otherCachedList.folder==k.name&&(this.otherCachedList.Clear(),this.otherCachedList.folder=null));this.isFolderType(e,"TRASH")&&this.refetchFolderIndex(k.name);d.resolve()}),g.hitch(this,function(a){d.reject(a)}));return d.promise},restoreMessages:function(a){var b=new t,d=this.getFolderByType("NEWMAIL");
ws.Jws.updateMessages(this.currentFolder,a,{folder:{id:d?d.id:1}},this.getSelectedXUids(),this.activeCachedList.filters).then(g.hitch(this,function(){this.removeMessagesLocal(this.currentFolder,a,this.isAllSelected());this.messageCache.update(a,"message","folder",d);this.inboxCachedList.RefetchIndex();this.deselectAll(!0);b.resolve()}),g.hitch(this,function(a){b.reject(a)}));return b.promise},moveMessages:function(a,b,d){var e=new t;b=this.getFolderByName(b);var h=this.getFolderByName(this.currentFolder);
if(b){var m=b.id;this.isFolderType(h,"NEWMAIL")&&this.isFolderType(b,"OLDMAIL")&&!d?this.changeMessagesReadState(a,!0).then(g.hitch(this,function(){this.removeMessagesLocal(this.currentFolder,a,this.isAllSelected());e.resolve()}),function(a){e.reject(a)}):this.isFolderType(h,"OLDMAIL")&&this.isFolderType(b,"NEWMAIL")&&!d?this.changeMessagesReadState(a,!1).then(g.hitch(this,function(){this.removeMessagesLocal(this.currentFolder,a,this.isAllSelected());e.resolve()}),function(a){e.reject(a)}):(h={folder:{id:m}},
d||(this.isFolderType(b,"NEWMAIL")&&(h.flags={read:!1}),this.isFolderType(b,"OLDMAIL")&&(h.flags={read:!0})),ws.Jws.updateMessages(this.currentFolder,a,h,this.getSelectedXUids(),this.activeCachedList.filters).then(g.hitch(this,function(){this.activeCachedList.RefetchIndex();this.deselectAll(!0);e.resolve()}),g.hitch(this,function(a){e.reject(a)})))}else e.reject();return e.promise},undoMoveMessages:function(a){var b=null,d=0;if(ws.lang.isArray(a))d=a.length,a=this.makeUidList(a);else for(var e in a)a.hasOwnProperty(e)&&
(d+=a[e].length);var b=1==d?Config.Strings.MessageRestored:ws.string.substituteParams(Config.Strings.MessagesRestored,d),h;for(h in a)this.moveMessages(a[h],h?h:this.currentFolder,!0).then(g.hitch(this,function(){this.activeCachedList.RefetchIndex();dojo.publish("WSFeedbackStart",[b,!0])}))},undoReportSpamMessages:function(a){this.reportSpamMessages({uids:a,folder:Config.SpamFolderName,destFolder:this.currentFolder,checkUndo:!1,isUndoAction:!0,load:function(){},error:function(a){window.ws_ErrLgr&&
ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"OkCancelDialog.alert shown - Error Handler for reportSpamMessages-undoReportSpamMessages",a,"MailModel.js");ws.widget.Dialogs.ok(Config.Strings.ReportSpamError)}})},makeUidList:function(a,b){var d={};if(a)for(var g=0;g<a.length;g++)if(!ws.lang.undefinedOrNull(a[g])){var e=b,h=this.getUidData(a[g]);h&&!e&&(e=this.getFolderById(h.folder.id).name);ws.lang.undefinedOrNull(d[e])&&(d[e]=[]);d[e].push(a[g])}return d},fetchNewMsgCount:function(){this.activeCachedList.RefetchInfo()},
getFoldersCanMoveTo:function(){var a=this.getFoldersCanMoveToFromInbox(),b=this.getFolderByName(this.currentFolder);Settings.ViewNewOld&&(a.push("NewMail"),a.push("OldMail"));if(!this.isFolderType(b,"INBOX")&&!Settings.ViewNewOld){var d=this.getFolderByType("INBOX");a.push(d.name)}d=a.indexOf(this.currentFolder);-1!=d&&"1"!=b.id&&a.splice(d,1);return a},getFoldersCanMoveToFromInbox:function(){for(var a=[],b=0;b<this.folders.length;b++)(this.isFolderType(this.folders[b],"TRASH")||this.isFolderType(this.folders[b],
"BULK")||this.isFolderType(this.folders[b],"ARCHIVE")||this.isFolderType(this.folders[b],"SAVED")||this.isFolderType(this.folders[b],"USER")&&!this.isFolderType(this.folders[b],"INVISIBLE"))&&a.push(this.folders[b].name);return a},getFoldersExcludedFromFilters:function(){for(var a=[],b=Config.FoldersToExcludeForFilters,d=0;d<b.length;d++){var g=this.getFolderByType(b[d]);g&&a.push(g.name)}return a},reportSpamMessages:function(a,b,d,e){var h=new t,m=this.getFolderByType("BULK"),l={folder:{id:ws.Jws.getFolderId(b?
m.name:d?d:this.getInboxFolderName())},flags:{spam:b}},n=this.getSelectedXUids();ws.Jws.updateMessages(this.currentFolder,a,l,n,this.activeCachedList.filters).then(g.hitch(this,function(d){!b&&e&&this.removeAntispamSchema(e,"SenderInUserAddressBook")&&(l={schemaOrg:e.schemaOrg},ws.Jws.updateMessages(this.currentFolder,a,l,n,this.activeCachedList.filters).then(function(){},function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to remove message schema: SenderInUserAddressBook")}));this.removeMessagesLocal(this.currentFolder,
a,this.isAllSelected());this.refetchFolderIndex(b?m.name:this.getInboxFolderName());this.messageCache.remove(a);h.resolve(d)}),function(a){h.reject(a)});return h.promise},reportSafeMessage:function(a){var b=new t;ws.Jws.updateMessages(this.currentFolder,[a],{decos:[{id:"-BDM"}]},null,null).then(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise},composeSettingsChanged:function(){this.messageCache.clear()},getSignature:function(){var a="";if(Settings.SignatureEnabled&&(a=Settings.Signature,
-1==a.search(/<[^>]*>/gi))){if(dojo.isWebKit||dojo.isFF)a=a.replace(/\r/g,"");a=a.replace(/\n/g,"\x3cbr/\x3e")}return a},getAcctType:function(a){if(a)for(var b=this.getIdentities(),d=0;d<b.length;d++)if(a.toLowerCase()==b[d][1])return b[d][3];return"aol"},getPrimaryAcct:function(){for(var a=0;a<this.accounts.length;a++)if(this.accounts[a].isPrimary)return this.accounts[a]},getInfo:function(){ws.Jws.fetchAccountInfo().then(g.hitch(this,function(a){if(a){this.sendAddresses=[];a=this.accounts=a.result.accounts;
for(var b="",d=0;d<a.length;d++){var g=[Settings.FromDisplayName,a[d].email,!1];(a[d].isPrimary||-1!=this.accountTypes.indexOf(a[d].type)&&a[d].accountVerified&&a[d].email)&&this.sendAddresses.push(g);a[d].isPrimary&&(b=a[d].replyToAddress||a[d].email,Settings.Signature=a[d].signature,Settings.SignatureEnabled=a[d].signatureActive,a[d].sendingName&&(Settings.FromDisplayName=a[d].sendingName),g=a[d].forwardSetting&&"DONT_FORWARD"!=a[d].forwardSetting,a[d].forwardEmail&&g&&(Settings.ForwardAddress=
a[d].forwardEmail,Settings.forwardEmailVerified=a[d].forwardEmailVerified))}for(d=0;d<this.sendAddresses.length;d++)if(this.sendAddresses[d][1]==b){a=this.sendAddresses.splice(d,1);a[0][2]=!0;this.sendAddresses.splice(0,0,a[0]);break}this.infoUpdated()}}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"Error Handler for getInfo",a,"MailModel.js")})},infoUpdated:function(){},isCurrentRow:function(a){return(a=this.activeCachedList.GetUID(a))&&a==this.currentUid},getCurrentRow:function(){if(ws.lang.undefinedOrNull(this.currentUid))return-1;
var a=this.activeCachedList.GetAvailableRowsForUIDs([this.currentUid]);return 1==a.length?a[0]:-1},setCurrentRow:function(a){this.setCurrentUid(this.activeCachedList.GetUID(a))},setCurrentUid:function(a){var b=[];-1!=a&&b.push(a);-1!=this.currentUid&&b.push(this.currentUid);b=this.activeCachedList.GetAvailableRowsForUIDs(b);this.currentUid=a;for(a=0;a<b.length;a++)this.changeRow(b[a])},toggleSelectRow:function(a,b){var d=this.activeCachedList.GetUID(a);if(null!=d){var g="undefined"==typeof b?!this.isSelected(d):
b;this.allSelected?g?delete this.exclUids[d]:this.exclUids[d]=!0:g?this.selectedUids[d]=!0:delete this.selectedUids[d];!this.isSearch()&&this.allSelected&&this.getRowCount()==ws.lang.getPropCount(this.exclUids)&&(this.allSelected=!1,this.exclUids={});this.changeRow(a);this.onSelectionChange()}},selectRange:function(a,b,d,e){var h=1+b-a;h==this.getRowCount()?(this.selectAll(),e&&e()):this.fetchIndexForSel(a,h,g.hitch(this,function(){for(var g=a;g<=b;g++)this.toggleSelectRow(g,d);e&&e()}))},selectAll:function(){if(this.getRowCount()>
this.activeCachedList.FetchSize){dojo.publish("WSFeedbackStart",[Config.Strings.Working]);var a=this.getRowCount()>Config.JWSMaxSelectSize?Config.JWSMaxSelectSize:this.getRowCount();this.fetchIndexForSel(0,a,g.hitch(this,function(){var b;this.selectedUids={};this.exclUids={};for(var d=0;d<a;d++)this.activeCachedList.rows[d]&&(b=this.activeCachedList.rows[d].id)&&(this.selectedUids[b]=!0);dojo.publish("WSFeedbackEnd",[Config.Strings.Working]);this.modelUpdated()}))}else for(var b=0;b<this.getRowCount();b++)this.toggleSelectRow(b,
"ON")},deselectAll:function(a){this.allSelected=!1;a||(this.currentUid=null);this.selectedUids={};this.exclUids={};this.modelUpdated()},isAllInViewSelected:function(){var a=this.getRowCount(),b=ws.lang.getPropCount(this.selectedUids);return a>Config.JWSMaxSelectSize?b==Config.JWSMaxSelectSize||this.allSelected:0<a&&(a==b||this.allSelected)},isAllSelected:function(){return this.allSelected},isAnySelected:function(){return!ws.lang.isEmptyObject(this.selectedUids)||this.allSelected},isAllSelReal:function(){return this.allSelected&&
ws.lang.isEmptyObject(this.exclUids)},isSelected:function(a){return this.allSelected?!(a in this.exclUids):a in this.selectedUids},getSelectedUids:function(){var a=[],b;for(b in this.selectedUids)a.push(b);return a},getSelectedXUids:function(){var a=[],b;for(b in this.exclUids)a.push(b);return a},anyUidsInTrash:function(a){if(a)for(var b=0;b<a.length;b++){var d=this.getUidData(a[b]);if(this.isFolderType(d.folder,"TRASH")||this.isFolderType(d.folder,"BULK"))return!0}return!1},changeMessagesLocal:function(a,
b,d,g){if(a=this.getCachedListForFolder(a)){var e=this.allSelected&&ws.lang.isEmptyArray(b)?this.exclUids:null;a.Cache.update(b,d,g,e);if(b&&0<b.length)for(var h=0;h<b.length;h++){var l=ws.lang.findByProp(a.rows,"id",b[h]);if(-1!=l){if("read"==d&&(a.rows[l].flags.hasOwnProperty("read")?a.rows[l].flags.read:!1)!=g){var m=this.getFolderById(a.rows[l].folder.id);m&&(m.unread+=g?-1:1)}a.rows[l].flags[d]=g}}else ws.lang.undefinedOrNull(e)&&(e={}),n.forEach(a.rows,function(a){a&&!e[a.id]&&(a.flags[d]=g)});
"read"==d&&g&&a.UpdateCache(b,"recent",!1,e);this.folderListChanged()}},checkMessageLocal:function(a,b){var d=this.getCachedListForFolder(a);return d?d.IsUidExist(b):!1},removeMessagesLocal:function(a,b,d){var g=this.getCachedListForFolder(a);if(g){if(d||!b){g.Clear({keepSort:!0});this.setFolder(a,null,null,null,null,"descending",!0);if(d=this.getFolderByName(a))d.total=0,d.unread=0;this.folderCountUpdated(d);g.DeleteAllFromIndex()}else this.updateUnseenCount(a,b,!1,!1,!0),this.updateFolderCount(a,
b.length,!1),g.DeleteFromIndex(b);if("undefined"==typeof a||a==this.currentFolder)this.currentUid&&-1!=dojo.indexOf(b,this.currentUid)&&this.setCurrentUid(null),dojo.forEach(b,function(a){a in this.selectedUids&&delete this.selectedUids[a]},this),this.modelUpdated()}},updateFolderCount:function(a,b,d){Config.ShowFolderMessageCount&&(a=this.getFolderByName(a),a.total=d?a.total+b:a.total-b,this.folderCountUpdated(a))},getFolderCount:function(a){return Config.ShowFolderMessageCount?this.getFolderByName(a).total:
-1},updateUnseenCount:function(a,b,d,e,h){a=a||this.currentFolder;var l=this.getFolderByName(a);if(l){if("number"==typeof b)0==b?this.setFolder(a,null,null,null,null,"descending",!0):l.unread=d?l.unread+b:l.unread-b;else{var n=this.getCachedListForFolder(a);if(!n)return;b&&b.length>n.FetchSize?this.fetchNewMsgCount():(a=n.GetAvailableRowsForUIDs(b),dojo.forEach(a,g.hitch(this,function(a){if(a=n.GetRow(a))d&&a.flags.read?(l.unread++,e&&(a.flags.read=!1)):d&&!h||a.flags.read||(l.unread--,e&&(a.flags.read=
!0)),this.changeRow(a)})))}this.folderCountUpdated(l)}},getCachedListForFolder:function(a){return"undefined"==typeof a||this.getSearchString()?this.activeCachedList:a==this.getInboxFolderName()?this.inboxCachedList:a==this.currentFolder?this.otherCachedList:null},getSearchMailResultDL:function(){var a=this.getSearchString(),b=Math.max(this.getRowCount(),0);if(a)return b+" "+a},getNoFolderStr:function(){var a="",b=this.getSearchString(),d=this.getSearchIn(),g=this.getCurrentFolder()||{},e=Math.max(this.getRowCount(),
0),h=g.name;22<b.length&&(b=ws.string.escapeXml(b.substr(0,22))+"\x26hellip;");switch(d){case null:case "alltext":a=0==e?Config.Strings.DSHNoFolderAll0:1==e?Config.Strings.DSHNoFolderAll1:Config.Strings.DSHNoFolderAllN;break;case "subject":a=0==e?Config.Strings.DSHNoFolderSub0:1==e?Config.Strings.DSHNoFolderSub1:Config.Strings.DSHNoFolderSubN;break;case "fromto":a=null==g||"Sent"!=h&&"Draft"!=h&&"Saved/Auto Saved Sent Mail"!=h?0==e?Config.Strings.DSHNoFolderSnd0:1==e?Config.Strings.DSHNoFolderSnd1:
Config.Strings.DSHNoFolderSndN:0==e?Config.Strings.DSHNoFolderRcp0:1==e?Config.Strings.DSHNoFolderRcp1:Config.Strings.DSHNoFolderRcpN}return ws.string.substituteParams(a,"\x26ldquo;"+b+"\x26rdquo;",500<e?"500+":e)},getDisplayableSearchHeaderStr:function(){var a=Math.max(this.getRowCount(),0);return ws.string.substituteParams(1==a?Config.Strings.SearchResult:Config.Strings.SearchResults,999<a?"999+":a)},formatRecipients:function(a){for(var b="",d=0;d<a.length;d++){var g=!1;a[d].name&&(g=!0,b+=a[d].name+
" ");g&&(b+="\x3c");b+=a[d].email;g&&(b+="\x3e");d<a.length-1&&(b+="; ")}return b},createRecipientString:function(a){for(var b="",d={},g=0;g<a.length;g++)a[g].email==ws.UserContext.UserAddress||d.hasOwnProperty(a[g].email)||(b+=a[g].email+", ",d[a[g].email]=!0);return b},createRecipientStringML:function(a){for(var b=["to","cc"],d=["",""],g=null,e=0,h=0;h<b.length;h++){var l=a.headers[b[h]];if(l)for(var n=0;n<l.length;n++)null==g&&(g=[l[n].email,l[n].name?l[n].name:l[n].email]),e++}0<e&&(e--,d[0]=
g[0]+(0<e?" (+"+e+")":""),d[1]=g[1]+" "+(0<e?1==e?Config.Strings.AndOneOther:ws.string.substituteParams(Config.Strings.AndNOthers,e):""));return d},getButtonViz:function(a){if(a)for(var b=0;b<a.types.length;b++)if(Config.FolderButtons[a.types[b]])return Config.FolderButtons[a.types[b]];return Config.FolderButtons.USER},hasImageAttachments:function(a){a=a.attachments;for(var b=0;b<a.length;b++)if("attachment"==a[b].disposition&&"image"==a[b].type)return!0;return!1},hasBlockedContent:function(a){var b=
!1;if(a&&a.simpleBody&&a.simpleBody.htmlAnnotations){a=a.simpleBody.htmlAnnotations;for(var d=0;d<a.length;d++)"blocked"===a[d].type&&(b=!0)}return b},getSenderInfo:function(a){var b={email:"",name:""};a&&a.headers&&a.headers.from&&0<a.headers.from.length&&(a=a.headers.from[0],a.hasOwnProperty("email")&&(b.email=a.email),a.hasOwnProperty("name")&&(b.name=a.name));return b},fixDLRegex:new RegExp(/https:\/\/dl-mail\.aolmail\.com\/ws\/download\/(.*?\/)raw(.*?)token=.*?(?:"|$)/gim),fixDownloadUrls:function(a){return a.replace(this.fixDLRegex,
Config.BypassDownloadHost+'/ws/v3/$1refresh$2"')},hasAntispamSchema:function(a,b){if(a&&a.schemaOrg)for(var d=0;d<a.schemaOrg.length;d++){var g=a.schemaOrg[d];if(g&&g.schema&&g.schema["@type"]&&"AntispamResult"==g.schema["@type"]&&g.schema.antispamStatus)for(var e=0;e<g.schema.antispamStatus.length;e++)if(-1!=g.schema.antispamStatus[e].indexOf(Config.SpamSchemaVersion+"/"+b))return!0}return!1},hasSchemaContactAllowed:function(a){return this.hasAntispamSchema(a,"SenderInUserAddressBook")},hasSchemaUserMark:function(a){return this.hasAntispamSchema(a,
"SpamMarkedByUser")},removeAntispamSchema:function(a,b){if(a&&a.schemaOrg)for(var d=0;d<a.schemaOrg.length;d++){var g=a.schemaOrg[d];if(g&&g.schema&&g.schema["@type"]&&"AntispamResult"==g.schema["@type"]&&g.schema.antispamStatus)for(var e=0;e<g.schema.antispamStatus.length;e++)if(-1!=g.schema.antispamStatus[e].indexOf(Config.SpamSchemaVersion+"/"+b))return g.schema.antispamStatus.splice(e,1),!0}return!1}})})},"ws/mail/folderName":function(){define("ws/mail/folderName",["dojo/_base/declare","ws/widget/Dialogs"],
function(f){return f(null,{MaxLength:32,DisallowedCharsList:'\\:*?"\x3c\x3e|%'.split(""),DisallowedStartCharsList:[" ","%","#"],DisallowedCharsMap:{},DisallowedStartCharsMap:{},DisallowedCharsString:"",DisallowedStartCharsString:"",init:function(){var f,d;this.getDisallowedHierarchyDelimiter()&&this.DisallowedCharsList.push(this.getDisallowedHierarchyDelimiter());for(f=0;f<this.DisallowedCharsList.length;f++)d=this.DisallowedCharsList[f],this.DisallowedCharsString+=d+" ",this.DisallowedCharsMap[d]=
!0;0<this.DisallowedCharsString.length&&(this.DisallowedCharsString=this.DisallowedCharsString.substring(0,this.DisallowedCharsString.length-1));for(f=0;f<this.DisallowedStartCharsList.length;f++)d=this.DisallowedStartCharsList[f],this.DisallowedStartCharsString=" "==d?this.DisallowedStartCharsString+Config.Strings.Space:this.DisallowedStartCharsString+(d+" "),this.DisallowedStartCharsMap[d]=!0;0<this.DisallowedStartCharsString.length&&(this.DisallowedStartCharsString=this.DisallowedStartCharsString.substring(0,
this.DisallowedStartCharsString.length-1))},getDisallowedHierarchyDelimiter:function(){return Config.ImapStoreAllowHierarchicalFolderCreation?"":"/"},stripPrefix:function(f){var d=f.lastIndexOf("/");-1!=d&&(f=f.substring(d+1));return f},validate:function(f,d,b,a){if(!f)return ws.widget.Dialogs.ok(Config.Strings.FolderWarningEmpty,a,!1,{zIndex:1001}),!1;if(f.length>this.MaxLength)return ws.widget.Dialogs.ok(ws.string.substituteParams(Config.Strings.FolderWarningTooLong,this.MaxLength),a,!1,{zIndex:1001}),
!1;for(var h=0;h<f.length;h++)if(this.DisallowedCharsMap[f.charAt(h)])return ws.widget.Dialogs.ok(Config.Strings.FolderWarningLetters+"\x3cbr\x3e"+this.DisallowedCharsString,a,!1,{zIndex:1001}),!1;if(this.DisallowedStartCharsMap[f.charAt(0)])return ws.widget.Dialogs.ok(Config.Strings.FolderWarningStart+"\x3cbr\x3e"+this.DisallowedStartCharsString,a,!1,{zIndex:1001}),!1;if(f==d)return ws.widget.Dialogs.ok(Config.Strings.FolderWarningUnchanged,a,!1,{zIndex:1001}),!1;for(h=0;h<b.length;h++)if(null!=
b[h]&&this.stripPrefix(b[h].name)==f)return f=ws.string.substituteParams(Config.Strings.FolderWarningDuplicate,'"'+f+'"'),ws.widget.Dialogs.ok(f,a,!1,{zIndex:1001}),!1;return!0}})})},"ws/widget/Dialogs":function(){define("ws/widget/Dialogs","dojo/_base/window ws/widget/GenericDialog ws/widget/iframeModalPane ws/widget/iframePane ws/widget/WSModalPane ws/widget/WSToolbar".split(" "),function(f,k,d,b){ws.widget.Dialogs={iframePane:null,show:function(a,b,d,e){this.dialog||(this.dialog=new k,f.body().appendChild(this.dialog.domNode),
this.dialog.startup());e&&e.zIndex&&(this.dialog.bgZIndex=e.zIndex-1);this.dialog.show(a,b,d,e);dojo.publish("popup/open",[])},showTransientDialog:function(a,b,d,e,p){d=new k(dojo.mixin({destroyOnClose:!0},d));f.body().appendChild(d.domNode);d.startup();var g=[];if(e&&e.length)for(var h=0;h<e.length;h++)g.push(e[h].label);p=dojo.mixin({btnArgs:e},p);d.show(a,g,b,p);dojo.publish("popup/open",[])},showSpamOffAlert:function(a){var b=['\x3cdiv style\x3d"font-weight:bold;font-size:15px"\x3e',Config.Strings.SpamFilterOffDlgTitle,
"\x3c/div\x3e\x3cbr\x3e\x3cdiv\x3e",Config.Strings.SpamFilterOffDlgMsg,"\x3c/div\x3e"],b=b.join("");a=dojo.hitch(this,function(a,b){1==b?ws.settings.load({scope:"spam",load:function(){if(Settings.SpamSettingsAvailable){var b={PersonalAdaptiveSpamFilterLevel:"Off"};dojo.mixin(window.Settings,b);ws.settings.save(b,{load:a});ws.WebSuite.theMailModel.activeCachedList.RefetchIndex()}},error:function(a){}}):a()},a);ws.reporting.reportDLAction("Mail-SpamKnobAlert");ws.widget.Dialogs.show(b,[Config.Strings.OK,
Config.Strings.SpamFilterOffDlgLink],a,{width:380,textNodeStyle:"font-size:14px;padding: 4px 8px 15px 8px;",btnArgs:[null,{type:"Bare"}]})},showUnsubDialog:function(a,b,d){ws.reporting.reportDLAction("Mail-Spam-LightboxMsgShown");var e=' \x3ca href\x3d"'+ws.string.substituteParams(Config.spamLearnMoreUrl,Config.unsubscribeLearnMoreId)+'" target\x3d"_blank"\x3e'+Config.Strings.dm_LearnMore+"\x3c/a\x3e";a="\x3cdiv style\x3d'font-size:16px;padding-bottom:20px;font-weight:bold;'\x3e"+ws.string.substituteParams(Config.Strings.UnsubStopEmails,
null!=b?b:a)+"\x3c/div\x3e\x3cdiv style\x3d'font-size:12px;padding-bottom:20px;'\x3e"+ws.string.substituteParams(Config.Strings.UnsubWeHelp,a)+e+"\x3c/div\x3e";d=dojo.hitch(this,function(a,b){0==b?(ws.reporting.reportDLAction("Mail-Spam-LightboxMsgOk"),a(!0)):1==b&&(ws.reporting.reportDLAction("Mail-Spam-LightboxMsgNo"),a(!1))},d);ws.widget.Dialogs.show(a,[Config.Strings.UnsubLink,Config.Strings.UnsubReportSpam],d,{newCancel:!0,width:480,textNodeStyle:"font-size:14px;padding: 4px 8px 15px 8px;",footerHtml:"",
btnArgs:[null,{type:"Bare"}]})},ok:function(a,b,d,e){d?this.okCancel(a,b):this.show(a,["\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;"+Config.Strings.OK+"\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;"],b,e)},okCancel:function(a,b,d,e){this.show(a,d?[Config.Strings.Cancel,Config.Strings.OK]:[Config.Strings.OK,Config.Strings.Cancel],function(a){b&&(d?b(0!=a):b(0==a))},e);return this.dialog},yesNo:function(a,b){this.show(a,[Config.Strings.Yes,Config.Strings.No],function(a){b&&b(0==a)})},iframe:function(a){a&&null==this.iframePane&&
(this.iframePane=null!=a.isModal&&a.isModal?new d:new b,this.iframePane.pluginId=a.pluginId,f.body().appendChild(this.iframePane.domNode),this.iframePane.startup(),this.iframePane.show(a.url,a.box,a.offset),dojo.publish("popup/open",[]))},iframeClose:function(a){this.iframePane&&this.iframePane.pluginId&&this.iframePane.pluginId==a&&this.iframePane.hide()}}})},"ws/widget/GenericDialog":function(){define("ws/widget/GenericDialog","dojo/_base/declare dojo dijit ws/widget/WSModalPane dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ws/widget/Button ws/widget/popup ws/widget/WSToolbar".split(" "),
function(f,k,d,b,a,h,l){return f([b,a,h],{destroyOnClose:!1,templateString:'\x3cdiv class\x3d"WSModalPane"\x3e\t\x3cdiv class\x3d"WSModalPaneInner"\x3e\t\t\x3cdiv data-dojo-attach-point\x3d"wsCloseBtn" class\x3d"wsCloseBtn" data-dojo-attach-event\x3d"onclick: hide"\x3e\x3csvg class\x3d"svgIcon"\x3e\x3cuse xlink:href\x3d"#iconClose"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\t\t\x3cdiv data-dojo-attach-point\x3d"modCon" class\x3d"modalContainer"\x3e\t\t\t\x3cdiv data-dojo-attach-point\x3d"textNode"\x3e\x3c/div\x3e\t\t\t\x3cdiv data-dojo-attach-point\x3d"toolbar" dojoType\x3d"ws/widget/WSToolbar" vizType\x3d"Bare"\x3e\x3c/div\x3e\t\t\t\x3cdiv data-dojo-attach-point\x3d"footerNode" style\x3d"font-size:0;"\x3e\x3c/div\x3e\t\t\x3c/div\x3e\t\t\x3cimg data-dojo-attach-point\x3d"alertIcon" src\x3d"${spacer}" class\x3d"mainLargeIcon dialogAlertIcon"\x3e       \x3cinput data-dojo-attach-point\x3d"focusInput" type\x3d"text" style\x3d"position:absolute;left:-2000px" /\x3e\t\x3c/div\x3e\x3c/div\x3e',
show:function(a,b,d,h){h=h||{};this.wsCloseBtn.style.display=h.newCancel?"":"none";ws.widget.popup.ignoreClicks(!0);k.isString(a)?(a=a.replace(/\\x22/g,"\x26quot;").replace(/\\n/g,"\x3cbr\x3e").replace(/\\x2f/g,"/"),this.textNode.innerHTML=a):"undefined"==typeof a?this.textNode.innerHTML=Config.Strings.ErrorUnspecified:a&&this.textNode.appendChild(a);if(h.footerHtml&&k.isString(h.footerHtml))h.footerHtml=h.footerHtml.replace(/\\x22/g,"\x26quot;").replace(/\\n/g,"\x3cbr\x3e").replace(/\\x2f/g,"/"),
this.footerNode.innerHTML=h.footerHtml;else if(h.footerHtml)this.footerNode.appendChild(h.footerHtml);else for(;this.footerNode.hasChildNodes();)this.footerNode.removeChild(this.footerNode.firstChild);this.callback=d;this.textNode.style.cssText=h&&h.textNodeStyle?h.textNodeStyle:"padding: 8px 0px 30px 0px;font-weight:bold;";h&&h.toolbarStyle&&(this.toolbar.style.cssText=h.toolbarStyle);this.domNode.style.width=(h.width||300)+"px";this.inherited(arguments);this.setupButtons(b,h);h&&h.alertIcon?(this.modCon.style.paddingLeft=
"93px",this.alertIcon&&(this.alertIcon.style.display="")):(this.modCon.style.paddingLeft="20px",this.alertIcon&&(this.alertIcon.style.display="none"));h&&h.zIndex&&(this.domNode.style.zIndex=h.zIndex);k.isIE&&this.toolbar.layout();k.publish("popup/open",[])},focus:function(){this.focusInput.focus()},setupButtons:function(a,b){this.ensureButtonsExist(a.length,b);for(var d=0;d<a.length;d++){var e=this.buttons[d];e.show();e.setLabel(a[d]);e.setType("");e.IsEqualsLabel(Config.Strings.Cancel)?e.setType("Bare"):
b&&b.btnArgs&&b.btnArgs.length&&b.btnArgs[d]&&b.btnArgs[d].type&&(b.btnArgs[d].subType?e.setType(b.btnArgs[d].type,b.btnArgs[d].subType):e.setType(b.btnArgs[d].type))}for(d=a.length;d<this.buttons.length;d++)this.buttons[d].show();this.toolbar.layout();for(d=a.length;d<this.buttons.length;d++)this.buttons[d].hide()},ensureButtonsExist:function(a,b){this.buttons||(this.buttons=[]);for(var d,e=this.buttons.length;e<a;e++)d={toolbarPosition:"right"},b.btnArgs&&b.btnArgs[e]&&k.mixin(d,b.btnArgs[e]),d=
new l(d),d.onClick=k.hitch(this,"onButtonClick",e),this.toolbar.addToolbarItem(d),this.buttons.push(d),d.startup()},onButtonClick:function(a){this.hide();ws.widget.popup.ignoreClicks(!1);this.callback&&this.callback(a)}})})},"ws/widget/WSModalPane":function(){define("ws/widget/WSModalPane","dojo/_base/declare dojo/text!ws/widget/WSModalPane.css dojo dijit dojo/window dijit/_Widget".split(" "),function(f,k,d,b,a,h){return f([h],{css:{templateString:k},destroyOnClose:!0,bg0pacity:.6,bgZIndex:998,backgroundColor:"#000",
bg:null,bgShowing:!1,startup:function(){this.createBG();d.isIE?setTimeout(d.hitch(this,function(){this.checkSize()}),0):this.checkSize()},createBG:function(){this.bg||(this.bg=d.create("div",{style:{position:"absolute",left:0,top:0,height:"100%",width:"100%",zIndex:this.bgZIndex,backgroundColor:this.backgroundColor,opacity:this.bg0pacity}}),this.bgShowing=!1);this.bgShowing||(d.body().appendChild(this.bg),this.bgShowing=!0,this.bg.id=this.id+"bg",this.bgIframe=new b.BackgroundIframe(this.bg))},checkSize:function(){if(this.domNode&&
"none"!=this.domNode.style.display){var b=a.getBox();this.domNode.style.height="auto";this.mb=d._getMarginSize(this.domNode);var e=(b.w-this.mb.w)/2,h=(b.h-this.mb.h)/2;10>h?(this.domNode.style.overflow="auto",this.domNode.style.height=Math.max(b.h-20,0)+"px",h=10):this.domNode.style.overflow="";this.domNode.style.left=e+"px";this.domNode.style.top=h+"px";this.bg.style.width=Math.max(b.w,0)+"px";this.bg.style.height=Math.max(b.h,0)+"px";setTimeout(d.hitch(this,function(){this.domNode&&(this.domNode.style.visibility=
"visible")}),0)}},killBg:function(){this.bgIframe&&this.bgIframe.destroy();this.bg&&(d._destroyElement(this.bg),this.bg=null);this.bgShowing=!1},show:function(){this.domNode.parentNode&&this.domNode.parentNode.tagName&&"body"==this.domNode.parentNode.tagName.toLowerCase()||d.body().appendChild(this.domNode);this.killBg();this.inherited(arguments);this.createBG();this.checkSize();this.domNode.style.visibility="visible";this.connect(window,"onresize","checkSize");this._onShow();d.publish("popup/open",
[]);ws.WebSuite.isModalOpen=!0;this.domNode.focus()},hide:function(){this.killBg();this.destroyOnClose?this.destroyRecursive():this.inherited(arguments);ws.WebSuite.isModalOpen=!1;d.isIE&&window.focus()}})})},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(f,k,d,b){var a;a=function(a,d,e){b(a,{sync:!!d,headers:{"X-Requested-With":null}}).then(e)};var h={},l=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
b&&(a=b[1])}else a="";return a},e={},p={};f.cache=function(b,d,e){var g;"string"==typeof b?/\//.test(b)?(g=b,e=d):g=k.toUrl(b.replace(/\./g,"/")+(d?"/"+d:"")):(g=b+"",e=d);b=void 0!=e&&"string"!=typeof e?e.value:e;e=e&&e.sanitize;if("string"==typeof b)return h[g]=b,e?l(b):b;if(null===b)return delete h[g],null;g in h||a(g,!0,function(a){h[g]=a});return e?l(h[g]):h[g]};return{dynamic:!0,normalize:function(a,b){var d=a.split("!"),g=d[0];return(/^\./.test(g)?b(g):g)+(d[1]?"!"+d[1]:"")},load:function(b,
d,f){b=b.split("!");var g=1<b.length,n=b[0],k=d.toUrl(b[0]);b="url:"+k;var t=e,u=function(a){f(g?l(a):a)};n in h?t=h[n]:d.cache&&b in d.cache?t=d.cache[b]:k in h&&(t=h[k]);if(t===e)if(p[k])p[k].push(u);else{var z=p[k]=[u];a(k,!d.async,function(a){h[n]=h[k]=a;for(var b=0;b<z.length;)z[b++](a);delete p[k]})}else u(t)}}})},"dojo/request":function(){define(["./request/default!"],function(f){return f})},"dojo/request/default":function(){define(["exports","require","../has"],function(f,k,d){var b=d("config-requestProvider");
b||(b="./xhr");f.getPlatformDefaultId=function(){return"./xhr"};f.load=function(a,d,l,e){k(["platform"==a?"./xhr":b],function(a){l(a)})}})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(f,k,d,b,a,h,l,e,p,g,n,t,q){function m(){}function w(a){return function(b,g,e,h){return b&&"string"==
typeof g&&b[g]==m?b.on(g.substring(2).toLowerCase(),l.hitch(e,h)):a.apply(d,arguments)}}f.around(d,"connect",w);h.connect&&f.around(h,"connect",w);f=b("dijit._Widget",[n,t,q],{onClick:m,onDblClick:m,onKeyDown:m,onKeyPress:m,onKeyUp:m,onMouseDown:m,onMouseMove:m,onMouseOut:m,onMouseOver:m,onMouseLeave:m,onMouseEnter:m,onMouseUp:m,constructor:function(a){this._toConnect={};for(var b in a)this[b]===m&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);
for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===m?d.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){h.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,b)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,
arguments):this.get(a)},getDescendants:function(){h.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?e("[widgetId]",this.containerNode).map(g.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});a("dijit-legacy-requires")&&p(0,function(){require(["dijit/_base"])});return f})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(f,k,d,b,a,h,l,e,p,g,n,t,q,m,w,v,u,z,B,x,D,E,A){function F(a){return function(b){e[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}q.add("dijit-legacy-requires",!m.isAsync);q.add("dojo-bidi",!1);q("dijit-legacy-requires")&&u(0,function(){f(["dijit/_base/manager"])});var K={};b=h("dijit._WidgetBase",[z,D],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:F("lang"),dir:"",_setDirAttr:F("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:b.blankGif||f.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,d=a._setterAttrs=[],a=a._onMap={},g;for(g in b.attributeMap)d.push(g);for(g in b)/^on/.test(g)&&(a[g.substring(2).toLowerCase()]=g),/^_set[A-Z](.*)Attr$/.test(g)&&(g=g.charAt(4).toLowerCase()+
g.substr(5,g.length-9),b.attributeMap&&g in b.attributeMap||d.push(g))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect();this.srcNodeRef=l.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,w.mixin(this,a));this.postMixInProperties();this.id||(this.id=A.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=
this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=x.body(this.ownerDocument);A.add(this);this.buildRendering();var d;if(this.domNode){this._applyAttributes();var g=this.srcNodeRef;g&&g.parentNode&&this.domNode!==g&&(g.parentNode.replaceChild(this.domNode,g),d=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();d&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);
k.forEach(this.constructor._setterAttrs,function(b){if(!(b in a)){var d=this._get(b);d&&this.set(b,d)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(k.map(a,function(a){return a+"Rtl"})));p.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=
!0,k.forEach(this.getChildren(),function(a){a._started||a._destroyed||!w.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a)}this._beingDestroyed=!0;this.uninitialize();k.forEach(this._connects,w.hitch(this,"disconnect"));k.forEach(this._supportingWidgets,b);this.domNode&&k.forEach(A.findWidgets(this.domNode,
this.containerNode),b);this.destroyRendering(a);A.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?e.remove(this.domNode,"widgetId"):g.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||g.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){k.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=
this.domNode;w.isObject(a)?t.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,d){d=3<=arguments.length?d:this.attributeMap[a];k.forEach(w.isArray(d)?d:[d],function(d){var g=this[d.node||d||"domNode"];switch(d.type||"attribute"){case "attribute":w.isFunction(b)&&(b=w.hitch(this,b));d=d.attribute?d.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;g.tagName?e.set(g,d,b):g.set(d,b);break;case "innerText":g.innerHTML="";g.appendChild(this.ownerDocument.createTextNode(b));
break;case "textContent":g.textContent=b;break;case "innerHTML":g.innerHTML=b;break;case "class":p.replace(g,b,this[a]);break;case "toggleClass":p.toggle(g,d.className||a,b)}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var d in a)this.set(d,a[d]);return this}d=this._getAttrNames(a);var g=this[d.s];if(w.isFunction(g))var e=g.apply(this,Array.prototype.slice.call(arguments,1));else{var g=this.focusNode&&
!w.isFunction(this.focusNode)?"focusNode":"domNode",h=this[g]&&this[g].tagName,l;if((l=h)&&!(l=K[h])){l=this[g];var n={},q;for(q in l)n[q.toLowerCase()]=!0;l=K[h]=n}q=l;d=a in this.attributeMap?this.attributeMap[a]:d.s in this?this[d.s]:q&&d.l in q&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?g:null;null!=d&&this._attrToDom(a,b,d);this._set(a,b)}return e||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var d=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-
1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+d+"Attr",g:"_get"+d+"Attr",l:d.toLowerCase()}},_set:function(a,b){var d=this[a];this[a]=b;!this._created||d===b||d!==d&&b!==b||(this._watchCallbacks&&this._watchCallbacks(a,d,b),this.emit("attrmodified-"+a,{detail:{prevValue:d,newValue:b}}))},_get:function(a){return this[a]},emit:function(a,b,d){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var g,e=this["on"+a];e&&
(g=e.apply(this,d?d:[b]));this._started&&!this._beingDestroyed&&v.emit(this.domNode,a.toLowerCase(),b);return g},on:function(a,b){var g=this._onMap(a);return g?d.after(this,g,b,!0):this.own(v(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,d=b._onMap;if(!d){var d=b._onMap={},g;for(g in b.prototype)/^on/.test(g)&&(d[g.replace(/^on/,"").toLowerCase()]=g)}return d["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},
getChildren:function(){return this.containerNode?A.findWidgets(this.containerNode):[]},getParent:function(){return A.getEnclosingWidget(this.domNode.parentNode)},connect:function(b,d,g){return this.own(a.connect(b,d,this,g))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(B.subscribe(a,w.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():n.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&
"none"!=t.get(this.domNode,"display")},placeAt:function(a,b){var d=!a.tagName&&A.byId(a);!d||!d.addChild||b&&"number"!==typeof b?(d=d&&"domNode"in d?d.containerNode&&!/after|before|replace/.test(b||"")?d.containerNode:d.domNode:l.byId(a,this.ownerDocument),g.place(this.domNode,d,b),!this._started&&(this.getParent()||{})._started&&this.startup()):d.addChild(this,b);return this},defer:function(a,b){var d=setTimeout(w.hitch(this,function(){d&&(d=null,this._destroyed||w.hitch(this,a)())}),b||0);return{remove:function(){d&&
(clearTimeout(d),d=null);return null}}}});q("dojo-bidi")&&b.extend(E);return b})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(f,k,d){return d("dijit.Destroyable",null,{destroy:function(b){this._destroyed=!0},own:function(){var b=["destroyRecursive","destroy","remove"];f.forEach(arguments,function(a){function d(){e.remove();f.forEach(p,function(a){a.remove()})}var l,e=k.before(this,"destroy",function(b){a[l](b)}),p=[];a.then?(l="cancel",a.then(d,
d)):f.forEach(b,function(b){"function"===typeof a[b]&&(l||(l=b),p.push(k.after(a,b,d,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(f,k,d,b,a,h){f=b("dijit._OnDijitClickMixin",null,{connect:function(a,b,d){return this.inherited(arguments,[a,"ondijitclick"==b?h:b,d])}});f.a11yclick=h;return f})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on",
"dojo/touch"],function(f,k,d,b){function a(a){if((a.keyCode===f.ENTER||a.keyCode===f.SPACE)&&!/input|button|textarea/i.test(a.target.nodeName))for(a=a.target;a;a=a.parentNode)if(a.dojoClick)return!0}var h;d(document,"keydown",function(b){a(b)?(h=b.target,b.preventDefault()):h=null});d(document,"keyup",function(b){a(b)&&b.target==h&&(h=null,d.emit(b.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:b.ctrlKey,shiftKey:b.shiftKey,metaKey:b.metaKey,altKey:b.altKey,_origType:b.type}))});var l=function(a,
b){a.dojoClick=!0;return d(a,"click",b)};l.click=l;l.press=function(a,h){var g=d(a,b.press,function(a){("mousedown"!=a.type||k.isLeft(a))&&h(a)}),e=d(a,"keydown",function(a){a.keyCode!==f.ENTER&&a.keyCode!==f.SPACE||h(a)});return{remove:function(){g.remove();e.remove()}}};l.release=function(a,h){var g=d(a,b.release,function(a){("mouseup"!=a.type||k.isLeft(a))&&h(a)}),e=d(a,"keyup",function(a){a.keyCode!==f.ENTER&&a.keyCode!==f.SPACE||h(a)});return{remove:function(){g.remove();e.remove()}}};l.move=
b.move;return l})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(f,k,d,b){b.extend(k,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return d("dijit._FocusMixin",null,{_focusManager:f})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(f,
k,d,b,a,h,l,e){var p=k("dijit._TemplatedMixin",e,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var d=this;return l.substitute(a,Config.Strings,function(a,g){"!"==g.charAt(0)?a=b.getObject(g.substr(1),!1,d):"undefined"==typeof a&&(a=dojo.getObject(g,!1,this));return"undefined"==typeof a?"${"+g+"}":null==a?"":"!"==g.charAt(0)?a:a.toString().replace(/"/g,"\x26quot;")},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;",
"\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=f(this.templatePath,{sanitize:!0}));var a=p.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),e;if(b.isString(a)){if(e=d.toDom(this._stringRepl(a),this.ownerDocument),1!=e.nodeType)throw Error("Invalid template: "+a);}else e=a.cloneNode(!0);this.domNode=e}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);
this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});p._templateCache={};p.getCachedTemplate=function(a,b,e){var g=p._templateCache,h=a,n=g[h];if(n){try{if(!n.ownerDocument||n.ownerDocument==(e||document))return n}catch(v){}d.destroy(n)}a=l.trim(a);if(b||a.match(/\$\{([^\}]+)\}/g))return g[h]=a;b=d.toDom(a,e);if(1!=b.nodeType)throw Error("Invalid template: "+a);return g[h]=b};h("ie")&&a(window,"unload",function(){var a=
p._templateCache,b;for(b in a){var e=a[b];"object"==typeof e&&d.destroy(e);delete a[b]}});return p})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(f){return f.cache})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(f,k){var d=/[&<>'"\/]/g,b={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},a={};k.setObject("dojo.string",a);a.escape=function(a){return a?a.replace(d,function(a){return b[a]}):""};a.rep=
function(a,b){if(0>=b||!a)return"";for(var d=[];;){b&1&&d.push(a);if(!(b>>=1))break;a+=a}return d.join("")};a.pad=function(b,d,e,p){e||(e="0");b=String(b);d=a.rep(e,Math.ceil((d-b.length)/e.length));return p?b+d:d+b};a.substitute=function(a,b,d,p){p=p||f.global;d=d?k.hitch(p,d):function(a){return a};return a.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(a,e,h){if(""==e)return"$";a=k.getObject(e,!1,b);h&&(a=k.getObject(h,!1,p).call(p,a,e));h=d(a,e);if("undefined"===typeof h)throw Error('string.substitute could not find key "'+
e+'" in template');return h.toString()})};a.trim=String.prototype.trim?k.trim:function(a){a=a.replace(/^\s+/,"");for(var b=a.length-1;0<=b;b--)if(/\S/.test(a.charAt(b))){a=a.substring(0,b+1);break}return a};return a})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(f,k,d,b,a,h,l,e,p){var g=a.delegate(e,{mouseenter:h.enter,mouseleave:h.leave,keypress:d._keypress}),
n;d=b("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=
b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(b,d,g){var e=!0,h=this.attachScope||this,l=d(b,"dojoAttachPoint")||d(b,"data-dojo-attach-point");if(l)for(var n=l.split(/\s*,\s*/);l=n.shift();)a.isArray(h[l])?h[l].push(b):h[l]=b,e="containerNode"!=l,this._attachPoints.push(l);if(d=d(b,"dojoAttachEvent")||d(b,"data-dojo-attach-event"))for(l=d.split(/\s*,\s*/),n=a.trim;d=l.shift();)if(d){var q=null;-1!=d.indexOf(":")?(q=d.split(":"),d=n(q[0]),q=n(q[1])):d=n(d);q||(q=d);this._attachEvents.push(g(b,
d,a.hitch(h,q)))}return e},_attach:function(a,b,d){b=b.replace(/^on/,"").toLowerCase();b="dijitclick"==b?n||(n=f("./a11yclick")):g[b]||b;return l(a,b,d)},_detachTemplateNodes:function(){var a=this.attachScope||this;k.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];k.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});a.extend(p,{dojoAttachEvent:"",dojoAttachPoint:""});
return d})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(f,k,d,b,a){return d("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var d=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);a.parse(d,{noStart:!this._earlyTemplatedStartup,
template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(b.hitch(this,function(a){this._startupWidgets=a;for(var b=0;b<a.length;b++)this._processTemplateNode(a[b],function(a,b){return a[b]},function(a,b,d){return b in a?a.connect(a,b,d):a.on(b,d,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(a,b,d){return b(a,"dojoType")||b(a,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){f.forEach(this._startupWidgets,function(a){a&&!a._started&&a.startup&&a.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(f,
k,d,b,a,h,l,e,p,g,n,t,q,m,w,v){function u(a){return eval("("+a+")")}function z(a){var b=a._nameCaseMap,d=a.prototype;if(!b||b._extendCnt<x){var b=a._nameCaseMap={},g;for(g in d)"_"!==g.charAt(0)&&(b[g.toLowerCase()]=g);b._extendCnt=x}return b}function B(a,b){b||(b=f);var g=b._dojoParserCtorMap||(b._dojoParserCtorMap={}),e=a.join();if(!g[e]){for(var h=[],l=0,n=a.length;l<n;l++){var q=a[l];h[h.length]=g[q]=g[q]||d.getObject(q)||~q.indexOf("/")&&b(q)}l=h.shift();g[e]=h.length?l.createSubclass?l.createSubclass(h):
l.extend.apply(l,h):l}return g[e]}new Date("X");var x=0;p.after(d,"extend",function(){x++},!0);var D={_clearCache:function(){x++;_ctorMap={}},_functionFromScript:function(a,d){var g="",e="",h=a.getAttribute(d+"args")||a.getAttribute("args"),l=a.getAttribute("with"),h=(h||"").split(/\s*,\s*/);l&&l.length&&b.forEach(l.split(/\s*,\s*/),function(a){g+="with("+a+"){";e+="}"});return new Function(h,g+a.innerHTML+e)},instantiate:function(a,d,g){d=d||{};g=g||{};var e=(g.scope||k._scopeName)+"Type",h="data-"+
(g.scope||k._scopeName)+"-",l=h+"type",n=h+"mixins",q=[];b.forEach(a,function(a){var b=e in d?d[e]:a.getAttribute(l)||a.getAttribute(e);if(b){var g=a.getAttribute(n),b=g?[b].concat(g.split(/\s*,\s*/)):[b];q.push({node:a,types:b})}});return this._instantiate(q,d,g)},_instantiate:function(a,d,e,h){function l(a){d._started||e.noStart||b.forEach(a,function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}a=b.map(a,function(a){var b=a.ctor||B(a.types,e.contextRequire);if(!b)throw Error("Unable to resolve constructor for: '"+
a.types.join()+"'");return this.construct(b,a.node,d,e,a.scripts,a.inherited)},this);return h?g(a).then(l):l(a)},construct:function(a,g,h,l,f,t){function v(a){L&&d.setObject(L,a);for(C=0;C<I.length;C++)p[I[C].advice||"after"](a,I[C].method,d.hitch(a,I[C].func),!0);for(C=0;C<J.length;C++)J[C].call(a);for(C=0;C<X.length;C++)a.watch(X[C].prop,X[C].func);for(C=0;C<N.length;C++)w(a,N[C].event,N[C].func);return a}var B=a&&a.prototype;l=l||{};var x={};l.defaults&&d.mixin(x,l.defaults);t&&d.mixin(x,t);var D;
q("dom-attributes-explicit")?D=g.attributes:q("dom-attributes-specified-flag")?D=b.filter(g.attributes,function(a){return a.specified}):(t=(/^input$|^img$/i.test(g.nodeName)?g:g.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),D=b.map(t.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==g.nodeName&&"value"==a||"enctype"==b?g.getAttribute(b):g.getAttributeNode(b).value}}));var E=l.scope||k._scopeName;
t="data-"+E+"-";var A={};"dojo"!==E&&(A[t+"props"]="data-dojo-props",A[t+"type"]="data-dojo-type",A[t+"mixins"]="data-dojo-mixins",A[E+"type"]="dojotype",A[t+"id"]="data-dojo-id");for(var C=0,H,E=[],L,P;H=D[C++];){var F=H.name,K=F.toLowerCase();H=H.value;switch(A[K]||K){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":P=H;break;case "data-dojo-id":case "jsid":L=H;break;case "data-dojo-attach-point":case "dojoattachpoint":x.dojoAttachPoint=H;break;case "data-dojo-attach-event":case "dojoattachevent":x.dojoAttachEvent=
H;break;case "class":x["class"]=g.className;break;case "style":x.style=g.style&&g.style.cssText;break;default:if(F in B||(F=z(a)[K]||F),F in B)switch(typeof B[F]){case "string":x[F]=H;break;case "number":x[F]=H.length?Number(H):NaN;break;case "boolean":x[F]="false"!=H.toLowerCase();break;case "function":""===H||-1!=H.search(/[^\w\.]+/i)?x[F]=new Function(H):x[F]=d.getObject(H,!1)||new Function(H);E.push(F);break;default:K=B[F],x[F]=K&&"length"in K?H?H.split(/\s*,\s*/):[]:K instanceof Date?""==H?new Date(""):
"now"==H?new Date:n.fromISOString(H):K instanceof e?k.baseUrl+H:u(H)}else x[F]=H}}for(D=0;D<E.length;D++)A=E[D].toLowerCase(),g.removeAttribute(A),g[A]=null;if(P)try{P=u.call(l.propsThis,"{"+P+"}"),d.mixin(x,P)}catch(da){throw Error(da.toString()+" in data-dojo-props\x3d'"+P+"'");}d.mixin(x,h);f||(f=a&&(a._noScript||B._noScript)?[]:m("\x3e script[type^\x3d'dojo/']",g));var I=[],J=[],X=[],N=[];if(f)for(C=0;C<f.length;C++)A=f[C],g.removeChild(A),h=A.getAttribute(t+"event")||A.getAttribute("event"),
l=A.getAttribute(t+"prop"),P=A.getAttribute(t+"method"),E=A.getAttribute(t+"advice"),D=A.getAttribute("type"),A=this._functionFromScript(A,t),h?"dojo/connect"==D?I.push({method:h,func:A}):"dojo/on"==D?N.push({event:h,func:A}):x[h]=A:"dojo/aspect"==D?I.push({method:P,advice:E,func:A}):"dojo/watch"==D?X.push({prop:l,func:A}):J.push(A);a=(f=a.markupFactory||B.markupFactory)?f(x,g,a):new a(x,g);return a.then?a.then(v):v(a)},scan:function(a,d){function g(a){if(!a.inherited){a.inherited={};var b=a.node,
d=g(a.parent),b={dir:b.getAttribute("dir")||d.dir,lang:b.getAttribute("lang")||d.lang,textDir:b.getAttribute(u)||d.textDir},e;for(e in b)b[e]&&(a.inherited[e]=b[e])}return a.inherited}var e=[],h=[],l={},n=(d.scope||k._scopeName)+"Type",m="data-"+(d.scope||k._scopeName)+"-",p=m+"type",u=m+"textdir",m=m+"mixins",w=a.firstChild,z=d.inherited;if(!z){var v=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&v(a.parentNode,b)},z={dir:v(a,"dir"),lang:v(a,"lang"),textDir:v(a,u)},x;for(x in z)z[x]||
delete z[x]}for(var z={inherited:z},D,E;;)if(w)if(1!=w.nodeType)w=w.nextSibling;else if(D&&"script"==w.nodeName.toLowerCase())(A=w.getAttribute("type"))&&/^dojo\/\w/i.test(A)&&D.push(w),w=w.nextSibling;else if(E)w=w.nextSibling;else{var A=w.getAttribute(p)||w.getAttribute(n);x=w.firstChild;if(A||x&&(3!=x.nodeType||x.nextSibling)){E=null;if(A){var W=w.getAttribute(m);D=W?[A].concat(W.split(/\s*,\s*/)):[A];try{E=B(D,d.contextRequire)}catch(pa){}E||b.forEach(D,function(a){~a.indexOf("/")&&!l[a]&&(l[a]=
!0,h[h.length]=a)});W=E&&!E.prototype._noScript?[]:null;z={types:D,ctor:E,parent:z,node:w,scripts:W};z.inherited=g(z);e.push(z)}else z={node:w,scripts:D,parent:z};D=W;E=w.stopParser||E&&E.prototype.stopParser&&!d.template;w=x}else w=w.nextSibling}else{if(!z||!z.node)break;w=z.node.nextSibling;E=!1;z=z.parent;D=z.scripts}var T=new t;h.length?(q("dojo-debug-messages"),(d.contextRequire||f)(h,function(){T.resolve(b.filter(e,function(a){if(!a.ctor)try{a.ctor=B(a.types,d.contextRequire)}catch(da){}for(var b=
a.parent;b&&!b.types;)b=b.parent;var g=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(g&&g.stopParser&&!d.template);a.instantiate=!b||b.instantiate&&b.instantiateChildren;return a.instantiate}))})):T.resolve(e);return T.promise},_require:function(a,b){var g=u("{"+a.innerHTML+"}"),e=[],h=[],l=new t,n=b&&b.contextRequire||f,q;for(q in g)e.push(q),h.push(g[q]);n(h,function(){for(var a=0;a<e.length;a++)d.setObject(e[a],arguments[a]);l.resolve(arguments)});return l.promise},_scanAmd:function(a,b){var d=
new t,g=d.promise;d.resolve(!0);var e=this;m("script[type\x3d'dojo/require']",a).forEach(function(a){g=g.then(function(){return e._require(a,b)});a.parentNode.removeChild(a)});return g},parse:function(a,b){!a||"string"==typeof a||"nodeType"in a||(b=a,a=b.rootNode);var g=a?h.byId(a):l.body();b=b||{};var e=b.template?{template:!0}:{},n=[],q=this,m=this._scanAmd(g,b).then(function(){return q.scan(g,b)}).then(function(a){return q._instantiate(a,e,b,!0)}).then(function(a){return n=n.concat(a)}).otherwise(function(a){throw a;
});d.mixin(n,m);return n}};k.parser=D;a.parseOnLoad&&v(100,D,"parse");return D})},"dojo/_base/url":function(){define(["./kernel"],function(f){var k=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,d=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,b=function(){for(var a=arguments,h=[a[0]],l=1;l<a.length;l++)if(a[l]){var e=new b(a[l]+""),h=new b(h[0]+"");if(""==e.path&&!e.scheme&&!e.authority&&!e.query)null!=e.fragment&&(h.fragment=e.fragment),e=h;else if(!e.scheme&&(e.scheme=
h.scheme,!e.authority&&(e.authority=h.authority,"/"!=e.path.charAt(0)))){for(var h=(h.path.substring(0,h.path.lastIndexOf("/")+1)+e.path).split("/"),f=0;f<h.length;f++)"."==h[f]?f==h.length-1?h[f]="":(h.splice(f,1),f--):0<f&&(1!=f||""!=h[0])&&".."==h[f]&&".."!=h[f-1]&&(f==h.length-1?(h.splice(f,1),h[f-1]=""):(h.splice(f-1,2),f-=2));e.path=h.join("/")}h=[];e.scheme&&h.push(e.scheme,":");e.authority&&h.push("//",e.authority);h.push(e.path);e.query&&h.push("?",e.query);e.fragment&&h.push("#",e.fragment)}this.uri=
h.join("");a=this.uri.match(k);this.scheme=a[2]||(a[1]?"":null);this.authority=a[4]||(a[3]?"":null);this.path=a[5];this.query=a[7]||(a[6]?"":null);this.fragment=a[9]||(a[8]?"":null);null!=this.authority&&(a=this.authority.match(d),this.user=a[3]||null,this.password=a[4]||null,this.host=a[6]||a[7],this.port=a[9]||null)};b.prototype.toString=function(){return this.uri};return f._Url=b})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(f,k,d,b){var a=
f.some;return function(h){var l,e;k.isArray(h)?e=h:h&&"object"===typeof h&&(l=h);var f,g=[];if(l){e=[];for(var n in l)Object.hasOwnProperty.call(l,n)&&(g.push(n),e.push(l[n]));f={}}else e&&(f=[]);if(!e||!e.length)return(new d).resolve(f);var t=new d;t.promise.always(function(){f=g=null});var q=e.length;a(e,function(a,d){l||g.push(d);b(a,function(a){t.isFulfilled()||(f[g[d]]=a,0===--q&&t.resolve(f))},t.reject);return t.isFulfilled()});return t.promise}})},"dojo/date/stamp":function(){define(["../_base/lang",
"../_base/array"],function(f,k){var d={};f.setObject("dojo.date.stamp",d);d.fromISOString=function(b,a){d._isoRegExp||(d._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var h=d._isoRegExp.exec(b),l=null;if(h){h.shift();h[1]&&h[1]--;h[6]&&(h[6]*=1E3);a&&(a=new Date(a),k.forEach(k.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(b){return a["get"+b]()}),function(a,b){h[b]=h[b]||a}));l=new Date(h[0]||
1970,h[1]||0,h[2]||1,h[3]||0,h[4]||0,h[5]||0,h[6]||0);100>h[0]&&l.setFullYear(h[0]||1970);var e=0,f=h[7]&&h[7].charAt(0);"Z"!=f&&(e=60*(h[8]||0)+(Number(h[9])||0),"-"!=f&&(e*=-1));f&&(e-=l.getTimezoneOffset());e&&l.setTime(l.getTime()+6E4*e)}return l};d.toISOString=function(b,a){var d=function(a){return 10>a?"0"+a:a};a=a||{};var l=[],e=a.zulu?"getUTC":"get",f="";"time"!=a.selector&&(f=b[e+"FullYear"](),f=["0000".substr((f+"").length)+f,d(b[e+"Month"]()+1),d(b[e+"Date"]())].join("-"));l.push(f);if("date"!=
a.selector){f=[d(b[e+"Hours"]()),d(b[e+"Minutes"]()),d(b[e+"Seconds"]())].join(":");e=b[e+"Milliseconds"]();a.milliseconds&&(f+="."+(100>e?"0":"")+d(e));if(a.zulu)f+="Z";else if("time"!=a.selector)var e=b.getTimezoneOffset(),g=Math.abs(e),f=f+((0<e?"-":"+")+d(Math.floor(g/60))+":"+d(g%60));l.push(f)}return l.join("T")};return d})},"ws/widget/Button":function(){define("ws/widget/Button","dojo/_base/declare dojo/text!ws/widget/Button.css dojo dijit dijit/_Widget dijit/_TemplatedMixin ws/html".split(" "),
function(f,k,d,b,a,h){return f([a,h],{showArrow:!1,showArrowBorder:!1,highlight:!1,className:"",iconClassName:"",svgID:"",tabIndex:"",title:"",tip:"",tipSide:"",arrowTitle:"",minWidth:null,size:"",type:"",shortButton:"",fixSize:!1,templateString:'\x3cdiv class\x3d"unselectable btn" tabindex\x3d"${tabIndex}" data-dojo-attach-event\x3d"onmouseenter:_onMouseEnter,onmouseleave:_onMouseLeave,onclick:_onClick, onmouseover:_onMouseOver, onmousedown:_onMouseDown, onmouseup:_onMouseUp, onmouseout:_onMouseOut, onkeypress:onKeyPress"\x3e\t\x3cdiv class\x3d"btnLabel" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\t\x3cdiv class\x3d"btnArrow" data-dojo-attach-point\x3d"arrowNode" data-dojo-attach-event\x3d"onclick:onArrowClick" style\x3d"display:none"\x3e\x3csvg class\x3d"btnArrowSvg" data-dojo-attach-point\x3d"arrowImg"\x3e\x3cuse xlink:href\x3d"#iconDropDn"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\x3c/div\x3e',
css:{templateString:k},startup:function(){this._started||(this._started=!0,this.title&&this.setTitle(this.title),this.label?this.setLabel(this.label):this.setLabel(this.getLabel()),""!=this.size&&d.addClass(this.domNode,"btn"+this.size),""!=this.type&&this.setType(this.type),this.className&&d.addClass(this.domNode,this.className),this.showArrow&&(this.arrowNode.style.display=""),this.showArrowBorder&&d.addClass(this.arrowNode,"btnSplitArrow"),this.disabled&&this.disable(),this.highlight&&this.setHighlight(!0),
this.minWidth&&this.resize(),d.isIE&&(setTimeout(d.hitch(this,"fixButtons"),10),7==d.isIE&&this.fixSize&&(this.ie7fixSizeRetry=5,window.setTimeout(d.hitch(this,this.ie7fixSize),0))),ws.html.addHoverClass(this.domNode,"btn"+this.size+this.type+"Hover",!0),this.clickClassName="btn"+this.size+this.type+"Click",this._origTip=this.tip,this._origTitle=this.title,this.subscribe("toolbarLayoutUpdate",d.hitch(this,function(){this.renderIconButtonContent();this.tip=this._origTip;this.setTitle(this._origTitle);
this.processTip2()})),this.renderIconButtonContent(),this.processTip2())},ie7fixSize:function(){var a=null;try{a=d.marginBox(this.containerNode)}catch(e){}null==a||0==a.w||0==a.h?this.ie7fixSizeRetry&&(this.ie7fixSizeRetry--,window.setTimeout(d.hitch(this,this.ie7fixSize),30)):(d.style(this.domNode,"width",a.w+"px"),d.style(this.domNode,"height",a.h+"px"))},fixButtons:function(){null!=this.domNode&&(this.domNode.style.zoom="",this.domNode.style.zoom=1,d.isIE&&(this.arrowNode.innerHTML=this.arrowNode.innerHTML))},
resize:function(){var a=d._getMarginSize(this.domNode).w;this.minWidth&&a<this.minWidth&&(this.domNode.style.width=this.minWidth+"px")},sizeMyself:function(){if(this.domNode.parentNode){var a=document.createElement("span");this.domNode.parentNode.insertBefore(a,this.domNode)}d.body().appendChild(this.domNode);this.marginBox=d.marginBox(this.domNode);a&&(a.parentNode.insertBefore(this.domNode,a),d._destroyElement(a))},setTip:function(a){this._origTip=this.tip=a;this.processTip2()},processTip2:function(){if(this.tip)this.setTitle("");
else if(!this.tip&&""!=this.svgID&&!d.hasClass(this.domNode,"DropDownButton")&&!d.hasClass(this.domNode,"DropDownLink"))if(""!=this.title)this.tip=this.title;else{var a=d.query(".label",this.containerNode);1==a.length&&(this.tip=a[0].innerHTML);this.setTitle("")}},renderIconButtonContent:function(){if(""!=this.svgID){d.addClass(this.domNode,"wsIconButton");var a="";this.showArrow&&(a+="\x3cdiv class\x3d'btnIconArrowCntr'\x3e");a+="\x3csvg class\x3d'icon svgIcon'\x3e\x3cuse xlink:href\x3d'#"+this.svgID+
"'\x3e\x3c/use\x3e\x3c/svg\x3e";this.showArrow&&(a+='\x3csvg class\x3d"btnArrowSvg" data-dojo-attach-point\x3d"arrowImg"\x3e\x3cuse xlink:href\x3d"#iconDropDn"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e',this.arrowNode.style.display="none");""!=this.label&&(a+="\x3cdiv class\x3d'label'\x3e"+this.label+"\x3c/div\x3e");this.containerNode.innerHTML=a;if(d.hasClass(d.body(),"btnLabelsOn2")||this.shortButton){var a=this.shortButton?"3px":"5px",b=d.query(".label",this.containerNode);0==b.length&&d.query(".icon",
this.containerNode).style({"margin-top":a})}}else""!=this.iconClassName&&(d.addClass(this.domNode,"wsIconButton"),a="",this.showArrow&&(a+="\x3cdiv class\x3d'btnIconArrowCntr'\x3e"),a+="\x3cdiv class\x3d'icon "+this.iconClassName+"'\x3e\x3c/div\x3e",this.showArrow&&(a+='\x3csvg class\x3d"btnArrowSvg" data-dojo-attach-point\x3d"arrowImg"\x3e\x3cuse xlink:href\x3d"#iconDropDn"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e',this.arrowNode.style.display="none"),""!=this.label&&(a+="\x3cdiv class\x3d'label'\x3e"+
this.label+"\x3c/div\x3e"),this.containerNode.innerHTML=a,d.hasClass(d.body(),"btnLabelsOn2")||this.shortButton)&&(b=d.query(".label",this.containerNode),0==b.length&&d.query(".icon",this.containerNode).style({top:"7px"}))},getLabel:function(){return this.containerNode.innerHTML},setLabel:function(a){this.label=a;this.containerNode.innerHTML=a},IsEqualsLabel:function(a){return this.containerNode.innerHTML==a},setType:function(a,b){""!=this.type&&d.removeClass(this.domNode,"btn"+this.size+this.type);
""!=this.subType&&d.removeClass(this.domNode,"btn"+this.size+this.subType);this.type=a;this.subType=b;d.addClass(this.domNode,"btn"+this.size+a);this.subType&&d.addClass(this.domNode,"btn"+this.size+a+b);"Bare"==this.type?d.addClass(this.containerNode,"wsLink"):d.removeClass(this.containerNode,"wsLink")},setTitle:function(a){this._origTitle=this.title=a;this.domNode.title=a},enable:function(){this.disabled=!1;d.removeClass(this.domNode,"btn"+this.size+"Disabled")},disable:function(){this.disabled=
!0;d.addClass(this.domNode,"btn"+this.size+"Disabled")},setHighlight:function(a){this.highlight=a;d.toggleClass(this.domNode,"ButtonHighlight",a)},_onClick:function(a){this.tip&&ws.widget.hideInstatip(this.domNode);if(!this.disabled){this.onClick(a);try{this.domNode&&this.domNode.blur()}catch(e){}}},_onMouseDown:function(a){this.disabled||(this.clickClassName&&d.addClass(this.domNode,this.clickClassName),this.highlight||d.addClass(this.domNode,"ButtonHighlight"),this.onMouseDown(a))},_onMouseUp:function(a){(!this.menu||
this.menu&&!this.menu.isShowing())&&this.setHighlight(this.highlight);this.clickClassName&&d.removeClass(this.domNode,this.clickClassName);if(!this.disabled)this.onMouseUp(a)},_onMouseOut:function(a){(!this.menu||this.menu&&!this.menu.isShowing())&&this.setHighlight(this.highlight);this.clickClassName&&d.removeClass(this.domNode,this.clickClassName);if(!this.disabled)this.onMouseOut(a)},_onMouseOver:function(a){this.onMouseOver(a)},_onMouseEnter:function(){this.tip&&(!this.menu||this.menu&&!this.menu.isShowing())&&
(this.tipDim||(d.byId("instatip").innerHTML=this.tip,this.tipDim=d.marginBox(window.wsBaseTip)),ws.widget.showInstatip(this.domNode,{label:this.tip,tipDimensions:this.tipDim,side:this.tipSide}))},_onMouseLeave:function(){this.tip&&ws.widget.hideInstatip(this.domNode)},onClick:function(){},onMouseOver:function(){},onMouseDown:function(){},onMouseUp:function(){},onMouseOut:function(){},onArrowClick:function(){},onKeyPress:function(){}})})},"ws/html":function(){define("ws/html","dojo dojo/_base/lang dojo/request/iframe dojo/dom-attr ws/browser ws/string".split(" "),
function(f,k,d,b){k.setObject("ws.html",{_rewriteIframeContent:{},getBorderBox:function(a,b){var d=b||f.getComputedStyle(a),e=f.getPadExtents(a,d),d=f.getContentBox(a,d);return{l:d.l-e.l,t:d.t-e.t,w:d.w+e.w,h:d.h+e.h}},setInnerText:function(a,b){b=(b||"")+"";f.isIE||f.isWebKit?a.innerText=b:f.isMoz?a.textContent=b:a.innerHTML=ws.string.escapeXml(b)},setShowing:function(a,b){a&&(a.style.display=b?"":"none")},toggleShowing:function(a){a&&(a.style.display="none"==a.style.display?"":"none")},setVisibility:function(a,
b){a.style.visibility=b?"visible":"hidden"},asciiSeparator:"------------------------------------------------------------",getText:function(a){a=f.create("div",{innerHTML:a});return ws.html.renderedTextContent(a,null,!0)},renderedTextContent:function(a,b,d){return this._renderedTextContent(a,b,d).replace(/__aolwebsuiteblk____aolwebsuiteblk__/g,"\n").replace(/__aolwebsuiteblk__/g,"\n")},_renderedTextContent:function(a,b,d,e){a=f.byId(a);var h="";if(null==a)return h;if(a.tagName&&"style"==a.tagName.toLowerCase())return"";
for(var g=0;g<a.childNodes.length;g++)switch(a.childNodes[g].nodeType){case 1:case 5:var l="unknown";try{l=f.style(a.childNodes[g],"display")}catch(q){}var k=a.childNodes[g].nodeName.toLowerCase();f.isWebKit&&-1!=f.indexOf(["p","div","li"],k)&&(l="block");d&&"hr"==k&&(l="block");switch(l){case "block":case "list-item":case "run-in":case "table":case "table-row-group":case "table-header-group":case "table-footer-group":case "table-row":case "table-column-group":case "table-column":case "table-cell":case "table-caption":h+=
"__aolwebsuiteblk__";h=d&&a.childNodes[g].tagName&&"hr"==a.childNodes[g].tagName.toLowerCase()?h+this.asciiSeparator:h+ws.html._renderedTextContent(a.childNodes[g],b,d,e||"pre"==k);h+="__aolwebsuiteblk__";break;case "none":break;default:h=a.childNodes[g].tagName&&"br"==a.childNodes[g].tagName.toLowerCase()?h+"\n":h+ws.html._renderedTextContent(a.childNodes[g],b,d,e)}break;case 3:case 2:case 4:l=a.childNodes[g].nodeValue;k="unknown";try{k=f.style(a,"text-transform")}catch(q){}switch(k){case "capitalize":l=
l.split(" ");for(k=0;k<l.length;k++)l[k]=l[k].charAt(0).toUpperCase()+l[k].substring(1);l=l.join(" ");break;case "uppercase":l=l.toUpperCase();break;case "lowercase":l=l.toLowerCase();break;case "nowrap":case "pre-wrap":case "pre-line":case "pre":break;default:b&&(l=l.replace(/\s+/,""))}h=e?h+l.replace(/&nbsp;/gi," "):h+l.replace(/[\r\n]/g,"").replace(/&nbsp;/gi," ")}return h},addHoverClass:function(a,b,d){if(7>=f.isIE||d)b||(b="hover"),f.connect(a,"onmouseenter",function(){f.addClass(a,b)}),f.connect(a,
"onmouseleave",function(){f.removeClass(a,b)})},hideSoon:function(a){a.wsHtmlTimeoutId&&window.clearTimeout(a.wsHtmlTimeoutId);a.wsHtmlTimeoutId=setTimeout(function(){a.style.display="none"},100)},showSoon:function(a){a.wsHtmlTimeoutId&&window.clearTimeout(a.wsHtmlTimeoutId);a.wsHtmlTimeoutId=setTimeout(function(){a.style.display=""},100)},setAbsolutePosition:function(a,b){var d=a.offsetParent||f.body(),d=f.position(d);a.style.left=b.x-d.x+"px";a.style.top=b.y-d.y+"px"},recreateIframe:function(a,
b){var h=a.innerHTML,e=/( src=["'][^"']*["'])/i.exec(h),h=e?h.replace(e[0],' src\x3d"about:blank"'):h.replace(/<iframe/i,'\x3ciframe src\x3d"about:blank"');a.innerHTML="";a.innerHTML=h;h=a.getElementsByTagName("iframe")[0];b&&(h.style.display="none",d.setSrc(h,b,!0),h.style.display="");return h},rewriteIframe:function(a,b,l){if(10>f.isIE||f.isMoz)return l=l||"defaultId",ws.html._rewriteIframeContent[l]=b,6>=f.isIE?ws.html.recreateIframe(a.parentNode,"javascript:setTimeout(function(){document.write(parent.ws.html._rewriteIframeContent['"+
l+"']);document.close();},5),void 1"):ws.html.recreateIframe(a.parentNode,"javascript:document.write(parent.ws.html._rewriteIframeContent['"+l+"']);document.close()");l=d.doc(a);l.open();l.write(b);l.close();return a},targetLinksToNewWindow:function(a){f.forEach(a.getElementsByTagName("a"),function(a){a.target="_blank"})},scaleImage:function(a,b){var d=a.offsetWidth,e=a.offsetHeight;d>b&&(a.width=b,a.height=Math.round(b/d*e))},fixKeyForMac:function(a){f.isMac&&a.keyChar&&"\u2211"==a.keyChar.toLowerCase()&&
(a.keyChar="w");return a},fixKeyCodeForMac:function(a){return f.isMac&&f.isMoz&&a.ctrlKey&&(77==a.keyCode||"M"==a.keyChar)?f.keys.ENTER:a.keyCode},isTargetAnInputElement:function(a){var b=!1;a&&a.target&&a.target.nodeName&&(b=a.target.nodeName.toLowerCase(),b="input"==b||"textarea"==b||"div"==b&&a.target.isContentEditable);return b},isTargetALinkElement:function(a){var b=!1;a&&a.target&&a.target.nodeName&&(b="a"==a.target.nodeName.toLowerCase());return b},overElement:function(a,b){if("undefined"==
typeof f)return!1;a=f.byId(a);var d=b.pageX,e=b.pageY,h=ws.html.getBorderBox(a),g=f.position(a,!0),n=g.x,k=g.y;return d>=n&&d<=n+h.w&&e>=g.y&&e<=k+h.h},selectInputText:function(a){var b=f.global,d=f.doc;a=f.byId(a);try{if(d.selection&&f.body().createTextRange){if(a.createTextRange){var e=a.createTextRange();e.moveStart("character",0);e.moveEnd("character",a.value.length);e.select()}}else b.getSelection&&a.setSelectionRange&&a.setSelectionRange(0,a.value.length);a.focus()}catch(p){}},getScrollbar:function(){var a=
f.create("div",{style:{width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-300px",left:"0px"}}),b=f.create("div",{style:{width:"400px",height:"400px"}},a);f.body().appendChild(a);var d=a.offsetWidth-a.clientWidth;f.body().removeChild(a);a.removeChild(b);a=b=null;return{w:d}},getScrollbarWidth:function(){this._scrollbarWidth||(this._scrollbarWidth=this.getScrollbar().w);return this._scrollbarWidth},clearSelection:function(){try{return window.getSelection?f.isSafari?window.getSelection().collapse():
window.getSelection().removeAllRanges():document.selection&&(document.selection.empty?document.selection.empty():document.selection.clear&&document.selection.clear()),!0}catch(a){return!1}},ellipsis:function(a){ellipsisHtml='\x3cspan class\x3d"ellipsis"\x3e\x26hellip;\x3c/span\x3e';f.isString(a)&&(a=f.byId(a));if("hidden"==f.style(a,"overflow")){var b=function(a,b){var d,g;if(3===a.nodeType){for(;a.nodeValue.length&&b();)d=a.nodeValue,g=d.search(/\b\w*?$/),-1==g&&(g=d.length),a.nodeValue=d.substr(0,
g-1);a.nodeValue.length||a.parentNode.removeChild(a)}else a.parentNode.removeChild(a)},d=function(){return Math.round(f.style(p,"height"))>e},e=f.position(a).h,p=a.cloneNode(!0),g=0,n;f.style(p,{display:"",overflow:"visible",height:"auto","max-height":"none"});f.place(p,a,"after");for(var k=0;p.innerHTML.length&&d();)0===k&&(n=f._toDom(ellipsisHtml),f.place(n,p,p.childNodes.length-g),g+=11===n.nodeType?n.childNodes.length:1,k++),n=p.childNodes[p.childNodes.length-(1+g)],b(n,d);a.innerHTML=p.innerHTML;
p.parentNode.removeChild(p)}},dragEvtContainsFiles:function(a){if(a&&a.dataTransfer&&a.dataTransfer.types)for(var b=0;b<a.dataTransfer.types.length;b++)if("Files"==a.dataTransfer.types[b])return!0;return!1},setFloat:function(a,b){a.style[ws.html.floatAttr]=b},getFloat:function(a){return a.style[ws.html.floatAttr]},floatAttr:f.isIE?"styleFloat":"cssFloat"})})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),
function(f,k,d,b,a,h,l,e,p,g,n,t){function q(a){return!this.isFulfilled()}function m(a){return!!this._finished}function w(b,d){if(!d)try{var g=b.options,l=u.doc(u._frame),n=g.handleAs;if("html"!==n){if("xml"===n)if("html"===l.documentElement.tagName.toLowerCase()){e("a",l.documentElement).orphan();var q=l.documentElement.innerText||l.documentElement.textContent,q=q.replace(/>\s+</g,"\x3e\x3c");b.text=h.trim(q)}else b.data=l;else b.text=l.getElementsByTagName("textarea")[0].value;a(b)}else b.data=
l}catch(J){d=J}d?this.reject(d):this._finished?this.resolve(b):this.reject(Error("Invalid dojo/request/iframe request state"))}function v(a){this._callNext()}function u(a,g,e){var h=b.parseArgs(a,b.deepCreate(x,g),!0);a=h.url;g=h.options;if("GET"!==g.method&&"POST"!==g.method)throw Error(g.method+" not supported by dojo/request/iframe");u._frame||(u._frame=u.create(u._iframeName,B+"();"));a=b.deferred(h,null,q,m,w,v);a._callNext=function(){this._calledNext||(this._calledNext=!0,u._currentDfd=null,
u._fireNextRequest())};a._legacy=e;u._dfdQueue.push(a);u._fireNextRequest();d(a);return e?a:a.promise}var z=f.id.replace(/[\/\.\-]/g,"_"),B=z+"_onload";t.global[B]||(t.global[B]=function(){var a=u._currentDfd;if(a){var b=g.byId(a.response.options.form)||a._tmpForm;if(b){for(var d=a._contentToClean,e=0;e<d.length;e++)for(var h=d[e],l=0;l<b.childNodes.length;l++){var q=b.childNodes[l];if(q.name===h){n.destroy(q);break}}a._originalAction&&b.setAttribute("action",a._originalAction);a._originalMethod&&
(b.setAttribute("method",a._originalMethod),b.method=a._originalMethod);a._originalTarget&&(b.setAttribute("target",a._originalTarget),b.target=a._originalTarget)}a._tmpForm&&(n.destroy(a._tmpForm),delete a._tmpForm);a._finished=!0}else u._fireNextRequest()});var x={method:"POST"};u.create=function(a,b,d){if(t.global[a])return t.global[a];if(t.global.frames[a])return t.global.frames[a];d||(p("config-useXDomain")&&p("config-dojoBlankHtmlUrl"),d=p("config-dojoBlankHtmlUrl")||k.toUrl("dojo/resources/blank.html"));
b=n.place('\x3ciframe id\x3d"'+a+'" name\x3d"'+a+'" src\x3d"'+d+'" onload\x3d"'+b+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',t.body());return t.global[a]=b};u.doc=function(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var d=t.doc.getElementsByTagName("iframe");if(a.document&&d[b].contentWindow&&d[b].contentWindow.document)return d[b].contentWindow.document;if(t.doc.frames[b]&&t.doc.frames[b].document)return t.doc.frames[b].document}return null};
u.setSrc=function(a,b,d){try{if(d){var g;(g=dojo.isIE||dojo.isWebKit?a.contentWindow.document:a.contentWindow)?g.location.replace(b):a.location=b}else dojo.isWebKit?a.location=b:frames[a.name].location=b}catch(K){}};u._iframeName=z+"_IoIframe";u._notifyStart=function(){};u._dfdQueue=[];u._currentDfd=null;u._fireNextRequest=function(){var a;try{if(!u._currentDfd&&u._dfdQueue.length){do a=u._currentDfd=u._dfdQueue.shift();while(a&&(a.canceled||a.isCanceled&&a.isCanceled())&&u._dfdQueue.length);if(!a||
a.canceled||a.isCanceled&&a.isCanceled())u._currentDfd=null;else{var d=a.response,q=d.options,m=a._contentToClean=[],f=g.byId(q.form),p=b.notify,k=q.data||null,w;a._legacy||"POST"!==q.method||f?"GET"===q.method&&f&&-1<d.url.indexOf("?")&&(w=d.url.slice(d.url.indexOf("?")+1),k=h.mixin(l.queryToObject(w),k)):f=a._tmpForm=n.create("form",{name:z+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},t.body());if(f){if(!a._legacy){var v=f;do v=v.parentNode;while(v&&v!==t.doc.documentElement);
v||(f.style.position="absolute",f.style.left="-1000px",f.style.top="-1000px",t.body().appendChild(f));f.name||(f.name=z+"_form")}if(k){var v=function(a,b){n.create("input",{type:"hidden",name:a,value:b},f);m.push(a)},B;for(B in k){var x=k[B];if(h.isArray(x)&&1<x.length)for(w=0;w<x.length;w++)v(B,x[w]);else{var Q=e("input[name\x3d'"+B+"']",f);-1==Q.indexOf()?v(B,x):Q.val(x)}}}var M=f.getAttributeNode("action"),C=f.getAttributeNode("method"),H=f.getAttributeNode("target");d.url&&(a._originalAction=
M?M.value:null,M?M.value=d.url:f.setAttribute("action",d.url));a._legacy?C&&C.value||(C?C.value=q.method:f.setAttribute("method",q.method)):(a._originalMethod=C?C.value:null,C?C.value=q.method:f.setAttribute("method",q.method));a._originalTarget=H?H.value:null;H?H.value=u._iframeName:f.setAttribute("target",u._iframeName);f.target=u._iframeName;p&&p.emit("send",d,a.promise.cancel);u._notifyStart(d);f.submit()}else q="",d.options.data&&(q=d.options.data,"string"!==typeof q&&(q=l.objectToQuery(q))),
v=d.url+(-1<d.url.indexOf("?")?"\x26":"?")+q,p&&p.emit("send",d,a.promise.cancel),u._notifyStart(d),u.setSrc(u._frame,v,!0)}}}catch(L){a.reject(L)}};b.addCommonMethods(u,["GET","POST"]);return u})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(f,k,d,b,a){function h(a){for(;a.childNodes[0]&&1==a.childNodes[0].nodeType;)a=a.childNodes[0];return a}function l(a,d){"string"==typeof a?(a=b.toDom(a,d&&d.ownerDocument),
11==a.nodeType&&(a=a.childNodes[0])):1==a.nodeType&&a.parentNode&&(a=a.cloneNode(!1));return a}var e=f.NodeList;k.extend(e,{_placeMultiple:function(a,d){for(var g="string"==typeof a||a.nodeType?f(a):a,e=[],h=0;h<g.length;h++)for(var l=g[h],p=this.length,k=p-1,u;u=this[k];k--)0<h&&(u=this._cloneNode(u),e.unshift(u)),k==p-1?b.place(u,l,d):l.parentNode.insertBefore(u,l),l=u;e.length&&(e.unshift(0),e.unshift(this.length-1),Array.prototype.splice.apply(this,e));return this},innerHTML:function(a){return arguments.length?
this.addContent(a,"only"):this[0].innerHTML},text:function(b){if(arguments.length){for(var d=0,e;e=this[d];d++)1==e.nodeType&&a.set(e,"textContent",b);return this}for(var h="",d=0;e=this[d];d++)h+=a.get(e,"textContent");return h},val:function(a){if(arguments.length){for(var b=k.isArray(a),e=0,h;h=this[e];e++){var l=h.nodeName.toUpperCase(),m=h.type,f=b?a[e]:a;if("SELECT"==l)for(l=h.options,m=0;m<l.length;m++){var p=l[m];p.selected=h.multiple?-1!=d.indexOf(a,p.value):p.value==f}else"checkbox"==m||
"radio"==m?h.checked=h.value==f:h.value=f}return this}if((h=this[0])&&1==h.nodeType){a=h.value||"";if("SELECT"==h.nodeName.toUpperCase()&&h.multiple){a=[];l=h.options;for(m=0;m<l.length;m++)p=l[m],p.selected&&a.push(p.value);a.length||(a=null)}return a}},append:function(a){return this.addContent(a,"last")},appendTo:function(a){return this._placeMultiple(a,"last")},prepend:function(a){return this.addContent(a,"first")},prependTo:function(a){return this._placeMultiple(a,"first")},after:function(a){return this.addContent(a,
"after")},insertAfter:function(a){return this._placeMultiple(a,"after")},before:function(a){return this.addContent(a,"before")},insertBefore:function(a){return this._placeMultiple(a,"before")},remove:e.prototype.orphan,wrap:function(a){if(this[0]){a=l(a,this[0]);for(var b=0,d;d=this[b];b++){var e=this._cloneNode(a);d.parentNode&&d.parentNode.replaceChild(e,d);h(e).appendChild(d)}}return this},wrapAll:function(a){if(this[0]){a=l(a,this[0]);this[0].parentNode.replaceChild(a,this[0]);a=h(a);for(var b=
0,d;d=this[b];b++)a.appendChild(d)}return this},wrapInner:function(a){if(this[0]){a=l(a,this[0]);for(var b=0;b<this.length;b++){var d=this._cloneNode(a);this._wrap(k._toArray(this[b].childNodes),null,this._NodeListCtor).wrapAll(d)}}return this},replaceWith:function(a){a=this._normalize(a,this[0]);for(var b=0,d;d=this[b];b++)this._place(a,d,"before",0<b),d.parentNode.removeChild(d);return this},replaceAll:function(a){a=f(a);for(var b=this._normalize(this,this[0]),d=0,e;e=a[d];d++)this._place(b,e,"before",
0<d),e.parentNode.removeChild(e);return this},clone:function(){for(var a=[],b=0;b<this.length;b++)a.push(this._cloneNode(this[b]));return this._wrap(a,this,this._NodeListCtor)}});e.prototype.html||(e.prototype.html=e.prototype.innerHTML);return e})},"ws/browser":function(){define("ws/browser",["dojo","dojo/_base/lang"],function(f,k){k.setObject("ws.browser",{uniqueHdlrIndex:0,addOnBeforeUnload:function(d,b){ws.browser._onBeforeUnloadAttached||(ws.browser._onBeforeUnloadAttached=!0,ws.browser._oldOnBeforeUnloadHandler=
window.onbeforeunload||function(){},ws.browser._onBeforeUnloadHandlers={},window.onbeforeunload=ws.browser._onBeforeUnload);var a=1==arguments.length?d:f.hitch(d,b),h="k"+this.uniqueHdlrIndex++;ws.browser._onBeforeUnloadHandlers[h]=a;return h},removeOnBeforeUnload:function(d){d&&ws.browser._onBeforeUnloadHandlers[d]&&delete ws.browser._onBeforeUnloadHandlers[d]},_onBeforeUnload:function(){ws.browser._oldOnBeforeUnloadHandler();window.onbeforeunload=null;setTimeout(function(){window.onbeforeunload=
ws.browser._onBeforeUnload},0);if(!ws.io.closeWindowInProgress)for(var d in ws.browser._onBeforeUnloadHandlers)if(ws.browser._onBeforeUnloadHandlers.hasOwnProperty(d)&&ws.browser._onBeforeUnloadHandlers[d]){var b=ws.browser._onBeforeUnloadHandlers[d]();if(b)return b}},addDocumentOnClick:function(d,b){if(this._getDocClickHandlerObj())return f.connect(this._getDocClickHandlerObj(),"onclick",d,b)},_getDocClickHandlerObj:function(){if(!this._docClickHandlerInited){this._docClickHandlerInited=!0;for(var d=
[document,document.body,document.documentElement],b=function(){},a=0;a<d.length;a++)try{var h=f.connect(d[a],"onclick",b);f.disconnect(h);this._docClickHandlerObj=d[a];break}catch(l){}}return this._docClickHandlerObj},ns7:-1!=navigator.userAgent.indexOf("Netscape/7"),ns8:-1!=navigator.userAgent.indexOf("Netscape/8"),win98:-1!=navigator.userAgent.indexOf("Windows 98")||-1!=navigator.userAgent.indexOf("Win98"),win2k:-1!=navigator.userAgent.indexOf("Windows NT 5.0"),win:-1!=navigator.appVersion.indexOf("Windows"),
ipad:-1!=navigator.appVersion.indexOf("iPad"),isIE11:!!window.MSInputMethodContext&&!!document.documentMode,isEdgeRE:/\bEdg[e]?\/(\d+)/,isEdge:function(){var d=navigator&&navigator.userAgent;if("string"==typeof d&&(d=d.match(this.isEdgeRE))&&1<d.length&&(d=parseInt(d[1],10),"number"==typeof d))return d},isOperaRE:/\bOPR\/(\d+)/,isOpera:function(){var d=navigator&&navigator.userAgent;if("string"==typeof d&&(d=d.match(this.isOperaRE))&&1<d.length&&(d=parseInt(d[1],10),"number"==typeof d))return d},
isWindowFocused:!0,_trackWindowFocus:function(){f.isIE?(f.connect(f.body(),"onfocusin",this,"_onfocus"),f.connect(f.body(),"onfocusout",this,"_onblur")):(f.connect(window,"onfocus",this,"_onfocus"),f.connect(window,"onblur",this,"_onblur"))},_onfocus:function(){this.isWindowFocused=!0;this._clearFlashingWindowTitle()},_onblur:function(){this.isWindowFocused=!1},focus:function(d){this.isWindowFocused&&setTimeout(function(){try{d.focus()}catch(b){}},0)},setWindowTitle:function(d){document.title!=this._flashingTitle&&
(document.title=d);this._normalTitle=d},setFlashingWindowTitle:function(d){this.isWindowFocused||(this._clearFlashingWindowTitle(),this._flashingTitle=d,this._alternateWindowTitle())},_flashingTitle:null,_normalTitle:document.title,_alternateWindowTitle:function(){document.title=document.title==this._normalTitle?this._flashingTitle:this._normalTitle;this._flashTitleTimeout=window.setTimeout(f.hitch(this,"_alternateWindowTitle"),2E3)},_clearFlashingWindowTitle:function(){this._flashingTitle=null;document.title=
this._normalTitle;this._flashTitleTimeout&&window.clearTimeout(this._flashTitleTimeout)},registerMailToHandler:function(){3<=f.isFF&&window.navigator.registerProtocolHandler("mailto",Config.MailToAppUrl+"?to\x3d%s",Config.Strings.FullProductName)}});f.addOnLoad(ws.browser,"_trackWindowFocus")})},"ws/string":function(){define("ws/string",["dojo","dojo/_base/lang"],function(f,k){k.setObject("ws.string",{substituteParams:function(d,b){var a="object"==typeof b?b:f._toArray(arguments,1);return null==d?
"":d.replace(/\%?\{(\w+)\}/g,function(b,d){if("undefined"!=typeof a[d]&&null!=a[d])return a[d];throw Error("Substitution not found: "+d);})},substituteOptionalParams:function(d,b){var a="object"==typeof b?b:f._toArray(arguments,1);return d?d.replace(/\%?\{(\w+)\}/g,function(b,d){if("undefined"!=typeof a[d]&&null!=a[d])return a[d]}):""},escapeXml:function(d){return d?d.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;").replace(/'/gm,"\x26#39;"):""},
unescapeXml:function(d){d=d.replace(/&#38;|&amp;/g,"\x26");d=d.replace(/&#60;|&lt;/g,"\x3c");d=d.replace(/&#62;|&gt;/g,"\x3e");d=d.replace(/&#34;|&quot;/g,'"');return d=d.replace(/&#39;|&apos;/g,"'")},decodeHTML:function(d){var b=document.createElement("textarea");b.innerHTML=d.replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;");return b.value},escapeJs:function(d){return d.replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;").replace(/'/gm,"\x26#39;")},sanitize:function(d,b){return f.trim(d.replace(new RegExp("\\\x3c.*?\\\x3e|\x26.*?;"+
(b?"":"|[\r\n]"),"g"),""))},summary:function(d,b){return!b||d.length<=b?d:d.substring(0,b-3).replace(/\.+$/,"")+"..."},textOverflow:function(){var d="textContent"in document.body?"textContent":"innerText",b=String.fromCharCode(8230);return function(a){f.query(a).forEach(function(a){var h=a[d],e=h.length;for(0==e||8230!=h.charCodeAt(e-1)?a.origText=h:h=a[d]=a.origText;h&&a.scrollWidth>a.offsetWidth;)h=h.substring(0,h.length-1),a[d]=h+b})}},alphabet:"abcdefghijklmnopqrstuvwxyz",markupSearchString:function(d,
b){if(d&&b&&(d=ws.string.escapeXml(d),b=ws.string.escapeXml(b),-1!=b.toLowerCase().indexOf(d.toLowerCase()))){for(var a=b,h=a.toLowerCase(),l=d.length,e=d.toLowerCase(),f=[],g=h.indexOf(e);-1!=g;)f.push(a.substr(0,g)),f.push("\x3cspan class\x3d'searchTerm'\x3e",a.substr(g,l),"\x3c/span\x3e"),a=a.substr(g+l),h=h.substr(g+l),g=h.indexOf(e);f.push(a);b=f.join("")}return b},validAddrRegEx:/^[\w.!#$%\u00e2\u20ac\u2122*+\/=?^_`{|}~\'-]+@[\w-]+(?:\.[\w-]{1,})+$/i,isValidEmail:function(d){return this.validAddrRegEx.test(d)},
initialCap:function(d){d&&0<d.length&&(d=d.charAt(0).toUpperCase()+d.substring(1));return d},getScreenNameForContact:function(d,b){var a=d.screenName||this.getScreenNameForAddress(d.email)||this.getScreenNameForAddress(d.email1)||this.getScreenNameForAddress(d.email2);b||(a=a||d.email||d.email1||d.email2);return a},getScreenNameForAddress:function(d){var b=this.parseEmailAddress(d);return!b||b.domain&&-1==f.indexOf(Config.KnownDomains,b.domain)?d:b.name},parseEmailAddress:function(d){if(null==d||
""==d)return null;var b=d,a="";d=d.match(/(.*)@(.*)/);null!=d&&3==d.length&&(b=d[1],a=d[2],null!=b&&(b=b.replace(/\/M/gi,""),b=b.replace(/\/A/gi,"")),null!=a&&(a=a.toLowerCase()));return{name:b,domain:a}},endsWith:function(d,b){return f.isIE||ws.browser.isIE11?-1!==d.indexOf(b,d.length-b.length):d.endsWith(b)},startsWith:function(d,b){return f.isIE||ws.browser.isIE11?d.substr(0,b.length)===b:d.startsWith(b)},quoteFixRegEx:/[\'\"]/g,quoteFix:function(d){return(d||"").replace(this.quoteFixRegEx,"")}})})},
"ws/widget/popup":function(){define("ws/widget/popup","dojo dijit dojo/window dojo/_base/lang dijit/BackgroundIframe dijit/_base/place ws/html".split(" "),function(f,k,d,b,a,h){b.setObject("ws.widget.popup",function(b){var e=null;if(f.isSafari&&b.around)for(var l=b.around;l.parentNode;)if(l=l.parentNode,f.hasClass(l,"dojoxGrid-scrollbox")){e=l;break}l=b.orient||{BL:"TL",TL:"BL"};e&&(l=b.orient||{BL:"TL"});var g=b.popup,n=l,k=b.manual,q=b.padding||[0,0],m=b.around,l=f.doc.createElement("div");l.id=
"wsPopup"+Math.round(1E4*Math.random());l.className="dijitPopup";l.style.zIndex=(b.preferZ?b.preferZ:ws.widget.popup.beginZIndex)+ws.widget.popup.stack.length;l.style.left="-999px";b.parent&&(l.dijitPopupParent=b.parent.id);f.body().appendChild(l);g.domNode.style.display="";l.appendChild(g.domNode);var w=new a(l),v=y=0,u=f._getMarginSize(l);isNaN(b.x)||isNaN(b.y)?(n=m?h.placeOnScreenAroundElement(l,m,n,null):h.placeOnScreen(l,b,"R"==n?["TR","BR","TL","BL"]:["TL","BL","TR","BR"]),v=n.x+q[0]*("L"==
n.corner.charAt(1)?1:-1),y=n.y+q[1]*("T"==n.corner.charAt(0)?1:-1),e&&(y=Math.max(0,y-e.scrollTop))):(v=b.x+q[0],y=b.y+q[1]);e=d.getBox();v+u.w>e.w&&(v=Math.max(0,e.w-u.w));y+u.h>e.h&&(y=Math.max(0,e.h-u.h));0>v&&(v=0);0>y&&(y=0);l.style.top=y+"px";l.style.left=v+"px";g.popupNode=l;e=f.connect(f.isIE||f.isWebKit?f.body():f.doc,"onkeypress",function(a){a.keyCode!=f.keys.ESCAPE||k||ws.WebSuite.isModalOpen||ws.widget.popup.close(g)});ws.widget.popup.stack.push({wrapper:l,iframe:w,widget:g,parent:b.parent,
handler:e,manual:b.manual});if(g.onOpen)g.onOpen()});f.mixin(ws.widget.popup,{beginZIndex:5E3,stack:[],isInputType:function(a){return a&&a.tagName&&(a=a.tagName.toLowerCase(),"input"==a||"textarea"==a)?!0:!1},isFocusInInputInDialog:function(a){if(a&&a.tagName&&this.isInputType(a))for(;a&&"body"!=a.tagName.toLowerCase();){if(f.hasClass(a,"dijitPopup"))return!0;a=a.parentNode}return!1},close:function(a){for(;f.some(this.stack,function(b){return b.widget==a});){if(f.isIE){var b=document.activeElement;
!b||!this.isFocusInInputInDialog(b)&&this.isInputType(b)||window.focus()}var b=this.stack.pop(),d=b.wrapper,g=b.iframe,h=b.widget;f.disconnect(b.handler);h.domNode.style.display="none";f.body().appendChild(h.domNode);g.destroy();f.destroy(d);if(h.onClose)h.onClose()}},setProp:function(a,b,d){for(var g=0;g<this.stack.length;g++)this.stack[g].widget==a&&(this.stack[g].widget[b]=d)},isPopupOpen:function(a){for(var b=0;b<this.stack.length;b++)if(this.stack[b].widget==a)return!0;return!1},onDocumentMouseDown:function(a){if(!this._ignoringClicks)for(var b=
this.stack.length-1;0<=b;b--)if(!(b+1>this.stack.length)){if(ws.html.overElement(this.stack[b].wrapper,a))break;this.stack[b]&&!this.stack[b].manual&&this.close(this.stack[b].widget)}},onDocumentKeyPress:function(a){this.stack[0]&&this.stack[0].widget.processKey&&this.stack[0].widget.processKey(a)},registerWin:function(a){if(a){var b=f.isIE?a.document.body:a.document;b&&(a.popupHandles&&this.unregisterWin(a),a.popupHandles=[f.connect(b,"onmousedown",this,"onDocumentMouseDown"),f.connect(b,"onkeypress",
this,"onDocumentKeyPress")]);this.windows.push(a)}},unregisterWin:function(a){if(a){if(a.popupHandles){for(var b=0;b<a.popupHandles.length;b++)if(a.popupHandles[b])try{f.disconnect(a.popupHandles[b])}catch(g){}a.popupHandles=null}for(var d=[],b=0;b<this.windows.length;b++)try{this.windows[b]!=a&&d.push(this.windows[b])}catch(g){}this.windows=d}},windows:[],ignoreClicks:function(a){this._ignoringClicks=a},isAnyPopupOpen:function(){return 0<this.stack.length},closeAllPopups:function(){for(var a=this.stack.length-
1;0<=a;a--)this.stack[a].manual||this.close(this.stack[a].widget)}});f.addOnLoad(f.hitch(ws.widget.popup,"registerWin",window))})},"ws/widget/WSToolbar":function(){define("ws/widget/WSToolbar","dojo/_base/declare dojo/text!ws/widget/WSToolbar.css dojo dijit dijit/_Widget dijit/_TemplatedMixin dijit/_Container ws/html".split(" "),function(f,k,d,b,a,h,l){return f([a,h,l],{templateString:'\x3cdiv class\x3d"wsToolbar"\x3e\t\x3cdiv class\x3d"containerNode" data-dojo-attach-point\x3d"containerNode" style\x3d"float: left;"\x3e\x3c/div\x3e\t\x3cdiv class\x3d"centerNode" data-dojo-attach-point\x3d"centerNode" style\x3d"float: left;"\x3e\x3c/div\x3e\t\x3cdiv class\x3d"rightNode" data-dojo-attach-point\x3d"rightNode" style\x3d"float: right;"\x3e\x3c/div\x3e\x3c/div\x3e',
css:{templateString:k},vizType:"",noLabels:"0",defaultWidth:-1,alwaysShowRightNode:!0,webKitLeftWidthMargin:0,minItemSize:10,wrapState:0,inlineToolBar:"",startup:function(a,b){this.vizType&&(d.addClass(this.domNode,"wsToolbar"+this.vizType),"Bare"==this.vizType&&(this.domNode.style.backgroundColor="transparent"));"1"==this.noLabels&&d.addClass(this.domNode,"NoLabels");"Controls"==this.vizType&&"true"!=this.inlineToolBar&&(ws.html.setFloat(this.rightNode,"none"),this.rightNode.style.position="absolute",
this.rightNode.style.right="0px",this.rightNode.style.top="0px");d.forEach(this.getChildren(),d.hitch(this,"_processChild"));d.isIE&&(setTimeout(d.hitch(this,"fixButtons"),10),this.connect(window,"onresize","fixButtons"));setTimeout(d.hitch(this,"layout"),0);this.subscribe("toolbarLayoutUpdate","layout")},addToolbarItem:function(a){this.addChild(a);this._processChild(a)},_processChild:function(a){var b="left";"right"==a.toolbarPosition&&(b="right");ws.html.setFloat(a.domNode,b);if(b="center"==a.toolbarPosition?
this.centerNode:"right"==a.toolbarPosition?this.rightNode:null)this.containerNode.removeChild(a.domNode),b.appendChild(a.domNode)},fixButtons:function(){null!=this.domNode&&(this.domNode.style.zoom="",this.domNode.style.zoom=1)},onResized:function(){this.skipLayout?this.skipLayout=!1:this.layout()},layout:function(){if(this.containerNode){this.containerNode.style.width="";this.centerNode.style.width="";this.rightNode.style.width="";var a=function(a,b,g,e){var h=0;d.forEach(a.childNodes,function(a){1==
a.nodeType&&(a=d._getMarginSize(a).w,a>g&&(h+=a+(d.isIE?e:e+1)),b&&b.push(h))});return h},b=a(this.containerNode,d.isIE?[]:null,this.minItemSize,"Controls"==this.vizType?0:5)+2;d.isWebKit&&(b+=this.webKitLeftWidthMargin);var g=a(this.rightNode,null,this.minItemSize,"Controls"==this.vizType?3:5),a=a(this.centerNode,null,this.minItemSize,5),h=this.getWidth();if(this.alwaysShowRightNode&&0<h){var l=d.isIE?20:0,q=d.hasClass(d.body(),"btnLabelsOn2")&&"0"===this.noLabels?50:40;h<b+l+a+g+(d.isIE?0:10)?("Controls"==
this.vizType&&(this.rightNode.style.top=q+2+"px",this.domNode.style.height=2*q+"px"),1!=this.wrapState&&(this.wrapState=1,this._wrap())):("Controls"==this.vizType&&(this.rightNode.style.top="0px",this.domNode.style.height=q+"px"),1==this.wrapState&&(this.wrapState=2,this._wrap()))}this.centerNode.style.marginLeft=Math.round((h-(b+g+a))/2)+"px";d.contentBox(this.containerNode,{w:Math.min(h,b)});d.contentBox(this.rightNode,{w:Math.min(h,g)});d.contentBox(this.centerNode,{w:Math.min(h,a)})}},_wrap:function(){setTimeout(d.hitch(this,
"wrap"),100)},wrap:function(){},getWidth:function(){var a=d.contentBox(this.domNode).w;0==a&&-1<this.defaultWidth&&(a=this.defaultWidth);return a}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(f,k,d,b){return k("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(a,b){var h=this.containerNode;if(0<b){for(h=h.firstChild;0<
b;)1==h.nodeType&&b--,h=h.nextSibling;h?b="before":(h=this.containerNode,b="last")}d.place(a.domNode,h,b);this._started&&!a._started&&a.startup()},removeChild:function(a){"number"==typeof a&&(a=this.getChildren()[a]);a&&(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(a,b){var d=this.getChildren(),e=f.indexOf(d,a);return d[e+b]},getIndexOfChild:function(a){return f.indexOf(this.getChildren(),a)}})})},"ws/widget/iframeModalPane":function(){define("ws/widget/iframeModalPane",
"dojo/_base/declare dojo dijit ws/widget/WSModalPane dijit/_TemplatedMixin ws/widget/popup".split(" "),function(f,k,d,b,a,h){return f([b,a],{destroyOnClose:!0,templateString:'\x3cdiv class\x3d"WSModalPane"\x3e\x3cdiv class\x3d"WSModalPaneInner"\x3e\t\x3cdiv data-dojo-attach-point\x3d"closeX" class\x3d"wsCloseBtn" data-dojo-attach-event\x3d"onclick: onCancel"\x3e\x3csvg class\x3d"svgIcon"\x3e\x3cuse xlink:href\x3d"#iconClose"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\t\t\x3cdiv class\x3d"modalContainer"\x3e\t\t\t\x3ciframe frameborder\x3d"0" scrolling\x3d"${scrolling}" data-dojo-attach-point\x3d"iframeNode" style\x3d"clear:both;display:block"\x3e\x3c/iframe\x3e\t\t\x3c/div\x3e\t\x3c/div\x3e\x3c/div\x3e',
pluginId:null,scrolling:"yes",show:function(a,b,d,g){this.cancelCB=g;d||(d={w:64,h:76});ws.widget.popup.closeAllPopups();this.iframeNode.src=a;k.marginBox(this.domNode,{w:b.w+d.w,h:b.h+d.h});k.marginBox(this.iframeNode,{w:b.w,h:b.h});this.inherited(arguments)},onCancel:function(){this.hide();this.cancelCB&&this.cancelCB()},hide:function(){ws.widget.popup.close(this);this.inherited(arguments);ws.widget.Dialogs.iframePane=null}})})},"ws/widget/iframePane":function(){define("ws/widget/iframePane",["dojo/_base/declare",
"dojo","dijit","dijit/_Widget","dijit/_TemplatedMixin"],function(f,k,d,b,a){return f([b,a],{templateString:'\x3ciframe frameborder\x3d"0" scrolling\x3d"no" data-dojo-attach-point\x3d"iframeNode" style\x3d"clear:both;display:block"\x3e\x3c/iframe\x3e',onClose:function(){this.hide()},show:function(a,b,e){ws.widget.popup.closeAllPopups();this.iframeNode.src=a;k.marginBox(this.domNode,b);k.marginBox(this.iframeNode,{w:b.w-18,h:b.h-30});a={popup:this};if(e){b=d.byId("PanelWidget");var h=k.marginBox(b.domNode);
a.x=h.l+e.l;a.y=h.t+e.t+b.pluginHeaderHeight}else b.l&&(a.x=b.l),b.t&&(a.y=b.t);ws.widget.popup(a)},hide:function(){ws.widget.popup.close(this);this.inherited(arguments);this.destroyRecursive();ws.widget.Dialogs.iframePane=null}})})},"ws/mail/folder":function(){define("ws/mail/folder",["dojo/_base/declare"],function(f){return f(null,{constructor:function(f){this.name=f[0];this.displayName=f[1];this.parentName=f[2];this.depth=f[3];this.permanent=f[4];this.unseenCount=f[6];this.count=f[7];this.type=
f[8];this.canMoveTo=f[9];this.account=f[11];this.status=f[12];this.name==Config.IMFolderName?(this.displayName=Config.Strings.Folder_SavedIMs,this.isIMFolder=!0):this.isIMFolder=!1}})})},"ws/CachedList":function(){define("ws/CachedList","dojo/_base/declare dojo dojo/_base/lang dojo/_base/array ws/cache ws/io ws/lang".split(" "),function(f,k,d,b,a,h){return f("ws.CachedList",null,{constructor:function(b,d,h,g){this.screenNames="";this.CacheSize=b?b:Config.ClientSideMaxCache;this.FetchSize=d?d:Config.ClientSideMaxMessageFetch;
this.Cache=new a(this.CacheSize,Config.ClientSideCacheDiscard);this.isInbox=h;this.mailModel=g;this.Clear()},deferredIndexUpdate:!1,pendingRowUpdates:[],knownCIDs:{0:[]},inProgress:!1,CurrentIndex:"received",SortDirection:"descending",Clear:function(a){a=a||{};a.keepCache||this.Cache.clear();a.keepSort||(this.CurrentIndex="received",this.SortDirection="descending");this.IndexDirection=this.SortDirection;a.keepSearch||(this.searchArgs=null);this.data=null;this.requestsInProgress=[];this.indexRequestsInProgress=
[];this.rowCount=0;this.indexLoaded=!1;this.errorState=a.errorState||!1;this.netErrorState=a.netErrorState||!1;this.errCode=a.errCode||null;this.errorObj=a.errorObj||null;this.deferredIndexUpdate=!1;this.pendingRowUpdates=[];this.knownCIDs["0"]=[];this.rows=[];a.keepFilter||(this.filters=null);this.Cleared()},Cleared:function(){},FoldersChanged:function(){},IndexUpdated:function(a){},RowsUpdated:function(){},LinkedScreenNameDataUpdated:function(){},IsLoading:function(){return!this.indexLoaded},SetFolder:function(a,
b,d,g,h,f){this.folder!=a||!this.indexLoaded||this.searchArgs||b?(this.Clear({keepSort:!0}),this.folder=a,this.screenName=d?d:ws.UserContext.ActiveScreenName,this.searchArgs=b,this.GetData({row:0,count:this.FetchSize,doImport:f})):this.RefetchIndex({doImport:f})},SetSort:function(a,b,d){this.CurrentIndex!=a||this.IndexDirection!=b||d?(this.Clear({keepSearch:!0,keepFilter:!0}),this.SortDirection=b,this.CurrentIndex=a,this.IndexDirection=b,this.GetData({row:0,count:this.FetchSize})):this.IndexUpdated()},
SetSearch:function(a,b){if(a!=this.SearchString||b!=this.SearchIn){this.Clear({keepSort:!0});this.SearchString=a;this.SearchIn=b;var d=!1;Config.UseOMS&&Config.CrossFolderSearch&&(d=!0);this.GetData({returnfoldername:d,row:0,count:this.FetchSize})}},SetFilter:function(a){this.Clear();a&&(this.filters=a);this.GetData({row:0,count:this.FetchSize})},RefetchIndex:function(a){this.GetData({row:0,count:this.FetchSize,reqIndex:!0,automatic:a&&a.automatic,doImport:a&&a.doImport})},RefetchInfo:function(){this.GetData({automatic:!0})},
GetUID:function(a){var b=null;if(a=this.GetRow(a))b=a.id;return b},GetAvailableRowsForUIDs:function(a){if(!a||!this.rows)return[];var b=[];k.isArray(a)||(a=[a]);for(var d=0;d<a.length;d++)if(-1!=a[d]){var g=ws.lang.findByProp(this.rows,"id",a[d]);-1!=g&&b.push(g)}return b},GetAllUIDs:function(){return this.Cache?this.Cache.data.keys():[]},GetRow:function(a){if(null==this.Cache||0>a||a>=this.rowCount)return null;var b=this.rows[a];if(null!=b)return b;b=a-Config.ClientSideBackFetch;b=0>b?0:b;if(-1!=
this.IsRequestInProgress(a,!0))return null;this.GetData({row:b});return null},UpdateCache:function(a,d,h,g){this.Cache.update(a,d,h,g);if(a&&0<a.length)for(var e=0;e<a.length;e++){var l=ws.lang.findByProp(this.rows,"id",a[e]);-1!=l&&(this.rows[l].flags[d]=h)}else ws.lang.undefinedOrNull(g)&&(g={}),b.forEach(this.rows,function(a){a&&!g[a.id]&&(a.flags[d]=h)})},DeleteFromIndex:function(a){k.isArray(a)||(a=[a]);for(var b=0;b<a.length;b++){var d=ws.lang.findByProp(this.rows,"id",a[b]);-1!=d&&this.rows.splice(d,
1)}this.rowCount-=a.length},DeleteAllFromIndex:function(){this.rows=[];this.rowCount=0},GetRowCount:function(){return null==this.rowCount||0>this.rowCount?0:this.rowCount},IsUidExist:function(a){return this.Cache&&a&&null!=this.Cache.get(a)},GetData:function(a){if(ws.lang.undefinedOrNull(this.folder))ws_ErrLgr&&ws_ErrLgr.logJwsError("CachedList::GetData - bad folder argument.",{});else if(!this.inProgress){this.inProgress=!0;var b=this.CurrentIndex,d="row"in a?a.row:0,g="count"in a?a.count:this.FetchSize;
this.searchArgs&&d>this.startRow&&(d=this.startRow+this.FetchSize);this.startRow=d;var h=ws.Jws.mapFolderName(this.folder),l=k.hitch(this,function(a){ws_ErrLgr&&ws_ErrLgr.logJwsError("GetMessageList error.",a);this.Clear({keepSearch:!!this.searchArgs,errorState:!0,errorObj:a});this.inProgress=!1});ws.Jws.listMessagesFolders(h,d,g,b,this.IndexDirection,this.searchArgs,this.filters).then(k.hitch(this,function(b){this.handleResponse(b,d,g,l,1==a.automatic)}),l)}},handleResponse:function(a,b,h,g,n){this.Cache.size>
this.Cache.maxSize&&this.Cache.clear();var e=null;a.result.responses.forEach(d.hitch(this,function(a){if("ListFolders"==a.id)a.response.error?g&&g(a):this.FoldersChanged(a.response.result.folders);else if(-1!=a.id.indexOf("ListMessages"))if(a.response.error)g&&g(a);else{e=a.response.result.messages;var d=a.response.result.query.options.match(/offset:(\d+)/);2==d.length&&(b=+d[1]);a.response.result.hasOwnProperty("totalMatches")?this.rowCount=a.response.result.totalMatches:this.rowCount="NewMail"==
this.folder?0<e.length?e[0].folder.unread:0:"OldMail"==this.folder?0<e.length?e[0].folder.total-e[0].folder.unread:0:0<e.length?e[0].folder.total:0;a=b;for(d=0;d<e.length;a++,d++)this.rows[a]=e[d],this.Cache.add(e[d].id,e[d]);this.searchArgs?this.rowCount=0==e.length?this.rows.length:this.rows.length+1:e.length<h&&this.rows.length<this.rowCount&&(this.rowCount=this.rows.length,ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"Forced to hack rowCount due to inconsistent server data",null,"CachedList.js"))}}));
this.data=a;this.indexLoaded=!0;this.inProgress=!1;this.IndexUpdated(n)},IsRequestInProgress:function(a,b){for(var d=b?this.indexRequestsInProgress:this.requestsInProgress,g=0;g<d.length;g++){var e=d[g];if(e.start<=a&&e.end>=a)return g}return-1},AddRequestInProgress:function(a,b,d,g){(g?this.indexRequestsInProgress:this.requestsInProgress).push({start:a,end:a+b-1,tag:d})},EndRequestInProgress:function(a,b){for(var d=b?this.indexRequestsInProgress:this.requestsInProgress,g=0;g<d.length;g++)d[g].tag==
a&&d.splice(g,1)}})})},"ws/cache":function(){define("ws/cache",["dojo/_base/declare"],function(f){return f(null,{constructor:function(f,d){this.maxSize=f;this.discardSize=d;this.clear()},clear:function(){this.size=0;this.data={}},replace:function(f,d){this.data[f]=d},add:function(f,d){this.data[f]=d;this.size++},get:function(f){return this.data[f]||null},remove:function(f){for(var d=0;d<f.length;d++)delete this.data[f[d]],0<this.size&&this.size--},update:function(f,d,b,a,h){if(h)for(var l in this.data){if(!h[l]){var e=
this.data[l][d];e&&(e[b]=a)}}else for(h=0;h<f.length;h++)(e=this.data[f[h]])&&(e=e[d])&&(e[b]=a)}})})},"ws/io":function(){define("ws/io","dojo dojo/_base/lang dojo/_base/array dojo/cookie dojo/request/registry dojo/request/iframe dojo/window dojo/string dojox/encoding/digests/MD5".split(" "),function(f,k,d,b,a,h,l,e,p){k.setObject("ws.io",{getObjectCookie:function(a){return this._getObjectCookie(a,":")},_getObjectCookie:function(a,d){var g=null,e=b(a);if(e)for(var g={},e=e.split("\x26"),h=0;h<e.length;h++){var n=
e[h].split(d);if(1<n.length){var f=n[1];isNaN(f)&&(f=unescape(n[1]));g[unescape(n[0])]=f}}return g},_setObjectCookie:function(a,d,e,h,m){var g="",q;for(q in a)g+=(0<g.length?"\x26":"")+q+"\x3d"+a[q];a={};e&&(a.domain=e);h&&(a.path=h);m&&(a.expires=m);b(d,"",a);b(d,g,a)},openWindow:function(a,b,e,h,m,l){"undefined"==typeof e&&(e="status\x3dyes,resizable\x3dyes,menubar\x3dyes,scrollbars\x3dyes,location\x3dyes,toolbar\x3dyes");m=a.indexOf("?");m=-1===(-1===m?a:a.slice(0,m)).indexOf(document.domain);
var g=!m||l;!g&&d.some(Config.TrustedBaseUrls,function(b){if(ws.string.startsWith(a,b))return g=!0});var q=g||f.isIE?window.open(a,b,e):this.iframeOpen(a,b,e);b=!1;if(m)null!=q&&(b=!0,q.opener=null);else try{q.name,b=!0}catch(z){}if(!b)return ws.lang.ensureLayersLoaded(function(){ws.widget.Dialogs.ok(Config.Strings.PopupBlocked)}),null;h||(ws.io._childWindows.push(q),f.addOnWindowUnload(function(){try{q.onMainWindowClosed()}catch(z){}}));ws.io.openingWindow=!0;setTimeout(function(){ws.io.openingWindow=
!1},1E3);return q},iframeOpen:function(a,b,d){var g,e;g=document.createElement("iframe");g.style.display="none";document.body.appendChild(g);e=g.contentDocument||g.contentWindow.document;a&&(a=a.replace(/"/g,"%22"));a='"'+a+'"';b&&(a+=', "'+b+'"');d&&(a+=', "'+d+'"');b=e.createElement("script");b.type="text/javascript";b.text="window.parent \x3d null; window.top \x3d null;window.frameElement \x3d null; var child \x3d window.open("+a+");child \x26\x26 (child.opener \x3d null)";e.body.appendChild(b);
e=g.contentWindow.child;document.body.removeChild(g);return e},closeWindow:function(){if(_ws_isOpenerWS()&&opener.ws&&opener.ws.io&&opener.ws.io._childWindows&&opener.ws.io._childWindows.length)for(var a=opener.ws.io._childWindows,b=0;b<a.length;b++)if(a[b]==window){a.splice(b,1);break}ws.io.closeWindowInProgress=!0;window.close()},_childWindows:[],_notifyChildWindowsOfClose:function(){f.forEach(ws.io._childWindows,function(a){try{a.onMainWindowClosed()}catch(n){}})},getQueryParameter:function(a,
b,d){b=b||null;d=d||document.location.search;a=d.match(new RegExp(a+"\x3d([^\x26]*)"));null!=a&&(b=a[1])&&(b=decodeURIComponent(b.replace(/\+/g," ")));return b},decodeURIComponentAndEscapeDQuote:function(a){a=decodeURIComponent(a.replace(/\+/g," "));-1!=a.indexOf('"')&&(a=a.replace(/\"/g,'\\"'),a=a.replace(/\\\\\"/g,'\\"'));return a},getJsonFromQueryParams:function(a,b){var g=null;a=a||document.location.search;if(!a)return null;for(var e=a.replace(/^\?/,"").split("\x26"),h=0;h<e.length;h++){var f=
e[h].split("\x3d");if(2==f.length){var l=this.decodeURIComponentAndEscapeDQuote(f[0]).toLowerCase(),f=b&&b==l?ws.string.escapeXml(this.decodeURIComponentAndEscapeDQuote(f[1])):this.decodeURIComponentAndEscapeDQuote(f[1]);null==g&&(g={});-1!==d.indexOf(["to","cc","bcc","subject","body"],l)&&(g[l]=f)}}return g},createYmreqid:function(){var a="";if(Config.EnableYmreqid){if(!this.ymSeqNo||65533<this.ymSeqNo)this.ymSeqNo=2;var b=Settings?Settings.ymreqid:window._ymreqid;b&&35<b.length&&(a="ymreqid\x3d"+
b.substr(0,26)+e.pad((++this.ymSeqNo).toString(16),4,"0")+b.substr(30))}return a}})})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(f,k){f.cookie=function(d,b,a){var h=document.cookie,f;if(1==arguments.length)f=(f=h.match(new RegExp("(?:^|; )"+k.escapeString(d)+"\x3d([^;]*)")))?decodeURIComponent(f[1]):void 0;else{a=a||{};h=a.expires;if("number"==typeof h){var e=new Date;e.setTime(e.getTime()+864E5*h);h=a.expires=e}h&&h.toUTCString&&(a.expires=h.toUTCString());b=encodeURIComponent(b);
var h=d+"\x3d"+b,p;for(p in a)h+="; "+p,e=a[p],!0!==e&&(h+="\x3d"+e);document.cookie=h}return f};f.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return f.cookie})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(f,k){var d={};k.setObject("dojo.regexp",
d);d.escapeString=function(b,a){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(b){return a&&-1!=a.indexOf(b)?b:"\\"+b})};d.buildGroupRE=function(b,a,h){if(!(b instanceof Array))return a(b);for(var f=[],e=0;e<b.length;e++)f.push(a(b[e]));return d.group(f.join("|"),h)};d.group=function(b,a){return"("+(a?"?:":"")+b+")"};return d})},"dojo/request/registry":function(){define(["require","../_base/array","./default!platform","./util"],function(f,k,d,b){function a(a,b){for(var g=l.slice(0),e=
0,h;h=g[e++];)if(h(a,b))return h.request.apply(null,arguments);return d.apply(null,arguments)}function h(a,b){var d;b?(d=a.test?function(b){return a.test(b)}:a.apply&&a.call?function(){return a.apply(null,arguments)}:function(b){return b===a},d.request=b):(d=function(){return!0},d.request=a);return d}var l=[];a.register=function(a,b,d){var g=h(a,b);l[d?"unshift":"push"](g);return{remove:function(){var a;~(a=k.indexOf(l,g))&&l.splice(a,1)}}};a.load=function(b,h,g,l){b?f([b],function(b){d=b;g(a)}):
g(a)};b.addCommonMethods(a);return a})},"dojox/encoding/digests/MD5":function(){define(["./_base"],function(f){function k(a,b){return a<<b|a>>>32-b}function d(a,b,d,h,l,q){return f.addWords(k(f.addWords(f.addWords(b,a),f.addWords(h,q)),l),d)}function b(a,b,g,h,f,q,m){return d(b&g|~b&h,a,b,f,q,m)}function a(a,b,g,h,f,q,m){return d(b&h|g&~h,a,b,f,q,m)}function h(a,b,g,h,f,q,m){return d(g^(b|~h),a,b,f,q,m)}function l(e,l){e[l>>5]|=128<<l%32;e[(l+64>>>9<<4)+14]=l;for(var g=1732584193,n=-271733879,k=-1732584194,
q=271733878,m=0;m<e.length;m+=16)var p=g,v=n,u=k,z=q,g=b(g,n,k,q,e[m+0],7,-680876936),q=b(q,g,n,k,e[m+1],12,-389564586),k=b(k,q,g,n,e[m+2],17,606105819),n=b(n,k,q,g,e[m+3],22,-1044525330),g=b(g,n,k,q,e[m+4],7,-176418897),q=b(q,g,n,k,e[m+5],12,1200080426),k=b(k,q,g,n,e[m+6],17,-1473231341),n=b(n,k,q,g,e[m+7],22,-45705983),g=b(g,n,k,q,e[m+8],7,1770035416),q=b(q,g,n,k,e[m+9],12,-1958414417),k=b(k,q,g,n,e[m+10],17,-42063),n=b(n,k,q,g,e[m+11],22,-1990404162),g=b(g,n,k,q,e[m+12],7,1804603682),q=b(q,g,n,
k,e[m+13],12,-40341101),k=b(k,q,g,n,e[m+14],17,-1502002290),n=b(n,k,q,g,e[m+15],22,1236535329),g=a(g,n,k,q,e[m+1],5,-165796510),q=a(q,g,n,k,e[m+6],9,-1069501632),k=a(k,q,g,n,e[m+11],14,643717713),n=a(n,k,q,g,e[m+0],20,-373897302),g=a(g,n,k,q,e[m+5],5,-701558691),q=a(q,g,n,k,e[m+10],9,38016083),k=a(k,q,g,n,e[m+15],14,-660478335),n=a(n,k,q,g,e[m+4],20,-405537848),g=a(g,n,k,q,e[m+9],5,568446438),q=a(q,g,n,k,e[m+14],9,-1019803690),k=a(k,q,g,n,e[m+3],14,-187363961),n=a(n,k,q,g,e[m+8],20,1163531501),g=
a(g,n,k,q,e[m+13],5,-1444681467),q=a(q,g,n,k,e[m+2],9,-51403784),k=a(k,q,g,n,e[m+7],14,1735328473),n=a(n,k,q,g,e[m+12],20,-1926607734),g=d(n^k^q,g,n,e[m+5],4,-378558),q=d(g^n^k,q,g,e[m+8],11,-2022574463),k=d(q^g^n,k,q,e[m+11],16,1839030562),n=d(k^q^g,n,k,e[m+14],23,-35309556),g=d(n^k^q,g,n,e[m+1],4,-1530992060),q=d(g^n^k,q,g,e[m+4],11,1272893353),k=d(q^g^n,k,q,e[m+7],16,-155497632),n=d(k^q^g,n,k,e[m+10],23,-1094730640),g=d(n^k^q,g,n,e[m+13],4,681279174),q=d(g^n^k,q,g,e[m+0],11,-358537222),k=d(q^g^
n,k,q,e[m+3],16,-722521979),n=d(k^q^g,n,k,e[m+6],23,76029189),g=d(n^k^q,g,n,e[m+9],4,-640364487),q=d(g^n^k,q,g,e[m+12],11,-421815835),k=d(q^g^n,k,q,e[m+15],16,530742520),n=d(k^q^g,n,k,e[m+2],23,-995338651),g=h(g,n,k,q,e[m+0],6,-198630844),q=h(q,g,n,k,e[m+7],10,1126891415),k=h(k,q,g,n,e[m+14],15,-1416354905),n=h(n,k,q,g,e[m+5],21,-57434055),g=h(g,n,k,q,e[m+12],6,1700485571),q=h(q,g,n,k,e[m+3],10,-1894986606),k=h(k,q,g,n,e[m+10],15,-1051523),n=h(n,k,q,g,e[m+1],21,-2054922799),g=h(g,n,k,q,e[m+8],6,1873313359),
q=h(q,g,n,k,e[m+15],10,-30611744),k=h(k,q,g,n,e[m+6],15,-1560198380),n=h(n,k,q,g,e[m+13],21,1309151649),g=h(g,n,k,q,e[m+4],6,-145523070),q=h(q,g,n,k,e[m+11],10,-1120210379),k=h(k,q,g,n,e[m+2],15,718787259),n=h(n,k,q,g,e[m+9],21,-343485551),g=f.addWords(g,p),n=f.addWords(n,v),k=f.addWords(k,u),q=f.addWords(q,z);return[g,n,k,q]}f.MD5=function(a,b){var d=b||f.outputTypes.Base64,e=l(f.stringToWord(a),8*a.length);switch(d){case f.outputTypes.Raw:return e;case f.outputTypes.Hex:return f.wordToHex(e);case f.outputTypes.String:return f.wordToString(e);
default:return f.wordToBase64(e)}};f.MD5._hmac=function(a,b,d){d=d||f.outputTypes.Base64;var g=f.stringToWord(b);16<g.length&&(g=l(g,8*b.length));var e=[];b=[];for(var h=0;16>h;h++)e[h]=g[h]^909522486,b[h]=g[h]^1549556828;a=l(e.concat(f.stringToWord(a)),512+8*a.length);a=l(b.concat(a),640);switch(d){case f.outputTypes.Raw:return a;case f.outputTypes.Hex:return f.wordToHex(a);case f.outputTypes.String:return f.wordToString(a);default:return f.wordToBase64(a)}};return f.MD5})},"dojox/encoding/digests/_base":function(){define(["dojo/_base/lang"],
function(f){f=f.getObject("dojox.encoding.digests",!0);f.outputTypes={Base64:0,Hex:1,String:2,Raw:3};f.addWords=function(f,d){var b=(f&65535)+(d&65535);return(f>>16)+(d>>16)+(b>>16)<<16|b&65535};f.stringToWord=function(f){for(var d=[],b=0,a=8*f.length;b<a;b+=8)d[b>>5]|=(f.charCodeAt(b/8)&255)<<b%32;return d};f.wordToString=function(f){for(var d=[],b=0,a=32*f.length;b<a;b+=8)d.push(String.fromCharCode(f[b>>5]>>>b%32&255));return d.join("")};f.wordToHex=function(f){for(var d=[],b=0,a=4*f.length;b<a;b++)d.push("0123456789abcdef".charAt(f[b>>
2]>>b%4*8+4&15)+"0123456789abcdef".charAt(f[b>>2]>>b%4*8&15));return d.join("")};f.wordToBase64=function(f){for(var d=[],b=0,a=4*f.length;b<a;b+=3)for(var h=(f[b>>2]>>b%4*8&255)<<16|(f[b+1>>2]>>(b+1)%4*8&255)<<8|f[b+2>>2]>>(b+2)%4*8&255,l=0;4>l;l++)8*b+6*l>32*f.length?d.push("\x3d"):d.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>6*(3-l)&63));return d.join("")};f.stringToUtf8=function(f){for(var d="",b=-1,a,h;++b<f.length;)a=f.charCodeAt(b),h=b+1<f.length?f.charCodeAt(b+
1):0,55296<=a&&56319>=a&&56320<=h&&57343>=h&&(a=65536+((a&1023)<<10)+(h&1023),b++),127>=a?d+=String.fromCharCode(a):2047>=a?d+=String.fromCharCode(192|a>>>6&31,128|a&63):65535>=a?d+=String.fromCharCode(224|a>>>12&15,128|a>>>6&63,128|a&63):2097151>=a&&(d+=String.fromCharCode(240|a>>>18&7,128|a>>>12&63,128|a>>>6&63,128|a&63));return d};return f})},"ws/lang":function(){define("ws/lang",["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","ws/reporting","dojo/NodeList-manipulate"],function(f,k,d){f.setObject("ws.lang",
{undefinedOrNull:function(b){return"undefined"==typeof b||null==b?!0:!1},shallowCopy:function(b,a){var d,l;if(null===b)return null;if(ws.lang.isArray(b))for(l=[],d=0;d<b.length;d++){var e=b[d];"undefined"==typeof e&&(e=null);l[d]=a?ws.lang.shallowCopy(e,a):e}else if(f.isObject(b))for(d in l={},b)"undefined"==typeof l[d]&&(e=b[d],"undefined"==typeof e&&(e=null),l[d]=a?ws.lang.shallowCopy(e,a):e);else l=b;return l},setTimeout:function(b,a){var d=window,l=2;f.isFunction(b)||(d=b,b=a,a=arguments[2],l++);
f.isString(b)&&(b=d[b]);for(var e=[];l<arguments.length;l++)e.push(arguments[l]);return window.setTimeout(function(){b.apply(d,e)},a)},isArray:function(b){return b.push&&b.splice&&b.join},isEmptyObject:function(b){for(var a in b)return!1;return!0},getPropCount:function(b){var a=0,d;for(d in b)b.hasOwnProperty(d)&&a++;return a},difference:function(b,a){for(var d=[],f=0;f<b.length;f++)-1==k.indexOf(a,b[f])&&d.push(b[f]);return d},intersection:function(b,a){return k.filter(b,function(b){return-1!=k.indexOf(a,
b)})},findByProp:function(b,a,d){for(var h=0;h<b.length;h++)if(b[h]&&b[h][a]==d)return h;return-1},defer:function(b,a,d,l){this._deferTimeouts[l]&&clearTimeout(this._deferTimeouts[l]);this._deferTimeouts[l]=setTimeout(f.hitch(b,a),d)},_deferTimeouts:{},ensureLayersLoadedExtra:function(b,a){window.layersToLoad||(window.layersToLoad=["dojo2","MessageList"]);a&&a.layers&&(window.layersToLoad=window.layersToLoad.concat(a.layers));this.ensureLayersLoaded(b)},ensureLayersLoaded:function(b){b&&this.layersLoadedCallbacks.push(b);
if(!this.loadingLayers)if(this.loadingLayers=!0,window.layersToLoad||(window.layersToLoad=["dojo2","MessageList"]),(b=window.layersToLoad.shift())&&dojoConfig.isCustom)require(["release/"+b],f.hitch(this,function(){this.loadingLayers=!1;this.ensureLayersLoaded()}));else{this.loadingLayers=!1;b=this.layersLoadedCallbacks;this.layersLoadedCallbacks=[];for(var a=0;a<b.length;a++)d.addOnLoad(b[a])}},ensureLayersLoadedSoon:function(b){setTimeout(f.hitch(this,function(){setTimeout(f.hitch(this,"ensureLayersLoaded",
b),1E3)}),0)},layersLoadedCallbacks:[],isEmptyArray:function(b){return b&&0<b.length?!1:!0},inArray:function(b,a){return-1!==k.indexOf(a,b)},randomArray:function(b){return b.sort(function(){return Math.round(Math.random())-.5})},stringifyToJSON:function(b,a,d){function h(a){return('"'+a.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}function e(b,l,k){a&&(b=a(k,b));var g;g=typeof b;if("number"==g)return isFinite(b)?
b+"":"null";if("boolean"==g)return b+"";if(null===b)return"null";if("string"==typeof b)return h(b);if("function"==g||"undefined"==g)return f;if(b instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,d,g){a=b["getUTC"+d]()+(g?1:0);return 10>a?"0"+a:a});if(b.valueOf()!==b)return e(b.valueOf(),l,k);var m=d?l+d:"",n=d?" ":"",p=d?"\n":"";if(b&&b.push&&b.splice&&b.join){var n=b.length,u=[];for(k=0;k<n;k++)g=e(b[k],m,k),"string"!=typeof g&&
(g="null"),u.push(p+m+g);return"["+u.join(",")+p+l+"]"}u=[];for(k in b){var t;if(b.hasOwnProperty(k)){if("number"==typeof k)t='"'+k+'"';else if("string"==typeof k)t=h(k);else continue;g=e(b[k],m,k);"string"==typeof g&&u.push(p+m+t+":"+n+g)}}return"{"+u.join(",")+p+l+"}"}var f;"string"==typeof a&&(d=a,a=null);return e(b,"","")}})})},"ws/reporting":function(){define("ws/reporting","dojo dojo/window dojo/_base/lang dojo/request/iframe ws/string ws/UserContext ws/io".split(" "),function(f,k,d,b){d.setObject("ws.reporting",
{skipBeaconReporting:!1,opinionFeedbackUrl:null,report:function(a,b,d,e){if(!Config.DisableAllReporting)if(this.skipBeaconReporting)this.skipBeaconReporting=!1;else{var h=!1;try{_ws_isOpenerWS()&&opener.ws&&opener.ws.reporting?opener.ws.reporting.report(a,b,d,e):h=!0}catch(g){h=!0}h&&(ws.reporting._rapid.report(a,b,d),0!==a.indexOf("~rapid~")&&Config.EnableComscoreReporting&&(ws.reporting._comscore.report(a,b),ws.reporting._comscoreFull.report(a)))}},reportDLAction:function(a,b){if(!Config.DisableAllReporting){var d=
!1;try{_ws_isOpenerWS()&&opener.ws&&opener.ws.reporting?opener.ws.reporting.reportDLAction(a,b):d=!0}catch(e){d=!0}d&&ws.reporting._rapid.reportAction(a,b)}},makeFeedbackUrl:function(a){var b=a;0<a.indexOf("{0}")?b=ws.string.substituteParams(a,Config.FeedbackProdctSid):(b=0<b.indexOf("?")?b+"\x26":b+"?",b+="sid\x3d"+Config.FeedbackProdctSid);a="";var d=window.location.href,d=0>d.indexOf("?")?d+("?g\x3d"+Settings.UserName):d+("\x26g\x3d"+Settings.UserName);a+="\x26referer\x3d"+encodeURIComponent(d);
this.opinionFeedbackUrl=b+a},getFeedbackUrl:function(){return this.opinionFeedbackUrl},openOnlineOpinion:function(){var a=(screen.height-485)/2-100,b=(screen.width-740)/2;window.open(this.opinionFeedbackUrl,"feedback","width\x3d740,height\x3d485,screenX\x3d"+b+",screenY\x3d"+a+",top\x3d"+a+",left\x3d"+b+",resizable\x3dyes,copyhistory\x3dyes,scrollbars\x3dno");return!1}});ws.reporting._rapid={scriptLoaded:-1,pendingReports:[],rapidInstance:null,loadedScript:function(){if(1===this.scriptLoaded)return!0;
-1===this.scriptLoaded&&(this.scriptLoaded=0,_ws.loadScript({src:Config.RapidReportingScriptURL,load:f.hitch(this,function(){this.scriptLoaded=1;this.createRapid();this.reportPending()})}));return!1},createRapid:function(){if(Config.RapidReportingSpaceID&&YAHOO&&YAHOO.i13n&&YAHOO.i13n.Rapid){var a=896===Settings.Brandi?"VZN":Config.UIVariant,b="",d="false";if(Settings&&Settings.ActiveUserEmailAddress){var e=Settings.ActiveUserEmailAddress.indexOf("@");-1!=e&&(b=Settings.ActiveUserEmailAddress.substr(e+
1))}Settings&&"undefined"!=typeof Settings.CMIPref_noAds&&(d=Settings.CMIPref_noAds.toString());a={spaceid:Config.RapidReportingSpaceID,apv:!1,dwell_on:Config.RapidReportingDwellStd,pageview_on_init:!1,keys:{st_sec:Config.ReportingChannel||"",prdct:Config.RapidReportingProduct,navtype:"client",ver:"standard",env:Config.Env,acctDomain:b,adFree:d,partnr:a}};Settings.GUID&&(a.accountGUID=Settings.GUID);this.rapidInstance=new YAHOO.i13n.Rapid(a)}},reportPending:function(){for(var a=this.pendingReports.shift();a;)"undefined"!==
typeof a.pageName?this.doReport(a.pageName,a.tabName):"undefined"!==typeof a.actionName&&this.doReportAction(a.actionName,a.extraProps),a=this.pendingReports.shift()},report:function(a,b,d){Settings.UserHash<Config.RapidReportingThresholdStd||(this.loadedScript()?setTimeout(f.hitch(this,"doReport",a,b,d),100):this.pendingReports.push({pageName:a,tabName:b,extraProps:d}))},reportAction:function(a,b){Settings.UserHash<Config.RapidReportingThresholdStd||!Config.EnableCustomLinkTracking||!Config.RapidReportingEvents||
(this.loadedScript()?setTimeout(f.hitch(this,"doReportAction",a,b),100):this.pendingReports.push({actionName:a,extraProps:b}))},rapidMap:{"~rapid~MessageListSort":"msgList_sort","Message List":"msgLst","Switch Folder":"msgLst","Read Message - Preview Pane":"msgRd","Read Message - Inline":"msgRd","Read Message - Popup":"msgRd","Compose Message - Inline":"cmps","Compose Message - Inline Response":"cmpsThrd","Compose Message - Popup":"cmps","Compose Message - Popup Response":"cmpsThrd","Today Page":"todayLst",
"Search Mail":"msgList_srp","Message Source":"msgRd_source","Filter Messages - all":"msgLst_fltr","Filter Messages - unread":"msgLst_fltr","Filter Messages - read":"msgLst_fltr","Filter Messages - flagged":"msgLst_fltr","Filter Messages - unflagged":"msgLst_fltr",Send_Confirmation:"cmps_cnfrm","Contact List":"contact_list","Contact Search":"contact_srp","Print Contacts":"contact_print","Sort Contacts":"contact_sort","Filter Contacts":"contact_fltr","View Contact":"contact_view","New Contact":"contact_addCntct",
"Edit Contact":"contact_edit","View DistList":"contact_viewDist","New DistList":"contact_addDist","Edit DistList":"contact_editDist","Export Contacts":"contact_exp","Add Calendar":"cal_add","Month View":"cal_MonthView","Week View":"cal_WeekView","Day View":"cal_DayView","Search Calendar":"cal_srp","Import Calendar":"cal_imp","Export Calendar":"cal_exp","Sort Events":"event_sort","Edit Calendar":"cal_edit","Subscribe Calendar":"cal_sub",GeneralSettings:"sttgs_general",ComposeSettings:"sttgs_cmps",
SpamSettings:"sttgs_spm",SignInHistorySettings:"sttgs_hstr",FilterSettings:"sttgs_fltr",CalendarSettings:"sttgs_cal",AdSettings:"sttgs_ad","Exit Settings":null},fldMap:{INBOX:"inbx",NEWMAIL:"newMail",OLDMAIL:"oldMail",DRAFT:"drft",SENT:"sent",BULK:"spm",TRASH:"trsh",USER:"usrFldr"},getRapidFld:function(){var a=null;if(ws&&ws.WebSuite&&ws.WebSuite.theMailModel){var b=ws.WebSuite.theMailModel.getCurrentFolder();b&&b.types&&b.types.length&&"string"==typeof b.types[0]&&(a=this.fldMap[b.types[0].toUpperCase()]||
null)}return a},doReport:function(a,b,d){var e="utility",h=null;b=null;_ws_theme&&_ws_theme.currentThemeId&&(b=_ws_theme.currentThemeId);if(-1!=a.indexOf("Initial View"))e="home",h=Settings.ShowTodayAtSignIn?"todayLst":"msgLst_inbx";else if("Message List"===a||"Switch Folder"===a||-1!=a.indexOf("Read Message")||-1!=a.indexOf("Compose Message")){var g=this.rapidMap[a],f=this.getRapidFld();g&&f&&(h=g+"_"+f)}else h=this.rapidMap[a];this.rapidInstance&&(h||a)&&(e={pt:e,vwContext:h},b&&(e.theme=b),a&&
0!==a.indexOf("~rapid~")&&(e.pg_name=a,-1<a.indexOf("- Preview")?e.prvwpan="2":-1<a.indexOf("- Inline")?e.prvwpan="3":-1<a.indexOf("- Popup")&&(e.prvwpan="4")),this.rapidInstance.beaconPageview(e));Config.RapidReportingEventsForPV&&a&&this.doReportAction("view-"+a,d)},findDLEventParts:function(a){var b={sec:null,event:null};event=sec=null;if(a){a=a.split("-");for(var b=a.shift(),d=[];"string"===typeof b;)b.trim()&&"mail"!==b.toLocaleLowerCase()&&(sec?d.push(b):sec=b),b=a.shift();d.length&&(event=
d.join("-"))}sec&&!event&&(event=sec,sec="");return b={sec:sec,event:event}},doReportAction:function(a,b){if(this.rapidInstance&&a){var d=this.findDLEventParts(a);d.event&&this.rapidInstance.beaconClick(d.sec,"",0,b,d.event,null,{pp:{etrg:"click"}})}}};ws.reporting._comscoreFull={report:function(a){if(Config.EnableComscoreReporting){var b=ws.reporting._comscore.getBeaconURL(a,!1),d={c1:"2",c2:Config.ComscoreFullClientID,c4:b,c5:Config.ReportingChannel,c7:b,c8:a};setTimeout(function(){window._comscore=
window._comscore||[];window._comscore.push(d);window.COMSCORE&&window.COMSCORE.purge()},100)}}};ws.reporting._comscore={report:function(a,b){Config.EnableComscoreReporting&&setTimeout(f.hitch(this,"doReport",a),100)},doReport:function(a){this.img||(this.img=f.create("img",{"class":"hiddenEl"},f.body()));this.img.src=this.getBeaconURL(a,!0)},getBeaconURL:function(a,b){var d=a.replace(/\W/g,""),d=Config.BaseBeaconURL+"Beacon"+d+".htm";b&&(d+="?rnd\x3d"+Math.random());return d}}})},"ws/UserContext":function(){define("ws/UserContext",
["dojo"],function(f){ws.UserContext={isLoaded:!1,init:function(){!this.isLoaded&&window.Settings&&(this.populate(window.Settings),this.isLoaded=!0)},populate:function(f){this.UserAddress=f.ActiveUserEmailAddress||"";this.ActiveScreenName=f.ActiveUserScreenName||"";this.UserUID=f.UserUID||"";this.UserName=f.UserName||"";this.UserScreenName=f.UserScreenName||"";this.ParentalControls=f.ParentalControls||"N";this.BID=f.BID||"";this.Brandi=f.Brandi||"";this.AOLCreateDate=f.AOLCreateDate||"";this.PriceIndex=
f.PriceIndex||"";this.ClientVersion=f.ClientVersion||"";this.ConnectionType=f.ConnectionType||"";this.ScreenNameHash=f.ScreenNameHash||"";this.Age=f.Age||"";this.Zip=f.Zip||"";this.UserGender=f.UserGender||"";this.UserFirstName=f.UserFirstName||"";this.UserLastName=f.UserLastName||"";this.Locale=f.Locale||"";this.SessionId=f.SessionID||""}};ws.UserContext.init()})},"ws/mail/JwsApi":function(){define("ws/mail/JwsApi","dojo/_base/declare dojo/request/xhr dojo/json dojo/_base/lang dojo/_base/array dojo/Deferred dojo/promise/all dojo/topic dojo/date ws/lang ws/encoding ws/io".split(" "),
function(f,k,d,b,a,h,l,e,p){return f(null,{jwsData:{filtersSS:[],filtersAttr:[]},sortFields:{received:"date",fromToName:"sender",subject:"subject",flagged:"flagged",attachments:"attachment"},jwsDateFormat:"yyyy-MM-dd",model:null,mbDfd:[],SEARCH_QUERY_SAVE_LIMIT:5,getArgs:function(a){var b=ws.io.createYmreqid(),d={query:"appid\x3daolwebmail\x26"+b+"\x26webstdver\x3d"+Config.Codename,headers:{"Content-type":"application/json"}};a&&(d.ymreqid=b);this.jwsData.wssid&&(d.query+="\x26wssid\x3d"+this.jwsData.wssid);
return d},getFolderId:function(d){var g=1;this.model.folders&&a.some(this.model.folders,b.hitch(this,function(a){if(a.name===d)return g=a.id,!0}));return g},createRecipientList:function(a){var b=[];a=a.split(/[\n,;]/);for(var d=0;d<a.length;d++){var g=dojo.trim(a[d]);-1!=g.indexOf("@")&&b.push({name:this.model.getIdentityDN(g),email:g})}return b},addHeaderAddresses:function(a,b,d){d=this.createRecipientList(d);0<d.length&&(a[b]=d)},mapSortField:function(a,b){var d=this.sortFields[a],g=b?this.model.getFolderByName(b):
null;g&&"fromToName"==a&&(this.model.isFolderType(g,"SENT")||this.model.isFolderType(g,"DRAFT"))&&(d="recipient");return d},mapFolderName:function(a){return"/"==a.charAt(0)?a.substring(1):a},handleNewWssid:function(a){var b=null;if(a&&a.error)b=a;else if(a&&a.response&&a.response.text)try{b=d.parse(a.response.text)}catch(t){}if(b&&b.error&&b.error.details){if(a=b.error.details.wssid)this.jwsData.wssid=a;return!0}return!1},handleNewWssid2:function(a){if(a&&a.code&&a.details){if(a=a.details.wssid)this.jwsData.wssid=
a;return!0}return!1},getModSeqForFolder:function(d,e){var g=null;a.some(d,b.hitch(this,function(a){if(a.id===e)return g=+a.highestModSeq,!0}));return g},handleError:function(a){var b=new h;400==a.response.status?this.handleNewWssid(a)?b.resolve():b.reject(a):401==a.response.status||403==a.response.status?(e.publish("NotifyExpiredSession"),window.ws_ErrLgr&&(ws_ErrLgr.stopped=!0),ws.widget.Dialogs.ok(Config.Strings.NoAuth,function(){window.gIsAPopupInvocation&&!window.isWindowStandAlone?b.reject(a):
window.location.replace(Config.ClientReAuthUrl+encodeURIComponent(document.location.href))})):b.reject(a);return b.promise},makeQuery:function(a,b,d,e,h,f,l){var g="\x26q\x3d",m=[],q=Settings.isReindexable,n;f?(m.push("("),m.push("highlight:off"),n="",f.query&&(n='"'+f.query+'"'),"subject"==f.searchIn&&n?m.push("subject:"+n):"fromto"==f.searchIn&&n?(m.push("from:"+n),m.push("OR"),m.push("to:"+n)):n&&m.push("userQuery:"+n),f.folder&&(n=this.model.getFolderByName(f.folder),-1!=n.id&&m.push("folderId:"+
n.id),this.model.isFolderType(n,"NEWMAIL")?(m.push("is:unread"),q||m.push("all:1")):this.model.isFolderType(n,"OLDMAIL")&&(m.push("is:read"),q||m.push("all:1"))),f.startDate&&m.push("after:"+ws.date.formatDateTime(p.add(f.startDate,"day",-1),this.jwsDateFormat)),f.endDate&&m.push("before:"+ws.date.formatDateTime(p.add(f.endDate,"day",1),this.jwsDateFormat)),f.from&&m.push("from:"+f.from),f.to&&m.push("to:"+f.to),f.subject&&m.push("subject:"+f.subject),f.attachment&&m.push("has:attachment"),f.image&&
m.push("has:image"),m.push(")")):a&&("NewMail"==a?(m.push("is:unread"),q||m.push("all:1")):"OldMail"==a&&(m.push("is:read"),q||m.push("all:1")),n=this.model.getFolderByName(a),m.push("folderId:"+(n?n.id:1)));l&&(m.push(l),m.push("all:1"));m.push("offset:"+b);m.push("count:"+d);(a=this.mapSortField(e,a))||(a="date");h||(h="descending");m.push("sort:("+("descending"==h?"-":"")+a+")");return g+=encodeURIComponent(m.join(" "))},makeActionQuery:function(a,b,d,e){var g="\x26q\x3d",h=[];if(d&&(!a||0==a.length)){var f=
this.model.getFolderByName(d);f&&(h.push("folderId:"+f.id),"NewMail"==d?h.push("-is:read"):"OldMail"==d&&h.push("is:read"))}!e||a&&0!=a.length||(h.push(e),h.push("all:1"));if(a&&0<a.length)h.push("id:("+a.join(" ")+")");else if(b&&0<b.length)for(a=0;a<b.length;a++)h.push("-id:"+b[a]);return g+=encodeURIComponent(h.join(" "))},prepareUids:function(a){var b=Config.JWSMaxActionSize,d=[];if(a&&0<a.length)for(var g=0;g<a.length;g+=b)d.push(a.slice(g,g+b));return d},fetchMailbox:function(a){var g=new h;
!this.jwsData.mboxId&&_ws.mailboxId&&(this.jwsData.mboxId=_ws.mailboxId,this.jwsData.baseMailboxUrl=Config.BaseJWSUrl+"mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId,this.jwsData.wssid=_ws.wssid);this.jwsData.mboxId?g.resolve(this.jwsData.mboxId):(a||this.mbDfd.push(g),(1==this.mbDfd.length||a)&&k.get(Config.BaseJWSUrl+"mailboxes",this.getArgs()).then(b.hitch(this,function(a){a=d.parse(a);this.jwsData.mailbox=a.result;this.jwsData.mboxId=a.result.mailboxes[0].id;this.jwsData.baseMailboxUrl=Config.BaseJWSUrl+
"mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId;a.error&&this.handleNewWssid2(a.error);for(a=0;a<this.mbDfd.length;a++)this.mbDfd[a].resolve();this.mbDfd=[]}),b.hitch(this,function(a){this.handleError(a).then(b.hitch(this,function(){this.fetchMailbox(!0).then(function(){g.resolve()})}),b.hitch(this,function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to acquire mailbox.",a);for(var b=0;b<this.mbDfd.length;b++)this.mbDfd[b].reject(a);this.mbDfd=[]}))})));return g.promise},fetchAccountInfo:function(){var a=
new h;this.fetchMailbox().then(b.hitch(this,function(){k.get(this.jwsData.baseMailboxUrl+"/accounts",this.getArgs()).then(b.hitch(this,function(b){b=d.parse(b);a.resolve(b)}),b.hitch(this,function(b){this.handleError(b).otherwise(function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to acquire account.",b);a.reject(b)})}))}),function(b){a.reject(b)});return a.promise},listFolders:function(){var a=new h;this.fetchMailbox().then(b.hitch(this,function(){var g=this.getArgs();g.data=d.stringify({responseType:"json",
requests:[{id:"ListFolders",uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/folders",method:"GET",filters:{iterator:'$..folders[?("INVISIBLE" nin @.types)]',select:{id:"$..id",total:"$..total",unread:"$..unread",highestModSeq:"$..highestModSeq"}},filterResponsePayload:{id:"$(id)",total:"$(total)",unread:"$(unread)",highestModSeq:"$(highestModSeq)"}}]});k.post(Config.BaseJWSUrl+"batch",g).then(b.hitch(this,function(b){if((b=d.parse(b))&&b.result&&b.result.responses&&0<b.result.responses.length&&
(b=b.result.responses[0])&&b.response&&b.response.result&&b.response.result.filteredResults){a.resolve(b.response.result.filteredResults);return}window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to acquire folders (parse error).");a.reject()}),b.hitch(this,function(b){this.handleError(b).otherwise(function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to acquire folders.",b);a.reject(b)})}))}),function(b){a.reject(b)});return a.promise},listMessagesFolders:function(a,e,f,q,m,l,p){var g=new h;this.fetchMailbox().then(b.hitch(this,
function(){var h=this.getArgs(),n=f,u=!1,t=1;f>Config.JWSMaxActionSize&&(n=Config.JWSMaxActionSize,u=!0);n={responseType:"json",requests:[{id:"ListFolders",uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/folders",method:"GET"},{id:"ListMessages"+t++,uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/messages/@.select\x3d\x3dq?"+this.makeQuery(a,e,n,q,m,l,p),method:"GET"}]};if(u)for(u=e+Config.JWSMaxActionSize;u<=f;u+=Config.JWSMaxActionSize)n.requests.push({id:"ListMessages"+t++,
uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/messages/@.select\x3d\x3dq?"+this.makeQuery(a,u,f-u>Config.JWSMaxActionSize?Config.JWSMaxActionSize:f-u,q,m,l,p),method:"GET"});h.data=d.stringify(n);k.post(Config.BaseJWSUrl+"batch",h).then(b.hitch(this,function(a){a=d.parse(a);g.resolve(a)}),b.hitch(this,function(d){this.handleError(d).then(b.hitch(this,function(){this.listMessagesFolders(a,e,f,q,m,l,p).then(function(a){g.resolve(a)},function(a){g.reject(a)})}),function(){window.ws_ErrLgr&&
ws_ErrLgr.logJwsError("Failed to acquire folders/messages.",d);g.reject(d)})}))}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to acquire mailbox.",a);g.reject(a)});return g.promise},checkMostRecent:function(a){this.fetchMailbox().then(b.hitch(this,function(){var g=this.getArgs();g.query+="\x26q\x3d"+encodeURIComponent("folderId:1 count:1 offset:0 -sort:date");k.get(this.jwsData.baseMailboxUrl+"/messages/@.select\x3d\x3dq",g).then(b.hitch(this,function(b){(b=d.parse(b))&&b.result&&
b.result.messages&&0<b.result.messages.length&&(this.jwsData.lastMessageDate=1E3*b.result.messages[0].headers.internalDate,a&&a(this.jwsData.lastMessageDate))}),b.hitch(this,function(a){this.handleError(a).otherwise(function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to checkMostRecent.",a)})}))}),function(){})},getFolderByType:function(a,b){for(var d=0;d<a.length;d++)if(-1!=a[d].types.indexOf(b))return a[d];return null},getFolderById:function(a,b){for(var d=0;d<a.length;d++)if(a[d].id==b)return a[d];
return null},checkNewMessages:function(b){var d=!1,g=!1;this.model.folders&&b&&a.forEach(this.model.folders,function(a){var e=this.getModSeqForFolder(b,a.id),h=!0;if(this.model.isFolderType(a,"NEWMAIL")){var f=this.getFolderById(b,a.id);f&&+a.total==+f.total&&+a.unread==+f.unread&&(h=!1)}e=e&&+a.highestModSeq!==e&&h;(this.model.isFolderType(a,"INBOX")||this.model.isFolderType(a,"NEWMAIL"))&&e?(d=this.model.fetchingNewMail=!0,this.model.inboxCachedList.RefetchIndex({automatic:!0})):e&&a.name===this.model.otherCachedList.folder&&
a.name===this.model.currentFolder&&(g=!0,this.model.otherCachedList.RefetchIndex({automatic:!0}))},this);return d||g},getMessageSourceUrl:function(a){return this.jwsData.baseMailboxUrl+"/messages/@.id\x3d\x3d"+a+"/content/rawplaintext?"+this.getArgs().query},getMessage:function(a,e,f){var g=new h,m=f?"/secure":"";this.fetchMailbox().then(b.hitch(this,function(){var h=this.getArgs();h.data=d.stringify({responseType:"json",requests:[{id:"GetMessage",uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+
"/messages/@.id\x3d\x3d"+a+"/content/simplebody/full"+m,method:"GET"},{id:"UpdateMessage",uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/messages/@.select\x3d\x3dq?"+this.makeActionQuery([a],null,e),method:"POST",payloadType:"embedded",payload:{message:{flags:{read:!0,recent:!1}}}}]});k.post(Config.BaseJWSUrl+"batch",h).then(b.hitch(this,function(a){a=d.parse(a);if(a.result&&a.result.status){if(a.result.status.failedRequests)for(var b=a.result.status.failedRequests,e=0;e<b.length;e++)if("GetMessage"==
b[e].id){g.reject(b);return}for(e=0;e<a.result.status.successRequests.length;e++)if("GetMessage"==a.result.responses[e].id){b=0<a.result.responses[e].response.result.simpleBody.htmlAnnotations.length;a.result.responses[e].response.result.message.imagesRemoved=m&&b;g.resolve(a.result.responses[e].response.result);break}}}),b.hitch(this,function(a){this.handleError(a).otherwise(function(a){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to acquire message data.",a);g.reject(a)})}))}),function(a){g.reject(a)});
return g.promise},renameFolder:function(a,e,f){var g=new h;this.fetchMailbox().then(b.hitch(this,function(){var h=this.getArgs();h.data=d.stringify({folder:{id:a,acctId:e,name:f,types:["USER"]}});k.post(this.jwsData.baseMailboxUrl+"/folders/@.id\x3d\x3d"+a,h).then(b.hitch(this,function(a){a=d.parse(a);g.resolve(a.result)}),b.hitch(this,function(a){this.handleError(a).otherwise(function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to rename folder.",a);g.reject(a)})}))}),function(a){g.reject(a)});
return g.promise},createFolder:function(a,e){var g=new h;this.fetchMailbox().then(b.hitch(this,function(){var h=this.getArgs();h.data=d.stringify({folder:{acctId:a,name:e,types:["USER"]}});k.put(this.jwsData.baseMailboxUrl+"/folders",h).then(b.hitch(this,function(a){a=d.parse(a);g.resolve(a.result)}),b.hitch(this,function(a){this.handleError(a).otherwise(function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to create folder.",a);g.reject(a)})}))}),function(a){g.reject(a)});return g.promise},
deleteFolder:function(a){var g=new h;this.fetchMailbox().then(b.hitch(this,function(){var e=this.getArgs();e.data=d.stringify({responseType:"json",requests:[{id:"DeleteFolder",uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/folders/@.id\x3d\x3d"+a,method:"DELETE"}]});k.post(Config.BaseJWSUrl+"batch",e).then(b.hitch(this,function(a){a=d.parse(a);a.result&&a.result.status&&(0<a.result.status.successRequests.length?g.resolve(a):(window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to delete folder.",
a),g.reject(a)))}),b.hitch(this,function(a){this.handleError(a).otherwise(function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to delete folder.",a);g.reject(a)})}))}),function(a){g.reject(a)});return g.promise},rapidReport:function(a,b,d,e){var g=d.split("\x3d");1<g.length&&(d=g[1]);a=JSON.stringify({bulk:a,mid:b,ymreqid:d});ws.reporting.reportDLAction(e?"msglst-deleteMsgPerm":"msglst-deleteMsg",{coreActn:"deleteMsg",actnData:a})},updateMessages:function(a,e,f,q,m,p){var g=new h;this.fetchMailbox().then(b.hitch(this,
function(){var n=this.prepareUids(e),t={};0==n.length&&n.push([]);for(var w=this.dfdCount=0,v=1;w<n.length;w++,v++){var D=this.getArgs(p),E=[],A=new h;t["UpdateMessages"+v]=A;E.push({id:"UpdateMessages"+v,uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/messages/@.select\x3d\x3dq?"+this.makeActionQuery(n[w],q,a,m),method:"POST",payloadType:"embedded",payload:{message:f}});D.data=d.stringify({responseType:"json",requests:E});p&&(E=n[w],this.rapidReport(e&&1<e.length?!0:!1,E&&E.length?E[0]:
"",D.ymreqid||""),D.ymreqid&&delete D.ymreqid);k.post(Config.BaseJWSUrl+"batch",D).then(b.hitch(this,function(a){a=d.parse(a);a.result&&a.result.status&&(0<a.result.status.failedRequests.length?t[a.result.status.failedRequests[0].id].reject(a.result.status.failedRequests):t[a.result.status.successRequests[0].id].resolve())}),b.hitch(this,function(a){this.handleError(a).otherwise(function(a){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to  update messages.",a);for(var b in t)t[b].reject(a)})}))}l(t).then(b.hitch(this,
function(){g.resolve()}),b.hitch(this,function(){g.reject()}))}),function(a){g.reject(a)});return g.promise},deleteMessages:function(a,e,f,q){var g=new h;this.fetchMailbox().then(b.hitch(this,function(){var m=this.prepareUids(e),n={};0==m.length&&m.push([]);for(var p=0,t=1;p<m.length;p++,t++){var B=this.getArgs(!0),x=[],D=new h;n["DeleteMessages"+t]=D;x.push({id:"DeleteMessages"+t,uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/messages/@.select\x3d\x3dq?"+this.makeActionQuery(m[p],f,a,
q),method:"DELETE"});B.data=d.stringify({responseType:"json",requests:x});x=m[p];this.rapidReport(e&&1<e.length?!0:!1,x&&x.length?x[0]:"",B.ymreqid||"",!0);B.ymreqid&&delete B.ymreqid;k.post(Config.BaseJWSUrl+"batch",B).then(b.hitch(this,function(a){a=d.parse(a);a.result&&a.result.status&&(0<a.result.status.failedRequests.length?n[a.result.status.failedRequests[0].id].reject(a.result.status.failedRequests):n[a.result.status.successRequests[0].id].resolve())}),b.hitch(this,function(a){this.handleError(a).otherwise(function(a){window.ws_ErrLgr&&
ws_ErrLgr.logJwsError("Failed to delete messages.",a);for(var b in n)n[b].reject(a)})}))}l(n).then(b.hitch(this,function(){g.resolve()}),b.hitch(this,function(){g.reject()}))}),function(a){g.reject(a)});return g.promise},saveMessage:function(a){var g=new h;this.fetchMailbox().then(b.hitch(this,function(){var e=this.getArgs();e.headers={"Content-type":!1};a.timeout&&(e.timeout=a.timeout);var h={actions:{responseMessage:!0},simpleBody:{},message:{newMessage:!(a.isReply||a.isForward),folder:{id:this.model.getFolderByType("DRAFT").id},
flags:{read:!0},headers:{subject:a.subject},attachments:[]}};this.addHeaderAddresses(h.message.headers,"from",a.from);this.addHeaderAddresses(h.message.headers,"replyTo",a.from);this.addHeaderAddresses(h.message.headers,"to",a.to);this.addHeaderAddresses(h.message.headers,"cc",a.cc);this.addHeaderAddresses(h.message.headers,"bcc",a.bcc);a.richEdit?h.simpleBody.html=a.body:h.simpleBody.text=a.plainBody;a.csid&&(h.message.csid=a.csid);if(a.isReply||a.isForward)h.message.inReplyTo={messageReference:{id:a.inReplyTo},
replied:a.isReply,forwarded:a.isForward};var f={id:"SaveMessage",uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/messages",method:"POST",payloadType:"multipart",payloadParts:[{partName:"jsonString",contentType:"application/json",payload:h}]};"sendMessage"==a.action&&(f.filters={select:{mid:"$..message.id",csid:"$..message.csid"}},f.requests=[{id:"SendMessage",uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/messages/@.id\x3d\x3d$(mid)/send",method:"POST",payload:{csid:"$(csid)"}}],
(a.isForward||a.isReply)&&a.inReplyTo&&(f.requests[0].requests=[{id:"UpdateMessage",uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/messages/@.id\x3d\x3d"+a.inReplyTo,method:"POST",payloadType:"embedded",payload:{message:{flags:{forwarded:a.isForward,answered:a.isReply}}}}]));var l=[];if(a.formDataRequest){var n=a.formDataRequest.files;if(n&&n.length)for(var p=0;p<n.length;p++){var z=n[p],B=!!z.inlineImgId,x=B?z.inlineImgId:"file"+p,D={disposition:B?"inline":"attachment",filename:ws.encoding.encodeRfc2047(z.name),
multipartName:"multipart://part"+x};B&&(D.contentId=z.inlineImgId);h.message.attachments.push(D);f.payloadParts.push({partName:"part"+x,contentType:z.type||"application/octet-stream",payloadReference:"multipart://"+x});l.push([x,z])}}if(0<a.sourceAttachments.length)for(n=0;n<a.sourceAttachments.length;n++)p=a.sourceAttachments[n],h.message.attachments.push({disposition:"attachment",contentId:p.contentId,messageReference:{id:a.draftMsgId,pid:p.partId}});h=new FormData;h.append("batchJson",d.stringify({responseType:"json",
requests:[f]},null,0));for(f=0;f<l.length;f++)h.append(l[f][0],l[f][1],ws.encoding.encodeRfc2047(l[f][1].name));e.data=h;k.post(Config.BaseJWSUrl+"batch",e).then(b.hitch(this,function(b){var e=d.parse(b);b=e.result.responses;if(0<b.length)for(e=0;e<b.length;e++){if(b[e].response.error){g.reject(b[e].response.error);break}"SaveMessage"==b[e].id&&"saveMessage"==a.action?g.resolve(b[e].response.result):"SendMessage"==b[e].id&&g.resolve(b[e].response.result)}else g.reject(e)}),b.hitch(this,function(a){this.handleError(a).otherwise(function(){window.ws_ErrLgr&&
ws_ErrLgr.logJwsError("Failed to save message.",a);g.reject(a)})}))}),function(a){g.reject(a)});return g.promise},getSettings:function(){var a=new h,e=this.getArgs(),f=[],l=b.mixin({},this.extraAttrs);b.mixin(l,_ws.attrList);for(var m in l)f.push({id:m,uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/attributes/@.id\x3d\x3d"+m,method:"GET"});e.data=d.stringify({responseType:"json",requests:f});k.post(Config.BaseJWSUrl+"batch",e).then(b.hitch(this,function(b){b=d.parse(b);this.settings=_ws.mapAttrData(b.result.responses,
l);this.addExtraSettings(this.settings);a.resolve(this.settings)}),b.hitch(this,function(b){this.handleError(b).otherwise(function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to acquire settings.",b);a.reject(b)})}));return a.promise},addExtraSettings:function(a){_ws.addExtraSettings(a,_ws.mailbox);a.PersonalAdaptiveSpamFilterLevel="Medium"},extraAttrs:{},getAttrName:function(a){if("AwayMessageType"==a||"AwayMessageDate"==a||"AwayMessageFromDate"==a||"AwayMessageTimezoneOffset"==a||"AwayMessage"==
a)return"vacationPreferences";for(var b in _ws.attrList)if(_ws.attrList[b][0]==a)return b;return null},resetSettings:function(){var a=_ws.getDefaultSettings();this.saveSettings(a).then(function(){alert("Settings have been reset. Please reload page to finish.")},function(){alert("Failed to reset settings.")})},saveSettings:function(a){var g=new h,e=this.getArgs(),f=[],m=f,l=0,p=!1,u=!1,z=!1,B;for(B in a){var x=this.getAttrName(B);"messageFilters"==B&&(x="messageFilters");var D=!0;if(x){var E="/ws/v3/mailboxes/@.id\x3d\x3d"+
this.jwsData.mboxId+"/attributes/@.id\x3d\x3d"+x,A={id:x+"_get",uri:E,method:"GET",filters:{select:{}},suppressResponse:!0,requests:[]};A.filters.select["testAndSet"+l]="$..value.testAndSet";var E={id:x,uri:E,method:"POST",payloadType:"embedded",payload:{id:x,link:{type:"RELATIVE",href:E},value:{testAndSet:"$(testAndSet"+l+")"}},requests:[]},F=a[B];if("EnablePreviewPane"==B||"PreviewPaneVisible"==B)F=!0===F?1:0;else if("WSLAccessibilityRedirect"==B)F=0<F;else if("GotoNextOnDelete"==B)F=F?1:3;else if("SenderBlockList"==
B)D=!1,E.payload.value={senders:F};else if("messageFilters"==B)D=!1,E.payload.value={filters:F};else if("AwayMessageType"==B||"AwayMessageDate"==B||"AwayMessageFromDate"==B||"AwayMessageTimezoneOffset"==B||"AwayMessage"==B)if(u)continue;else E.payload.value={enabled:"Disabled"!=a.AwayMessageType},E.payload.value.messageBody=a.AwayMessage||"","Disabled"==a.AwayMessageType?E.payload.value.startDate=E.payload.value.endDate=Math.floor(Date.now()/1E3):(E.payload.value.startDate=Math.floor((new Date(a.AwayMessageFromDate)).getTime()/
1E3),E.payload.value.endDate=Math.floor((new Date(a.AwayMessageDate)).getTime()/1E3)),u=!0,D=!1;D?(E.payload.value[x]=F,A.requests.push(E),m.push(A)):m.push(E);m=E.requests;l++}else if("Signature"==B||"SignatureEnabled"==B||"FromDisplayName"==B||"ForwardAddress"==B||"PrimarySenderAddress"==B)z||(z=this.model.getPrimaryAcct(),z={id:"AccountUpdate",uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/accounts/@.id\x3d\x3d"+z.id,method:"POST",payloadType:"embedded",payload:{account:{type:z.type,
signature:a.Signature||"",signatureActive:a.SignatureEnabled,sendingName:a.FromDisplayName,replyToAddress:a.PrimarySenderAddress}},requests:[]},896===Settings.Brandi&&(a.hasOwnProperty("ForwardAddress")&&(""==a.ForwardAddress?z.payload.account.unsetFields=["forwardEmail","forwardSetting"]:(z.payload.account.forwardEmail=a.ForwardAddress,z.payload.account.forwardSetting="STORE_FORWARD")),a.hasOwnProperty("PrimarySenderAddress")&&(z.payload.account.replyToAddress=a.PrimarySenderAddress)),m.push(z),
m=z.requests,z=!0);else{g.reject("Unknown attribute: "+B);p=!0;break}}p||(e.data=d.stringify({responseType:"json",requests:f}),k.post(Config.BaseJWSUrl+"batch",e).then(b.hitch(this,function(e){e=d.parse(e);0<e.result.status.failedRequests.length?g.reject("Failed to set some attributes"):(b.mixin(Settings,a),g.resolve(e))}),b.hitch(this,function(a){this.handleError(a).otherwise(function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to set attributes.",a);g.reject(a)})})));return g.promise},getMailFilters:function(){var a=
new h;this.fetchMailbox().then(b.hitch(this,function(){this.getOldMailFilters().then(b.hitch(this,function(){this.getSavedSearches().then(function(b){a.resolve()},function(){a.reject()})}))}),function(b){a.reject(b)});return a.promise},getSavedSearches:function(){var g=new h;k.get(this.jwsData.baseMailboxUrl+"/savedsearches",this.getArgs()).then(b.hitch(this,function(b){this.jwsData.recentSS=[];this.jwsData.filtersSS=[];b=d.parse(b).result.savedSearches;for(var e=0;e<b.length;e++){var h=-1!=a.lastIndexOf(b[e].types,
"USER"),f=-1!=b[e].name.indexOf("RecentSearchQueries"),l=1499<b[e].priority&&2E3>b[e].priority;h&&l&&(f?this.jwsData.recentSS.push(b[e]):this.jwsData.filtersSS.push(b[e]))}return g.resolve()}),b.hitch(this,function(a){this.handleError(a).otherwise(function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to acquire mail filters.",a);g.reject(a)})}));return g.promise},getOldMailFilters:function(){var a=new h,e=this.getArgs();e.data=d.stringify({responseType:"json",requests:[{id:"messageFilters",uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+
this.jwsData.mboxId+"/attributes/@.id\x3d\x3dmessageFilters",method:"GET"}]});k.post(Config.BaseJWSUrl+"batch",e).then(b.hitch(this,function(b){b=d.parse(b);this.jwsData.filtersAttr=b.result.responses[0].response.result.value.filters;a.resolve(this.jwsData.filtersAttr)}),b.hitch(this,function(b){this.handleError(b).otherwise(function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to acquire mail old filters.",b);a.reject(b)})}));return a.promise},escapeForQuery:function(a){return'"'+a.replace(/([\+\-!\(\)\{\}\[\]\^\"~\*\?:\t/)])/g,
"\\$\x26")+'"'},makeFilterQuery:function(a,b){var d="";b&&(d+="acctId:"+b+" AND (");a.query&&(d+=a.query);a.from&&(d+=" from:"+this.escapeForQuery(a.from));a.to&&(d+=" to:"+this.escapeForQuery(a.to));a.cc&&(d+=" cc:"+this.escapeForQuery(a.cc));a.bcc&&(d+=" bcc:"+this.escapeForQuery(a.bcc));a.subject&&(d+=" subject:"+this.escapeForQuery(a.subject));a.messageContains&&(d+=" body:"+this.escapeForQuery(a.messageContains));b&&(d+=")");return d},createFilter:function(a){var e=new h,g=this.getArgs(),f=this.model.getFolderByName(a.moveToFolder),
m=this.model.getPrimaryAcct(),m=m?m.id:null,l=a.priority+1500;1999<l&&(l=1999);f?(g.data=d.stringify({responseType:"json",requests:[{id:"createFilter",uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/savedsearches",method:"POST",payloadType:"embedded",payload:{savedSearch:{name:a.filterName,query:this.makeFilterQuery(a,m),priority:l,types:["USER"],decorations:[{id:"F"+f.id,type:"FOLDER"}]}}}]}),k.post(Config.BaseJWSUrl+"batch",g).then(b.hitch(this,function(a){a=d.parse(a);0<a.result.status.failedRequests.length?
(window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to create mail filter.",a.result.responses[0]),e.reject(a)):e.resolve(a)}),b.hitch(this,function(a){this.handleError(a).otherwise(function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to create mail filter.",a);e.reject(a)})}))):e.reject();return e.promise},deleteFilter:function(a){var d=new h;if(2==a.type){for(var e=0;e<this.jwsData.filtersAttr.length;e++)if(this.jwsData.filtersAttr[e].index==a.id){this.jwsData.filtersAttr.splice(e,1);break}this.updateOldMailFilters().then(b.hitch(this,
function(){d.resolve()}),b.hitch(this,function(a){this.handleError(a).otherwise(function(a){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to delete old filter.",a);d.reject(a)})}))}else 1==a.type&&this.fetchMailbox().then(b.hitch(this,function(){k.del(this.jwsData.baseMailboxUrl+"/savedsearches/@.id\x3d\x3d"+a.id,this.getArgs()).then(b.hitch(this,function(){d.resolve()}),b.hitch(this,function(a){this.handleError(a).otherwise(function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to delete new filter.",
a);d.reject(a)})}))}),function(a){d.reject(a)});return d.promise},_makeFilterReq:function(a,b){var d=this.model.getPrimaryAcct(),d=d?d.id:null,e=a.priority;1500>e&&(e+=1500);1999<e&&(e=1999);var g="";a.moveToFolder?g=this.model.getFolderByName(a.moveToFolder).id:a.decorations&&(g=a.decorations[0].id);"F"!=g[0]&&(g="F"+g);return{id:"modifyFilter"+b,uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/savedsearches/@.id\x3d\x3d"+a.id,method:"POST",payloadType:"embedded",payload:{savedSearch:{name:a.filterName,
query:this.makeFilterQuery(a,d),priority:e,types:["USER"],decorations:[{id:g,type:"FOLDER"}]}}}},modifyFilter:function(a){var e=new h,g=this.getArgs(),f=[];if(a){if(2==a.type)return this.createFilter(a).then(b.hitch(this,function(){this.deleteFilter(a).then(function(){e.resolve()})})),e.promise;f.push(this._makeFilterReq(a,1))}else for(var m=0;m<this.jwsData.filtersSS.length;m++)f.push(this._makeFilterReq(this.jwsData.filtersSS[m],m));0<f.length?(g.data=d.stringify({responseType:"json",requests:f}),
k.post(Config.BaseJWSUrl+"batch",g).then(b.hitch(this,function(a){a=d.parse(a);0<a.result.status.failedRequests.length?(window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to modify mail filter.",a.result.responses[0]),e.reject(a)):e.resolve(a)}),b.hitch(this,function(a){this.handleError(a).otherwise(function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to modify mail filter.",a);e.reject(a)})}))):e.resolve();return e.promise},updateOldMailFilters:function(){return this.saveSettings({messageFilters:this.jwsData.filtersAttr})},
updateMailFilters:function(){return this.modifyFilter()},updateFilterPri:function(a,b){for(var d=0;d<this.jwsData.filtersSS.length;d++)if(this.jwsData.filtersSS[d].id==a){this.jwsData.filtersSS[d].priority=b;break}},updateFilters:function(){var a=new h;this.updateOldMailFilters().then(b.hitch(this,function(){this.updateMailFilters().then(b.hitch(this,function(){a.resolve()}))}),function(b){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to update old mail filters.",b);a.reject()});return a.promise},
parseQuery:function(a){for(var b={},d="",e="",g=!0,h=!1,f=a.indexOf("(")+1;f<a.length;f++)g?":"==a[f]?g=!1:")"!=a[f]&&(" "==a[f]?d="":" "!=a[f]&&(d+=a[f])):'"'==a[f]?h=!h:" "==a[f]||")"==a[f]?h?e+=a[f]:(g=!0,b[d]=e,d=e=""):e="\\"==a[f]?e+a[++f]:e+a[f];0<d.length&&(b[d]=e);return b},unsubscribe:function(a){var b=new h,d=this.getArgs();d.data="";k.post(this.jwsData.baseMailboxUrl+"/messages/@.id\x3d\x3d"+a+"/unsubscribe",d).then(function(){b.resolve()},function(a){b.reject(a)});return b.promise},addSearch:function(a){var e=
new h,g=this.getArgs();a={responseType:"json",requests:[{id:"addSearch",uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/savedsearches",method:"POST",payloadType:"embedded",payload:{savedSearch:{name:a.name,query:a.query,priority:1999,types:["USER"]}}}]};if(ws.Jws.jwsData&&ws.Jws.jwsData.recentSS&&ws.Jws.jwsData.recentSS.length>=this.SEARCH_QUERY_SAVE_LIMIT){var f=ws.Jws.jwsData.recentSS.length-this.SEARCH_QUERY_SAVE_LIMIT+1;a.requests[0].requests=[];for(var m=0;m<f;m++)ws.Jws.jwsData.recentSS[m].id&&
a.requests[0].requests.push({id:"delSearch"+m,uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/savedsearches/@.id\x3d\x3d"+ws.Jws.jwsData.recentSS[m].id,method:"DELETE"})}g.data=d.stringify(a);k.post(Config.BaseJWSUrl+"batch",g).then(b.hitch(this,function(){this.getMailFilters();e.resolve()}),b.hitch(this,function(a){this.handleError(a).otherwise(function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to update recent search list.",a);e.reject(a)})}));return e.promise},clearSearches:function(){if(ws.Jws.jwsData.recentSS){for(var a=
new h,e=this.getArgs(),f={responseType:"json",requests:[]},l=ws.Jws.jwsData.recentSS,m=0;m<l.length;m++)f.requests.push({id:"ClearSearch_"+l[m].id,uri:"/ws/v3/mailboxes/@.id\x3d\x3d"+this.jwsData.mboxId+"/savedsearches/@.id\x3d\x3d"+l[m].id,method:"DELETE"});e.data=d.stringify(f);k.post(Config.BaseJWSUrl+"batch",e).then(b.hitch(this,function(){ws.Jws.jwsData.recentSS=null;a.resolve()}),b.hitch(this,function(b){this.handleError(b).otherwise(function(){window.ws_ErrLgr&&ws_ErrLgr.logJwsError("Failed to clear recent search list.",
b);a.reject(b)})}));return a.promise}},resendFwdVerification:function(){var a=new h,b=this.getArgs(),e=this.model.getPrimaryAcct();b.data=d.stringify({account:{type:e.type,resendVerification:!0}});k.post(this.jwsData.baseMailboxUrl+"/accounts/@.id\x3d\x3d"+e.id,b).then(function(){a.resolve()},function(b){a.reject(b)});return a.promise}})})},"dojo/date":function(){define(["./has","./_base/lang"],function(f,k){var d={getDaysInMonth:function(b){var a=b.getMonth();return 1==a&&d.isLeapYear(b)?29:[31,
28,31,30,31,30,31,31,30,31,30,31][a]},isLeapYear:function(b){b=b.getFullYear();return!(b%400)||!(b%4)&&!!(b%100)},getTimezoneName:function(b){var a=b.toString(),d="",f=a.indexOf("(");if(-1<f)d=a.substring(++f,a.indexOf(")"));else if(f=/([A-Z\/]+) \d{4}$/,a=a.match(f))d=a[1];else if(a=b.toLocaleString(),f=/ ([A-Z\/]+)$/,a=a.match(f))d=a[1];return"AM"==d||"PM"==d?"":d},compare:function(b,a,d){b=new Date(+b);a=new Date(+(a||new Date));"date"==d?(b.setHours(0,0,0,0),a.setHours(0,0,0,0)):"time"==d&&(b.setFullYear(0,
0,0),a.setFullYear(0,0,0));return b>a?1:b<a?-1:0},add:function(b,a,d){var h=new Date(+b),e=!1,f="Date";switch(a){case "day":break;case "weekday":var g;(a=d%5)?g=parseInt(d/5):(a=0<d?5:-5,g=0<d?(d-5)/5:(d+5)/5);var k=b.getDay(),t=0;6==k&&0<d?t=1:0==k&&0>d&&(t=-1);k+=a;if(0==k||6==k)t=0<d?2:-2;d=7*g+a+t;break;case "year":f="FullYear";e=!0;break;case "week":d*=7;break;case "quarter":d*=3;case "month":e=!0;f="Month";break;default:f="UTC"+a.charAt(0).toUpperCase()+a.substring(1)+"s"}if(f)h["set"+f](h["get"+
f]()+d);e&&h.getDate()<b.getDate()&&h.setDate(0);return h},difference:function(b,a,h){a=a||new Date;h=h||"day";var f=a.getFullYear()-b.getFullYear(),e=1;switch(h){case "quarter":b=b.getMonth();a=a.getMonth();e=Math.floor(a/3)+1+4*f-(Math.floor(b/3)+1);break;case "weekday":f=Math.round(d.difference(b,a,"day"));h=parseInt(d.difference(b,a,"week"));if(0==f%7)f=5*h;else{var e=0,k=b.getDay(),g=a.getDay();h=parseInt(f/7);a=f%7;b=new Date(b);b.setDate(b.getDate()+7*h);b=b.getDay();if(0<f)switch(!0){case 6==
k:e=-1;break;case 0==k:e=0;break;case 6==g:e=-1;break;case 0==g:e=-2;break;case 5<b+a:e=-2}else if(0>f)switch(!0){case 6==k:e=0;break;case 0==k:e=1;break;case 6==g:e=2;break;case 0==g:e=1;break;case 0>b+a:e=2}f=f+e-2*h}e=f;break;case "year":e=f;break;case "month":e=a.getMonth()-b.getMonth()+12*f;break;case "week":e=parseInt(d.difference(b,a,"day")/7);break;case "day":e/=24;case "hour":e/=60;case "minute":e/=60;case "second":e/=1E3;case "millisecond":e*=a.getTime()-b.getTime()}return Math.round(e)}};
k.mixin(k.getObject("dojo.date",!0),d);return d})},"ws/encoding":function(){define("ws/encoding",["dojo/_base/lang"],function(f){f.setObject("ws.encoding",{keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d",encode64:function(f){var d="",b,a,h,l,e,k,g=0;do b=f.charCodeAt(g++),a=f.charCodeAt(g++),h=f.charCodeAt(g++),l=b>>2,b=(b&3)<<4|a>>4,e=(a&15)<<2|h>>6,k=h&63,isNaN(a)?e=k=64:isNaN(h)&&(k=64),d=d+this.keyStr.charAt(l)+this.keyStr.charAt(b)+this.keyStr.charAt(e)+this.keyStr.charAt(k);
while(g<f.length);return d},decode64:function(f){var d="",b,a,h,l,e,k=0;f=f.replace(/[^A-Za-z0-9\+\/\=]/g,"");do b=this.keyStr.indexOf(f.charAt(k++)),a=this.keyStr.indexOf(f.charAt(k++)),l=this.keyStr.indexOf(f.charAt(k++)),e=this.keyStr.indexOf(f.charAt(k++)),b=b<<2|a>>4,a=(a&15)<<4|l>>2,h=(l&3)<<6|e,d+=String.fromCharCode(b),64!=l&&(d+=String.fromCharCode(a)),64!=e&&(d+=String.fromCharCode(h));while(k<f.length);return d},decodeUtf8:function(f){if(!f)return"";for(var d="",b=0,a=0,h=0,l=0;b<f.length;)a=
f.charCodeAt(b),128>a?(d+=String.fromCharCode(a),b++):191<a&&224>a?(l=f.charCodeAt(b+1),d+=String.fromCharCode((a&31)<<6|l&63),b+=2):(l=f.charCodeAt(b+1),h=f.charCodeAt(b+2),d+=String.fromCharCode((a&15)<<12|(l&63)<<6|h&63),b+=3);return d},encodeUtf8:function(f){if(!f)return"";f=f.replace(/\r\n/g,"\n");for(var d="",b=0;b<f.length;b++){var a=f.charCodeAt(b);128>a?d+=String.fromCharCode(a):(127<a&&2048>a?d+=String.fromCharCode(a>>6|192):(d+=String.fromCharCode(a>>12|224),d+=String.fromCharCode(a>>6&
63|128)),d+=String.fromCharCode(a&63|128))}return d},encodeRfc2047:function(f){return"\x3d?utf-8?B?"+ws.encoding.encode64(ws.encoding.encodeUtf8(f))+"?\x3d"}})})},"ws/idleMonitor":function(){define("ws/idleMonitor",["dojo/_base/declare","dojo"],function(f,k){return f(null,{_events:[[window,"scroll"],[window,"resize"],[document,"mousemove"],[document,"keyup"]],_lastUserActionTime:new Date,_debug:!1,_checkInterval:1E4,_minIdleTime:Config.StandardMinIdleTimeForRefresh,_maxRefreshDelay:Config.StandardMaxTimeForRefresh,
constructor:function(d){this._debug=d;this._initObservers();this._startTimers();k.subscribe("IdleMonitor/activityDetected",this,"activityDetected")},activityDetected:function(){this._lastUserActionTime=new Date},_initObservers:function(){k.forEach(this._events,function(d){k.connect(d[0],d[1],k.hitch(this,"activityDetected"))},this)},_getIdleSeconds:function(){return(new Date-this._lastUserActionTime)/1E3},_startTimers:function(){setInterval(k.hitch(this,function(){this._getIdleSeconds()>this._minIdleTime&&
(this._debug&&alert("About to reload!  Idle time exceeded "+this._minIdleTime),ws.WebSuite.theMailModel.setupVersionCheckTimer(),window.location.reload())}),this._checkInterval);setTimeout(k.hitch(this,function(){this._debug&&alert("About to reload!  MaxRefreshDelay exceeded "+this._maxRefreshDelay);window.location.reload()}),1E3*this._maxRefreshDelay)}})})},"ws/dojofixes":function(){define("ws/dojofixes",["dojo","dojo/_base/lang","ws/browser"],function(f,k,d){f.isMac&&(f.addClass(f.doc.documentElement,
"dj_mac"),f.isFF&&f.addClass(f.doc.documentElement,"dj_macFF"));10==f.isIE?f.addClass(f.doc.documentElement,"dj_ie10"):d.ipad&&f.addClass(f.doc.documentElement,"dj_iPad");f.dojofromJson=f.fromJson;f.fromJson=function(b){b&&""!=b||(b='""');try{return f.dojofromJson(b)}catch(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.JsonParseErr,"Exception in JSON string, dojo.fromJson",a,"dojofixes.js")}};f.isArray=function(b){return b&&b.push&&b.splice&&b.join};f.isIE&&(k.setObject("ws.dojofixes.fixScroll",
function(){f.body().scrollTop=document.documentElement.scrollTop=0;f.body().scrollLeft=document.documentElement.scrollLeft=0}),f.addOnLoad(function(){f.connect(f.body(),"onscroll",ws.dojofixes.fixScroll);document.documentElement.onscroll=ws.dojofixes.fixScroll}))})},"ws/themes/ThemeConfig":function(){define("ws/themes/ThemeConfig",["dojo","ws/string","ws/reporting","ws/settings"],function(f){f.setObject("ws.themes.ThemeConfig",{prefs:null,initialThemeLoaded:!1,themeData:null,currentThemeId:null,currentThemeData:null,
active:{},randomThemeList:null,randomThemeEnabled:!1,themeChangeCallbacks:{},needsHideLoadingCurtain:!1,subsetLoadTries:1,init:function(){if(Config.EnableThemes){window.g_ThemeAtom_WS=f.hitch(this,this._g_ThemeAtom_WS);Settings.AccountMigratedToOath||Config.SetMigratedToOath?(Settings.ThemeId&&"string"==typeof Settings.ThemeId?0===Settings.ThemeId.toUpperCase().indexOf("THEME-")&&(Settings.ThemeId=this.prefs.SelectedTheme.substr(6)):Settings.ThemeId=Config.ThemeDefault,Settings.ThemeId=Settings.ThemeId.toUpperCase(),
this.currentThemeId=Settings.ThemeId,this.randomThemeEnabled="boolean"==typeof Settings.ThemeRnd?Settings.ThemeRnd:!1):(this.prefs=null,"string"==typeof Settings.ThemePrefs?Settings.ThemePrefs&&(this.prefs=f.fromJson(Settings.ThemePrefs)):this.prefs=Settings.ThemePrefs,this.prefs||(this.prefs={SelectedTheme:Config.ThemeDefault,randomThemeEnabled:!1}),0===this.prefs.SelectedTheme.toUpperCase().indexOf("THEME-")&&(this.prefs.SelectedTheme=this.prefs.SelectedTheme.substr(6)),this.prefs.SelectedTheme||
(this.prefs.SelectedTheme=Config.ThemeDefault),this.prefs.SelectedTheme=this.prefs.SelectedTheme.toUpperCase(),this.currentThemeId=this.prefs.SelectedTheme,this.randomThemeEnabled=this.prefs.randomThemeEnabled?!0:!1);this.map={Hdr_grtingText:["Header","grtingTxt"],Hdr_link:["Header","lnk"],Gen_accent:["GeneralApp","accent"],Gen_accentDark:["GeneralApp","accentDark"],Gen_base:["GeneralApp","base"],Gen_dark:["GeneralApp","dark"],Gen_medium:["GeneralApp","medium"],Gen_light:["GeneralApp","light"],Gen_tone:["GeneralApp",
"tone"],Gen_search:["GeneralApp","search"],Gen_searchDark:["GeneralApp","searchDark"],Gen_searchResult:["GeneralApp","searchResult"],Gen_toneRGBA:["GeneralApp","toneRGBA"]};var k=f.hitch(this,function(){if(Config.AllowRandomThemes&&this.randomThemeEnabled)try{_ws_isOpenerWS()&&opener._ws_theme&&"undefined"!=typeof opener._ws_theme.currentThemeId?this.currentThemeId=opener._ws_theme.currentThemeId:this.currentThemeId=this.getRandomTheme()}catch(d){}this.currentThemeId==Config.ThemeDefault?this.startUpThemeLoaded():
this.loadTheme(this.currentThemeId,f.hitch(this,this.startUpThemeLoaded),f.hitch(this,function(){this.currentThemeId=Config.ThemeDefault;this.startUpThemeLoaded();this.hideLoadingCurtain()}))});this.parseThemeData(k)}},hideLoadingCurtain:function(){!Config.EnableThemes||this.initialThemeLoaded?ws.WebSuite.hideLoadingCurtain():this.needsHideLoadingCurtain=!0},startUpThemeLoaded:function(){this.themeData[this.currentThemeId]&&(this.currentThemeData=this.themeData[this.currentThemeId]);this.needsHideLoadingCurtain&&
(ws.WebSuite.hideLoadingCurtain(),this.needsHideLoadingCurtain=!1);this.initialThemeLoaded=!0;this.todayPageCallbackFunc&&(this.todayPageCallbackFunc(),this.todayPageCallbackFunc=null);this.themePicker&&!this.startUpThemeChangeDone&&this.themePicker.startUpThemeLoaded()},getThemeColor:function(f,d){if(!this.themeData)return null;var b=null;this.themeData[this.currentThemeId]&&(this.currentThemeData=this.themeData[this.currentThemeId]);if("DEFAULT"==this.currentThemeData.id){var a=d?"":"#";switch(f){case "Gen_base":return a+
"0096ef";case "Gen_accent":return a+"0096EF";case "Gen_accentDark":return a+"0096Ef";case "Gen_light":return a+"e1eff7";case "Gen_medium":return a+"99deec";case "Gen_dark":return a+"016db8";default:return null}}a=this.currentThemeData.styleInfo;this.themePicker&&this.themePicker.isHighContrastTheme&&(a={Header:{grtingTxt:"#000",lnk:"#000"},GeneralApp:{accent:"#006db0",accentDark:"#02182e",base:"#191919",dark:"#000000",medium:"#c9c9c9",light:"#f2f2f2",tone:"#f3f3f3",search:"#006db0",searchDark:"#02182e",
searchResult:"#c6c8c9",toneRGBA:"rgba (81,15,59,0.05)"}});this.map&&this.currentThemeData&&a&&(b=this.map[f],b=a[b[0]][b[1]]);d&&b&&"#"==b.substr(0,1)&&(b=b.substr(1));return b},getThemeColorQueryString:function(f,d){var b=null;if(!Config.EnableThemes)return null;this.themePicker&&this.themePicker.isHighContrastTheme?(tca="006db0",tcb="333333",tcad="02182e"):(tcb=this.getThemeColor("Gen_base",!0),tca=this.getThemeColor("Gen_accent",!0),tcad=this.getThemeColor("Gen_accentDark",!0));return b="tcb\x3d"+
tcb+"\x26tcad\x3d"+tcad+"\x26tca\x3d"+tca},getRandomTheme:function(){return this.randomThemeList[Math.floor(Math.random()*this.randomThemeList.length)]},parseThemeData:function(k){this.themeData=ws.lang.shallowCopy(Config.WebSuiteThemes);var d=[];if("undefined"!=typeof Subset_Themes&&Subset_Themes)d=ws.lang.shallowCopy(Subset_Themes.IDList);else if(this.subsetLoadTries){this.subsetLoadTries--;k=k?f.hitch(this,this.parseThemeData,k):f.hitch(this,this.parseThemeData);_ws.loadScript({src:Config.ThemeConfigURL+
"_subset.js",load:k,error:k});return}var b=[];this.active={};this.active[Config.ThemeDefault]=!0;for(var a=0;a<d.length;a++){var h=d[a];this.active[h]=!0;b.push(h)}d=ws.lang.shallowCopy(Config.WebSuiteThemes.IDList).splice(0,1);this.randomThemeList=ws.lang.shallowCopy(d.concat(b));b=f.indexOf(this.randomThemeList,"HIGHCONTRAST");-1!=b&&this.randomThemeList.splice(b,1);k&&k()},unspecified:function(f){return"undefined"==typeof f||null==f||""==f?!0:!1},isActive:function(f){return f&&this.active&&this.active[f]?
!0:!1},getExternalThemeResourcePath:function(f){var d="",d="";f.version&&0<f.version.length&&(d=f.version);return d=Config.ThemeConfigResourcePath+d+"/"+f.id.toLowerCase()},loadTheme:function(k,d,b){if(d){var a=k;this.isActive(a)||(this.currentThemeId=a=Config.ThemeDefault);this.themeData[k]||a==Config.ThemeDefault?d(a):(this.themeChangeCallbacks[a]||(this.themeChangeCallbacks[a]=[]),this.themeChangeCallbacks[a].push(d),_ws.loadScript({src:Config.ThemeConfigURL+a.toLowerCase()+".js",load:f.hitch(this,
function(){8>=f.isIE&&this.needsHideLoadingCurtain&&(ws.WebSuite.hideLoadingCurtain(),this.needsHideLoadingCurtain=!1)}),error:f.hitch(this,this.themeLoadError,a,b)}))}},themeLoadError:function(f,d){d&&d();window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ExternalErr,"themeConfig error: Unable to load theme"+f,null,"ThemeConfig.js")},_g_ThemeAtom_WS:function(f){if(f&&f.id){var d=f.id;f.resourcePath=this.getExternalThemeResourcePath(f);this.themeData[d]=f;if(this.themeChangeCallbacks[d])for(f=this.themeChangeCallbacks[d];f.length;)f.shift()(d)}else this.themeLoadError("No theme param")},
saveTheme:function(){Settings.AccountMigratedToOath?(Settings.ThemeId=this.currentThemeId.toUpperCase(),Settings.ThemeRnd=this.randomThemeEnabled,ws.settings.save({ThemeId:Settings.ThemeId,ThemeRnd:Settings.ThemeRnd})):(this.prefs.SelectedTheme=this.currentThemeId.toUpperCase(),this.prefs.randomThemeEnabled=this.randomThemeEnabled,ws.settings.save({ThemePrefs:this.prefs}),Settings.ThemePrefs=this.prefs)}});window._ws_theme=ws.themes.ThemeConfig})},"ws/settings":function(){define("ws/settings",["dojo",
"dojo/_base/lang","ws/browser","ws/io","ws/WebSuite"],function(f,k){k.setObject("ws.settings",{load:function(d){var b=d.scope||"core";ws.WebSuite.isSettingLoaded(b)&&!d.forceReload||Settings.SettingsConnectError?d.load&&d.load():"cal"==b?ws.CalApi.getSettings().then(k.hitch(this,function(a){Settings.CalendarTimeZoneList=ws.calendar.calutil.timeZoneList;Settings.CalendarDayStart=60*a.options.startHour;Settings.CalendarDayEnd=60*a.options.endHour;Settings.CalendarTimeZone=a.options.timeZoneId;Settings.CalendarViewType=
a.options.defaultView;Settings.ReminderDeliveryPrefs=a.options.reminderSettings.sendEmail?["email"]:[];ws.WebSuite.settingsLoaded[b]=!0;d.load&&d.load()}),function(a){d.error&&d.error(a)}):d.load&&d.load()},save:function(d,b){if(b&&b.isCalendar){var a={},h;for(h in d)switch(h){case "CalendarDayStart":a.startHour=d[h]/60;break;case "CalendarDayEnd":a.endHour=d[h]/60;break;case "CalendarTimeZone":a.timeZoneId=d[h];break;case "CalendarViewType":a.defaultView=d[h]}ws.CalApi.saveSettings(a).then(function(){b&&
b.load&&b.load()},function(a){b&&b.error&&b.error()})}else Settings.SettingsConnectError||ws.Jws.saveSettings(d).then(function(){b&&b.load&&b.load()},function(a){b&&b.error&&b.error()})},isIE10Metro:function(){var d=!1;try{d=!!new ActiveXObject("htmlfile")}catch(a){d=!1}var b=window.innerWidth==screen.width&&window.innerHeight==screen.height;return 10<=f.isIE&&b&&!d},allowPopups:function(){var d=!1;10<=f.isIE&&(d=this.isIE10Metro());return!(f.isIE&&ws.browser.win98||d)},existingTargetPrefs:["g8",
"SeenFTUTips"],cnsldPrefs:"FirstLogin FeatureNoticeVer IsFriendlyNameDlgDisplayed SignatureDlgDisplayed UpgradeBarDisplayedSet SeenNotificationMsgs EnableSpamDisposition EnableUnsubscribing".split(" "),cnsldPrefsObject:null,addToConsolidated:function(d,b){this.setSeenPref(d,b);return this.seenPrefData.join("")},syncConsolidatedToSettingsSeenFTUTips:function(d){var b=this.seenPrefData=null,a=this.getSeenPrefData(),h=this.getSeenPrefConfigIndexMap()[d];"number"==typeof h&&a&&h<a.length&&(b=a[h],this.saveConsolidated(d,
b,!0));return b},saveConsolidated:function(d,b,a){this.setSeenPref("Ver",Config.SeenFTUTipsVer);switch(d){case "EnableSpamDisposition":return;case "EnableUnsubscribing":return;case "bubbleTips":b.SeenFTUTips&&-1!=b.SeenFTUTips.indexOf("AdFreePromo")&&this.setSeenPref("BubbleAdFreePromo","1");b.SeenFTUTips&&-1!=b.SeenFTUTips.indexOf("FF3MailTo")&&this.setSeenPref("BubbleFF3MailTo","1");b=d=null;break;case "UpgradeBarDisplayedSet":if(d=JSON.parse(b))d.AOL&&d.AOL==Config.AOLHomePageNoticeVersion&&this.setSeenPref("UpgradeBarAOL",
null),d.FF&&d.FF==Config.FireFoxUpgradeNoticeVersion&&this.setSeenPref("UpgradeBarFF",null);b=d=null}if(d=this.addToConsolidated(d,b)){if(a)return d;Settings.SeenFTUTips=d;this.save({SeenFTUTips:d})}},loadConsolidated:function(d){var b="*"==this.getSeenPref("OathCreated");switch(d){case "EnableSpamDisposition":return!1;case "EnableUnsubscribing":return!0;case "bubbleTips":return b?(b=["SeenTip"],this.getSeenPref("BubbleAdFreePromo")&&b.push("AdFreePromo"),this.getSeenPref("BubbleFF3MailTo")&&b.push("FF3MailTo"),
{SeenFTUTips:b.join(",")}):{SeenFTUTips:"AdFreePromo,FF3MailTo"};case "UpgradeBarDisplayedSet":d=Config.AOLHomePageNoticeVersion;var a=Config.FireFoxUpgradeNoticeVersion;b&&(d="A"===this.getSeenPref("UpgradeBarAOL")?d:"",a="A"===this.getSeenPref("UpgradeBarFF")?a:"");b={AOL:d,FF:a};return JSON.stringify(b);default:if(b)return this.getSeenPref(d);b={FirstLogin:!1,FirstInforSeen:!0,SignatureDlgDisplayed:!0,IsFriendlyNameDlgDisplayed:!0};return"boolean"==typeof b[d]?b[d]:this.getSeenPref(d)}},resetFTUPref:function(d){d=
"string"==typeof d?d:"*";Settings.Signature="";Settings.SeenFTUTips=d;this.save({SeenFTUTips:d,Signature:""});return"Settings.SeenFTUTips: "+Settings.SeenFTUTips},getSeenPrefConfigIndexMap:function(){if(!this.seenPrefConfigIndexMapMap){var d=null;if(Config.SeenFTUTipsIndexMap&&Config.SeenFTUTipsIndexMap.length)for(var d={},b=0;b<Config.SeenFTUTipsIndexMap.length;b++)d[Config.SeenFTUTipsIndexMap[b].id]=b;this.seenPrefConfigIndexMapMap=d}return this.seenPrefConfigIndexMapMap},getSeenPrefData:function(){if(!this.seenPrefData){var d=
null;if(Config.SeenFTUTipsIndexMap&&Config.SeenFTUTipsIndexMap.length){var b=Config.SeenFTUTipsIndexMap.length;if(Settings.SeenFTUTips&&Settings.SeenFTUTips.length&&Settings.SeenFTUTips.length==b)d=Settings.SeenFTUTips.split("");else for(var d=Settings.SeenFTUTips||"",d=d.substr(0,b),d=d.split(""),a=0;a<b;a++)"undefined"==typeof d[a]&&(d[a]=Config.SeenFTUTipsIndexMap[a].primary||" ")}this.seenPrefData=d}return this.seenPrefData},getSeenPref:function(d){var b=null,a=this.getSeenPrefConfigIndexMap(),
h=this.getSeenPrefData();h&&a&&("number"==typeof a[d]?b=h[a[d]]:window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"getSeenPref: "+d+" missing from SeenFTUTipsIndexMap"));return"0"==b||" "==b?!1:"1"==b?!0:b},setSeenPref:function(d,b){if(d){"boolean"==typeof b&&(b=b?"1":"0");var a=this.getSeenPrefConfigIndexMap(),h=this.getSeenPrefData();if(h&&a)if("number"==typeof a[d]){var f=Config.SeenFTUTipsIndexMap[a[d]].link;null==b&&"string"==typeof f&&f.length&&(b=f);"string"===typeof b&&(h[a[d]]=b.substr(0,
1)||" ")}else window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"setSeenPref: "+d+" missing from SeenFTUTipsIndexMap")}}})})},"ws/WebSuite":function(){define("ws/WebSuite","dojo dijit dojo/dom dojo/window dijit/_Widget dijit/registry dojo/parser dojo/io-query dojo/request/script dojo/cookie dojo/date dojo/date/stamp dojo/on dojo/dom-geometry ws/suite/Navigation ws/calendar/CNavigation ws/calendar/CalendarViewModel ws/widget/Button ws/widget/FTUTip ws/suite/TodayPage ws/mail/SendConfirmationPage ws/widget/WSToolbar dijit/layout/StackContainer ws/widget/Splitter ws/suite/SidePanel ws/suite/Hat ws/suite/Footer ws/widget/Pane ws/mail/MailFilters ws/suite/InforOfferDialog ws/widget/ModalNotification ws/widget/AdvancedSearch ws/address/ABUtils ws/browser ws/io ws/lang ws/mail/MailModel ws/reporting ws/encoding ws/widget/Dialogs ws/bubbleConfig".split(" "),
function(f,k,d,b,a,h,l,e,p,g,n,t,q,m,w,v,u,z,B,x,D,E,A,F,K,I,J,G,O,R,Z,Q,M){ws.WebSuite={isRecordTimingData:!1,todayPageLoaded:0,todayPageUnloaded:0,messageListTimerStart:0,messageListTimerEnd:0,messageReadTimerStart:0,messageReadTimerEnd:0,messageSize:0,pluginBarRenderTime:-1,topBarNoticeHeight:0,minContentHeight:250,minViewWidth:660,qaErrConsoleHeight:0,tabNotificationShown:{},notificationMsg:null,hashWidgets:{},settingsLoaded:{core:!0},isPanelSplitterInitializing:!1,wsObj:null,lastSelectedTab:null,
isModalOpen:!1,startupDlgDone:!1,internalNotificationsActive:!1,externalNotificationInitilized:!1,cmpseMsgWidPersist:{lastSelFromAddr:null,selectedFromAddr:null},widthMode:4,heightMode:Settings.ListSpacingType,isSettingLoaded:function(a){return this.settingsLoaded.all||this.settingsLoaded[a]},_resize:function(){this.resize()},resize:function(a){this.viewportSize=b.getBox();this.widthMode=800>=this.viewportSize.w?1:1024>=this.viewportSize.w?2:1200>=this.viewportSize.w?3:4;if(0==Settings.ListSpacingType){var d=
this.getAutoSpacingType();d!=this.heightMode&&(f.removeClass(f.body(),"spacing"+this.heightMode),f.addClass(f.body(),"spacing"+d),this.heightMode=d,f.publish(["ListSpacingResize"]))}this.HatWidget&&this.HatWidget.setWidth();d=Math.max(this.viewportSize.h-(this.hatHeight+this.topBarNoticeHeight+this.qaErrConsoleHeight),this.minContentHeight);this.browserUpgradeBar&&this.browserUpgradeBar.layout();if(this.qaErrConsoleNode){var e=document.getElementById("FooterWidget");e&&(e.style.bottom=this.qaErrConsoleHeight+
"px")}if(this.settingsWidget&&this.settingsWidget.isShowing())this.layoutForSettings();else{this.minViewWidth=1==this.widthMode?580:660;this.SidePanel&&!0!==a&&this.SidePanel.updateWidth();var e=f.getMarginSize(this.Navigation.domNode).w,g=0,h=0;this.HatWidget&&(h=Math.max(f.style(this.HatWidget.domNode,"minWidth"),this.viewportSize.w));this.SidePanel&&(g=this.SidePanel.isClosed()?0:f.getMarginSize(this.SidePanel.domNode).w);this.standaloneCalendar?this.navSplitterWidth=0:this.NavSplitterEl.style.left=
e-this.NavSplitter.splitterMargin+"px";var m=e+this.navSplitterWidth;this.ViewWidget.domNode.style.left=m+"px";h=Math.max(this.viewportSize.w-(m+g),h-(m+g),this.minViewWidth);g=h+g+e+this.navSplitterWidth;d-=g>this.viewportSize.w?this.scrollbarWidth:0;this.SidePanel&&(this.SidePanel.domNode.style.left=e+h+"px");this.HatWidget&&!ws.CalSolo&&(this.HatWidget.leftHat.style.height=this.viewportSize.h-10+"px");e=document.getElementById("ws_appScroll");e.style.width=this.viewportSize.w+"px";e.style.minWidth=
g+"px";e=document.getElementById("ws_application");280>d?e.style.overflowY="auto":(e.style.overflowY="hidden",e.scrollTop=0);this.SidePanel&&!0!==a&&this.SidePanel.resize({h:d});this.Navigation.resize({h:d});this.NavSplitter&&this.NavSplitter.setHeight(d);this.ViewWidget.resize({w:h,h:d})}document.body.scrollTop="0";this.toastCompose&&this.updateToastComposePosition()},layoutForSettings:function(){var a=Math.max(this.viewportSize.h-(this.hatHeight+this.topBarNoticeHeight+this.qaErrConsoleHeight),
this.minContentHeight),b=document.getElementById("ws_application");b.style.overflowY="hidden";b.scrollTop=0;b=document.getElementById("ws_appScroll");b.style.width=this.viewportSize.w+"px";b.style.minWidth="0";f.marginBox(this.settingsWidget.domNode,{w:this.viewportSize.w-1,h:a});this.settingsWidget.resize()},resizeViewWidgetWidth:function(){var a=f._getMarginSize(this.Navigation.domNode).w;this.SidePanel&&f._getMarginSize(this.SidePanel.domNode).w;var b=Math.max(this.viewportSize.w-(a+this.navSplitterWidth+
0),this.minViewWidth);setTimeout(f.hitch(this,function(){this.ViewWidget.resize({w:b})}),0)},splitSizer:function(a){a<this.Navigation.snapSmall?a=42:a<this.Navigation.snapLarge?a=170:a>this.Navigation.snapMax&&(a=340);return a},splitClick:function(){ws.WebSuite.Navigation.toggleNav("splitClick")},splitterResize:function(a){this.resize()},windowResize:function(){f.isIE?ws.lang.defer(this,"_resize",100,"ws.WebSuite._resize"):this.resize()},getWSObj:function(){null==this.wsObj&&(0<document.location.toString().indexOf("Solo.aspx")?
this.wsObj=ws.CalSolo:this.wsObj=ws.WebSuite);return this.wsObj},initialize:function(){try{Config.LogStatistics&&(this.isRecordTimingData=!0),ws.CalSolo?ws.CalSolo._initializeSolo():ws.WebSuite._initialize()}catch(C){window.DisplayAppLoadError&&DisplayAppLoadError(C)}},_initializeSolo:function(a){this.standaloneCalendar=this.initialized=!0;this.hideLoadingCurtain();this.scrollbarWidth||(this.scrollbarWidth=ws.html.getScrollbarWidth());a={modelType:"event"};if(0<document.location.toString().toLowerCase().indexOf("/anon/")){a.isAnonymous=
!0;var b=document.location.search,b=b.substring(b.indexOf("?")+1,b.length),b=e.queryToObject(b),d=b.calid;if(d)a.anonymousCalid=d;else if(d=b.encalid)a.anonymousCalid=ws.encoding.decode64(d);b.t&&(a.anonymousTicket=b.t)}else a.isAnonymous=!1;ws.CalSolo.isAnonymous=a.isAnonymous;this.theCalendarModel=new u(a);setTimeout(f.hitch(this,"deferredInit"),100);ws.browser.addOnBeforeUnload(this,"onBeforeUnload");this.initGlobalUIPrefs();this.deferredInitHandle=f.connect(this.theMailModel,"modelUpdated",this,
"deferredInit");a=f.byId("NavigationWidget");a.setAttribute("data-dojo-type","ws/calendar/CNavigation");this.Navigation=l.construct(v,a);this.Navigation.startup();this.Navigation.setCalendarModel(this.theCalendarModel);this.Navigation.searchCalendarCB=f.hitch(this,"calendarSearch");this.NavSplitter=null;f.query("#ws_navsplitter").style("display","none");this.ViewWidget=l.construct(A,f.byId("ws_view"));this.ViewWidget.startup();f.addClass(f.body(),"spacing"+(0==Settings.ListSpacingType?this.getAutoSpacingType():
this.heightMode));this.initializeSizing();this.HatWidget=l.construct(I,f.byId("HatWidget"));this.HatWidget.startup();this.HatWidget.openSettingsCB=f.hitch(this,"openSettings");this.FooterWidget=l.construct(J,f.byId("FooterWidget"));this.FooterWidget.startup();window.wsBaseTip=f._toDom("\x3cdiv class\x3d'instatipCntr' style\x3d'visibility:hidden'\x3e\x3cdiv id\x3d'instatip'\x3e\x3c/div\x3e\x3cdiv class\x3d'instatipArrow'\x3e\x3csvg class\x3d'svgIcon'\x3e\x3cuse xlink:href\x3d'#iconPointer'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\x3c/div\x3e");
f.body().appendChild(window.wsBaseTip);this.Navigation.modifyNavDatePicker();this.Navigation.showCalendar(!0);this.HatWidget.showSoloLogo()},setMailModel:function(a){this.theMailModel=a;null!=a&&(this.mailModelLoaded=!0)},_initialize:function(){this.initialized=!0;Settings.AccountMigratedToOath&&(Config.DisplayNamePromotionDialog=!1);"f"===ws.io.getQueryParameter("ac")&&this.updateCtCookieValue(!0);this.asyncDlgMgr={dlgPrioityReports:[null,null,null],isPending:function(a){return null==a},isNoShow:function(a){return"boolean"===
typeof a&&!1===a},isShowDlgCB:function(a){return"function"===typeof a&&"function"===typeof a.call},checkToShowDlg:function(a){if(null!=this.dlgPrioityReports)for(var b=0;b<this.dlgPrioityReports.length;b++){var d=this.dlgPrioityReports[b];if(this.isShowDlgCB(d)){d.call();this.dlgPrioityReports=null;break}else if(!a&&this.isPending(d))break}},reportPriority:function(a,b){null!=this.dlgPrioityReports&&(this.isNoShow(a)?this.dlgPrioityReports[b]=!1:this.isShowDlgCB(a)&&(this.watchDog||(this.watchDog=
setTimeout(f.hitch(this,function(){this.checkToShowDlg(!0)}),6E3)),this.dlgPrioityReports[b]=a),this.checkToShowDlg(!1))},setExternalNotificationDlg:function(a){this.reportPriority(a,1)},setInforOfferDialog:function(a){this.reportPriority(a,2)}};window._ws_theme.hideLoadingCurtain();this.scrollbarWidth||(this.scrollbarWidth=ws.html.getScrollbarWidth());this.theMailModel=ws.bootstrap.theMailModel;this.theMailModel.isLoading()?this.deferredInitHandle=f.connect(this.theMailModel,"modelUpdated",this,
"deferredInit"):setTimeout(f.hitch(this,"deferredInit"),100);f.connect(this.theMailModel,"inboxTypeUpdated",this,"inboxTypeUpdated");this.currentFolder=this.theMailModel.getInboxFolderName();ws.browser.addOnBeforeUnload(this,"onBeforeUnload");this.appInfo=this.parseAppQueryString(ws.io.getQueryParameter("app")||ws.io.getQueryParameter("a"));this.initGlobalUIPrefs();this.Navigation=l.construct(w,f.byId("NavigationWidget"));this.Navigation.startup();this.Navigation.setMailModel(this.theMailModel);this.Navigation.searchMailCB=
f.hitch(this,"mailSearch");this.Navigation.searchCalendarCB=f.hitch(this,"calendarSearch");this.Navigation.searchContactsCB=f.hitch(this,"contactsSearch");f.connect(this.Navigation,"displayFolder",this,"displayFolder");f.connect(this.Navigation,"composeMessage",this,"composeMessage");Config.DragDropPictureAttach&&q(document.body,"dragleave,dragenter,dragover,drop",function(a){ws.html.dragEvtContainsFiles(a)&&(a.preventDefault(),a.stopPropagation())});this.setupAdsService();this.NavSplitter=l.construct(F,
f.byId("ws_navsplitter"));this.NavSplitter.startup();this.ViewWidget=l.construct(A,f.byId("ws_view"));this.ViewWidget.startup();this.NavSplitter.addSizerFunc(f.hitch(this,"splitSizer"));this.NavSplitter.addClickFunc(f.hitch(this,"splitClick"));this.SidePanel=l.construct(K,f.byId("SidePanel"));this.SidePanel.startup();4==Settings.ListSpacingType&&(this.heightMode=Settings.ListSpacingType=3,Settings.ShowMessageSnippet=!0);f.addClass(f.body(),"spacing"+(0==Settings.ListSpacingType?this.getAutoSpacingType():
this.heightMode));this.browserUpgradeNotice();this.initializeSizing();this.HatWidget=l.construct(I,f.byId("HatWidget"));this.HatWidget.startup();this.viewportSize&&(this.HatWidget.leftHat.style.height=this.viewportSize.h-10+"px");this.HatWidget.setMailModel(this.theMailModel);f.connect(this.HatWidget,"clickLogo",this,"clickLogo");this.HatWidget.openSettingsCB=f.hitch(this,"openSettings");this.FooterWidget=l.construct(J,f.byId("FooterWidget"));this.FooterWidget.startup();window.wsBaseTip=f._toDom("\x3cdiv class\x3d'instatipCntr' style\x3d'visibility:hidden'\x3e\x3cdiv id\x3d'instatip'\x3e\x3c/div\x3e\x3cdiv class\x3d'instatipArrow'\x3e\x3csvg class\x3d'svgIcon'\x3e\x3cuse xlink:href\x3d'#iconPointer'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\x3c/div\x3e");
f.body().appendChild(window.wsBaseTip);this.appInfo.app||this.parseAppQueryCmd()||this._tabSelected||(0<Config.WelcomeMessage.length&&Settings.ShowTodayAtSignIn?this.selectTab("todayPage",null,null):(this.selectTab("messageList",f.hitch(this,function(){window._ws_theme.hideLoadingCurtain()})),Settings.ShowTodayAtSignIn||ws.reporting.reportDLAction("Mail-TodayPage-OFF")));!ws.WebSuite.startupDlgDone&&Settings.SettingsConnectError?ws.widget.Dialogs.show(Config.Strings.WSSConnectErrorMessage+"\x3cp\x3e"+
Config.Strings.TheMailTeam,[Config.Strings.OK],null,{width:400}):(!ws.WebSuite.startupDlgDone&&ws.settings.loadConsolidated("FirstLogin")?(Config.WelcomeToMailTour&&this.openWelcomeFTE(),ws.settings.saveConsolidated("FirstLogin",!1)):(ws.WebSuite.startupDlgDone||this.openFriendlyNameFTE(),ws.WebSuite.startupDlgDone||this.openSignatureDialog(),ws.WebSuite.startupDlgDone?ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1):this.openInforOfferDialog()),ws.bubbleConfig.checkForBubblePins());f.isIE||f.isWebKit?
f.connect(f.body(),"onkeydown",this,"onKeyPress"):f.connect(f.doc,"onkeypress",this,"onKeyPress");ws.lang.ensureLayersLoaded(f.hitch(this,"onLayersLoaded"));this.appInfo.app&&this.selectAppQueryString(this.appInfo,f.hitch(window._ws_theme,window._ws_theme.hideLoadingCurtain));f.subscribe("ws_view-selectChild",this,"onMainStackSelect");Settings.ShowTodayAtSignIn?f.subscribe("WSDeferredInit",this,"startNotification"):this.startNotification();0<Config.LoadLayersTimeout&&setTimeout(f.hitch(this,function(){ws.lang.ensureLayersLoadedExtra(f.hitch(this,
function(){require(["ws/mail/MessageListView","ws/mail/DisplayMessageWidget","ws/mail/ComposeMessageWidget"],f.hitch(this,function(a,b,d){Config.CreateDspMsgAtStartup&&this.__ensureTabExists("displayMessage",null,!1,b);Config.CreateMsgListAtStartup&&this._ensureTabExists("messageList",null,!1,a)}))}),{layers:["DisplayMessage"]})}),Config.LoadLayersTimeout);this.checkForXobnified()},checkForXobnified:function(a,b){if(Config.XobnifiedUrl&&Settings.UserHash<Config.XobnifiedThreshold){var d=f.hitch(this,
function(a,b){if(this.pendingCallbacks){this.pendingCallbacks[a]=b;for(var d in this.pendingCallbacks)if(this.pendingCallbacks[d])this.pendingCallbacks[d]();this.pendingCallbacks=null}else b&&b()});if(this.isXobnified)d(a,b);else if(this.pendingCallbacks)this.pendingCallbacks[a]=b;else{this.pendingCallbacks={callerId:b};this.isXobnified=!1;var e={url:Config.XobnifiedUrl,withCredentials:!0,load:f.hitch(this,function(e,g){"ready"===e?(this.isXobnified=!0,d(a,b),ws.reporting.reportDLAction("Contacts-Xobnified-ready")):
"no"===e?ws.reporting.reportDLAction("Contacts-Xobnified-no"):"processing"===e?ws.reporting.reportDLAction("Contacts-Xobnified-processing"):ws.reporting.reportDLAction("Contacts-Xobnified-unknown")}),error:f.hitch(this,function(a){ws.reporting.reportDLAction("Contacts-Xobnified-error")}),timeout:5E3};M.doCXABReq(e)}}else this.isXobnified=!1},aolTStoDate:function(a){var b=null;a.length&&15<=a.length&&-1!=a.search(/[0-9]+z*$/i)&&(b=t.fromISOString(ws.string.substituteParams("{0}-{1}-{2}T{3}:{4}:{5}Z",
a.substr(0,4),a.substr(4,2),a.substr(6,2),a.substr(8,2),a.substr(10,2),a.substr(12,2))));return b},setupAdsService:function(){void 0===Settings.CMIPref_noAds?Settings.CMIPref_noAds=Settings.AdFree:Settings.CMIPref_noAds!=Settings.AdFree&&Config.CMIUseFallbackPref&&ws.settings.save({AdFree:Settings.CMIPref_noAds});Settings.CMIPref_noAds&&(Config.AdInfo={},Config.WelcomeMessage&&(Config.WelcomeMessage=Config.WelcomeMessage+(-1===Config.WelcomeMessage.indexOf("?")?"?":"\x26")+"paid\x3dtrue"),Config.EnableFullSendConfirmationPage=
!0,Config.SendConfirmationLink=Config.WelcomeMessage)},initGlobalUIPrefs:function(){3!=Settings.ToolbarButtonType&&f.addClass(f.body(),"btnLabelsOn2");Settings.ReadabilityMode&&Config.EnableReadability&&f.addClass(f.body(),"readability")},shouldUpgradeBarBeDisplayed:function(a,b){var d=null,e=ws.settings.loadConsolidated("UpgradeBarDisplayedSet")||"{}";this.UpgradeBarDisplayedSet?d=this.UpgradeBarDisplayedSet:e&&(d=f.fromJson(e));if(d){if(d.error)return!1;this.UpgradeBarDisplayedSet=d;if(!d[a]||d[a]!=
b)return!0}return!1},setUpgradeBarDisplayed:function(a,b){var d=null,e=ws.settings.loadConsolidated("UpgradeBarDisplayedSet")||"{}";this.UpgradeBarDisplayedSet?d=this.UpgradeBarDisplayedSet:e&&(d=f.fromJson(e));d&&!d.error&&(d[a]=b,ws.settings.saveConsolidated("UpgradeBarDisplayedSet",f.toJson(d)),this.UpgradeBarDisplayedSet=d)},browserUpgradeNotice:function(){function b(){var a=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/Trident\/([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&
(a=parseFloat(RegExp.$1));return a}var d=null,e=0,g=null,h=null,m=null,l=null,q=null,k=Config.Strings.FireFoxUpgradeNoticeBtn,n=!1;f.isFF?(d=Config.FireFoxUpgradeNoticeVersion,this.shouldUpgradeBarBeDisplayed("FF",d)&&(g=f.isFF,m="browser_upgrade/logo_ff.gif",l=Config.Strings.FireFoxUpgradeNoticeMsg,q=f.hitch(this,function(){this.setUpgradeBarDisplayed("FF",d)}),h=Config.FireFoxUpgradeNoticeURL)):f.isIE&&(d=Config.IEUpgradeNoticeVersion,this.shouldUpgradeBarBeDisplayed("IE",d)&&(l=b(),g=f.isIE,5==
l&&9>g&&(g=9),m="browser_upgrade/logo_ie.gif",l=Config.Strings.IEUpgradeNoticeMsg,q=f.hitch(this,function(){this.setUpgradeBarDisplayed("IE",d)}),h=Config.IEUpgradeNoticeURL));if(d)try{e=parseFloat(d)}catch(U){}0<e&&g&&g<e&&(n=!0);!n&&Config.AOLHomePageNoticeVersion&&this.shouldUpgradeBarBeDisplayed("AOL",Config.AOLHomePageNoticeVersion)&&-1==navigator.userAgent.search(new RegExp(Config.ExcludeMakeHomeRegEx))&&(d=Config.AOLHomePageNoticeVersion,m=null,l=Config.Strings.AOLHomePageNoticeMsg,k=Config.Strings.AOLHomePageNoticeBtn,
h=Config.AOLHomePageNoticeURL,q=f.hitch(this,function(){this.setUpgradeBarDisplayed("AOL",d)}),n=!0);if(n){var p=f.hitch(this,function(a){f.style(document.getElementById("browserUpgradeNoticeBarDiv"),{display:"none"});document.getElementById("ws_application").style.top="0px";this.topBarNoticeHeight=0;q();this._initializeSizing();this.browserUpgradeBar=null}),n=f.hitch(this,function(a){(a=ws.io.openWindow(h))&&a.focus();p()});document.getElementById("ws_application").style.top="30px";this.topBarNoticeHeight=
30;e=document.createElement("div");e.id="browserUpgradeNoticeBarDiv";f.style(e,{position:"absolute",top:"3px",left:"0px",right:"0px",height:"27px",lineHeight:"24px"});f.style(e,{background:"url('"+Config.BaseImagesURL+"browser_upgrade/bg_tile.gif') top left repeat-x"});g=this.browserUpgradeBar=new E({vizType:"Bare"});g.startup();if(m){var u=new a({toolbarPosition:"center"});f.style(u.domNode,{width:"27px",height:"27px"});var t=document.createElement("img");f.style(t,{position:"relative",top:"-2px",
cursor:"pointer",border:"0"});t.src=Config.BaseImagesURL+m;t.onclick=n;u.domNode.appendChild(t);g.addToolbarItem(u)}m=new a({toolbarPosition:"center"});f.style(m.domNode,{color:"#333",fontFamily:"arial",fontSize:"12px",cursor:"pointer"});m.domNode.innerHTML="\x26nbsp;\x26nbsp;"+l+"\x26nbsp;\x26nbsp;\x26nbsp;";m.domNode.onclick=n;g.addToolbarItem(m);l=new z({toolbarPosition:"center",size:"Small"});l.domNode.style.height="12px";l.containerNode.style.padding="0px";l.containerNode.style.lineHeight="13px";
l.setLabel("\x26nbsp;\x26nbsp;"+k+"\x26nbsp;\x26nbsp;");l.onClick=n;l.startup();g.addToolbarItem(l);k=new a({toolbarPosition:"right"});k.domNode.innerHTML="\x3csvg class\x3d'svgIcon'\x3e\x3cuse xlink:href\x3d'#iconClose'\x3e\x3c/use\x3e\x3c/svg\x3e";f.addClass(k.domNode,"wsCloseBtn");f.style(k.domNode,{position:"absolute",top:"3px",right:"11px","float":"none",border:"0"});k.domNode.onclick=p;g.addToolbarItem(k);e.appendChild(g.domNode);document.body.appendChild(e);g.layout()}},startNotification:function(){!this.externalNotificationInitilized&&
Config.EnableNotification?(this.externalNotificationInitilized=!0,this.createExternalNotificationMessage()):!this.skipAwayMessageNotification&&Config.EnableInternalNotification&&Config.EnableVacationSettings&&(this.externalNotificationInitilizeStarted||ws.WebSuite.asyncDlgMgr.setExternalNotificationDlg(!1),Settings.AwayMessageSettingsAvailable&&"Disabled"!=Settings.AwayMessageType?(this.internalNotificationsActive=!0,this.createAwayNotificationMessage()):(this.skipAwayMessageNotification=!0,this.startNotification()))},
createAwayNotificationMessage:function(){this.notificationMsg={msg:ws.string.substituteParams(Config.Strings.AwayMessageNotification,'\x3cspan class\x3d"wsLink awayMessageOff"\x3e'+Config.Strings.AwayMessageNotificationOFF+"\x3c/span\x3e",'\x3ca class\x3d"wsLink awayMessageSettings"\x3e'+Config.Strings.AwayMessageNotificationSettings+"\x3c/a\x3e"),id:"awayMessage_1",closeX:"",timeout:"",savePref:"",type:"simplebar",callback:f.hitch(this,function(a,b){f.query(".awayMessageSettings",a)[0].onclick=f.hitch(this,
function(){this.openSettings("generalSettings",null)});f.query(".awayMessageOff",a)[0].onclick=function(){Settings.AwayMessageType="Disabled";ws.settings.save({AwayMessageType:"Disabled"});b.close()}})};f.publish("WebSuite/StartNotification")},createExternalNotificationMessage:function(){if(Config.notificationMsgs&&Config.notificationMsgs.length){for(var a=Config.notificationMsgs,b,d,e=0;e<a.length;e++){var g=a[e];if(!this.hasNotifcationBeenSeen(g.id)){if(g.date){var h=!1,m=g.date.split("|"),l="",
q="";2==m.length&&(m[0]&&(l=t.fromISOString(m[0])),m[1]&&(q=t.fromISOString(m[1])));m=t.fromISOString(Settings.time_UTC_ISO);l&&q?h=!(0<n.difference(l,m,"minute")&&0<n.difference(m,q,"minute")):l?h=!(0<n.difference(l,m,"minute")):q&&(h=!(0<n.difference(m,q,"minute")));if(h)continue}h=function(a,b){var d=99999,e=99999;try{d=parseInt(a.priority),e=parseInt(b.priority)}catch(U){}return d>e?b:a};switch(g.type){case "simplebar":b=b?h(b,g):g;break;case "modal":d=d?h(d,g):g}}}a=!0;!d||ws.settings.loadConsolidated("FirstLogin")||
ws.WebSuite.startupDlgDone?ws.WebSuite.asyncDlgMgr.setExternalNotificationDlg(!1):ws.WebSuite.asyncDlgMgr.setExternalNotificationDlg(f.hitch(this,function(){ws.widget.ModalNotification.setup(d)}));b&&(this.notificationMsg=g=b,f.publish("WebSuite/StartNotification"),a=!1);a&&this.startNotification()}else ws.WebSuite.asyncDlgMgr.setExternalNotificationDlg(!1),this.startNotification()},hasNotifcationBeenSeen:function(a){return Settings.AccountMigratedToOath?ws.settings.loadConsolidated(a):!1},setNotificationsSeenIds:function(a){Settings.AccountMigratedToOath&&
ws.settings.saveConsolidated(a)},_showNotification:function(a){"todayPage"!=a.id&&"messageList"!=a.id||!a.notification||null==this.tabNotificationShown||("messageList"==a.id&&this.tabNotificationShown[a.id]?(a.model.getSearchString()?a.notification&&a.notification.hide():a.notification&&a.notification.show(),a.layoutWidget.resize()):this.tabNotificationShown[a.id]||(this.internalNotificationsActive?(this.tabNotificationShown[a.id]=a,a.notification.msg.innerHTML=this.notificationMsg.msg,a.notification.alertTxt.innerHTML=
this.notificationMsg.alertTxt||Config.Strings.NotificationHeadsUp,a.notification.closeBtn.style.display=this.notificationMsg.isCloseable?"":"none",this.notificationMsg.extraClassName&&f.addClass(a.notification.domNode,this.notificationMsg.extraClassName),this.notificationMsg.callback&&this.notificationMsg.callback(a.notification.msg,a.notification),a.notification.show(),a.layoutWidget.resize(),f.subscribe("WebSuite/CloseNotification",this,"closeAllNotifications"),f.subscribe("Settings/hide",this,
function(){this.internalNotificationsActive&&null!=Settings.AwayMessageType&&"Disabled"==Settings.AwayMessageType&&this.closeAllNotifications()})):Config.EnableNotification&&(this.tabNotificationShown[a.id]=a,a.notification.setup(this.notificationMsg),a.notification.show(),a.layoutWidget.resize(),f.subscribe("WebSuite/CloseNotification",this,"closeAllNotifications"))))},showNotification:function(a){this.notificationMsg?this._showNotification(a):f.subscribe("WebSuite/StartNotification",f.hitch(this,
function(a){this._showNotification(a)},a))},closeAllNotifications:function(){if(this.tabNotificationShown)for(var a=["todayPage","messageList"],b=0;b<a.length;b++){var d=a[b];d&&this.tabNotificationShown[d]&&(d=this.tabNotificationShown[d],d.notification&&d.notification.hide(),d.layoutWidget.resize())}this.tabNotificationShown=null},openWelcomeFTE:function(){ws.bubbleConfig.welcomeDialogIsShown=!0;this.ensureStartupPromoLayer(f.hitch(this,function(){require(["ws/suite/WelcomeDialog"],f.hitch(this,
function(a){(new a).startup()}))}));ws.WebSuite.startupDlgDone=!0},openFriendlyNameFTE:function(){Config.DisplayNamePromotionDialog&&!ws.settings.loadConsolidated("IsFriendlyNameDlgDisplayed")&&Settings.UserHash>=Config.AllowedUserRangeForFriendlyNameDlg&&Settings.IsAuthUser&&(this.ensureStartupPromoLayer(f.hitch(this,function(){require(["ws/suite/FriendlyNameDialog"],f.hitch(this,function(a){(new a({fromName:Settings.UserFullName})).startup()}))})),ws.WebSuite.startupDlgDone=!0)},openSignatureDialog:function(){!ws.settings.loadConsolidated("SignatureDlgDisplayed")&&
Settings.UserHash>=Config.SignatureDlgThreshold&&(Settings.Signature?ws.settings.saveConsolidated("SignatureDlgDisplayed",!0):(this.ensureStartupPromoLayer(f.hitch(this,function(){require(["ws/suite/SignatureDialog"],f.hitch(this,function(a){(new a).startup()}))})),ws.WebSuite.startupDlgDone=!0))},global_InforOfferActionHandler:function(a,b){ws.WebSuite.inforOfferDlg&&ws.WebSuite.inforOfferDlg.contentAction(a,b)},openInforOfferDialog:function(){function a(){var a=!1;Settings.AccountMigratedToOath&&
!ws.settings.loadConsolidated("FirstInforSeen")&&(a=!0,ws.settings.saveConsolidated("FirstInforSeen",!0));a={devId:Config.WIMKey,ChannelId:"Webmail",RequestData:JSON.stringify({pageContext:Config.InforOfferPageContext,requestFirstOffer:a}),_content:!0};Config.InforOfferServer2&&Settings.UserHash>=Config.InforOfferThreshold2&&(Config.InforOfferServer=Config.InforOfferServer2);a={url:Config.InforOfferServer+Config.InforOfferGetURL,timeout:Config.InforOfferGetTimeout,handleAs:"json",withCredentials:!0,
content:a,load:f.hitch(this,function(a){if(a&&a.status&&0===a.status.code)if(a.data&&a.data.offers&&a.data.offers.length)for(var b=!0,d=0;d<a.data.offers.length;d++){var e=a.data.offers[d],g=e.Name;"targeting"===e.OfferType&&"webmail_lb_ad_free_mail_bubble"===e.Name?ws.WebSuite._ad_free_mail_bubble=!0:a.data.content&&a.data.content[g]&&a.data.content[g].additionalAttributeMap&&a.data.content[g].additionalAttributeMap.infor_content_id?b&&a.data.content[g].additionalAttributeMap.infor_hero_webmail?
(0<=Config.InforOfferExcludedIds.indexOf("|"+g+"|")&&ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1),b=!1,ws.WebSuite.asyncDlgMgr.setInforOfferDialog(f.hitch(this,function(b){var d=a.data.content[b].additionalAttributeMap.infor_hero_webmail,d=d.replace(/\r?\n|\r/g,""),d=d.replace(/\\"/g,'"');ws.WebSuite.inforOfferDlg=new R({offerName:b});ws.WebSuite.inforOfferDlg.startup();ws.WebSuite.inforOfferDlg.setContent(d);ws.WebSuite._ad_free_mail_bubble_canceled=!0},g))):ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1):
ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1)}else ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1);else ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1)}),error:function(a){ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1)}};f.xhrPost(a)}window._InforOfferActionHandler=this.global_InforOfferActionHandler;window.offer1=this.global_InforOfferActionHandler;Settings.UserHash>=Config.InforOfferThreshold?a():ws.WebSuite.asyncDlgMgr.setInforOfferDialog(!1)},ensureStartupPromoLayer:function(a){var b=f.hitch(this,
function(){this.startupPromoLayerLoad=!0;a&&a()});dojoConfig.isCustom?require(["release/StartupPromoDlgs"],b):b()},formatError:function(a,b){var d="category fileName lineNumber message info stack".split(" ");b&&(d="category fileName lineNumber message info T stack".split(" "));var e="";f.forEach(d,function(d){var g=!0;if(a[d]){switch(d){case "category":b&&(g=!1);e+="Category: "+a[d];break;case "fileName":b&&(g=!1);e+="File: "+a[d];break;case "lineNumber":b&&(g=!1);e+="Line Number: "+a[d];break;case "message":b&&
(g=!1);e+="Message: "+a[d];break;case "info":b&&(g=!1);e+="Additional Info: "+a[d];break;case "T":b&&(e+="Time(mSec from start): "+a[d]);break;case "stack":"string"==typeof a[d]&&(e+="Call Stack:\x3cdiv style\x3d'padding-left:10px;'\x3e",e+=ws.string.escapeXml(a[d])+"\x3cbr /\x3e",e+="\x3c/div\x3e")}e+=g?"\x3cbr /\x3e":";  "}});return e},qaErrorConsoleToggle:function(a){a&&"none"==this.qaErrConsoleNode.style.display?(this.qaErrConsoleNode.style.display="block",this.qaErrConsoleHeight=70,this.resize()):
a||"block"!=this.qaErrConsoleNode.style.display||(this.qaErrConsoleNode.style.display="none",this.qaErrConsoleHeight=0,this.resize())},qaErrorConsole:function(a){if(Config.QaErrorConsole)if(!this.firstResize)this.queErrors||(this.queErrors=[]),this.queErrors.push(a);else if(!this.qaErrConsolePause&&!this.qaErrConsoleDisabled){if(!this.qaErrConsoleNode){this.qaErrConsoleCount=1;this.qaErrConsoleNode=document.createElement("div");this.qaErrConsoleNode.style.display="none";f.addClass(this.qaErrConsoleNode,
"qaErrConsoleNode");document.body.appendChild(this.qaErrConsoleNode);this.qaErrConsole=document.createElement("div");f.addClass(this.qaErrConsole,"qaErrConsole");this.qaErrConsoleNode.appendChild(this.qaErrConsole);var b=document.createElement("div");b.innerHTML="\x3cdiv\x3eWebSuite QA Error Console\x3c/div\x3e";f.addClass(b,"info");this.qaErrConsoleNode.appendChild(b);var d=document.createElement("span");d.innerHTML="Clear";d.onclick=f.hitch(this,function(){this.qaErrConsole.innerHTML="";this.qaErrConsoleCount=
1});f.addClass(d,"qaLink");b.appendChild(d);d=document.createElement("span");d.innerHTML="Close";d.onclick=f.hitch(this,function(){this.qaErrorConsoleToggle(!1)});f.addClass(d,"qaLink");b.appendChild(d);d=document.createElement("br");b.appendChild(d);var e=document.createElement("span");e.innerHTML="Pause";e.onclick=f.hitch(this,function(){this.qaErrConsolePause=!this.qaErrConsolePause;e.innerHTML=this.qaErrConsolePause?"Resume":"Pause"});f.addClass(e,"qaLink");b.appendChild(e);d=document.createElement("span");
d.innerHTML="Disable (for session)";d.onclick=f.hitch(this,function(){this.qaErrorConsoleToggle(!1);this.qaErrConsoleDisabled=!0});f.addClass(d,"qaLink");b.appendChild(d)}this.qaErrorConsoleToggle(!0);this.qaErrConsole.innerHTML+="\x3cb\x3e"+this.qaErrConsoleCount+")\x3c/b\x3e ";this.qaErrConsoleCount++;this.qaErrConsole.innerHTML+=ws.WebSuite.formatError(a,!0);this.qaErrConsole.scrollTop=999999}},promoteTheme:function(a){ws.reporting.reportDLAction("Promote-PromoTheme");this.selectTab("messageList",
f.hitch(this,function(){window._ws_theme.hideLoadingCurtain();this.HatWidget&&this.HatWidget.themePicker&&window._ws_theme.isActive(a)?this.HatWidget.themePicker.openThemePickerDialog(a.toUpperCase(),!0):ws.widget.Dialogs.ok(Config.Strings.Themes_NoThemesInConfig)}))},promoteStationery:function(a){ws.reporting.reportDLAction("Promote-PromoStationery");1===Settings.ComposeMode?this.selectTab("messageList",f.hitch(this,function(){window._ws_theme.hideLoadingCurtain();this.PopupComposeTip||ws.lang.ensureLayersLoaded(f.hitch(this,
function(){this.PopupComposeTip=new B({name:"StationeryPopupCompose",content:ws.string.substituteParams(Config.Strings.PopupComposeStationeryTip,"\x3ca href\x3d'javascript:void(0)' style\x3d'font-weight: bold'\x3e","\x3c/a\x3e"),positionOverNode:ws.WebSuite.HatWidget.optionsLink,arrowPosition:"top",distanceArrowFromEdge:270,dimensions:{w:240},offset:{x:-260,y:25},saveAsSeenOnClose:!1});f.body().appendChild(this.PopupComposeTip.domNode);this.PopupComposeTip.startup();f.query("a",this.PopupComposeTip.domNode).onclick(function(){ws.WebSuite.openSettings("generalSettings")});
this.PopupComposeTip.showTip();ws.WebSuite.targetStationery=a}))})):this.selectTab("composeMessage",f.hitch(this,function(b){window._ws_theme.hideLoadingCurtain();b.reset({targetStationery:!0},function(){b.launchStationery(a)})}))},promoteSuite:function(a){var b="\x3cb\x3e"+Config.Strings.SuitePromotionHeader+"\x3c/b\x3e\x3cbr\x3e\x3cul style\x3d'margin:5px; padding-left:20px'\x3e",d=null,e=null,g=null,h;for(h in a)if(a[h][1])switch(a[h][0]){case "tid":window._ws_theme&&(a[h][4]&&(g=a[h][4]),d=a[h][1].toUpperCase());
break;case "sid":var m=a[h][1];a[h][4]&&(m=a[h][4]);b+="\x3cli\x3e";b=1===Settings.ComposeMode?b+ws.string.substituteParams(Config.Strings.SuitePromotionStationeryPopup,m,m,"\x3ca href\x3d'javascript:void(0)' class\x3d'changeComposeSetting'\x3e","\x3c/a\x3e\n"):b+ws.string.substituteParams(Config.Strings.SuitePromotionStationery,m);b+="\x3c/li\x3e";e=a[h][1]}var l=f.hitch(this,function(a,b,d){e&&1!==Settings.ComposeMode?this.selectTab("composeMessage",f.hitch(this,function(g){this._promoteSuite(a,
b,d);g.reset({targetStationery:!0});g.launchStationery(e,!0)})):this.selectTab("messageList",f.hitch(this,function(){this._promoteSuite(a,b,d)}))});null!=d?window._ws_theme&&window._ws_theme.loadTheme(d,f.hitch(this,function(a){if(a==d){this.HatWidget.themePicker.changeTheme(a);var h=a;g?h=g:window._ws_theme.themeData&&window._ws_theme.themeData[a]&&window._ws_theme.themeData[a].label&&(h=window._ws_theme.themeData[a].label);b+="\x3cli\x3e";b+=ws.string.substituteParams(Config.Strings.SuitePromotionTheme,
h,"\x26nbsp;\x26nbsp;\x3ca href\x3d'javascript:void(0)' class\x3d'changeTheme'\x3e","\x3c/a\x3e\n");b+="\x3c/li\x3e"}l(b,d,e)})):l(b,d,e)},_promoteSuite:function(a,b,d){window._ws_theme.hideLoadingCurtain(a);ws.lang.ensureLayersLoaded(f.hitch(this,function(){this._showSuitePromotionTip(a,b);b&&this.HatWidget.themePicker.saveTheme()}))},_showSuitePromotionTip:function(a,b){this.SuitePromotionTip||(this.SuitePromotionTip=new B({name:"SuitePromotionTip",content:a,positionOverNode:ws.WebSuite.HatWidget.optionsLink,
arrowPosition:"top",distanceArrowFromEdge:270,dimensions:{w:240},offset:{x:-260,y:25},saveAsSeenOnClose:!1}),f.body().appendChild(this.SuitePromotionTip.domNode),this.SuitePromotionTip.startup(),f.query(".changeTheme",this.SuitePromotionTip.domNode).onclick(function(){ws.WebSuite.HatWidget.themePicker.openThemePickerDialog(b,!1)}),f.query(".changeComposeSetting",this.SuitePromotionTip.domNode).onclick(function(){ws.WebSuite.openSettings("generalSettings")}));this.SuitePromotionTip.showTip()},parseAppQueryCmd:function(){var a=
ws.bootstrap.parseAppQueryCmd(),b=a.cmds,a=a.cmdMap;if(1<b.length)return this.promoteSuite(a),!0;if(1==b.length){var d=a[b[0]][1];f.hitch(this,a[b[0]][2])(d);return!0}return!1},onLayersLoaded:function(){var a=ws.io.getQueryParameter("app")||ws.io.getQueryParameter("a"),b=!1;if("ab"==a||"abook"==a||"addresses"==a)b=!0;require(["ws/address/AddressModel","ws/calendar/CalendarViewModel"],f.hitch(this,function(a,d){this.theAddressModel=new a({sortable:!0,fullTextSearchable:!0,fetchDataOnInit:b});this.Navigation.setContactsModel(this.theAddressModel);
this.theCalendarModel=new d({modelType:"event"});this.Navigation.setCalendarModel(this.theCalendarModel)}))},getCurrentViewId:function(){return this.ViewWidget?this.ViewWidget.selectedChildWidget?this.ViewWidget.selectedChildWidget.id:null:null},hideLoadingCurtain:function(){this.reportThemeOnLoad||(ws.reporting.reportDLAction("Mail-ThemeOnLoad-"+(window._ws_theme&&window._ws_theme.currentThemeId?window._ws_theme.currentThemeId:Config.ThemeDefault)),this.reportThemeOnLoad=!0);var a=f.byId("loadingCurtain");
a&&(a.style.display="none",f.destroy(a))},deferredInit:function(){f.disconnect(this.deferredInitHandle);setTimeout(f.hitch(this,function(){f.publish("WSDeferredInit");this.deferredInitComplete=!0}),100);var a="Initial View";_ws_theme&&_ws_theme.currentThemeId&&(a="Initial View - "+(_ws_theme.randomThemeEnabled?"Random Theme: ":"Theme: ")+_ws_theme.currentThemeId);ws.reporting.report(a,"Init");"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints&&ws.reporting.reportDLAction("STD: Tablet","Init");
this.isAnonymous||this.standaloneCalendar||(this.appInfo&&"filterSettings"!=this.appInfo.target&&ws.Jws.getMailFilters(),ws.WebSuite.theMailModel.folders||ws.Jws.checkMostRecent());"f"==ws.io.getQueryParameter("ac")&&ws.settings.save({WSLAccessibilityRedirect:0})},initializeSizing:function(){f.connectPublisher("wsresize",ws.WebSuite,"resize");f.subscribe("WSSessionExpired",ws.WebSuite,"handleExpiredSession");this.standaloneCalendar?this.navSplitterWidth=0:(this.NavSplitterEl=f.byId("ws_navsplitter"),
this.navSplitterWidth=this.NavSplitter.splitterWidth);this._initializeSizing();f.connect(window,"onresize",this,"windowResize");ws.browser.ipad&&f.connect(window,"onorientationchange",this,"windowResize");f.subscribe("Splitter/resize",this,"splitterResize")},_initializeSizing:function(){this.hatHeight=70;this.resize();this.firstResize=!0;if(this.queErrors&&this.queErrors.length){for(;this.queErrors.length;){var a=this.queErrors.shift();this.qaErrorConsole(a)}this.queErrors=null}},displayFolder:function(a,
b){var d=this.theMailModel.currentFolder;this.selectTab("messageList",f.hitch(this,function(e){e.displayFolder(a,null,null,b);ws.reporting.report(d==a?"Message List":"Switch Folder","Mail")}))},clickLogo:function(){var a=!1,b=this.settingsWidget;b&&b.isShowing()&&(b.onExitSettings(null,!0),a=!0);0<Config.WelcomeMessage.length?this.showTodayPage(a):this.selectTab("messageList",f.hitch(this,function(b){var d=this.theMailModel.getInboxFolderName();b.displayFolder(d);a||ws.reporting.report("Message List",
"Mail")}))},checkMail:function(){var a=this.settingsWidget;if(a&&a.isShowing())a.onExitSettings(null,!0);this.selectTab("messageList",f.hitch(this,function(a){var b=this.theMailModel.getInboxFolderName();a.displayFolder(b,null,null,null,!0);this.ViewWidget.selectedChildWidget.show();this.ViewWidget.selectedChildWidget.onShow(!0)}));f.publish("Hat/CheckMail")},handleComet:function(a){this.theMailModel.refetchFolderIndex(a.data.folder_name)},displayContactListView:function(a,b){this.selectTab("AddressList",
function(d){d.backToList(a,b);d.scrollToRow(0);d.searchTimer&&clearTimeout(d.searchTimer);"string"!=typeof b&&(b=void 0);d.search(b)})},displayNewContactView:function(a){this.Navigation.searchActive(!1);this.selectTab("AddressList",function(b){var d=h.byId("AddressList");d&&(d.clearSearch(),d.updateSearchInfo());b.selectView("editContactWidget",!1,!0);b.editContactWidget.showContact(null,null,!0);a&&(b.editContactWidget.email1Input.value=a)})},displayNewDistListView:function(){this.selectTab("AddressList",
function(a){a.newDistributionList()})},setLastReadMsg:function(a,b){this.lastReadMsg={folder:a,uid:b}},previewPaneToLastReadMsg:function(a){if(Settings.EnablePreviewPane&&Settings.PreviewPaneVisible&&a.previewPane&&this.lastReadMsg){var b=this.lastReadMsg.folder,d=this.lastReadMsg.uid;a.model.currentFolder==b&&a.previewPane.uid==d?ws.reporting.report("Read Message -  Preview Pane","Mail"):a.model.currentFolder!=b?a.model.deselectAll():a.previewMessage(d,!1,!0,!0)}},openMessage:function(a,b,d,e){d=
ws.settings.allowPopups()&&(d||Settings.ReadInPopup);this.theMailModel.getUidData(b);d?this._openMessagePopup(a,b):setTimeout(f.hitch(this,"_openMessageInline",a,b),100)},_openMessagePopup:function(a,b){this.theMailModel.getUidData(b);window.openerContext={model:this.theMailModel,folder:a,uid:b,Settings:Settings,undoFeedbackPopup:f.hitch(this,"undoFeedbackPopup"),calendarDataUpdated:f.hitch(this,"calendarDataUpdated"),webSuite:ws.WebSuite,jwsData:{wssid:ws.Jws.jwsData.wssid,mboxId:ws.Jws.jwsData.mboxId,
baseMailboxUrl:ws.Jws.jwsData.baseMailboxUrl}};ws.WebSuite.lastReadPopUp=ws.io.openWindow(Config.BaseMailPagesURL+"DisplayMessage?ws_popup\x3dtrue\x26ws_suite\x3dtrue","","status\x3dyes,resizable\x3dyes,left\x3d5,top\x3d5,width\x3d885,height\x3d606",null,b)},calendarDataUpdated:function(a){f.publish("CalendarViewModel/modelUpdated",[a])},_openMessageInline:function(a,b){this.displayMessageBackTo="AddressList"==this.ViewWidget.selectedChildWidget.id?"AddressList":"messageList";this._ensureTabExists("displayMessage",
f.hitch(this,function(d){d.displayMessage(a,b,f.hitch(this,function(){this.selectTab("displayMessage")}))}))},hideMessage:function(a,b,d,e){var g=this.displayMessageBackTo;this.selectTab(this.displayMessageBackTo,f.hitch(this,function(){if("messageList"==g&&(a||ws.reporting.report("Message List","Mail"),setTimeout(function(){var a=h.byId("messageList");-1!=b&&a.scrollIntoView(b)},0),d)){var f=h.byId("messageList");Settings.EnablePreviewPane&&Settings.PreviewPaneVisible&&(e?f.model.deselectAll():f.previewMessage(d,
!1,!0,!0))}}))},setDispMessageSafe:function(a,b){this.safeMsgMap||(this.safeMsgMap={});this.safeMsgMap[a]||(this.safeMsgMap[a]=0);this.safeMsgMap[a]=b?this.safeMsgMap[a]|1:this.safeMsgMap[a]|2},isDispMessageSafe:function(a,b){var d=!1;this.safeMsgMap&&this.safeMsgMap[a]&&(d=b?1==(this.safeMsgMap[a]&1):2==(this.safeMsgMap[a]&2));return d},undoFeedbackPopup:function(a,b,d,e,g){g=null;switch(a){case "Move":g=e&&"string"==typeof e?f.hitch(this.theMailModel,"undoMoveMessages",b):null;break;case "Delete":g=
e&&"string"==typeof e?f.hitch(this.theMailModel,"undoMoveMessages",b):null;break;default:g=null}f.publish("WSFeedbackStart",[d,!0,g])},_restoreMessage:function(a){"string"==typeof a&&(a=[].concat(a));this.theMailModel.restoreMessages({uids:a,folder:Config.DeletedItemsFolderName,load:f.hitch(this,function(a){this.theMailModel.refetchFolderIndex(this.theMailModel.currentFolder);f.publish("WSFeedbackStart",[Config.Strings.MessageRestored,!0])}),error:function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,
"Dialogs.ok shown - Error Handler for theMailModel.restoreMessages-_restoreMessage",a,"WebSuite.js");ws.widget.Dialogs.ok(a||Config.Strings.ErrorRestoring)}})},composeMessage:function(a){this._composeMessage(a);f.publish("Hat/ComposeMessage")},_composeMessage:function(a,b,d){b="number"==typeof b?b:Settings.ComposeMode;var e=a&&(a.ctrlKey||f.isMac&&a.metaKey);if(ws.settings.allowPopups()&&(e||1===b))this.popupCompose(f.hitch(this,function(a){h.byId("AddressList")?a.reset(this.getContacts()):a.reset()}));
else if(2===b)this.showToastCompose(f.hitch(this,function(a){this.composeSrc="messagelist";h.byId("AddressList")?a.reset(this.getContacts()):a.reset();a.resize();d&&d(a)}));else{var g=!1;(b=this.settingsWidget)&&b.isShowing()&&(b.onExitSettings(null,!0,!0),g=!0);this.composeSrc="messagelist";this.selectTab("composeMessage",f.hitch(this,function(a){var b;h.byId("AddressList")?(b=this.getContacts(),ws.WebSuite.targetStationery&&(b.targetStationery=!0),a.reset(b),this.unselectContacts()):(b={backToString:"setFolder",
skipComposeBeacon:g},ws.WebSuite.targetStationery&&(b.targetStationery=!0),a.reset(b));ws.WebSuite.targetStationery&&a.launchStationery(ws.WebSuite.targetStationery);d&&d(a)}))}a&&a.preventDefault()},setSelectedStationery:function(a){},getCompose:function(a,b,d){(1===Settings.ComposeMode||d)&&ws.settings.allowPopups()?this.popupCompose(b):2===Settings.ComposeMode?this.showToastCompose(f.hitch(this,function(d){this.composeSrc=a;b(d)})):ws.lang.ensureLayersLoaded(f.hitch(this,function(){this.selectTab("composeMessage",
f.hitch(this,function(d){this.composeSrc=a;b(d)}))}))},getOpenCompose:function(){var a=null;if(this.toastCompose&&this.toastComposeWidget)a=this.toastComposeWidget;else{var b=h.byId("composeMessage");b&&this.isComposeFullPaneOpen()&&(a=b)}return a},isComposeFullPaneOpen:function(){return"composeMessage"==this.getCurrentViewId()},getContacts:function(){var a={backToString:"setFolder"};if(h.byId("AddressList").model.getSelectedUids().length){for(var b=h.byId("AddressList"),d=b.model.getSelectedUids(),
e=null,g=e="",f=0;f<d.length;f++)(e=b.model.getRecordByUID(d[f]))&&(e=e.getFirstEmail())&&(g+=e+", ");g&&(a.to=g,a.isDirty=!0)}return a},unselectContacts:function(){this.theAddressModel&&this.theAddressModel.deselectAll()},isComposeInTransition:function(){return this.isComposeFullPaneOpen()&&h.byId("composeMessage").inTransition},openDraftInFullPane:function(a,b){this._composeMessage(null,b,a,!0)},destroyToastCompose:function(){this.toastCompose&&document.body.removeChild(this.toastCompose);this.toastCompose=
null;this.toastComposeWidget&&this.toastComposeWidget.destroyRecursive();this.toastComposeWidget=null},getToastHeight:function(){var a=document.getElementById("ws_application"),a=m.position(a),a=Math.min(600,.8*a.h);210>a&&(a=0);return a},updateToastComposePosition:function(a){if(this.toastCompose&&this.toastComposeWidget){var b=20,d=0,e=this.getToastHeight();if(this.SidePanel&&!this.SidePanel.isClosed()){var g=document.getElementById("ws_application"),h=document.getElementById("ws_view");h&&g&&(b=
m.position(g),h=m.position(h),b=Math.max(b.w-(h.x+h.w),0)+20)}0!=e||this.toastComposeWidget.isToastComposeMinimized||this.toastComposeWidget.toastComposeMinimize();this.toastComposeWidget.isToastComposeMinimized?(this.toastCompose.style.height="30px",b=d=0):(this.toastCompose.style.height=e+"px",a||this.toastComposeWidget.layout());this.toastCompose.style.right=b+"px";this.toastCompose.style.bottom=d+"px"}},showToastCompose:function(a){ws.lang.ensureLayersLoadedExtra(f.hitch(this,function(){require(["ws/mail/MessageListView",
"ws/mail/DisplayMessageWidget","ws/mail/ComposeMessageWidget"],f.hitch(this,function(b,d,e){b=f.hitch(this,function(){try{if(!this.toastCompose){this.toastCompose=document.createElement("div");document.body.appendChild(this.toastCompose);var b=document.createElement("div");this.toastCompose.appendChild(b);f.addClass(this.toastCompose,"toastComposeDiv");var d=new e({model:this.theMailModel,cancelCB:f.hitch(this,function(a,b,d,e){e&&e.confirmClose&&e.confirmClose(f.hitch(this,function(){this.destroyToastCompose()}))}),
sendSuccessCB:f.hitch(this,function(){f.publish("WSFeedbackStart",[Config.Strings.ComposeSentTitle,!0])}),composeCompleteCleanup:f.hitch(this,function(){this.destroyToastCompose()}),beaconSuffix:"",isToaster:!0},b);f.style(d.domNode,{position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px","background-color":"#fff"});d.startup();this.toastComposeWidget=d}this.toastComposeWidget&&this.toastComposeWidget.isToastComposeMinimized&&this.toastComposeWidget.toastComposeRestore();a&&a(this.toastComposeWidget);
ws.reporting.reportDLAction("Mail-Compose-Toaster");this.updateToastComposePosition()}catch(T){}});this.toastCompose&&this.toastComposeWidget&&this.toastComposeWidget.confirmClose?this.toastComposeWidget.confirmClose(b):this.isComposeFullPaneOpen()?this.selectTab("messageList",b):b()}))}),{layers:["DisplayMessage"]})},popupCompose:function(a){window.composeContext={model:this.theMailModel,callback:a,jwsData:{wssid:ws.Jws.jwsData.wssid,mboxId:ws.Jws.jwsData.mboxId}};ws.io.openWindow(Config.BaseMailPagesURL+
"ComposeMessage?ws_popup\x3dtrue\x26ws_suite\x3dtrue","","status\x3dyes,resizable\x3dyes,left\x3d5,top\x3d5,width\x3d885,height\x3d606")},onBeforeUnload:function(){try{for(var a=0;a<ws.io._childWindows.length;a++)if(ws.io._childWindows[a].CM){var b=ws.io._childWindows[a].CM.composeWidget.onBeforeUnload();if(b)return b}}catch(L){}return""},resetStationery:function(){ws.WebSuite.SidePanel&&(ws.WebSuite.SidePanel.resetStationery(),ws.WebSuite.SidePanel.handleMainStackSelect())},setupSendConfirmation:function(a,
b){var d=new D({id:"sendConfirmationPage"});d&&d.id&&(a.addChild(d),a.selectChild(d),ws.WebSuite._currentTab&&(ws.WebSuite._currentTab=d.id,ws.WebSuite.sendConfirmation=d));d.setupSendConfirmation(b);this.resetStationery()},sendSuccessCB:function(a,b){ws.io.getQueryParameter("noSendConf");if("all"!=Config.EnableShowSendConfPageSetting||Settings.ShowSendConfPage){var d=a.getSendConfirmationSetUpParams();this.setupSendConfirmation(this.ViewWidget,d)}else b.push("SendConfOff"),f.publish("WSFeedbackStart",
[Config.Strings.ComposeSentTitle,!0]),a.cancel();ws.reporting.reportDLAction(b.join("-"))},hideCompose:function(a,b,d){this.composeCanceled=!0;"address"==this.composeSrc?this.selectTab("AddressList",function(){var b=h.byId("AddressList");b&&b.deSelectEmptyPane();a&&a();ws.reporting.skipBeaconReporting=!d;ws.reporting.report("Contact List","Addresses")}):"display"!=this.composeSrc||b?"calendar"==this.composeSrc?(ws.reporting.skipBeaconReporting=!d,this.Navigation.showCalendar(!0,a)):this.selectTab("messageList",
function(){a&&a();ws.reporting.skipBeaconReporting=!d;ws.reporting.report("Message List","Mail")}):this.selectTab("displayMessage",function(){a&&a();ws.reporting.report("Read Message - Inline","Mail")});this.composeCanceled=!1},clearSearch:function(){this.Navigation.clearSearch();this.closeAdvancedSearch()},setFolderHistory:function(){this.lastSelectedTab=this.getCurrentViewId();this.currentFolder=this.theMailModel.currentFolder},mailSearch:function(a,b){this.lastSelectedTab=this.getCurrentViewId();
this.currentFolder=this.theMailModel.currentFolder;this.selectTab("messageList",f.hitch(this,function(d){this.theMailModel.setFolder(this.theMailModel.getInboxFolderName(),{query:b,searchIn:a});ws.reporting.report("Search Mail","Mail")}))},contactsSearch:function(a){this.currentFolder=this.theMailModel.currentFolder;this.lastSelectedTab=this.getCurrentViewId();this.Navigation.showContacts(a)},calendarSearch:function(a,b){var d=this.getCurrentViewId();this.theMailModel&&(this.currentFolder=this.theMailModel.currentFolder);
this.lastSelectedTab=d;(d=h.byId("calendarView"))?d!=this.ViewWidget.selectedChildWidget&&(d.fromCalSearch=!0):this.fromCalSearch=!0;this.selectTab("calendarView",function(a){a.selectSearchViewWithArg(b)})},addToCalendar:function(a,b){this.theMailModel.getMessage(b,a).then(f.hitch(this,function(a){ws.WebSuite.createAddEditWidget(f.hitch(this,function(){var b=ws.html.getText(a.simpleBody.html||a.simpleBody.text||"");if(this.theCalendarModel.isModelFetchedOnce)this.addEditDialog.show(2,{summary:a.message.headers.subject,
notes:b});else{this.theCalendarModel.getData();var d=f.connect(this.addEditDialog,"update",f.hitch(this,function(){f.disconnect(d);this.addEditDialog.show(2,{summary:a.message.headers.subject,notes:b})}))}}))}))},repaintApplication:function(){var a=this.getCurrentViewId();if("calendarView"==a)h.byId("calendarView").repaint();else if("messageList"==a)this._inboxTypeUpdated?(this.displayFolder(this.theMailModel.getInboxFolderName()),this._inboxTypeUpdated=!1):Settings.ViewNewOld||"NewMail"!=this.theMailModel.currentFolder&&
"OldMail"!=this.theMailModel.currentFolder?Settings.ViewNewOld&&"inbox"==this.theMailModel.currentFolder.toLowerCase()&&this.displayFolder(this.theMailModel.getInboxFolderName()):this.displayFolder(this.theMailModel.getInboxFolderName());else if("AddressList"==a)h.byId("AddressList").onResized()},inboxTypeUpdated:function(){this._inboxTypeUpdated=!0},editContact:function(a,b,d){ws.WebSuite.Navigation.searchActive(!1);var e=h.byId("AddressList");e&&e.editContactWidget?(e.clearSearch(),e.updateSearchInfo(),
this.selectTab("AddressList",function(){e.editContact(a,b,d)})):this._ensureTabExists("AddressList",f.hitch(this,function(e){var g=h.byId("AddressList");g&&(g.clearSearch(),g.updateSearchInfo());e.createEditContactWidget();this.selectTab("AddressList",function(){e.editContact(a,b,d)})}))},createDistList:function(){this.selectTab("AddressList",f.hitch(this,function(a){a.newDistributionList()}))},showContactDetails:function(a){this.Navigation.searchActive(!1);var b=h.byId("AddressList");b&&b.contactDetails?
(b.clearSearch(),b.updateSearchInfo(),this.setupContactDetailsView(b,a)):this._ensureTabExists("AddressList",f.hitch(this,function(b){if(b=h.byId("AddressList"))b.clearSearch(),b.updateSearchInfo(),this.setupContactDetailsView(b,a)}))},setupContactDetailsView:function(a,b){a.selectView("contactDetails",!1);setTimeout(f.hitch(this,"showContactDetailsView",a,b),0)},showContactDetailsView:function(a,b){this.selectTab("AddressList",function(){});a.showContactDetails(b)},editContactFromMessageList:function(a){ws.lang.ensureLayersLoaded(f.hitch(this,
function(){this.theAddressModel.getContact({uid:a.uid,load:f.hitch(this,function(b){this.editContact(a.uid,b,!0)})})}))},editDistributionList:function(a){var b=h.byId("AddressList");b&&b.distributionListWidget?this.selectTab("AddressList",function(){b.editDistributionList(a)}):this._ensureTabExists("AddressList",f.hitch(this,function(b){b.createDistributionList();this.selectTab("AddressList",function(){b.editDistributionList(a)})}))},sharedGroup:function(a){this.selectTab("AddressList",function(b){b.sharedGroup(a)})},
selectCalendarApp:function(a){this._selectCalendarApp(a)},_selectCalendarApp:function(a){this.selectTab("calendarView",f.hitch(this,function(b){window._ws_theme.hideLoadingCurtain();b.update(!0);a&&a()}))},parseAppQueryString:function(a){var b={app:null};if(a)if(a=a.toLowerCase(),"today"==a||"todaypage"==a)b.app="todayPage";else if("ab"==a||"abook"==a||"addresses"==a)b.app="AddressList";else if("calendar"==a||"cal"==a)b.app="calendarView";else if("displaymessage"==a||"display-message"==a||"dm"==a){a=
ws.io.getQueryParameter("folder")||this.theMailModel.getInboxFolderName();var d=ws.io.getQueryParameter("uid");a&&d&&(b.app="displaymessage",b.folder=a,b.uid=d)}else if("composemessage"==a||"compose-message"==a||"cm"==a)b.app="composemessage";else if("messagelist"==a||"mail"==a||"ml"==a)b.app="messageList",b.folder=ws.io.getQueryParameter("folder"),b.searchIn=ws.io.getQueryParameter("searchin"),b.query=ws.io.getQueryParameter("query");else if(-1!==a.indexOf("settings")){b.app="settings";switch(a){case "composesettings":b.target=
"composeSettings";break;case "spamsettings":b.target="spamSettings";break;case "filtersettings":b.target="filterSettings";break;default:b.target="generalSettings"}Config.InforOfferThreshold=7E4}return b},selectAppQueryString:function(a,b){if(a.app){var d=a.app;if("todayPage"==d)setTimeout(f.hitch(this,function(){this.selectTab(d,b)},0));else if("messageList"==d){var e=a.folder,g=this.theMailModel.getInboxFolderName(),h=a.searchIn,m=a.query;e&&e!=g&&!m?(e!=g&&this.Navigation.displayFolder(e,ws.UserContext.ActiveScreenName),
this.theMailModel.setFolder(e),this.selectTab("messageList",f.hitch(this,function(a){b&&b()}))):m?(e=a.folder||g,h&&(h=h.toLowerCase()),h="subject"==h||"fromto"==h?h:"alltext",this.selectTab("messageList",f.hitch(this,function(a){a.displayFolder(e,m,h);b&&b()}))):this.selectTab("messageList",f.hitch(this,function(a){b&&b()}))}else"displaymessage"==d?(g=this.theMailModel.getInboxFolderName(),this.selectTab("displayMessage",f.hitch(this,function(){b&&b();a.folder!=g&&this.Navigation.displayFolder(a.folder,
ws.UserContext.ActiveScreenName);this._openMessageInline(a.folder,a.uid)}))):"composemessage"==d?setTimeout(f.hitch(this,function(){this.composeSrc="messagelist";this.selectTab("composeMessage",f.hitch(this,function(a){b&&b();var d=ws.io.getJsonFromQueryParams(null,"body");d.backToString="setFolder";ws.WebSuite.targetStationery&&(d.targetStationery=!0);a.reset(d);ws.WebSuite.targetStationery&&a.launchStationery(ws.WebSuite.targetStationery)}))}),0):"calendarView"==d?setTimeout(f.hitch(this,function(){b&&
b();this.Navigation.showCalendar(!0)}),0):"AddressList"==d?setTimeout(f.hitch(this,function(){this.selectTab(d,b)},0)):"settings"==d&&a.target&&this.selectTab(Config.WelcomeMessage&&Settings.ShowTodayAtSignIn?"todayPage":"messageList",f.hitch(this,function(){this.openSettings(a.target)}))}else b&&b()},selectTab:function(a,b,d){this._tabSelected=!0;"todayPage"==this.getCurrentViewId()&&"todayPage"!=a&&this.ViewWidget.selectedChildWidget.blockAds(!1);"composeMessage"!==a&&this.unselectContacts();d?
a==this.getCurrentViewId()&&"composeMessage"!=a?b&&b(this.ViewWidget.selectedChildWidget):this._ensureTabExists(a,b,!0):this.confirmClose(f.hitch(this,function(){a==this.getCurrentViewId()&&"composeMessage"!=a?b&&b(this.ViewWidget.selectedChildWidget):this._ensureTabExists(a,b,!0)}),a)},_ensureTabExists:function(a,b,d){this._currentTab=a;"todayPage"==a?(this.TodayPage||(this.TodayPage=new x({id:a,blockedAdIds:["HatAd","PanelAd"],mailModel:this.theMailModel}),this.ViewWidget.addChild(this.TodayPage)),
this.closeAdvancedSearch(),d&&this.ViewWidget.selectChild(this.TodayPage),b&&b(),this.showNotification(this.TodayPage)):"messageList"==a?ws.lang.ensureLayersLoaded(f.hitch(this,function(){require(["ws/mail/MessageListView"],f.hitch(this,function(e){this.__ensureTabExists(a,b,d,e)}))})):"AddressList"==a?ws.lang.ensureLayersLoaded(f.hitch(this,function(){require(["ws/address/AddressListView"],f.hitch(this,function(e){this.__ensureTabExists(a,b,d,e)}))})):"displayMessage"==a?ws.lang.ensureLayersLoadedExtra(f.hitch(this,
function(){require(["ws/mail/DisplayMessageWidget"],f.hitch(this,function(e){this.__ensureTabExists(a,b,d,e)}))}),{layers:["DisplayMessage"]}):"composeMessage"==a?ws.lang.ensureLayersLoadedExtra(f.hitch(this,function(){require(["ws/mail/ComposeMessageWidget"],f.hitch(this,function(e){this.__ensureTabExists(a,b,d,e)}))}),{layers:["DisplayMessage"]}):"calendarView"==a||"addCalendar"==a||"subscribeCalendar"==a||"editCalendar"==a?ws.lang.ensureLayersLoadedExtra(f.hitch(this,function(){var e;switch(a){case "calendarView":e=
"ws/calendar/CalendarViewWidget";break;case "addCalendar":e="ws/calendar/AddCalendar";break;case "subscribeCalendar":e="ws/calendar/SubscribeCalendar";break;case "editCalendar":e="ws/calendar/EditCalendar"}require([e],f.hitch(this,function(e){this.__ensureTabExists(a,b,d,e)}))}),{layers:["CalFull"]}):ws.lang.ensureLayersLoaded(f.hitch(this,"__ensureTabExists",a,b,d))},onMainStackSelect:function(a){a&&a.id&&"sendConfirmationPage"!=a.id&&this.sendConfirmation&&(this.removeSendConfirmation(),"composeMessage"!=
a.id&&this.destroyCompose())},onOpeningSettings:function(a){"sendConfirmationPage"==this._currentTab&&(this.removeSendConfirmation(),this.destroyCompose(),this._ensureTabExists("messageList",null,!1))},removeSendConfirmation:function(){this.sendConfirmation&&this.sendConfirmation.destroyRecursive&&(this.ViewWidget.removeChild(this.sendConfirmation),this.sendConfirmation.destroyRecursive(),this.sendConfirmation=null,ws.bubbleConfig.pinBubblesEnabled&&ws.bubbleConfig.deletePinBubble("DistroList"))},
destroyCompose:function(){var a=h.byId("composeMessage");a&&(this.ViewWidget.removeChild(a),a.destroyRecursive(),this.hashWidgets.composeMessage&&(this.hashWidgets.composeMessage=null))},__ensureTabExists:function(a,b,d,e){if(a==this._currentTab||!d){var g=h.byId(a);"composeMessage"==a&&g&&(this.destroyCompose(),g=null);var m=!1;this.Navigation&&this.Navigation.mnSearch&&(m=f.hasClass(this.Navigation.mnSearch,"mnSearchActive"));m&&this.Navigation.isMini&&("composeMessage"==a?this.Navigation.mnSearch.style.display=
"none":"messageList"==a&&(this.Navigation.mnSearch.style.display="block",g&&f.addClass(g.searchInfoPane.domNode,"searchInfoMini")));var l=!0;this.hashWidgets[a]||g?g?(d&&(this.updateSearchButton(a),this.ViewWidget.selectChild(g)),b&&b(g)):this.hashWidgets[a]&&3E3<(new Date).getTime()-this.hashWidgets[a]&&(this.hashWidgets[a]=null):(this.hashWidgets[a]=(new Date).getTime(),d&&f.publish("WSFeedbackStart",[Config.Strings.Loading]),setTimeout(f.hitch(this,function(){try{var h={id:a};switch(a){case "messageList":g=
new e(h);g.setModel(this.theMailModel);g.getComposeCB=f.hitch(this,"getCompose","messagelist");g.openMessageCB=f.hitch(this,"openMessage");f.connect(g,"addContact",this,"displayNewContactView");f.connect(g,"editContact",this,"editContactFromMessageList");f.connect(g,"addToCalendar",this,"addToCalendar");Settings.ShowTodayAtSignIn||this.theMailModel.modelUpdated();break;case "displayMessage":h.model=this.theMailModel;h.backToListCB=f.hitch(this,"hideMessage");h.getComposeCB=f.hitch(this,"getCompose",
"display");h.getAddEditWidgetCB=f.hitch(this,"getAddEditWidget");h.addEditDialog=this.addEditDialog;h.calendarModel=this.theCalendarModel;h.beaconSuffix="Inline";h.undoFeedbackCB=f.hitch(this,"undoFeedbackPopup");g=new e(h);break;case "composeMessage":h.model=this.theMailModel;h.sendSuccessCB=f.hitch(this,"sendSuccessCB");h.cancelCB=f.hitch(this,"hideCompose");h.beaconSuffix="Inline";g=new e(h);break;case "AddressList":g=new e(h);g.setModel(this.theAddressModel);g.getComposeCB=f.hitch(this,"getCompose",
"address");break;case "calendarView":if(!ws.WebSuite.isSettingLoaded("cal")&&!this.theCalendarModel.isAnonymous){this.hashWidgets.calendarView=null;ws.settings.load({scope:"cal",load:f.hitch(this,"__ensureTabExists",a,b,d,e),error:function(){ws.widget.Dialogs.ok(Config.Strings.Cal_ServiceTemporarilyUnavailable)}});return}this.standaloneCalendar&&(h.standaloneCal=!0);g=new e(h);g.fromCalSearch=this.fromCalSearch;g.setModel(this.theCalendarModel);g.getAddEditWidgetCB=f.hitch(this,"getAddEditWidget");
g.getComposeCB=f.hitch(this,"getCompose","calendar");g.getEventQuickViewWidgetCB=f.hitch(this,"getEventQuickViewWidget");g.getQuickAddWidgetCB=f.hitch(this,"getQuickAddWidget");g.showCalendarIndexCB=f.hitch(g,"isUpcomingView");l=!1;break;case "addCalendar":g=new e(h);g.closeCB=f.hitch(this.Navigation,"showCalendar",!0);g.setModel(this.theCalendarModel);break;case "editCalendar":h.editCalendar=!0;g=new e(h);g.closeCB=f.hitch(this.Navigation,"showCalendar",!0);g.setModel(this.theCalendarModel);break;
case "subscribeCalendar":h.editCalendar=!1,g=new e(h),g.closeCB=f.hitch(this.Navigation,"showCalendar",!0),g.setModel(this.theCalendarModel)}}catch(X){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"__ensureTabExists exception: create new tab: "+a,X,"WebSuite.js")}this.ViewWidget.addChild(g);d&&(this.updateSearchButton(a),this.ViewWidget.selectChild(g));b&&b(g);d&&(this.showNotification(g),l&&f.publish("WSFeedbackEnd",[Config.Strings.Loading]))}),0))}},updateSearchButton:function(a){"calendarView"==
a||"editCalendar"==a||"addCalendar"==a||"subscribeCalendar"==a?Config.ShowCalendarSearchButton&&this.Navigation.setSearchScope("calendar",Config.Strings.Calendar):"AddressList"==a?this.Navigation.setSearchScope("contacts",Config.Strings.Contacts):!this.Navigation.searchScope||"calendar"!=this.Navigation.searchScope&&"contacts"!=this.Navigation.searchScope||this.Navigation.clearSearch();"messageList"!=a&&this.closeAdvancedSearch()},getAddEditWidget:function(a){this.addEditDialog?a&&a(this.addEditDialog):
(f.publish("WSFeedbackStart",[Config.Strings.Loading]),setTimeout(f.hitch(this,"createAddEditWidget",f.hitch(this,function(){a&&a(this.addEditDialog);f.publish("WSFeedbackEnd",[Config.Strings.Loading])})),10))},createAddEditWidget:function(a){ws.lang.ensureLayersLoadedExtra(f.hitch(this,function(){require(["ws/calendar/AddEventDialog"],f.hitch(this,function(b){this.addEditDialog=new b;this.addEditDialog.startup();this.addEditDialog.hide();this.addEditDialog.setModel(this.theCalendarModel);f.body().appendChild(this.addEditDialog.domNode);
a&&a()}))}),{layers:["CalFull"]})},getEventQuickViewWidget:function(a){this.eventQuickViewWidget?a&&a(this.eventQuickViewWidget):(f.publish("WSFeedbackStart",[Config.Strings.Loading]),setTimeout(f.hitch(this,"createEventQuickViewWidget",f.hitch(this,function(){a&&a(this.eventQuickViewWidget);f.publish("WSFeedbackEnd",[Config.Strings.Loading])})),0))},createEventQuickViewWidget:function(a){ws.lang.ensureLayersLoadedExtra(f.hitch(this,function(){require(["ws/calendar/EventQuickViewWidget"],f.hitch(this,
function(b){var d={getAddEditWidgetCB:f.hitch(this,"getAddEditWidget")};this.eventQuickViewWidget=new b(d);this.eventQuickViewWidget.startup();this.eventQuickViewWidget.setModel(this.theCalendarModel);f.body().appendChild(this.eventQuickViewWidget.domNode);a&&a()}))}),{layers:["CalFull"]})},getQuickAddWidget:function(a){this.quickAddWidget?a&&a(this.quickAddWidget):(f.publish("WSFeedbackStart",[Config.Strings.Loading]),setTimeout(f.hitch(this,"createQuickAddWidget",f.hitch(this,function(){a&&a(this.quickAddWidget);
f.publish("WSFeedbackEnd",[Config.Strings.Loading])})),0))},createQuickAddWidget:function(a){ws.lang.ensureLayersLoadedExtra(f.hitch(this,function(){require(["ws/calendar/QuickAdd"],f.hitch(this,function(b){var d={getAddEditWidgetCB:f.hitch(this,"getAddEditWidget")};this.quickAddWidget=new b(d);this.quickAddWidget.startup();this.quickAddWidget.setModel(this.theCalendarModel);f.body().appendChild(this.quickAddWidget.domNode);a&&a()}))}),{layers:["CalFull"]})},editCalendar:function(a){this._ensureTabExists("editCalendar",
f.hitch(this,function(b){b.getCalId()==a?b.isShowing()||this.selectTab("editCalendar"):b.isShowing()?b.confirmSwitchEditCalendar(a):(b.setCalId(a),this.selectTab("editCalendar"))}))},getCalendarView:function(){return h.byId("calendarView")},addCalendar:function(){this._ensureTabExists("addCalendar",f.hitch(this,function(a){this.selectTab("addCalendar")}))},subscribeCalendar:function(){this._ensureTabExists("subscribeCalendar",f.hitch(this,function(a){this.selectTab("subscribeCalendar")}))},showTodayPage:function(a){this._showTodayPage(a)},
_showTodayPage:function(a){this.selectTab("todayPage",function(){a||ws.reporting.report("Today Page","Today")})},handleExpiredSession:function(a,b,d){ws.widget.Dialogs.ok(a,function(){Config.SessionExpiryURL&&(top.location=Config.SessionExpiryURL)})},isCalendarHidden:function(){return"calendarView"!=this.getCurrentViewId()},confirmClose:function(a,b){var d=this.ViewWidget.selectedChildWidget;d&&d.confirmClose?d.confirmClose(a,b):a&&a()},openSettings:function(a,b){this.confirmClose(f.hitch(this,function(){f.publish("WSFeedbackStart",
[Config.Strings.Loading]);ws.lang.ensureLayersLoadedExtra(f.hitch(this,function(){require(["ws/settings/SettingsContainer"],f.hitch(this,function(d){var e=h.byId("composeMessage");e&&e.isShowing()&&(e.resetDirty(),f.isIE&&(e.domNode.style.display="block",e.domNode.style.display="none"));var e=f.byId("appContent"),g=f.byId("ws_settings");this.settingsWidget||(this.settingsWidget=new d({id:"settingsContainer",settingsExitCallback:f.hitch(this,"exitSettings")}),g.appendChild(this.settingsWidget.domNode),
this.settingsWidget.startup());this.closeAdvancedSearch();this.SidePanel&&this.SidePanel.hide();e.style.display="none";g.style.display="";this.layoutForSettings();d=a?a:"generalSettings";ws.CalSolo&&(d="calendarSettings");this.settingsWidget.loadAndShow(d,function(){f.publish("WSFeedbackEnd",[Config.Strings.Loading]);b&&b()});this.ViewWidget.selectedChildWidget?(this.ViewWidget.selectedChildWidget.hide(),this.ViewWidget.selectedChildWidget.onHide()):setTimeout(f.hitch(this,function(){this.ViewWidget.selectedChildWidget.hide();
this.ViewWidget.selectedChildWidget.onHide()}),0);f.publish("Settings/show");this.onOpeningSettings()}))}),{layers:["Settings"]})}),"settings")},exitSettings:function(a){var b=this.settingsWidget;if(b&&b.isShowing()){if(this.ViewWidget.selectedChildWidget&&"messageList"==this.ViewWidget.selectedChildWidget.id){var d=h.byId("GeneralSettings");d&&d.EnablePreviewPane.checked!=Settings.EnablePreviewPane&&this.ViewWidget.selectedChildWidget.setPreviewPaneEnabled(d.EnablePreviewPane.checked)}b.hide();f.byId("ws_settings").style.display=
"none";b=f.byId("appContent");b.style.display="block";b.style.visibility="inherit";this.isComposeInTransition()?this.selectTab("messageList",f.hitch(this,function(a){var b=this.theMailModel.getInboxFolderName();a.displayFolder(b)})):!a&&this.ViewWidget.selectedChildWidget&&(this.ViewWidget.selectedChildWidget.show(),setTimeout(f.hitch(this,function(){this.ViewWidget.selectedChildWidget.onShow(!0)}),0));a=this.ViewWidget.selectedChildWidget?this.ViewWidget.selectedChildWidget.id:"";"composeMessage"==
a&&this.selectTab("messageList",null,!0);a="messageList"==a&&k.byId("messageList").isShowingEmptyFolderAd;(!this.ViewWidget.selectedChildWidget||"todayPage"!=this.ViewWidget.selectedChildWidget.id&&!a)&&this.SidePanel&&this.SidePanel.show();this.repaintApplication();this.resize();(a=h.byId("composeMessage"))&&f.isIE&&a.resize();f.publish("Settings/hide")}},onKeyPress:function(a){var b=ws.html.isTargetAnInputElement(a),d=ws.html.isTargetALinkElement(a);65<=a.keyCode&&90>=a.keyCode&&(a.keyChar=String.fromCharCode(a.keyCode));
if(Config.EnableKeyboardShortcuts&&a.keyChar&&f.isString(a.keyChar)&&!b&&!a.ctrlKey&&!a.metaKey&&(a.altKey||f.isMac)&&!this.isModalOpen)switch(f.isMac&&(a=ws.html.fixKeyForMac(a)),a.keyChar.toLowerCase()){case Config.Strings.KeyWriteMail:this.composeMessage(a)}var e=!0;if((a.keyCode||a.charCode)&&b||a.keyCode==f.keys.ENTER&&d)e=!1;if(a.keyCode==f.keys.UP_ARROW||a.keyCode==f.keys.DOWN_ARROW||a.keyCode==f.keys.PAGE_UP||a.keyCode==f.keys.PAGE_DOWN||a.keyCode==f.keys.HOME||a.keyCode==f.keys.END)b||a.preventDefault();
a.stopPropagation();e&&(f.publish("Suite/onKeyOnPress",[a]),this.processKeyPress(a));a.ctrlKey&&a.keyChar&&f.isString(a.keyChar)&&"a"===a.keyChar.toLowerCase()&&(f.isMac||a.altKey)&&this.setA11yPref(Config.AccessibleLink,"Mail-GoToAccessible-KeyboardShortcut")},processKeyPress:function(a){},msgSentFeedbackFromPopout:function(){f.publish("WSFeedbackStart",[Config.Strings.ComposeSentTitle,!0])},getAutoSpacingType:function(){var a=this.viewportSize?this.viewportSize.h:b.getBox().h;return 500>=a?1:500<
a&&600>=a?2:3},canFixBadFltr:function(a,b,d){var e=new O;e.loadFromRpc({load:f.hitch(e,function(e){for(var g=!1,h=!1,f=0;f<e.filterList.length;f++)e.filterList[f].filterName===a&&(g&&(h=!0),g=!0);g&&!h?b():d()}),error:f.hitch(this,function(){})},!0)},advancedSearch:function(){this.advSearch=new Q;var a=m.position(ws.WebSuite.ViewWidget.domNode);this.Navigation.mnSearchClose();this.advSearch.show(a)},closeAdvancedSearch:function(){this.advSearch&&this.advSearch.hide();this.advSearch=null},setA11yPref:function(a,
b){this.updateCtCookieValue();ws.settings.save({WSLAccessibilityRedirect:1},{load:function(){b&&ws.reporting.reportDLAction(b);document.location=a},error:function(){document.location=a}})},updateCtCookieValue:function(a){document.cookie="ct\x3d"+(a?"stdui":"basicui")+"; path\x3d/; domain\x3d.mail.aol.com"},ABTestCellRangeSetUp:function(){if(!Config.ABTestCellRanges){this.checkForTestEnableOverride();Config.ABTestCellRanges=[];for(var a=Config.ABTestCellSizeOverride?f.fromJson(Config.ABTestCellSizeOverride):
{},b=Config.ABTestCellHashPoint,d=Config.ABTestStartIndex;d<Config.ABTestStartIndex+Config.ABTestNumCells;d++){var e="Cell\x3d";if(d===Config.ABTestCtrlNum1||d===Config.ABTestCtrlNum2)e="ABTest_ControlCell\x3d";var e=e+d,g=a[d]?a[d]:Config.ABTestCellSize;Config.ABTestCellRanges[d]={a_Min:b,b_Max:b+g-1,dscrp:e};b+=g}}},testCellMinMax:function(a){Config.ABTestCellRanges||this.ABTestCellRangeSetUp();return Config.ABTestCellRanges[a]},testCellMapFlag:function(a){return a<Config.ABTestStartIndex||a>=Config.ABTestStartIndex+
Config.ABTestNumCells?"d":Config.ABTestMap.split("")[a-Config.ABTestStartIndex]},checkForTestEnableOverride:function(){var a=ws.io.getQueryParameter("_te");if(a&&"string"===typeof a&&(a=parseInt(a),!isNaN(a))){var b=this.testCellMapFlag(a);b==b.toUpperCase()&&(Config.ABTestForceNum=a)}},isUsrInTestCell:function(a,b){if(!Config.ABTestEnabled||0>Config.ABTestNumCells||ws.CalSolo)return!1;this.checkForTestEnableOverride();if(!b&&(a==Config.ABTestCtrlNum1||a==Config.ABTestCtrlNum2))return!1;if(a<Config.ABTestStartIndex||
a>=Config.ABTestStartIndex+Config.ABTestNumCells)return window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"Invalid Test Cell","WebSuite.js"),!1;if(-1<Config.ABTestForceNum)return a===Config.ABTestForceNum?!0:!1;if("E"===this.testCellMapFlag(a).toUpperCase()){var d=this.testCellMinMax(a);return Settings.UserHash>=d.a_Min&&Settings.UserHash<=d.b_Max?!0:!1}return!1},isUsrInCtrlCell:function(){return-1!=this.getCtrlCellForUsr()},getCtrlCellForUsr:function(){return 0<Config.ABTestCtrlNum1&&this.isUsrInTestCell(Config.ABTestCtrlNum1,
!0)?Config.ABTestCtrlNum1:0<Config.ABTestCtrlNum2&&this.isUsrInTestCell(Config.ABTestCtrlNum2,!0)?Config.ABTestCtrlNum2:-1},getSearchRprtSuffix:function(){var a=null;if(!Config.ABTestEnabled||0>Config.ABTestNumCells)return a;var b=this.getCtrlCellForUsr();if(0<b)a="C"+b;else for(b=Config.ABTestStartIndex;b<Config.ABTestStartIndex+Config.ABTestNumCells;b++)if(this.isUsrInTestCell(b)){a="T"+b;break}return a}};"mail"!=_g_PageType&&(ws.CalSolo=ws.WebSuite)})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),
function(f,k,d,b,a,h,l,e,p,g,n){function t(a,b){a.canDelete&&u._remove(a.id,b.options.frameDoc,!0)}function q(b){A&&A.length&&(a.forEach(A,function(a){u._remove(a.id,a.frameDoc);a.frameDoc=null}),A=[]);return b.options.jsonp?!b.data:!0}function m(a){return!!this.scriptLoaded}function w(a){return(a=a.options.checkString)&&eval("typeof("+a+') !\x3d\x3d "undefined"')}function v(a,b){if(this.canDelete){var d=this.response.options;A.push({id:this.id,frameDoc:d.ioArgs?d.ioArgs.frameDoc:d.frameDoc});d.ioArgs&&
(d.ioArgs.frameDoc=null);d.frameDoc=null}b?this.reject(b):this.resolve(a)}function u(a,b,e){var g=d.parseArgs(a,d.deepCopy({},b));a=g.url;b=g.options;var f=d.deferred(g,t,q,b.jsonp?null:b.checkString?w:m,v);h.mixin(f,{id:b.altId?b.altId:z+B++,canDelete:!1});if(b.jsonp){var n=(~a.indexOf("?")?"\x26":"?")+b.jsonp+"\x3d";-1===a.indexOf(n)&&(a+=n+(b.frameDoc?"parent.":"")+z+"_callbacks."+f.id);f.canDelete=!0;E[f.id]=function(a){g.data=a;f.handleResponse(g)}}d.notify&&d.notify.emit("send",g,f.promise.cancel);
if(!b.canAttach||b.canAttach(f)){var p=u._attach(f.id,a,b.frameDoc,function(a){if(!(a instanceof Error)){var d=Error("Error loading "+(a.target?a.target.src:"script"));d.source=a;a=d}f.reject(a);u._remove(f.id,b.frameDoc,!0)});if(!b.jsonp&&!b.checkString)var A=l(p,x,function(a){if("load"===a.type||D.test(p.readyState))A.remove(),f.scriptLoaded=a})}k(f);return e?f:f.promise}g.add("script-readystatechange",function(a,b){return"undefined"!==typeof b.createElement("script").onreadystatechange&&("undefined"===
typeof a.opera||"[object Opera]"!==a.opera.toString())});var z=f.id.replace(/[\/\.\-]/g,"_"),B=0,x=g("script-readystatechange")?"readystatechange":"load",D=/complete|loaded/,E=b.global[z+"_callbacks"]={},A=[];u.get=u;u._attach=function(a,b,d,e){d=d||n.doc;var g=d.createElement("script");if(e)l.once(g,"error",e);g.type="text/javascript";try{g.src=b}catch(O){e&&e(g)}g.id=a;g.async=!0;g.charset="utf-8";return d.getElementsByTagName("head")[0].appendChild(g)};u._remove=function(a,b,d){(b=e.byId(a,b))&&
p.destroy(b);E[a]&&(d?E[a]=function(){delete E[a]}:delete E[a])};u._callbacksProperty=z+"_callbacks";return u})},"ws/suite/Navigation":function(){define("ws/suite/Navigation","dojo/_base/declare dojo/text!ws/suite/Navigation.html dojo/text!ws/suite/Navigation.css dojo/window dojo/request/script dojo/_base/lang dojo/_base/array dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ws/Spinner ws/mail/folderName ws/widget/WSMenu ws/widget/WSMenuItem ws/widget/WSMenuSeparator ws/suite/UpgradeDialog ws/address/PeopleApp ws/calendar/EventsApp ws/calendar/TodoApp dijit/layout/BorderContainer dijit/layout/StackContainer ws/widget/DropDownButton ws/widget/WSSplitContainer ws/widget/Checkbox ws/widget/Button ws/browser ws/dom ws/html ws/io ws/lang ws/sound ws/string ws/widget/Dialogs ws/widget/Pane ws/widget/util".split(" "),
function(f,k,d,b,a,h,l,e,p,g,n,t,q,m,w,v){f(null,{constructor:function(a,b,d){this.Scope=a;this.SearchString=b;this.Label=d}});return f([e,p,g],{templateString:k,css:{templateString:d},_earlyTemplatedStartup:!0,searchScope:"alltext",searchFieldColor:"#000",AOLQuotaMailboxSwitched:!Settings.ViewNewOld,SEARCH_QUERY_SAVE_LIMIT:5,APP_MAIL:0,APP_CALENDAR:1,APP_CONTACTS:2,APP_TODAY:3,APP_SETTINGS:5,APP_ADDCALENDAR:6,APP_EDITCALENDAR:7,APP_TODOS:8,DRAGTYPES_MAIL:[],DRAGTYPES_CALENDAR:[0,1,2],DRAGTYPES_CONTACTS:[],
folderMaxLen:t.MaxLength,recentSearch:null,spinner:null,scrollBarWidth:0,isMini:!1,oldNavWidth:170,minFolderHeight:125,miniSearchDat:{oldSi:null,app:null},firstResize:!0,snapSmall:140,snapLarge:170,snapMax:340,startup:function(){this.selectedApp=null;this.folderNodes={};this.folderConnects=[];this.mnFolderNodes={};this.mnFolderConnects=[];this.accountNodes={};this.dropTargets={};this.disableHover=!1;this.showCalendarIndexCB=null;this.navItemHeight=dojo._getMarginSize(this.myFoldersItem).h;var a="\x3cspan\x3e("+
(dojo.isMac?Config.OptKey:Config.AltKey)+" "+Config.Strings.KeyWriteMail+")\x3c/span\x3e";dojo.attr(this.composeBtn,"data-title",ws.string.substituteParams(Config.Strings.NavWriteMailTip,a));dojo.attr(dojo.query(".cpNavItem",this.navToolbar)[0],"data-title",ws.string.substituteParams(Config.Strings.NavWriteMailTip,a));ws.html.setShowing(this.todayItemCntr,0<Config.WelcomeMessage.length);ws.html.setShowing(this.mnToday,0<Config.WelcomeMessage.length);dojo.connect(this.todayItem,"onclick",dojo.hitch(this,
"selectApp",this.APP_TODAY));dojo.connect(this.calendarItem,"onclick",dojo.hitch(this,"selectApp",this.APP_CALENDAR));dojo.connect(this.calendarItem,"onmouseover",dojo.hitch(this,"onMouseOverItem",this.calendarItem));dojo.connect(this.calendarItem,"onmouseout",dojo.hitch(this,"onMouseOutItem",this.calendarItem));dojo.connect(this.contactsItem,"onclick",dojo.hitch(this,"displayContactListView",this.APP_CONTACTS));dojo.connect(this.contactsItem,"onmouseover",dojo.hitch(this,"onMouseOverItem",this.contactsItem));
dojo.connect(this.contactsItem,"onmouseout",dojo.hitch(this,"onMouseOutItem",this.contactsItem));dojo.connect(this.myFoldersItem,"onmouseover",dojo.hitch(this,"onMouseOverItem",this.myFoldersItem));dojo.connect(this.myFoldersItem,"onmouseout",dojo.hitch(this,"onMouseOutItem",this.myFoldersItem));dojo.connect(this.todayItem,"onmouseover",dojo.hitch(this,"onMouseOverItem",this.todayItem));dojo.connect(this.todayItem,"onmouseout",dojo.hitch(this,"onMouseOutItem",this.todayItem));dojo.connect(this.composeBtn,
"onmouseover",dojo.hitch(this,"onmouseoverCP"));dojo.connect(this.composeBtn,"onmouseout",dojo.hitch(this,"onmouseoutCP"));dojo.query(".navSplitThumb").connect("onclick",dojo.hitch(this,"toggleNav","thumbClick"));dojo.subscribe("/dnd/start",this,function(){this.disableHover=!0});dojo.subscribe("/dnd/drop",this,function(){this.disableHover=!1});dojo.subscribe("/dnd/cancel",this,function(){this.disableHover=!1});dojo.subscribe("dragStart",this,function(a){a&&a.source&&"message"==a.source.type&&(this.dragMessageStarted=
this.disableHover=!0)});dojo.subscribe("dragEnd",this,function(a){a&&a.source&&"message"==a.source.type&&(this.disableHover=!1,window.clearTimeout(this.autoScrollTO),this.dragMessageStarted=this.autoScrollStarted=!1)});dojo.subscribe("ws_view-selectChild",this,"hiliteCurrentApp");dojo.query(".appsToolbar",this.appsPane.domNode).addClass("noAimApp");this.defineMenus();Settings.FoldersVisible&&setTimeout(dojo.hitch(this,"showMyFolders",!0,!0),0);dojo.connect(this.searchField,"onfocus",this,"onFocusSearchField");
dojo.connect(this.searchField,"onblur",this,"onBlurSearchField");dojo.subscribe("Settings/show",this,"onSettingsShow");dojo.subscribe("Settings/hide",this,"onSettingsHide");this.scrollBarWidth=ws.WebSuite.scrollbarWidth;this.subscribe("ListSpacingResize","resize");this.subscribe("toolbarLayoutUpdate","resize");this.splitContainer.addSizerFunc(dojo.hitch(this,"splitSizer"));this.splitContainer.addClickFunc(dojo.hitch(this,"splitClick"));dojo.query(".dijitSplitContainerSizerV",this.domNode)[0].title=
Config.Strings.SplitterTipClose;this.connect(this.appsPane,"layout","appPaneResize");this.initMiniNav();Settings.MiniNavMode&&(this.isMini=!0,this.snapSmall=62,dojo.style(this.navToolbar,"display","block"),dojo.style(this.splitContainer.domNode,"display","none"),dojo.style(this.domNode,"width","42px"),ws.reporting.reportDLAction("Mail-LeftNav-collapsedOnLoad"));this.updateTempFolders();0<Settings.NavAppPaneSize&&this.selectAppById(Settings.NavAppSelected,!0)},appPaneResize:function(){var a=Math.floor(dojo._getMarginSize(this.appsPane.domNode).h);
if(0!=a&&this.appsPane.isShowing()){var b=1,b=30>=a?0:230>=a?1:a-30;0==b?(dojo.query(".appCurr",this.apBtns).removeClass("appCurr"),dojo.query(".dijitSplitContainerSizerV .thumb",this.domNode).addClass("openThumb"),dojo.query(".dijitSplitContainerSizerV",this.domNode)[0].title=Config.Strings.SplitterTipOpen):(this.selectAppById(this.currentApp,!0),dojo.query(".dijitSplitContainerSizerV .thumb",this.domNode).removeClass("openThumb"),dojo.query(".dijitSplitContainerSizerV",this.domNode)[0].title=Config.Strings.SplitterTipClose);
ws.WebSuite.firstResize&&b!=Settings.NavAppPaneSize&&(Settings.NavAppPaneSize=b,this.appResizeTimer&&clearTimeout(this.appResizeTimer),this.appResizeTimer=setTimeout(dojo.hitch(this,"_appPaneResize",b),2E3))}},_appPaneResize:function(a){ws.settings.save({NavAppPaneSize:Math.floor(a)})},splitSizer:function(a,b){var d=this.coords.h,e=d-30-9,d=d-230-9,g=this.minFolderHeight+30;0==Settings.NavAppPaneSize?b>e-20||d<=g?b=e:b<g?b=g:b>d&&(b=d):b<g?b=g:b>d+20?b=e:b>d&&(b=d);return b},splitClick:function(){0==
Settings.NavAppPaneSize?this.showAppPane():this.hideAppPane()},initMiniNav:function(){dojo.query(".mnToday",this.navToolbar).connect("onclick",dojo.hitch(this,"selectApp",this.APP_TODAY));dojo.query(".mnFolders",this.navToolbar).connect("onclick",this,"flyoutFolders");dojo.query(".contactApp",this.navToolbar).connect("onclick",dojo.hitch(this,"flyoutApp","contactApp"));dojo.query(".eventApp",this.navToolbar).connect("onclick",dojo.hitch(this,"flyoutApp","eventApp"));dojo.query(".todoApp",this.navToolbar).connect("onclick",
dojo.hitch(this,"flyoutApp","todoApp"));dojo.query(".mnScrollCont",this.navToolbar).connect("onmouseover",dojo.hitch(this,"onMouseOverMn"));dojo.query(".mnScrollCont",this.navToolbar).connect("onmouseout",dojo.hitch(this,"onMouseOutMn"));dojo.query(".mnScUp",this.navToolbar).connect("onmouseover",dojo.hitch(this,"onMouseOverMn"));dojo.query(".mnScUp",this.navToolbar).connect("onmouseout",dojo.hitch(this,"onMouseOutMn"));dojo.query(".mnScDn",this.navToolbar).connect("onmouseover",dojo.hitch(this,"onMouseOverMn"));
dojo.query(".mnScDn",this.navToolbar).connect("onmouseout",dojo.hitch(this,"onMouseOutMn"));dojo.query("#contactApp .appTitleBar",this.appStack.domNode).connect("onmouseover",dojo.hitch(this,"onMouseOverAT"));dojo.query("#contactApp .appTitleBar",this.appStack.domNode).connect("onmouseout",dojo.hitch(this,"onMouseOutAT"));dojo.query("#eventApp .appTitleBar",this.appStack.domNode).connect("onmouseover",dojo.hitch(this,"onMouseOverAT"));dojo.query("#eventApp .appTitleBar",this.appStack.domNode).connect("onmouseout",
dojo.hitch(this,"onMouseOutAT"));dojo.connect(this.mnContacts,"onclick",dojo.hitch(this,"displayContactListView",this.APP_CONTACTS));dojo.connect(this.mnCalendar,"onclick",dojo.hitch(this,"selectApp",this.APP_CALENDAR));this.mnSearch=dojo.create("div",{className:"mnSearch"},dojo.body());var a=dojo.create("div",{className:"searchInputDiv"},this.mnSearch);this.mnSearchField=dojo.create("input",{className:"wsInput searchInput",type:"text"},a);dojo.connect(this.mnSearchField,"onkeyup",this,"onKeyPressSearchField");
var b=dojo.create("div",{className:"wsTinyArrow"},a);b.innerHTML="\x3csvg class\x3d'svgIcon iconSearch'\x3e\x3cuse xlink:href\x3d'#iconDown'\x3e\x3c/use\x3e\x3c/svg\x3e";dojo.connect(b,"onclick",this,"openSearchMenu");a=dojo.create("div",{className:"mnSearchGo"},a);a.innerHTML='\x3csvg class\x3d"svgIcon"\x3e\x3cuse xlink:href\x3d"#iconSearch"\x3e\x3c/use\x3e\x3c/svg\x3e';dojo.connect(a,"onclick",this,"mnSearchGo");dojo.connect(this.mnSearchField,"onfocus",this,"onFocusSearchField");dojo.connect(this.mnSearchField,
"onblur",this,"onBlurSearchField");(a=dojo.isIE||dojo.isWebKit?dojo.body():dojo.doc)&&dojo.connect(a,"onmousedown",this,"onDocumentMouseDown");this.connect(this.navToolbar,dojo.isFF?"DOMMouseScroll":"onmousewheel",this.mnHandleWheel)},toggleNav:function(a){if(dijit.byId("ws_navsplitter")){var b=ws.WebSuite.getCurrentViewId(),d=dijit.byId(b);"calendarView"==b&&d.selectedViewId==d.VIEW_UPCOMING&&(d=d.views[d.VIEW_UPCOMING]);this.isMini?(this.isMini=!1,this.restoreApp(),this.mnSearchClose(),dojo.style(this.navToolbar,
"display","none"),dojo.style(this.splitContainer.domNode,"display","block"),dojo.style(this.domNode,"width",this.oldNavWidth+"px"),ws.settings.save({MiniNavMode:!1}),Settings.MiniNavMode=!1,this.snapSmall=161,ws.reporting.reportDLAction("Mail-LeftNav-expand-"+(a||""))):(this.isMini=!0,this.oldNavWidth=dojo._getMarginSize(this.domNode).w,dojo.style(this.navToolbar,"display","block"),dojo.style(this.splitContainer.domNode,"display","none"),dojo.style(this.domNode,"width","42px"),ws.settings.save({MiniNavMode:!0}),
Settings.MiniNavMode=!0,this.snapSmall=62,this.shouldMiniSearchCloseOnNavToggle()?this.mnSearchClose():this.searchActive(!1),ws.reporting.reportDLAction("Mail-LeftNav-collapse-"+(a||"")));this.onResized();ws.WebSuite.resize();this.resetMnScroll();this.searchAreaPane.domNode.scrollIntoView();if(dojo.isFF||dojo.isWebKit)dojo.style(dojo.body(),"position","absolute"),setTimeout(function(){dojo.style(dojo.body(),"position","")},100)}},shouldMiniSearchCloseOnNavToggle:function(){var a=0,b=dijit.byId("AddressList"),
d=ws.WebSuite.getCurrentViewId();!b||"AddressList"!=d||"editContactWidget"!=b.selectedView&&"contactDetails"!=b.selectedView&&"distributionListWidget"!=b.selectedView||(a=1);return a},onDocumentMouseDown:function(a){if(this.isMini){var b=ws.WebSuite.getCurrentViewId(),d=dijit.byId(b),e=this.searchMenu&&this.searchMenu.domNode&&ws.html.overElement(this.searchMenu.domNode,a),g=d&&d.searchInfoPane&&d.searchInfoPane.isShowing();"calendarView"==b&&d&&d.selectedViewId==d.VIEW_UPCOMING&&(g=d.views[d.VIEW_UPCOMING].searchInfoPane.isShowing());
if(ws.html.overElement(this.mnSearch,a)||ws.html.overElement(this.shNavItem,a)||e||g)return;a=this.mnSearchField;""!=a.style.color&&void 0!=a.value&&""!=a.value||this.mnSearchClose()}ws.widget.hideInstatip()},onMouseOverMn:function(){var a=dojo.query(".mnScrollCont",this.navToolbar)[0];a.scrollHeight>a.clientHeight&&(dojo.query(".mnScUp",this.navToolbar).style("display","block"),dojo.query(".mnScDn",this.navToolbar).style("display","block"))},onMouseOutMn:function(){var a=dojo.query(".mnScrollCont",
this.navToolbar)[0];a.scrollHeight>a.clientHeight&&(dojo.query(".mnScUp",this.navToolbar).style("display",""),dojo.query(".mnScDn",this.navToolbar).style("display",""))},onmnScrollUp:function(a){var b=this;dojo.hasClass(this.mnSearch,"mnSearchActive")||this.mnSearchClose();this.closeFlyout();dojo.stopEvent(a);if(this.mnScrollInt)this.onmnScrollEnd();this.mnScrollInt=setInterval(function(){dojo.query(".mnScrollCont")[0].scrollTop-=10;b.positionConnector();b.positionFolderConnector(b.mnFolders)},50)},
onmnScrollDn:function(a){var b=this;dojo.hasClass(this.mnSearch,"mnSearchActive")||this.mnSearchClose();this.closeFlyout();dojo.stopEvent(a);if(this.mnScrollInt)this.onmnScrollEnd();this.mnScrollInt=setInterval(function(){dojo.query(".mnScrollCont")[0].scrollTop+=10;b.positionConnector();b.positionFolderConnector(b.mnFolders)},50)},onmnScrollEnd:function(){clearInterval(this.mnScrollInt);this.mnScrollInt=null},closeFlyout:function(){this.flyout&&(this.flyout.style.display="none",dojo.query(".navAppCurr",
this.domNode).removeClass("navAppCurr"))},mnHandleWheel:function(a){dojo.hasClass(this.mnSearch,"mnSearchActive")||this.mnSearchClose();this.closeFlyout();a||(a=window.event);dojo.stopEvent(a);dojo.isFF?a.axis==a.VERTICAL_AXIS&&(dojo.query(".mnScrollCont",this.navToolbar)[0].scrollTop+=a.detail/3*20):dojo.query(".mnScrollCont",this.navToolbar)[0].scrollTop+=a.wheelDelta/120*-20;this.positionFolderConnector(this.mnFolders)},resetMnScroll:function(){dojo.query(".mnScrollCont")[0].scrollTop=0},addMNFolder:function(a,
b,d){b=dojo.attr(a,"thefn");var e=this.mailModel.getFolderByName(b),g="";if(e){a=a.firstChild.getAttributeNS("http://www.w3.org/1999/xlink","href");var h=Config.ShowFolderMessageCount&&this.folderCanShowCount(e),f=this.mailModel.isFolderType(e,"DRAFT")?e.total:e.unread,g=ws.string.escapeXml(this.mailModel.getFolderDisplayName(e)),g=g.replace(/ /gm,"\x26nbsp;");d=dojo.create("div",{className:"navItem"},d.myNode);dojo.attr(d,"data-title",g);d.innerHTML="\x3csvg class\x3d'svgIcon'\x3e\x3cuse xlink:href\x3d'"+
a+"'\x3e\x3c/use\x3e\x3c/svg\x3e";h&&dojo.create("div",{className:"mnUnseen",innerHTML:99<f?"99+":f,theCount:f,style:{display:0<f?"block":"none"}},d);this.mnFolderConnects.push(dojo.connect(d,"onclick",dojo.hitch(this,"displayFolder",b,ws.UserContext.ActiveScreenName)));this.mnFolderConnects.push(dojo.connect(d,"onmouseenter",dojo.hitch(this,"onmouseoverMN",{target:d},"navItem","mnSysFolders")));this.mnFolderConnects.push(dojo.connect(d,"onmouseleave",dojo.hitch(this,"onmouseoutMN",{target:d},"navItem",
"mnSysFolders")));this.mnFolderNodes[b]=d}},addMNMyFolder:function(a,b,d){a=dojo.attr(a,"thefn");(b=this.mailModel.getFolderByName(a))&&Config.ShowFolderMessageCount&&0<b.unread&&(this.showMNFoldersUnseen+=b.unread);this.mnFolderNodes[a]=d.myNode},updateMiniNavFolders:function(){var a=this.mnScrollCont.scrollTop;dojo.forEach(this.mnFolderConnects,dojo.hitch(this,function(a){dojo.disconnect(a)}));for(var b in this.mnFolderNodes)this.mnFolderNodes[b]!=this.mnSysFolders&&this.mnFolderNodes[b]!=this.mnFolders&&
(b.theFN=null,dojo.destroy(this.mnFolderNodes[b]),delete this.mnFolderNodes[b]);this.mnFolderConnects=[];this.mnFolderNodes={};this.showMNFoldersUnseen=0;this.mnSysFolders.innerHTML="";b=dojo.query(".svgIcon",this.sysFoldersNode);b.myNode=this.mnSysFolders;b.forEach(this.addMNFolder,this);b=dojo.query(".svgIcon",this.myFoldersNode);b.myNode=this.mnFolders;b.forEach(this.addMNMyFolder,this);dojo.query(".mnUnseen",this.mnFolders).style("display",0<this.showMNFoldersUnseen?"block":"none");0<this.showMNFoldersUnseen&&
(b=dojo.query(".mnUnseen",this.mnFolders)[0])&&(b.innerHTML=99<this.showMNFoldersUnseen?"99+":this.showMNFoldersUnseen,dojo.attr(b,"theCount",this.showMNFoldersUnseen));this.hiliteCurrentApp();setTimeout(function(){ws.WebSuite.Navigation.mnScrollCont.scrollTop=a},100)},mnSearchClose:function(){this.mnSearch.style.display="none";dojo.removeClass(this.shNavItem,"mnSearchSelected")},miniNavSearch:function(a){var b=1;ws.widget.hideInstatip();var d=dojo.hasClass(this.mnSearch,"mnSearchActive"),e=ws.WebSuite.settingsWidget&&
ws.WebSuite.settingsWidget.isShowing(),g=dijit.byId("AddressList"),h=ws.WebSuite.getCurrentViewId();g&&("contactDetails"==g.selectedView||"distributionListWidget"==g.selectedView)&&"AddressList"==h&&"boolean"==typeof a&&a&&(this.mnSearchClose(),b=0);d?dojo.removeClass(this.shNavItem,"mnSearchSelected"):"none"==this.mnSearch.style.display&&!e&&b?(this.resetMnScroll(),b=dojo.position(this.shNavItem),dojo.marginBox(this.mnSearch,{l:b.x+b.w,t:b.y}),this.mnSearch.style.display="block","boolean"==typeof a&&
a||dojo.addClass(this.shNavItem,"mnSearchSelected"),this.mnSearchField.focus()):this.mnSearchClose()},getSearchWidget:function(){return this.isMini?this.mnSearchField:this.searchField},onResized:function(){this.inherited(arguments);var a=dojo._getMarginSize(this.domNode),b=dojo._getMarginSize(this.domNode).w;if(this.isMini){if(!this.coords)return;var d=this.mnScrollCont.scrollTop,e=dojo._getMarginSize(this.mnMailDiv).h,g=dojo._getMarginSize(this.mnAppsDiv).h,h=this.coords.h-40;dojo.marginBox(this.mnScrollCont,
{h:h});this.mnScrollCont.scrollTop=0;e+g>h?dojo.style(this.mnAppsDiv,{position:"relative"}):dojo.style(this.mnAppsDiv,{position:""});this.mnScrollCont.scrollTop=d;dojo.query(".navSplitThumb").style("top",Math.floor(a.h/2)-10+"px")}else{var f=this.mainPane.domNode.scrollHeight>this.mainPane.domNode.clientHeight?ws.WebSuite.scrollbarWidth:0,d=a.h-this.minFolderHeight-30-this.splitContainer.sizerWidth;230>d&&(d=30);e=230;0==Settings.NavAppPaneSize?e=30:1<Settings.NavAppPaneSize&&(e=Settings.NavAppPaneSize+
30);!this.firstResize&&e>d&&(e=d);this.appsPane.sizeShare=e;this.layoutWidget.sizeShare=a.h-e-this.splitContainer.sizerWidth;this.splitContainer.resize(a);this.searchField.style.width=Math.max(b-60-f,0)+"px";dojo.query(".navSplitThumb").style("top",Math.floor(a.h/2)-10+"px");0==dojo.query(".navTempNode",this.sysFolderNode).length&&(dojo.query(".text span",this.sysFolderNode).forEach(function(a){var d=14;a.nextSibling&&(d=dojo._getMarginSize(a.nextSibling).w+10);a.style.width=Math.max(b-d-f-30,0)+
"px"}),dojo.query(".text span",this.myFoldersContainer).forEach(function(a){var d=14;a.nextSibling&&(d=dojo._getMarginSize(a.nextSibling).w+10);a.style.width=Math.max(b-d-f-(Settings.ReadabilityMode?45:40),0)+"px"}))}window.setTimeout(dojo.hitch(this,function(){this.positionConnector()}),10);this.firstResize&&(this.firstResize=!1)},selectApp:function(a){if(a!=this.selectedApp){this.selectedApp!=this.APP_CALENDAR&&this.selectedApp!=this.APP_ADDCALENDAR&&this.selectedApp!=this.APP_EDITCALENDAR||a==
this.APP_ADDCALENDAR||a==this.APP_EDITCALENDAR||a==this.APP_TODOS||this.showCalendar(!1);switch(a){case this.APP_CALENDAR:this.searchActive(!1);this.showCalendar(!0);break;case this.APP_CONTACTS:this.showContacts();break;case this.APP_ADDCALENDAR:this.showAddCalendar();break;case this.APP_TODAY:this.showToday()}this.onResized()}},hiliteCurrentApp:function(){var a=ws.WebSuite.getCurrentViewId();if(a){var b=null,d=null;switch(a){case "AddressList":b=this.contactsItem;d=this.mnContacts;this.selectedApp=
this.APP_CONTACTS;this.hideCalendar();break;case "calendarView":b=this.calendarItem;d=this.mnCalendar;this.selectedApp=this.APP_CALENDAR;break;case "addCalendar":case "editCalendar":case "subscribeCalendar":b=this.calendarItem;d=this.mnCalendar;this.selectedApp=this.APP_CALENDAR;break;case "todayPage":b=this.todayItem;d=dojo.query(".mnToday",this.navToolbar)[0];this.selectedApp=this.APP_TODAY;this.clearSearchField();this.searchActive(!1);break;case "composeMessage":this.mnSearchClose();default:this.mailModel&&
(this._folderListUpdated?(b=this.folderNodes[this.mailModel.currentFolder],d=this.mnFolderNodes[this.mailModel.currentFolder]):this.folderListChangedCB||(this.folderListChangedCB=dojo.hitch(this,function(){this.hiliteCurrentApp();this.folderListChangedCB=null}))),this.selectedApp=this.APP_MAIL,this.hideCalendar()}this.currentHiliteNode&&dojo.removeClass(this.currentHiliteNode,"navItemCurrent");dojo.query(".navItemCurrent",this.navToolbar).removeClass("navItemCurrent");this.closeFlyoutFolders();this.folderFlyout&&
"none"==this.folderFlyout.style.display&&dojo.removeClass(this.mnFolders,"folderBtnSelected");null!=this.mailModel.getSearchString()?dojo.addClass(this.shNavItem,"navItemCurrent shNavItemCurrent"):(dojo.removeClass(this.shNavItem,"shNavItemCurrent"),b&&(dojo.addClass(b,"navItemCurrent"),this.currentHiliteNode=b),d&&dojo.addClass(d,"navItemCurrent"))}},setMailModel:function(a){this.mailModel=a;dojo.connect(this.mailModel,"folderListChanged",this,"updateFolderList");dojo.connect(this.mailModel,"folderCountUpdated",
this,"updateFolderCount");dojo.connect(this.mailModel,"modelUpdated",this,"hiliteCurrentApp");dojo.connect(this.mailModel,"infoUpdated",this,"onMailInfoUpdated");dojo.connect(this.mailModel,"modelUpdated",dojo.hitch(this,"modelUpdated","mail"));dojo.connect(this.mailModel,"newMailReceived",this,"playNewMailSound");this.updateFolderList();this.onMailInfoUpdated();this.mailModel.isLoading()||this.maybePlayYgmSound()},updateTempFolders:function(){if(Settings.ViewNewOld){var a=dojo.query(".navTempNode",
this.sysFoldersNode);dojo.query(".text span",a[0]).innerHTML(Config.Strings.Folder_NewMail);var b=a[0].cloneNode(!0);a[0].parentNode.insertBefore(b,a[1]);dojo.query(".text span",b).innerHTML(Config.Strings.Folder_OldMail);dojo.query(".text span",a[4]).innerHTML(Config.Strings.Folder_Deleted_Traditional)}},countMNunread:function(a){a=dojo.attr(a,"theFN");(a=this.mailModel.getFolderByName(a))&&Config.ShowFolderMessageCount&&0<a.unread&&(this.showMNFoldersUnseen+=a.unread)},updateFolderCount:function(a){var b=
this.folderNodes[a.name],d=a.types[0],e=this.mailModel.isFolderType(a,"DRAFT")?a.total:a.unread,g=0<e?e:"";dojo.query(".unseen",b).innerHTML(""+g).style("display",0<e?"block":"none");dojo.toggleClass(b,"hasUnseen",0<e&&this.folderCanShowBold(d));(this.mailModel.isFolderType(a,"INBOX")||this.mailModel.isFolderType(a,"NEWMAIL"))&&ws.browser.setWindowTitle(Config.Strings.MessageListTitle+(0<e?" ("+g+")":""));b=dojo.query(".mnUnseen",this.mnFolders)[0];if(this.mailModel.isFolderType(a,"USER"))this.showMNFoldersUnseen=
0,dojo.query(".navItem .icon",this.myFoldersNode).forEach(this.countMNunread,this),e=this.showMNFoldersUnseen,dojo.query(".mnUnseen",this.mnFolders).style("display",0<e?"block":"none"),b.innerHTML=99<e?"99+":0<e?e:"",dojo.attr(b,"theCount",e);else if(b=dojo.query(".mnUnseen",this.mnFolderNodes[a.name])[0])b.innerHTML=99<e?"99+":g,dojo.attr(b,"theCount",e),dojo.style(b,"display",0<e?"block":"none")},updateFolderList:function(){var a=ws.UserContext.ActiveScreenName,d=this.mailModel.folders,e=["USER",
"ARCHIVE","SAVED"],g=this.sysFoldersNode,h=this.myFoldersNode,f={},m=null,l=!1;0<d.length&&dojo.query(".navTempNode",g).remove();dojo.forEach(this.folderConnects,dojo.hitch(this,function(a){dojo.disconnect(a)}));for(var q in this.folderNodes)dojo.destroy(this.folderNodes[q]),delete this.folderNodes[q];this.folderNodes={};this.folderConnects=[];for(var k=0;k<d.length;k++){var n=!1,p=d[k];if(p&&!this.mailModel.isFolderType(p,"INVISIBLE")&&!this.mailModel.isFolderType(p,"CHATS")){var t=p.name,w=!1;Config.ShowFolderMessageCount&&
this.folderCanShowCount(p)&&(w=!0);var v=this.mailModel.isFolderType(p,"BULK")||this.mailModel.isFolderType(p,"TRASH"),Q=this.mailModel.isFolderType(p,"USER"),M=this.mailModel.isFolderType(p,"INBOX")||this.mailModel.isFolderType(p,"NEWMAIL"),C=this.folderNodes[t];this.mailModel.isFolderType(p,"TRASH")&&this.AOLQuotaMailboxSwitched==Settings.ViewNewOld&&(C&&(dojo.destroy(C),C=null,delete this.folderNodes[t],delete this.dropTargets[t]),this.AOLQuotaMailboxSwitched=!Settings.ViewNewOld);var H;if(!C){C=
document.createElement("div");C.className="navItem";this.folderConnects.push(dojo.connect(C,"onclick",dojo.hitch(this,"displayFolder",t,a)));this.folderConnects.push(dojo.connect(C,"onmouseover",dojo.hitch(this,"onMouseOverItem",C)));this.folderConnects.push(dojo.connect(C,"onmouseout",dojo.hitch(this,"onMouseOutItem",C)));var L=0<ws.lang.intersection(e,p.types).length?h:g;L==g?(this.mailModel.isFolderType(p,"INBOX")||this.mailModel.isFolderType(p,"NEWMAIL")?(dojo.place(C,L,"first"),H=p.name,n=!0):
this.mailModel.isFolderType(p,"OLDMAIL")?(this.folderNodes.NewMail?dojo.place(C,this.folderNodes.NewMail,"after"):dojo.place(C,L,"first"),H=p.name):this.mailModel.isFolderType(p,"DRAFT")?this.folderNodes.OldMail?dojo.place(C,this.folderNodes.OldMail,"after"):this.folderNodes[H]?dojo.place(C,this.folderNodes[H],"after"):L.appendChild(C):L.appendChild(C),l=!0):(dojo.place(C,L),m=C);var L="",P=this.mailModel.getFolderDisplayName(p),P=P.replace(/ /gm,"\x26nbsp;"),L=L+('\x3csvg class\x3d"svgIcon" theFN\x3d"'+
ws.string.escapeXml(t)+'"\x3e\x3cuse xlink:href\x3d"#'+this.getFolderIcon(p)+'"\x3e\x3c/use\x3e\x3c/svg\x3e\x3cdiv class\x3d"text"\x3e\x3cspan '+(n?'id\x3d"inboxNode"':"")+"\x3e"+P+"\x3c/span\x3e");w&&(L+='\x3cdiv class\x3d"unseen"\x3e\x3c/div\x3e');L+="\x3c/div\x3e";C.innerHTML=L;n={type:"Mail"};n.showEdit=Q;n.showEmpty=v;n.showCheck=M;n.folderName=t;n.folder=p;n.showActions=0<p.total;dojo.connect(C,"oncontextmenu",dojo.hitch(this,this.onContextMenu,n));if(Q)dojo.create("span",{className:"ctrl wsLink",
title:Config.Strings.NavEdit,style:{display:"none"},onclick:dojo.hitch(this,"editFolder",t)},C).innerHTML="\x3csvg class\x3d'svgIcon'\x3e\x3cuse xlink:href\x3d'#iconOption'\x3e\x3c/use\x3e\x3c/svg\x3e";else if(v){v=dojo.create("span",{className:"ctrl wsLink",style:{display:"none"},title:Config.Strings.NavEmpty,onclick:dojo.hitch(this,"emptyFolder",t)},C);if(this.mailModel.isFolderType(p,"BULK")||this.mailModel.isFolderType(p,"TRASH"))v.title=ws.string.substituteParams(Config.Strings.NavEmptyToolTip,
this.mailModel.getFolderDisplayName(p));v.innerHTML="\x3csvg class\x3d'svgIcon'\x3e\x3cuse xlink:href\x3d'#iconTrash'\x3e\x3c/use\x3e\x3c/svg\x3e"}else M&&(dojo.create("span",{className:"ctrl wsLink",title:Config.Strings.CheckMailButton,style:{display:"none"},onclick:dojo.hitch(this,"checkMail",t)},C).innerHTML="\x3csvg class\x3d'svgIcon'\x3e\x3cuse xlink:href\x3d'#iconRefresh'\x3e\x3c/use\x3e\x3c/svg\x3e");this.folderNodes[t]=C}if(w&&this.folderCanShowCount(p)){if(w=dojo.query(".unseen",C)[0]){w.className=
"unseen";var aa=this.mailModel.isFolderType(p,"DRAFT")?p.total:p.unread,W=0<aa?aa:"";0<aa&&(w.innerHTML=""+aa);dojo.toggleClass(C,"hasUnseen",0<aa&&this.folderCanShowBold(p));C.childNodes[1].appendChild(w)}(this.mailModel.isFolderType(p,"INBOX")||this.mailModel.isFolderType(p,"NEWMAIL"))&&ws.browser.setWindowTitle(Config.Strings.MessageListTitle+(0<aa?" ("+W+")":""))}f[t]=!0;this._initSearchField||(this._initSearchField=!0,this.mailModel.allowAllTextSearch()?(this.searchScope="alltext",this.searchField.value=
this.getSearchGhostText("alltext"),this.mnSearchField&&(this.mnSearchField.value=this.getSearchGhostText("alltext"))):(this.searchScope="subject",this.searchField.value=this.getSearchGhostText("subject"),this.mnSearchField&&(this.mnSearchField.value=this.getSearchGhostText("subject"))));this._folderListUpdated=!0}}for(q in this.folderNodes)q in f||(dojo.destroy(this.folderNodes[q]),delete this.folderNodes[q]);m&&!l&&b.scrollIntoView(m);this.updateMiniNavFolders();this.setupFolderDropTargets();this.folderListChangedCB&&
(this.folderListChangedCB(),this.folderListChangedCB=null);this.onResized()},onAggError:function(a,b,d){d||(d=window.event);d.stopPropagation?d.stopPropagation():d.cancelBubble=!0;var e;if(!(2>b)){d="\x3cdiv class\x3d'aggDlgTitle'\x3e"+Config.Strings.AggregateErrorTitle+"\x3c/div\x3e";switch(b){case 2:d+=ws.string.substituteParams(Config.Strings.AggregateErrorConn,a);ws.widget.Dialogs.ok(d,e,!1);return;case 4:d+=ws.string.substituteParams(Config.Strings.AggregateErrorRate,a);ws.widget.Dialogs.ok(d,
e,!1);return;case 5:d+=ws.string.substituteParams(Config.Strings.AggregateErrorConn,a);ws.widget.Dialogs.ok(d,e,!1);return;default:d+=ws.string.substituteParams(Config.Strings.AggregateErrorConn,a),a=Config.Strings.AggregateRetryButton,e=dojo.hitch(this,"aggRetry")}ws.widget.Dialogs.show(d,[a],e,{newCancel:!0});return!1}},aggRetry:function(a){1==a&&ws.WebSuite.checkMail()},checkMail:function(a){ws.WebSuite.checkMail();(a.ctrlKey||a.metaKey)&&a.altKey&&dojo.publish("snippetViewUpdate");ws.reporting.reportDLAction("Mail-LeftNav-Check")},
showSunsetFeature:function(){},getFolderIcon:function(a){var b="iconFolder";this.mailModel.isFolderType(a,"INBOX")?b="iconInbox":this.mailModel.isFolderType(a,"NEWMAIL")?b="iconNewMail":this.mailModel.isFolderType(a,"OLDMAIL")?b="iconOldMail":this.mailModel.isFolderType(a,"DRAFT")?b="iconDrafts":this.mailModel.isFolderType(a,"SENT")?b="iconSent":this.mailModel.isFolderType(a,"BULK")?b="iconSpam":this.mailModel.isFolderType(a,"TRASH")&&(b="iconTrash");return b},getParentFolder:function(a){return a.split(Config.FolderNameSeparator)[Config.ImapStoreFolderDepthStartAt-
1]},setupFolderDropTargets:function(){ws.lang.ensureLayersLoaded(dojo.hitch(this,function(){require(["ws/dnd/NavigationDropTarget","ws/dnd/HtmlDragManager"],dojo.hitch(this,function(a){this.myFoldersDropTarget||(this.myFoldersDropTarget=new a(this.myFoldersItem,["message"],this,"myFolders"));for(var b in this.dropTargets)ws.dnd.dragManager.unregisterDropTarget(this.dropTargets[b]),delete this.dropTargets[b];this.dropTargets={};dojo.forEach(this.mailModel.folders||[],function(b){this.folderNodes[b.name]&&
!this.dropTargets[b.name]&&(this.dropTargets[b.name]=new a(this.folderNodes[b.name],["message"],this,b.name))},this)}))}))},onMailInfoUpdated:function(){var a=Settings.HasUnlimitedMailStorage?0:Math.round(Settings.MailStorageUsed/Settings.MailStorageQuota*100);ws.html.setInnerText(this.quotaWarningTextNode,ws.string.substituteParams(Config.Strings.QuotaWarning,a));ws.html.setShowing(this.quotaWarningContainer,90<=a&&!this.closedQuotaWarning)},closeQuotaWarning:function(){this.quotaWarningContainer.style.display=
"none";this.closedQuotaWarning=!0},displayFolder:function(){ws.WebSuite.isRecordTimingData&&(ws.WebSuite.messageListTimerStart=new Date);this.selectApp(this.APP_MAIL);this.hideCreateFolder()},composeMessage:function(){},showMyFolders:function(a){this.hideCreateFolder();this.toggleTwisty(a,this.myFoldersContainer);this.onResized()},toggleMyFolders:function(){var a="none"==this.myFoldersContainer.style.display;this.showMyFolders(a);ws.settings.save({FoldersVisible:a})},expandMyFolders:function(){var a=
"none"==this.myFoldersContainer.style.display;a&&this.toggleMyFolders();return a},showCreateFolder:function(a){this.showMyFolders(!0);this.createFolderNode.style.display="";this.createFolderInput.value=Config.Strings.NewFolder;b.scrollIntoView(this.createFolderNode);ws.html.selectInputText(this.createFolderInput);a.stopPropagation()},hideCreateFolder:function(){this.createFolderNode.style.display="none"},onCreateFolderKeyPress:function(a){a.keyCode==dojo.keys.ENTER?this.createFolder():a.keyCode==
dojo.keys.ESCAPE&&this.hideCreateFolder()},createFolder:function(a){a=a&&a.newName?a.newName:this.createFolderInput.value;ws.mail.folderName.validate(a,null,this.mailModel.folders,null)&&(this.hideCreateFolder(),this._createFolder({newName:a}))},_createFolder:function(a){a&&a.newName&&this.mailModel.createFolder(a.newName).then(h.hitch(this,function(){dojo.publish("WSFeedbackStart",[Config.Strings.FolderCreated,!0])}),function(b){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for mailModel.createFolder-_createFolder",
b,"Navigation.js");ws.widget.Dialogs.ok(ws.string.substituteParams(Config.Strings.ErrorCreatingFolder,a.newName))})},editFolder:function(a,b){this.editFolderDialog?this.editFolderDialog.show(a):(dojo.publish("WSFeedbackStart",[Config.Strings.Loading]),setTimeout(dojo.hitch(this,function(){this.createEditFolderDialog(dojo.hitch(this,function(){this.editFolderDialog.show(a);dojo.publish("WSFeedbackEnd",[Config.Strings.Loading])}))}),0));b&&b.stopPropagation()},createEditFolderDialog:function(a){require(["ws/mail/EditFolderDialog"],
dojo.hitch(this,function(b){this.editFolderDialog=new b({model:this.mailModel,undoDeleteFolderCB:dojo.hitch(this,"_createFolder"),undoEmptyFolderCB:dojo.hitch(this,"restoreMessages")});dojo.body().appendChild(this.editFolderDialog.domNode);this.editFolderDialog.startup();a&&a()}))},emptyFolder:function(a,b){var d=this.mailModel.getFolderByName(a);if(this.mailModel.isFolderType(d,"TRASH")||this.mailModel.isFolderType(d,"BULK")){this.mailModel.isFolderType(d,"BULK")&&ws.reporting.reportDLAction("Mail-LeftNav-EmptySpam");
var e=ws.string.substituteParams(Config.Strings.PermEmptyFolderConfirmation,this.mailModel.getFolderDisplayName(d));ws.widget.Dialogs.okCancel(e,dojo.hitch(this,function(a){a&&this._emptyFolder(d)}))}else this._emptyFolder(d);b&&b.stopPropagation()},_emptyFolder:function(a){this.mailModel.emptyFolder(a).then(h.hitch(this,function(){a.unread=0;a.total=0;this.updateFolderCount(a);dojo.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.FolderEmptied,this.mailModel.getFolderDisplayName(a)),
!0,null])}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for mailModel.emptyFolder-_emptyFolder",a,"Navigation.js");ws.widget.Dialogs.ok(Config.Strings.EmptyFolderError)})},restoreMessages:function(a){this.mailModel.restoreMessages({uids:a,folder:Config.DeletedItemsFolderName,load:dojo.hitch(this,function(){this.mailModel.refetchFolderIndex(this.mailModel.currentFolder);var b=1==a.length?Config.Strings.MessageRestored:ws.string.substituteParams(Config.Strings.MessagesRestored,
a.length);dojo.publish("WSFeedbackStart",[b,!0])}),error:function(a){ws.widget.Dialogs.ok(a||Config.Strings.ErrorRestoring)}})},deleteFolder:function(a){var b=this.mailModel.getFolderByName(a),d=-1==b.total?"":b.total;a=this.mailModel.getFolderDisplayName(b);d=Config.EnableIMAPFolderHierarchy?ws.string.substituteParams(Config.Strings.DeleteHierarchyFolderConfirmation,a):ws.string.substituteParams(Config.Strings.DeleteFolderConfirmation,a,d);0==b.total?this._deleteFolder(b,dojo.hitch(this,"_createFolder",
{newName:a})):ws.widget.Dialogs.okCancel(d,dojo.hitch(this,function(a){a&&this._deleteFolder(b)}))},_deleteFolder:function(a,b){this.mailModel.deleteFolder(a).then(dojo.hitch(this,function(){dojo.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.FolderDeleted,this.mailModel.getFolderDisplayName(a)),!0,b])}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for mailModel.deleteFolder-_deleteFolder",a,"Navigation.js");ws.widget.Dialogs.ok(Config.Strings.DeleteFolderError)})},
changeFolderReadState:function(a){var b=this.mailModel.getCurrentFolder().total;0<b&&this.mailModel.changeMessagesReadState([],a).then(dojo.hitch(this,function(){var d="",d=ws.string.substituteParams(a?Config.Strings.MessagesMarkedRead:Config.Strings.MessagesMarkedNew,b);dojo.publish("WSFeedbackStart",[d,!0])}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for mailModel.changeMessagesReadState-changeFolderReadState",a,"Navigation.js");
ws.widget.Dialogs.ok(Config.Strings.MarkReadError)})},newFolder:function(a){require(["ws/widget/WSInputableMenuItem"],dojo.hitch(this,function(b){var d=this.rightClickMenu.Mail,e=d.getChildren()[7];this.newFolderInputMenu||(this.newFolderInputMenu=new b({okCB:dojo.hitch(this,"createFolder"),defaultValue:Config.Strings.NewFolder,originalMenuItem:e,maxlength:ws.mail.folderName.MaxLength}),d.addChild(this.newFolderInputMenu));e.hide();this.newFolderInputMenu.show();this.newFolderInputMenu.initializeText(Config.Strings.NewFolder);
a&&a.stopPropagation()}))},maybePlayYgmSound:function(){if(!this.maybePlayYgmSound.executed){var b=this.mailModel.getFolderByName(this.mailModel.getInboxFolderName());if(b&&(this.maybePlayYgmSound.executed=!0,0<Settings.PlaySoundMode&&b&&0<b.unread)){var d=Config.BaseAffinityResourcesURL+"sounds/ygm.mp3";if(1===Settings.PlaySoundMode||!Config.EnableCelebYGM&&!Config.customYGMMap.length)ws.sound.play(d);else if(2===Settings.PlaySoundMode)a.get(Config.CelebYGMAPI,{jsonp:"callback",timeout:Config.CelebYGMTimeout}).then(function(a){Config.CelebYGM=
a;ws.sound.play(Config.CelebYGM.ygmURL)},function(){ws.sound.play(d)});else{var e=d;l.some(Config.customYGMMap,function(a){if(a.prefMap==Settings.PlaySoundMode)return e=a.location,!0});ws.sound.play(e)}}}},playNewMailSound:function(){Settings.PlaySound&&ws.sound.play(Config.BaseAffinityResourcesURL+"sounds/newmail.mp3")},setContactsModel:function(a){this.abModel=a;dojo.connect(a,"search",dojo.hitch(this,"modelUpdated","contacts"))},setCalendarModel:function(a){this.calendarModel=a;dojo.connect(a,
"searchUpdated",dojo.hitch(this,"modelUpdated","calendar"))},showCalendar:function(a,b){if(a){var d=ws.WebSuite.theCalendarModel;d&&d.refreshSearchResult();ws.WebSuite.selectCalendarApp(b)}else b&&b()},hideCalendar:function(){this.resetSearchField()},showAddCalendar:function(){ws.WebSuite.selectTab("addCalendar")},addCalendar:function(a){this.selectApp(this.APP_ADDCALENDAR);a.stopPropagation()},selectCalendar:function(a){this.calendarModel.getCalendarById(a).isActive||this.calendarModel.saveCalendar(a,
{id:a,isActive:!0})},selectThisCalendarOnly:function(a){var b=this.calendarModel.calendarEnum,d=null,e=!0,g;for(g in this.calendarModel.calendars){var h=this.calendarModel.calendars[g];g==a?(h[b.selected]||(e=!1),d=this.calendarModel.getCalendarArgs(h,!1),d.selected=!0,d.selectThisOnly=!0):h[b.selected]&&(e=!1)}d&&!e&&this.calendarModel.saveCalendar(d)},deleteCalendar:function(a,b){var d=this.calendarModel.calendarEnum,e=this.calendarModel.calendars,g=!1;if(e&&d){var e=e[a],h=e[d.calType],g=null!=
e?e[d.worldReadable]:!1;g||2==h||(g=e[d.readWriteList],g=e[d.readOnlyList]||g)}ws.widget.Dialogs.okCancel(g?Config.Strings.ConfirmCalDeleteShared:Config.Strings.ConfirmCalDelete,dojo.hitch(this,function(d){d&&(dojo.publish("WSFeedbackStart",[Config.Strings.Loading]),this.calendarModel.deleteCalendar({id:a,displayName:b,components:!1,index:!1,enums:!1,dayBucketIndex:!1,loadCallback:function(){dojo.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.CalendarDeleted,b),!0])},errorCallback:function(){dojo.publish("WSFeedbackEnd",
[Config.Strings.Loading])}}),dojo.publish("EditCalendar/Delete"))}))},makeCalendarPublic:function(a,b){dojo.publish("WSFeedbackStart",[Config.Strings.Loading]);var d=this.calendarModel.calendars[a],e=this.calendarModel.calendarEnum,g=this.showCalendarIndexCB?this.showCalendarIndexCB():!1,g=this.calendarModel.getCalendarArgs(d,g),d=d[e.ticket],d=null!=d&&0<d.length,h=g.worldReadable&&!d;g.worldReadable=!0;d&&(g.ticket="");g.loadCallback=function(){dojo.publish("WSFeedbackEnd",[Config.Strings.Loading]);
var d=ws.string.substituteParams(h?Config.Strings.AlreadyPublic:Config.Strings.MakePublicSuccess,b);dojo.publish("WSFeedbackStart",[d,!0,function(){var d;d=Config.EnableCalendarPublicHTMLURL?ws.calendar.calutil.getPublicCalendarURL(a,null):ws.calendar.calutil.getPublicCalendarData(a,null);var e=ws.string.substituteParams(Config.Strings.PubCalEmailSubject,b),g=ws.string.substituteParams("\x3ca href\x3d'{0}'\x3e{1}\x3c/a\x3e",d,b),h=(Config.EnableCalendarPublicHTMLURL?ws.string.substituteParams(Config.Strings.PubCalEmailBody,
g,ws.UserContext.ActiveScreenName)+"\x3csmall\x3e"+ws.string.substituteParams(Config.Strings.PubCalEmailFooter,d)+"\x3c/small\x3e":ws.string.substituteParams(Config.Strings.PubCalEmailBody2,g,ws.UserContext.ActiveScreenName)+"\x3csmall\x3e"+ws.string.substituteParams(Config.Strings.PubCalEmailFooter2,d)+"\x3c/small\x3e").replace(/\\n/g,"\x3cbr\x3e");ws.WebSuite.getCompose("calendar",function(a){a.reset({subject:e,body:h,dontAddSignature:!0,isDirty:!0})})},null,Config.Strings.ShareLink])};g.errorCallback=
function(){ws.widget.Dialogs.ok(Config.Strings.CalErrorSavingCal);dojo.publish("WSFeedbackEnd",[Config.Strings.Loading])};this.calendarModel.saveCalendar(g)},setCalendarColor:function(a,b){var d=this.calendarModel.calendars[a],e=this.showCalendarIndexCB?this.showCalendarIndexCB():!1,d=this.calendarModel.getCalendarArgs(d,e);d.color=b;this.calendarModel.saveCalendar(d)},showContacts:function(a){ws.WebSuite.theAddressModel?(ws.WebSuite.theAddressModel.initData(),ws.WebSuite.displayContactListView(null,
a)):setTimeout(dojo.hitch(this,function(){ws.lang.ensureLayersLoadedSoon(dojo.hitch(this,function(){ws.WebSuite.theAddressModel.initData();ws.WebSuite.displayContactListView(null,a)}))}))},displayContactListView:function(a){var b=dijit.byId("AddressList");b&&(b.selectedView=null);a==this.selectedApp?ws.WebSuite.displayContactListView(null,null):this.selectApp(a)},showToday:function(){ws.WebSuite.showTodayPage()},autoScroll:function(a){var b=dojo.position(this.mainPane.domNode,!0),d=dojo._getContentBox(this.mainPane.domNode);
a=a.pageY-b.y;36>a?(this.autoScrollTO=ws.lang.setTimeout(dojo.hitch(this,"_autoScroll",-9),100),this.autoScrollStarted=!0):36>d.h-a?(this.autoScrollTO=ws.lang.setTimeout(dojo.hitch(this,"_autoScroll",9),100),this.autoScrollStarted=!0):this.autoScrollStarted=!1},_autoScroll:function(a){if(this.autoScrollStarted){var b=this.mainPane.domNode.scrollTop;ws.dnd.dragManager.onScroll();this.mainPane.domNode.scrollTop+=a;b==this.mainPane.domNode.scrollTop?this.autoScrollStarted=!1:this.autoScrollTO=ws.lang.setTimeout(dojo.hitch(this,
"_autoScroll",a),500)}},onMouseOverItem:function(a,b){if(!this.disableHover){var d=dojo.hasClass(a,"cpNavItem")?"":"navItemHover";dojo.addClass(a,d);d=dojo.query(".ctrl",a);0<d.length&&(d[0].style.display="",dojo.query(".text .unseen",a).style("display","none"))}ws.dnd&&ws.dnd.dragManager&&ws.dnd.dragManager._dragTriggered&&this.dragMessageStarted&&this.autoScroll(b)},removeItemHover:function(a){if(!this.disableHover){var b=dojo.hasClass(a,"cpNavItem")?"":"navItemHover";dojo.removeClass(a,b);b=dojo.query(".ctrl",
a);0<b.length&&(b[0].style.display="none",dojo.query(".text .unseen",a).style("display",""))}},onMouseOutItem:function(a){this.removeItemHover(a)},onMouseOverCalItem:function(a){this.disableHover||dojo.query(".ctrl",a).style("display","")},onMouseOutCalItem:function(a){this.disableHover||dojo.query(".ctrl",a).forEach(function(a){a!=this.activeQuickActionButton&&(a.style.display="none")},this)},handleRightClickAction:function(a,b){var d=this.rightClickMenuArgs;switch(a){case "renameFolder":this.editFolder(d.folderName);
break;case "emptyFolder":this.emptyFolder(d.folderName);break;case "deleteFolder":this.deleteFolder(d.folderName);break;case "markAllUnRead":this.changeFolderReadState(!1);break;case "markAllRead":this.changeFolderReadState(!0);break;case "newFolder":this.newFolder();break;case "goToCalendar":this.selectApp(this.APP_CALENDAR);break;case "addCalendar":this.selectApp(this.APP_ADDCALENDAR);break;case "newEvent":this.selectApp(this.APP_CALENDAR);this.displayAddCalEvent();break;case "selectThisCalendar":this.selectCalendar(d.calId);
break;case "selectThisCalendarOnly":this.selectThisCalendarOnly(d.calId);break;case "shareCalendar":case "editCalendar":this.editCalendar(d.calId);break;case "deleteCalendar":this.deleteCalendar(d.calId,d.displayName);break;case "makeCalendarPublic":this.makeCalendarPublic(d.calId,d.displayName);break;case "setCalendarColor":this.setCalendarColor(d.calId,b);break;case "goToContacts":this.displayContactListView(this.APP_CONTACTS);break;case "newContact":ws.lang.ensureLayersLoaded(dojo.hitch(this,function(){ws.WebSuite.displayNewContactView()}));
break;case "newDistList":ws.lang.ensureLayersLoaded(dojo.hitch(this,function(){ws.WebSuite.displayNewDistListView()}))}this.rightClickMenuArgs=null},displayAddCalEvent:function(){ws.WebSuite.getAddEditWidget(dojo.hitch(this,function(a){a.show()}))},defineMenus:function(){this.rightClickMenuDefinition={Mail:[{caption:Config.Strings.Rename,onClick:dojo.hitch(this,"handleRightClickAction","renameFolder")},{caption:Config.Strings.Empty,onClick:dojo.hitch(this,"handleRightClickAction","emptyFolder")},
{caption:Config.Strings.Delete,onClick:dojo.hitch(this,"handleRightClickAction","deleteFolder")},{separator:!0},{caption:"",onClick:dojo.hitch(this,"handleRightClickAction","markAllUnRead")},{caption:"",onClick:dojo.hitch(this,"handleRightClickAction","markAllRead")},{separator:!0}],Contacts:[{caption:Config.Strings.GoToContacts,onClick:dojo.hitch(this,"handleRightClickAction","goToContacts")},{separator:!0},{caption:Config.Strings.NewContact,onClick:dojo.hitch(this,"handleRightClickAction","newContact")},
{caption:Config.Strings.NewDistList,onClick:dojo.hitch(this,"handleRightClickAction","newDistList")}],CalendarHead:[{caption:Config.Strings.GoToCalendar,onClick:dojo.hitch(this,"handleRightClickAction","goToCalendar")},{separator:!0},{caption:Config.Strings.AddCalendar,onClick:dojo.hitch(this,"handleRightClickAction","addCalendar")},{caption:Config.Strings.NewEventBtn,onClick:dojo.hitch(this,"handleRightClickAction","newEvent")}],Calendar:[{caption:Config.Strings.AddEventBtn,onClick:dojo.hitch(this,
"handleRightClickAction","newEvent")},{caption:Config.Strings.ShowThisCalendarOnly,onClick:dojo.hitch(this,"handleRightClickAction","selectThisCalendarOnly")},{separator:!0},{caption:Config.Strings.Edit,onClick:dojo.hitch(this,"handleRightClickAction","editCalendar")},{caption:Config.Strings.ShareThisCalendar,onClick:dojo.hitch(this,"handleRightClickAction","shareCalendar")},{caption:Config.Strings.MakePublic,onClick:dojo.hitch(this,"handleRightClickAction","makeCalendarPublic")},{caption:Config.Strings.Delete,
onClick:dojo.hitch(this,"handleRightClickAction","deleteCalendar")},{separator:!0},{dojoType:"ws.widget.CalendarColorPickerMenuItem",onClick:dojo.hitch(this,"handleRightClickAction","setCalendarColor")}]}},createRightClickMenu:function(a){var b=this.rightClickMenuDefinition[a];if(!b)return null;b=this.rightClickMenu[a]=ws.widget.createMenu(b);"Mail"==a&&(a=new m({caption:Config.Strings.NewFolder}),a._onClick=dojo.hitch(this,"newFolder"),b.addChild(a));dojo.connect(b,"onClose",this,"onCloseMenu");
return b},getRightClickMenu:function(a){this.rightClickMenu||(this.rightClickMenu={});if(!this.rightClickMenuDefinition[a])return null;var b=this.rightClickMenu[a];b||(b=this.createRightClickMenu(a));return b},updateRightClickMenu:function(a){var b=this.rightClickMenuArgs,d=Settings.ViewNewOld?Config.Strings.KeepAllAsNewLabel:Config.Strings.MarkAllUnreadLabel,e=Settings.ViewNewOld?Config.Strings.IgnoreAllLabel:Config.Strings.MarkAllReadLabel,g=a.getChildren();a==this.rightClickMenu.Mail?(g[4].setCaption(d),
g[5].setCaption(e),g[0].setEnabled(b.showEdit),g[1].setEnabled(b.showEmpty&&0<b.folder.total),g[2].setEnabled(b.showEdit),this.newFolderInputMenu&&this.newFolderInputMenu.restore(),b=b.folderName==this.mailModel.currentFolder&&this.mailModel.canChangeMessageReadState()&&b.showActions,g[4].setEnabled(b),g[5].setEnabled(b)):a==this.rightClickMenu.Calendar&&(g[0].setShowing(b.showAddEvent),g[4].setShowing(b.showShare),g[5].setShowing(b.showPublish),g[6].setShowing(b.showDelete),a=this.calendarModel.getCalendarList(),
d=this.calendarModel.calendarEnum,b=ws.lang.findByProp(a,d.id,b.calId),g[8]&&g[8].setCurrentColor(a[b][d.color]))},onQuickActionMenu:function(a,b){ws.lang.ensureLayersLoaded(dojo.hitch(this,"_onContextMenu",a,-1,-1,b));this.activeQuickActionButton=b},onContextMenu:function(a,b){dojo.stopEvent(b);ws.lang.ensureLayersLoaded(dojo.hitch(this,"_onContextMenu",a,b.pageX,b.pageY,b.target))},_onContextMenu:function(a,b,d,e){var g=a.type,h=this.getRightClickMenu(g);h&&(h.isShowing()&&h.close(),this.rightClickMenuArgs=
a,h=this.getRightClickMenu(g),this.updateRightClickMenu(h),0<=b?h.open(b,d,e):h.open(e))},onCloseMenu:function(){this.activeQuickActionButton&&(this.activeQuickActionButton.style.display="none",this.activeQuickActionButton=null)},toggleTwisty:function(a,b){dojo.query(".myFoldersItem .iconToggle use")[0].setAttributeNS("http://www.w3.org/1999/xlink","href",a?"#iconDown":"#iconRight");b.style.display=a?"":"none"},isSearchQueryUnique:function(a,b){var d=ws.Jws.jwsData.recentSS;if(d)for(var e=0;e<d.length;e++){var g=
this.parseSSquery(d[e].query);if(a==g[0]&&b==g[1])return!1}return!0},addRecentSearch:function(a,b){var d="";"alltext"==a?d="":"subject"==a?d=Config.Strings.Subject:"fromto"==a?d=Config.Strings.FromTo:"calendar"==a?d=Config.Strings.Calendar:"contacts"==a&&(d=Config.Strings.Contacts);var d=[a,b.replace(" ","+"),d],d=encodeURIComponent(d.join(":")),e="RecentSearchQueries_"+d;this.isSearchQueryUnique(a,b)&&ws.Jws.addSearch({name:e,query:d})},parseSSquery:function(a){a=decodeURIComponent(a);a=a.replace("+",
" ");return a.split(":")},populateSearchMenuWithRecentSearches:function(){if(ws.Jws.jwsData.recentSS&&0<ws.Jws.jwsData.recentSS.length){this.searchMenu.addChild(new w);var a=new m({caption:Config.Strings.RecentSearches,isLabel:!0});this.searchMenu.addChild(a);for(var a=ws.Jws.jwsData.recentSS.length-1,b=0;0<=a&&b<ws.Jws.SEARCH_QUERY_SAVE_LIMIT;a--,b++){var d=this.parseSSquery(ws.Jws.jwsData.recentSS[a].query);d&&2<d.length&&(d="\x26ldquo;"+ws.string.escapeXml(d[1])+"\x26rdquo; \x3cspan\x3e"+d[2]+
"\x3c/span\x3e",d=new m({caption:d,isCheckable:!1}),d.onClick=dojo.hitch(this,"performRecentSearch",a),this.searchMenu.addChild(d))}}},openSearchMenu:function(a){ws.Jws.jwsData.recentSS?this._openSearchMenu(a):ws.Jws.getSavedSearches(!0).then(h.hitch(this,function(){this._openSearchMenu(a)}),h.hitch(this,function(){this._openSearchMenu(a)}))},_openSearchMenu:function(a){this.searchMenu&&this.searchMenu.destroy();this.searchMenu=ws.widget.createMenu([{caption:Config.Strings.Mail,searchScope:"alltext",
onClick:dojo.hitch(this,"setSearchScopePlusReport","alltext",Config.Strings.Mail),iconClass:""},{caption:Config.Strings.Subject,searchScope:"subject",onClick:dojo.hitch(this,"setSearchScopePlusReport","subject",Config.Strings.Subject),iconClass:""},{caption:Config.Strings.Sender,searchScope:"fromto",onClick:dojo.hitch(this,"setSearchScopePlusReport","fromto",Config.Strings.Sender),iconClass:""},{caption:Config.Strings.AdvancedSearch,onClick:dojo.hitch(ws.WebSuite,"advancedSearch"),iconClass:""},{separator:!0},
{caption:Config.Strings.Calendar,searchScope:"calendar",onClick:dojo.hitch(this,"setSearchScopePlusReport","calendar",Config.Strings.Calendar),iconClass:""},{caption:Config.Strings.Contacts,searchScope:"contacts",onClick:dojo.hitch(this,"setSearchScopePlusReport","contacts",Config.Strings.Contacts),iconClass:""}]);dojo.addClass(this.searchMenu.domNode,"searchDropDownMenu");var b=this.mailModel.allowAllTextSearch();this.populateSearchMenuWithRecentSearches();var d=0;"calendar"==this.searchScope?d=
4:"contacts"==this.searchScope?(this.searchScope="contacts",d=5):"alltext"==this.searchScope?(this.searchScope="alltext",d=0):"subject"==this.searchScope?(this.searchScope="subject",d=1):"fromto"==this.searchScope&&(this.searchScope="fromto",d=2);this.searchMenu.getChildren()[d].setChecked(!0);d=this.searchMenu;d.isShowing()?d.close():(d.getChildren()[0].setShowing(b),b=this.mailModel.getCurrentFolder()||{},b=this.mailModel.isFolderType(b,"SENT")||this.mailModel.isFolderType(b,"DRAFT")||"Saved/Auto Saved Sent Mail"==
b.name||this.mailModel.isFolderType(b,"CHATS")?Config.Strings.Recipient:Config.Strings.Sender,Config.UseOMS&&Config.CrossFolderSearch&&(b=Config.Strings.FromTo),d.getChildren()[2].setCaption(b),d.open(a.target))},performRecentSearch:function(a){a=decodeURIComponent(ws.Jws.jwsData.recentSS[a].query);a=a.replace("+"," ");a=a.split(":");var b=Config.Strings.Mail;switch(a[0]){case "alltext":b=Config.Strings.Mail;case "subject":b=Config.Strings.Subject;case "fromto":b=Config.Strings.Sender;case "calendar":b=
Config.Strings.Calendar}var d=this.getSearchWidget();d.style.color=this.searchFieldColor;this.setSearchScope(a[0],b);d.value=a[1];d.style.color=this.searchFieldColor;this.searchApp(null,!0)},setSearchScopePlusReport:function(a,b){ws.reporting.reportDLAction("Mail-Search-DropDown"+this.reportDLsearchMap[a]);this.setSearchScope(a,b)},setSearchScope:function(a,b){this.searchScope=a;var d=this.searchMenu;d&&dojo.forEach(d.getChildren(),function(a){!a.separator&&dojo.isFunction(a.setChecked)&&a.setChecked(a.caption==
b)});d=this.getSearchWidget();""==d.style.color&&null==this.mailModel.getSearchString()&&(d.value=this.getSearchGhostText(a))},getSearchGhostText:function(a){var b;"fromto"==a&&(Config.UseOMS&&Config.CrossFolderSearch?b=Config.Strings.SearchFromTo:(b=(this.mailModel.getCurrentFolder()||{}).name,b="Sent"==b||"Draft"==b||"Saved/Auto Saved Sent Mail"==b?Config.Strings.SearchRecipient:Config.Strings.SearchSender));"alltext"==a&&(b=Config.Strings.SearchMail);"subject"==a&&(b=Config.Strings.SearchSubject);
"calendar"==a&&(b=Config.Strings.SearchCalendar);"contacts"==a&&(b=Config.Strings.SearchContacts);return b},removeSpecialCharacters:function(a){if(a)return a=a.replace(/^\s+/,""),a=a.replace(/^[\+\-<>]/,""),Config.UseOMS&&"calendar"!=this.searchScope?a.replace(/[\/_()&~`!{}^#?%$;:\[\]"\r\n\\]+/g,""):a.replace(/[\=()&*~`!{}^#?%$;:\[\]"]+/g,"")},searchApp:function(a,b){var d=this.getSearchWidget();if(""==d.style.color||void 0==d.value||""==d.value)return ws.widget.Dialogs.ok(Config.Strings.SearchFieldEmpty),
!1;this.reportDLsearch(b);d.value=this.removeSpecialCharacters(d.value);if(""==d.value)return ws.widget.Dialogs.ok(Config.Strings.SearchFieldEmpty),!1;if("calendar"==this.searchScope)this.searchCalendar(this.searchScope);else if("contacts"==this.searchScope){if(d=dijit.byId("AddressList"))d.selectedView=null;this.searchContacts()}else d.style.color=this.searchFieldColor,this.searchMail(this.searchScope);return!0},searchMail:function(a){var b=this.getSearchWidget();this.searchMailCB&&""!=b.style.color&&
this.searchMailCB(a,b.value)},searchCalendar:function(a){var b=this.getSearchWidget();this.searchCalendarCB&&""!=b.style.color&&this.searchCalendarCB(a,b.value)},searchContacts:function(a){a=this.getSearchWidget();if(this.searchContactsCB){var b=a.value;if(""==a.style.color||0==b.length)b=void 0;this.searchContactsCB(b);b||a.blur()}},onFocusSearchField:function(){var a=this.getSearchWidget();""==a.style.color&&(a.value="");a.style.color=this.searchFieldColor},clearSearchField:function(){this.getSearchWidget().value=
"";this.setSearchScope(this.mailModel.allowAllTextSearch()?"alltext":"subject",Config.Strings.Mail);this.resetSearchField()},clearSearch:function(){this.setSearchScope(this.mailModel.allowAllTextSearch()?"alltext":"subject",Config.Strings.Mail)},resetSearchField:function(a){a=a||this.getSearchWidget();if(""==a.value)if(a.style.color="",this.searchMenu)a.value=this.getSearchGhostText(this.searchScope);else if("calendar"==this.searchScope)a.value=this.getSearchGhostText("calendar");else if("contacts"==
this.searchScope)a.value=this.getSearchGhostText("contacts");else{try{var b=this.mailModel.allowAllTextSearch()}catch(B){}a.value=b?this.getSearchGhostText("alltext"):this.getSearchGhostText("subject")}},reportDLsearchMap:{alltext:"AllMail",subject:"Subject",fromto:"From",calendar:"Calendar",contacts:"Contacts"},reportDLsearch:function(a){var b="Mail-Search-"+this.reportDLsearchMap[this.searchScope];if(a)b="Mail-Search-RecentSearches";else if("contacts"==this.searchScope){if(this.contactSearchReported)return;
this.contactSearchReported=!0}ws.reporting.reportDLAction(b+"-from"+ws.WebSuite.getCurrentViewId())},onBlurSearchField:function(){this.resetSearchField()},mnSearchGo:function(){this.searchApp()},onKeyPressSearchField:function(a){var b=dijit.byId("AddressList"),d=ws.WebSuite.getCurrentViewId();!b||"distributionListWidget"!=b.selectedView&&"contactDetails"!=b.selectedView||"AddressList"!=d||(b.selectedView=null);b=this.getSearchWidget();d=dojo.hasClass(this.mnSearch,"mnSearchActive");""==b.style.color&&
(b.value="",b.style.color=this.searchFieldColor);a.keyCode==dojo.keys.ENTER?("contacts"==this.searchScope&&this.searchTimer&&clearTimeout(this.searchTimer),this.searchApp()&&dojo.removeClass(this.shNavItem,"mnSearchSelected"),a.preventDefault(),this.isMini&&this.mnSearchClose()):a.keyCode==dojo.keys.ESCAPE?(a.preventDefault(),!this.isMini||this._oldsiNode||d||this.mnSearchClose()):"contacts"==this.searchScope&&(this.searchTimer&&clearTimeout(this.searchTimer),this.searchTimer=null,this.searchTimer=
setTimeout(dojo.hitch(this,function(){this.reportDLsearch();this.searchContacts()}),500))},modelUpdated:function(a){this.searchStrUpdated(a);"mail"==a?this.maybePlayYgmSound():"calendar"==a?this.searchScope="calendar":"contacts"==a&&(this.searchScope="contacts")},searchStrUpdated:function(a){if(!this.mailModel.searchInProgress){var b=null;if("mail"==a){a=ws.WebSuite.getCurrentViewId();if("AddressList"==a||"calendarView"==a)return;"before"!=this.mailModel.getSearchIn()&&(b=this.mailModel.getSearchString());
null!=b&&this.addRecentSearch(this.searchScope,b)}else"calendar"==a&&null!=this.calendarModel?(b=this.calendarModel.getSearchString(),null!=b&&this.addRecentSearch(this.searchScope,b)):"contacts"==a&&(b=this.abModel.getSearchString());null==b&&(b="");this.updateSearchStr(this.searchField,b);this.updateSearchStr(this.mnSearchField,b)}},updateSearchStr:function(a,b){if(a.value!=b){a.value=b;var d=!1;""!=a.value&&(d=!0);this.resetSearchField(a);d&&(a.style.color=this.searchFieldColor)}},onmouseoverMNS:function(a){this.onmouseoverMN(a,
"shNavItem")},onmouseoutMNS:function(a){this.onmouseoutMN(a,"shNavItem")},onmouseoverMNC:function(a){this.onmouseoverMN(a,"cpNavItem")},onmouseoutMNC:function(a){this.onmouseoutMN(a,"cpNavItem")},onmouseoverMN:function(a,b,d){if(b=ws.widget.getEventTarget(a,b||"navItem",d||"navToolbar")){d=0;var e=dojo.query(".mnUnseen",b)[0],g={side:"right"};e&&(d=+dojo.attr(e,"theCount"));0<d&&(g.label=dojo.attr(b,"data-title")+"\x26nbsp;("+d+")");ws.widget.showInstatip(b,g)}this.onMouseOverItem(b,a)},onmouseoutMN:function(a,
b,d){(b=ws.widget.getEventTarget(a,b||"navItem",d||"navToolbar"))&&ws.widget.hideInstatip(b);this.onMouseOutItem(b,a)},onMouseOverAT:function(a){if(a=ws.widget.getEventTarget(a,"appTitleBar","appTitleBar")){var b=dojo.position(a),d=dojo._getMarginSize(dojo.query(".appTitleLink",a)[0]).w-26;b.x+=d;b.y+=9;b.w-=d;ws.widget.showInstatip(a,{side:"top",nodePosition:b})}},onMouseOutAT:function(a){(a=ws.widget.getEventTarget(a,"appTitleBar","appTitleBar"))&&ws.widget.hideInstatip(a)},onmouseoverCP:function(a){(a=
ws.widget.getEventTarget(a,"composeBtn","controlsPaneBtns"))&&ws.widget.showInstatip(a)},onmouseoutCP:function(a){(a=ws.widget.getEventTarget(a,"composeBtn","controlsPaneBtns"))&&ws.widget.hideInstatip(a)},onmousedownCP:function(a){(a=ws.widget.getEventTarget(a,"cpBtn","controlsPaneBtns"))&&dojo.addClass(a.parentNode,"cpBtnClick")},onmouseupCP:function(){dojo.query(".cpBtnClick",this.controlsPaneBtns).removeClass("cpBtnClick")},onmouseoverAP:function(a){if(a=ws.widget.getEventTarget(a,"apBtn","apBtns"))dojo.addClass(a.parentNode,
"apBtnHover"),ws.widget.showInstatip(a,{side:"top"})},onmouseoutAP:function(a){if(a=ws.widget.getEventTarget(a,"apBtn","apBtns"))dojo.removeClass(a.parentNode,"apBtnHover"),dojo.removeClass(a.parentNode,"apBtnClick"),ws.widget.hideInstatip(a)},onmousedownAP:function(a){(a=ws.widget.getEventTarget(a,"apBtn","apBtns"))&&dojo.addClass(a.parentNode,"apBtnClick")},onmouseupAP:function(){dojo.query(".apBtnClick",this.apBtns).removeClass("apBtnClick")},selectAppById:function(a,b){if(ws.lang.undefinedOrNull(a)||
"aimApp"===a)a="contactApp";switch(a){case "contactApp":this.selectContactApp(null,b);break;case "eventApp":this.selectEventApp(null,b);break;case "todoApp":this.selectTodoApp(null,b)}},showAppPane:function(){Settings.NavAppPaneSize=1;ws.settings.save({NavAppPaneSize:1});this.onResized()},hideAppPane:function(){Settings.NavAppPaneSize=0;ws.settings.save({NavAppPaneSize:0});this.onResized()},selectContactApp:function(a,b){a&&"contactApp"!=this.currentApp&&ws.reporting.reportDLAction("Mail-LeftNav-minicontacts-InlineOpen");
this.currentApp="contactApp";var d=dijit.byId("contactApp");this.appStack.selectChild(d);d.init();dojo.query(".appCurr",this.apBtns).removeClass("appCurr");dojo.query(".ap-contact .apBtn",this.apBtns).addClass("appCurr");"contactApp"!=Settings.NavAppSelected&&(ws.settings.save({NavAppSelected:"contactApp"}),Settings.NavAppSelected="contactApp");0!=Settings.NavAppPaneSize||b||this.showAppPane()},selectEventApp:function(a,b){a&&"eventApp"!=this.currentApp&&ws.reporting.reportDLAction("Mail-LeftNav-minical-InlineOpen");
this.currentApp="eventApp";var d=dijit.byId("eventApp");this.appStack.selectChild(d);d.init();dojo.query(".appCurr",this.apBtns).removeClass("appCurr");dojo.query(".ap-event .apBtn",this.apBtns).addClass("appCurr");"eventApp"!=Settings.NavAppSelected&&(ws.settings.save({NavAppSelected:"eventApp"}),Settings.NavAppSelected="eventApp");0!=Settings.NavAppPaneSize||b||this.showAppPane()},selectTodoApp:function(a,b){a&&"todoApp"!=this.currentApp&&ws.reporting.reportDLAction("Mail-LeftNav-minitodo-InlineOpen");
this.currentApp="todoApp";var d=dijit.byId("todoApp");this.appStack.selectChild(d);d.init();dojo.query(".appCurr",this.apBtns).removeClass("appCurr");dojo.query(".ap-todo .apBtn",this.apBtns).addClass("appCurr");"todoApp"!=Settings.NavAppSelected&&(ws.settings.save({NavAppSelected:"todoApp"}),Settings.NavAppSelected="todoApp");0!=Settings.NavAppPaneSize||b||this.showAppPane()},hideConnector:function(a){a.style.display="none"},positionFolderConnector:function(a){if(this.folderFlyout&&"none"!=this.folderFlyout.style.display){var b,
d;b=this.folderFlyout;a=dojo.position(a);b=dojo.position(b);d=a.y-b.y;31<d&&d<b.h-31&&!dojo.hasClass(this.mnFolders,"navItemCurrent")?dojo.style(this.folderFlyoutConnector,{height:a.h-2+"px",top:d+"px",display:"block"}):this.hideConnector(this.folderFlyoutConnector)}},positionConnector:function(a){if(this.flyout&&"none"!=this.flyout.style.display){if(!a)if(a=dojo.query(".navAppCurr",this.mnAppsDiv),a.length)a=dojo.query(".navAppCurr",this.mnAppsDiv)[0];else return;var b;a=dojo.position(a);b=dojo.position(this.flyout);
dojo.style(this.flyoutConnector,{height:a.h-2+"px",top:a.y-b.y+"px",display:"block"})}},flyoutApp:function(a){this.reporting_idMap||(this.reporting_idMap={contactApp:"Mail-LeftNav-minicontacts-FlyoutOpen",eventApp:"Mail-LeftNav-minical-FlyoutOpen",todoApp:"Mail-LeftNav-minitodo-FlyoutOpen"});ws.reporting.reportDLAction(this.reporting_idMap[a]);this.closeFlyoutFolders();var b=dijit.byId(a);b.init&&b.init();this.appStack.removeChild(b);this.flyout?this.restoreApp():(this.flyout=dojo.create("div",{className:"flyoutCont",
style:"display:none;"},dojo.body()),this.flyoutConnector=dojo.create("div",{className:"foConnector"},this.flyout));dojo.place(b.domNode,this.flyout,"first");dojo.removeClass(b.domNode,"dijitHidden");dojo.query(".navItem",this.mnAppsDiv).removeClass("navAppCurr");var d=dojo.query("."+a,this.mnAppsDiv)[0];dojo.hasClass(d,"navItemCurrent")||dojo.query("."+a,this.mnAppsDiv).addClass("navAppCurr");ws.widget.hideInstatip(dojo.query("."+a,this.mnAppsDiv)[0]);b.show();dojo.query(".appTitleClose",b.domNode).style("display",
"");this.flyout.style.display="";a=dojo._getMarginSize(b.domNode);a.w=180;if(200>a.h||1==Settings.NavAppPaneSize)a.h=200;a.h!=Settings.NavAppPaneSize&&200<Settings.NavAppPaneSize&&(a.h=Settings.NavAppPaneSize);dojo.marginBox(b.domNode,{w:a.w,h:a.h});setTimeout(function(){b.resize()},0);this.positionConnector(d)},flyoutFolders:function(){require(["ws/mail/FolderApp"],dojo.hitch(this,function(a){this.restoreApp();dojo.addClass(this.mnFolders,"folderBtnSelected");this.folderFlyout||(this.folderFlyout=
dojo.create("div",{id:"folderFlyCont",className:"folderFlyCont",style:"display:none;"},dojo.body()),this.folderApp=new a,this.folderFlyout.appendChild(this.folderApp.domNode),this.folderApp.setModel(this.mailModel),this.folderFlyoutConnector=dojo.create("div",{className:"foConnector"},this.folderFlyout),this.connect(this.folderApp,"handleClick",dojo.hitch(this,this.hideConnector,this.folderFlyoutConnector)),this.connect(this.folderApp,"appClose",dojo.hitch(this,function(){dojo.removeClass(this.mnFolders,
"folderBtnSelected")})));this.folderApp.modelUpdated();a=ws.WebSuite.viewportSize.h;var b=dojo._getMarginSize(this.appStack.domNode),d=dojo.position(this.mnFolders);b.w=180;200>b.h&&(b.h=200);dojo.style(this.folderApp.domNode,{width:b.w+"px",height:b.h+"px"});d.y=d.y-b.h/2+20;d.y+b.h>a&&(d.y=a-b.h-2);this.folderFlyout.style.top=d.y+"px";var e=this.folderApp;setTimeout(function(){e.resize()},0);this.folderFlyout.style.display="block";dojo.hasClass(this.mnFolders,"navItemCurrent")||this.positionFolderConnector(this.mnFolders)}))},
closeFlyoutFolders:function(){this.folderFlyout&&(this.folderFlyout.style.display="none",dojo.removeClass(this.mnFolders,"folderBtnSelected"))},restoreApp:function(){if(this.flyout){this.flyout.style.display="none";var a=this.flyout.firstChild;if(a&&"foConnector"!=a.className){var b=dijit.byNode(a);b.hide();dojo.query(".navItem",this.mnAppsDiv).removeClass("navAppCurr");this.flyout.removeChild(a);this.appStack.addChild(b);dojo.query(".appTitleClose",b.domNode).style("display","none");this.selectAppById(b.domNode.id);
this.hiliteCurrentApp()}}this.closeFlyoutFolders()},searchActive:function(a,b){},onSettingsShow:function(){this.restoreApp();this.mnSearchClose()},onSettingsHide:function(){dojo.hasClass(this.mnSearch,"mnSearchActive")&&this.isMini&&(this.mnSearch.style.display="block")},showMnSearch:function(a){if(this.isMini){var b=dojo.hasClass(this.mnSearch,"mnSearchActive");this.mnSearch.style.display=a&&b?"block":"none"}},FOLDERS_NO_COUNT:["SENT","CHATS","OLDMAIL","TRASH"],FOLDERS_NO_BOLD:["SENT","CHATS","OLDMAIL",
"TRASH"],folderCanShowBold:function(a){return 0==ws.lang.intersection(this.FOLDERS_NO_BOLD,a.types).length},folderCanShowCount:function(a){return 0==ws.lang.intersection(this.FOLDERS_NO_COUNT,a.types).length}})})},"ws/Spinner":function(){define("ws/Spinner",["dojo/_base/declare","dojo"],function(f,k){(new Image).src=Config.BaseImagesURL+"common/spinnerFeedback.gif";return f(null,{constructor:function(d,b,a){var h=null,f=null;switch(d){case "Feedback":h="common/spinnerFeedback.gif";f="20px";break;
case "SlideShow":h="common/spinnerSlideShow.gif";f="50px";break;case "AimSignIn":h="common/spinnerAimSignIn.gif";f="18px";break;default:h="common/spinnerAutoSave.gif",f="18px"}b&&(d={width:f,height:f,display:"none"},this.spinGif=document.createElement("img"),k.mixin(d,a||{}),k.style(this.spinGif,d),this.spinGif.src=Config.BaseImagesURL+h,b.innerHTML="",b.appendChild(this.spinGif))},spin:function(d){this.spinGif.style.display=""},stop:function(){this.spinGif.style.display="none"}})})},"ws/widget/WSMenu":function(){define("ws/widget/WSMenu",
"dojo/_base/declare dojo/text!ws/widget/WSMenu.css dojo dijit dojo/window dijit/_Widget dijit/_TemplatedMixin dijit/_Container ws/widget/popup ws/html ws/string".split(" "),function(f,k,d,b,a,h,l,e){return f([h,l,e],{templateString:'\x3cdiv class\x3d"wsMenu" style\x3d"display: none;"\x3e\t\x3ctable border\x3d0 cellspacing\x3d0 cellpadding\x3d0\x3e\t\t\x3ctbody data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\t\x3c/table\x3e\x3c/div\x3e',css:{templateString:k},scrollBarWidth:0,scrollBarWidthHasBeenAdded:!1,
menuOrient:null,padding:d.isMac&&d.isWebKit?[0,-1]:[0,5],startup:function(){d.forEach(this.getChildren(),function(a){a.startup()});this._started=!0;this.scrollBarWidth=ws.WebSuite.scrollbarWidth;this.subscribe("wsresize","close")},open:function(a,b,d,e){var g,h;"number"==typeof a&&(g=a,h=b,b=d,d=e,a=null);ws.widget.popup({popup:this,x:g,y:h,around:a,orient:this.menuOrient||d,parent:b,padding:this.padding,shadow:!1})},onOpen:function(){this.domNode.style.height="";var b=d._getMarginSize(this.domNode),
e=a.getBox().h;if(b.h>e){var h=this.scrollBarWidthHasBeenAdded?0:this.scrollBarWidth;this.scrollBarWidthHasBeenAdded=!0;d.marginBox(this.domNode,{h:e,w:b.w+h})}else this.scrollBarWidthHasBeenAdded&&(d.marginBox(this.domNode,{w:b.w-this.scrollBarWidth}),this.scrollBarWidthHasBeenAdded=!1);if(this.enableA11yKey){"number"==typeof this.currentSelection&&0<=this.currentSelection&&this.a11yClearSelection();this.a11yKeyHndlrConnect=d.connect(this.domNode,"onkeyup",this,this.a11yKeyHndlr);try{this.domNode.tabIndex=
-1,this.domNode.focus()}catch(t){}}},a11yKeyHndlr:function(a){a&&(a.keyCode==d.keys.DOWN_ARROW&&!a.shiftKey||"Down"==a.keyIdentifier)?this.a11yMoveSelection(1):a&&(a.keyCode==d.keys.UP_ARROW&&!a.shiftKey||"Up"==a.keyIdentifier)?this.a11yMoveSelection(-1):!a||a.keyCode!=d.keys.ENTER&&"Enter"!=a.keyIdentifier||a.shiftKey||this.a11yDoClickAction()},a11yDoClickAction:function(){var a=this.getChildren()[this.currentSelection];this.a11yIsForValidItem(a)&&(a.doClickAction(),this.close())},a11yIsForValidItem:function(a){if(!a)return!1;
var b="none"===a.domNode.style.display;return a.isSeparator||a.disabled||b?!1:!0},a11yMoveSelection:function(a){var b=d.hitch(this,function(a,b){var d=!0;a>=b&&(d=!1);0>a&&(d=!1);return d});"number"!=typeof this.currentSelection&&(this.currentSelection=-1);var e=this.getChildren(),h=e.length;if(h){for(var f=this.currentSelection+a,m=b(f,h),l=e[f],l=this.a11yIsForValidItem(l);m&&!l;)f+=a,m=b(f,h),l=e[f],l=this.a11yIsForValidItem(l);l&&(this.currentSelection=f);l=e[this.currentSelection];l=this.a11yIsForValidItem(l);
for(a=0;a<h;a++)l&&a==this.currentSelection?e[a].keySelect():e[a].keyDeselect()}},a11yClearSelection:function(){this.currentSelection=-1;var a=this.getChildren(),b=a.length;if(b)for(var d=0;d<b;d++)a[d].keyDeselect()},close:function(){ws.widget.popup.close(this)},onClose:function(){this.a11yKeyHndlrConnect&&d.disconnect(this.a11yKeyHndlrConnect);d.forEach(this.getChildren(),function(a){a.onClose()})},bindDomNode:function(a,b,d){this.boundNode=a;this.boundParentWidget=b;d||this.connect(a,"onclick",
"openMyself")},openMyself:function(a){if(this.isShowing())return this.close();this.open(this.boundNode,this.boundParentWidget)},getBorderBoxWidth:function(){if(this.isShowing())return d._getMarginSize(this.domNode).w;this.domNode.style.position="absolute";this.domNode.style.left="-9999px";this.domNode.style.top="-9999px";this.domNode.style.display="";var a=d._getMarginSize(this.domNode).w;this.domNode.style.position="";this.domNode.style.left="";this.domNode.style.top="";this.domNode.style.display=
"none";return a},processKey:function(a){var b=d.filter(this.getChildren(),function(b){return b.shortCutKey&&b.shortCutKey.toLowerCase()==a.keyChar.toLowerCase()})[0];b&&(b._onClick(),d.stopEvent(a))},hideChild:function(a){d.query("#"+this.id+" tbody tr:nth-child("+a+")").style("display","none")},showChild:function(a){d.query("#"+this.id+" tbody tr:nth-child("+a+")").style("display","")},setChecked:function(a,b){b&&this.setUnchecked();var e=this.getChildren();e&&d.forEach(a,function(a){e[a]&&e[a].setChecked(!0)})},
setUnchecked:function(a){var b=this.getChildren();if(d.isArray(a))d.forEach(a,function(a){b[a]&&b[a].setChecked(!1)});else for(a=0;a<b.length;a++)b[a].setChecked(!1)}})})},"ws/widget/WSMenuItem":function(){define("ws/widget/WSMenuItem","dojo/_base/declare dojo dijit dijit/_Widget dijit/_TemplatedMixin dijit/_Contained ws/html ws/string".split(" "),function(f,k,d,b,a,h){return f([b,a,h],{templateString:'\x3ctr class\x3d"wsMenuItem" data-dojo-attach-event\x3d"onclick: _onClick" title\x3d"${title}"\x3e\t\x3ctd tabIndex\x3d"-1"\x3e\x3cdiv class\x3d"iconNode" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/div\x3e\x3c/td\x3e\t\x3ctd tabIndex\x3d"-1" class\x3d"label" data-dojo-attach-point\x3d"labelNode"\x3e\x3c/td\x3e\t\x3ctd tabIndex\x3d"-1"\x3e\x3cdiv class\x3d"checkNode" data-dojo-attach-point\x3d"checkNode"\x3e\x3csvg class\x3d"svgIcon"\x3e\x3cuse xlink:href\x3d"#iconCheckMark"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e',
checkOnClass:"ckonCol",checkOffClass:"ckoffCol",iconClass:null,iconID:null,width:0,caption:"",title:"",shortCutKey:null,disabled:!1,mouseOverBgColor:"#E7F1F8",mouseOverTextColor:"#555",mouseOverSamplingClass:"wsMenuItemHover",isCheckable:!0,bckgrndColor:"#fff",textColor:"#555",className:null,isLabel:!1,noHoverColor:!1,startup:function(){k.setSelectable(this.domNode,!1);this.domNode.title=this.title;this.width&&(this.labelNode.style.width=this.width+"px",this.domNode.style.whiteSpace="normal");this.className&&
k.addClass(this.domNode,this.className);this.setChecked();this.iconClass&&k.addClass(this.iconNode,this.iconClass);this.iconID&&(this.iconNode.innerHTML="\x3csvg\x3e\x3cuse xlink:href\x3d'#"+this.iconID+"'\x3e\x3c/use\x3e\x3c/svg\x3e");this.isLabel&&(this.disabled=!0,k.addClass(this.labelNode,"menuItemLabel"));this.updateDisabled();this.labelNode.innerHTML=this.caption;this._updateMouseOverColor();this._handleHover(this.domNode);Config.EnableThemes&&this.subscribe("Theme/Change","_updateMouseOverColor");
this.needsStyleUpdate&&this.subscribe("Menu/StyleUpdate","_updateMouseOverColor")},_updateMouseOverColor:function(){if(!this.noHoverColor){var a="#FFF",b="#555",d="#e4edfa",g="#555";this.domNode&&(a=k.style(this.domNode,"backgroundColor")||a,b=k.style(this.domNode,"color")||b,k.addClass(this.iconNode,this.mouseOverSamplingClass),d=k.style(this.iconNode,"backgroundColor")||d,g=k.style(this.iconNode,"color")||g,k.removeClass(this.iconNode,this.mouseOverSamplingClass));this.bckgrndColor=a;this.textColor=
b;this.mouseOverBgColor=d;this.mouseOverTextColor=g}},_handleHover:function(a){this.noHoverColor||(this.connect(a,"onmouseenter",function(){a.style.backgroundColor=this.mouseOverBgColor;a.style.color=this.mouseOverTextColor}),this.connect(a,"onmouseleave",function(){a.style.backgroundColor=this.bckgrndColor;a.style.color=this.textColor}))},_onClick:function(a){this.doClickAction(a);k.stopEvent(a)},doClickAction:function(a){this.disabled||(this.domNode&&this.getParent().close(),this.onClick(a))},keySelect:function(){if(this.labelNode&&
!this.disabled){this.labelNode.style.border="2px solid #000";this.labelNode.style.padding="2px 34px 3px 35px";try{this.labelNode.focus()}catch(l){}}},keyDeselect:function(){this.labelNode&&!this.disabled&&(this.labelNode.style.border="",this.labelNode.style.padding="4px 36px 5px 37px")},onClick:function(){},enable:function(){this.disabled=!1;this.updateDisabled()},disable:function(){this.disabled=!0;this.updateDisabled()},updateDisabled:function(){k.toggleClass(this.domNode,"wsMenuItemDisabled",this.disabled);
this.domNode.style.color="";this._updateMouseOverColor()},setChecked:function(a){this.isCheckable&&("undefined"!=typeof a&&(this.checked=a),"undefined"!=typeof this.checked&&(k.toggleClass(this.checkNode,this.checkOnClass,this.checked),k.toggleClass(this.checkNode,this.checkOffClass,!this.checked)))},setCaption:function(a){this.labelNode.innerHTML=a},onClose:function(){this.noHoverColor||(this.domNode.style.backgroundColor=this.bckgrndColor,this.domNode.style.color=this.textColor)}})})},"dijit/_Contained":function(){define(["dojo/_base/declare",
"./registry"],function(f,k){return f("dijit._Contained",null,{_getSibling:function(d){var b=this.getParent();return b&&b._getSiblingOfChild&&b._getSiblingOfChild(this,"previous"==d?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var d=this.getParent();return d&&d.getIndexOfChild?d.getIndexOfChild(this):-1}})})},"ws/widget/WSMenuSeparator":function(){define("ws/widget/WSMenuSeparator",
["dojo/_base/declare","dojo","dijit","ws/widget/WSMenuItem"],function(f,k,d,b){return f([b],{templateString:'\x3ctr class\x3d"wsMenuSeparator2"\x3e\t\x3ctd colspan\x3d3\x3e\t\t\x3cdiv data-dojo-attach-point\x3d"top" class\x3d"wsMenuSeparator wsMenuSeparatorTop"\x3e\x3c/div\x3e\t\t\x3cdiv class\x3d"wsMenuSeparatorBottom"\x3e\x3c/div\x3e\t\x3c/td\x3e\x3c/tr\x3e',isCheckable:!1,isSeparator:!0,startup:function(){this.hideLine&&(this.top.style.display="none")}})})},"ws/suite/UpgradeDialog":function(){define("ws/suite/UpgradeDialog",
"dojo/_base/declare dojo/text!ws/suite/UpgradeDialog.html dojo/text!ws/suite/UpgradeDialog.css dojo dijit dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ws/widget/WSModalPane dijit/_TemplatedMixin ws/html ws/io ws/string".split(" "),function(f,k,d,b,a,h,l,e){return f([e,h,l],{templateString:k,css:{templateString:d},startup:function(){this.inherited(arguments);this.subtext.innerHTML="Unused";b.query(".modalContainer",this.domNode).addClass("featureUpgrade");this.domNode.style.width="462px";this.show()},
hideDlg:function(){this.hide()}})})},"ws/address/PeopleApp":function(){define("ws/address/PeopleApp","dojo/_base/declare dojo/text!ws/address/PeopleApp.html dojo/text!ws/address/PeopleApp.css dojo dijit dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ws/address/AddressModel ws/widget/ClearableTextbox".split(" "),function(f,k,d,b,a,h,l,e,p){return f([h,l,e],{templateString:k,css:{templateString:d},_earlyTemplatedStartup:!0,_inited:!1,_started:!1,searchMode:!1,startup:function(){this._started||
(this.model=new p({sortable:!0,fullTextSearchable:!0,allEmailRolodex:!1}),this.connect(this.model,"modelUpdated","modelUpdated"),this.connect(this.appPplNode.domNode,"onclick","handleClick"),this.connect(this.appPplNode.domNode,"oncontextmenu","handleRClick"),this.connect(this.searchBox,"clear","searchClear"),b.query(".appTitleClose",this.domNode).style("display","none"),this.connect(this.searchBox.textbox,"onkeyup","onKeyPressSearchField"),this._started=!0)},init:function(){this._inited||(this.model.initData(),
this.model.isLoading()||this.modelUpdated(),this._inited=!0)},onMouseOut:function(){b.addClass(this.appTitleSearch,"appTitleSearch");this.searchMode||b.removeClass(this.appTitleSearch,"appTitleSearchSel")},onMouseOver:function(){b.addClass(this.appTitleSearch,"appTitleSearchSel")},modelUpdated:function(){var a=this.model.getRolodex(),b=0,d=this.searchBox.getValue(),e=this.model.getSearchString();if(!d||d&&d==e){var h=this.model.getRowCount();if(0==h)e?(this.appPplEmpty.hide(),this.appPplNoResult.show()):
(this.appPplEmpty.show(),this.appPplNoResult.hide()),this.appPplNode.hide(),this.toolbar.layout();else{this.appPplEmpty.hide();this.appPplNoResult.hide();this.appPplNode.show();for(var e=["\x3cul\x3e"],f="appPplSection appPplSectionOne",l=!0;-1==a[b];)b++;for(var k=0;k<h;k++){if(Config.UseRolodexQuickContacts&&!d&&a[b]==k)for(e.push("\x3cli class\x3d'"+f+"'\x3e"+ws.string.alphabet.charAt(b).toUpperCase()+"\x3c/li\x3e"),l&&(l=!1,f="appPplSection");-1==a[++b]&&b<a.length;);var p=this.model.getRow(k),
p=ws.string.escapeXml(p.fullName||p.name||p.email1||p.email2||"");e.push("\x3cli class\x3d'appPplItem' title\x3d'"+p+"'_row\x3d'"+k+"'\x3e"+p+"\x3c/li\x3e")}e.push("\x3c/ul\x3e");this.appPplNode.domNode.innerHTML=e.join("")}}},onResized:function(){this.inherited(arguments);var a=b._getMarginSize(this.domNode).w;150<a&&b.style(this.searchBox.domNode,{width:a-22+"px"});b.style(this.searchBox.textbox,{width:a-46+"px"});0==this.model.getRowCount()&&this.toolbar.layout()},fullView:function(a){b.stopEvent(a);
ws.WebSuite.displayContactListView(null,"")},appClose:function(a){ws.WebSuite.Navigation.restoreApp();b.stopEvent(a)},handleClick:function(a){b.stopEvent(a);if(a=ws.widget.getEventTarget(a,"appPplItem","appPplNode"))if(a=b.attr(a,"_row")){a=this.model.getRow(+a);var d=this.getEmail(a);d&&0<d.length&&(ws.reporting.reportDLAction("Mail-LeftNav-minicontacts-selectaContact"),(a=ws.WebSuite.getOpenCompose())?a.addEmail(d):ws.WebSuite.getCompose(null,b.hitch(this,function(a){a.reset({to:d})})))}},handleRClick:function(a){var d=
ws.widget.getEventTarget(a,"appPplItem","appPplNode");b.stopEvent(a);if(d){this.menu||this.createContextMenu();var e=b.attr(d,"_row");e?(this.lastContact=this.model.getRow(+e),this.menu.open(a.pageX,a.pageY,d)):this.lastContact=null}},getEmail:function(a){return a.email1||a.email2||a.screenName||a.composeValue||""},createContextMenu:function(){var a=[{caption:Config.Strings.ContactAppSendMessage,onClick:b.hitch(this,function(){var a=this.getEmail(this.lastContact);a&&0<a.length&&ws.WebSuite.getCompose(null,
b.hitch(this,function(b){b.reset({to:a})}))})},{caption:Config.Strings.ContactAppAddCC,onClick:b.hitch(this,function(){var a=this.getEmail(this.lastContact);if(a&&0<a.length){var d=ws.WebSuite.getOpenCompose();d?d.addEmail(a,"cc"):ws.WebSuite.getCompose(null,b.hitch(this,function(b){b.reset({cc:a})}))}})},{caption:Config.Strings.ContactAppAddBCC,onClick:b.hitch(this,function(){var a=this.getEmail(this.lastContact);if(a&&0<a.length){var d=ws.WebSuite.getOpenCompose();d?d.addEmail(a,"bcc"):ws.WebSuite.getCompose(null,
b.hitch(this,function(b){b.reset({bcc:a})}))}})},{caption:Config.Strings.ContactAppDetails,onClick:b.hitch(this,function(){"d"==this.lastContact.bType?ws.WebSuite.editDistributionList(this.lastContact.uid):ws.WebSuite.showContactDetails(this.lastContact)})},{caption:Config.Strings.ContactAppEdit,onClick:b.hitch(this,function(){b.publish("WSFeedbackStart",[Config.Strings.Loading]);"d"==this.lastContact.bType?ws.WebSuite.editDistributionList(this.lastContact.uid):this.model.getContact({uid:this.lastContact.uid,
load:b.hitch(this,function(a){b.publish("WSFeedbackEnd",[Config.Strings.Loading]);ws.WebSuite.editContact(this.lastContact.uid,a,!0)}),error:b.hitch(this,function(a){b.publish("WSFeedbackEnd",[Config.Strings.Loading]);window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for addressModel.getContact-showContact",a,"ContactDetails.js");ws.widget.Dialogs.ok(Config.Strings.ErrorLoadingContact)})})})},{caption:Config.Strings.ContactAppDelete,onClick:b.hitch(this,
function(){this.model.clearRolodex();this.model.deleteAddresses({uids:[this.lastContact.uid]})})}];this.menu=ws.widget.createMenu(a)},createAppMenu:function(){var a=[{caption:Config.Strings.NewContact,onClick:b.hitch(this,function(){ws.WebSuite.editContact(null,null,!0);ws.reporting.reportDLAction("Mail-LeftNav-Contacts-QuickAddNewContact")})},{caption:Config.Strings.NewDistList,onClick:b.hitch(this,function(){ws.WebSuite.createDistList();ws.reporting.reportDLAction("Mail-LeftNav-Contacts-QuickCreateDistributionList")})},
{separator:!0},{caption:Config.Strings.ContactAppFullTip,onClick:b.hitch(this,function(){ws.WebSuite.displayContactListView(null,"");ws.reporting.reportDLAction("Mail-LeftNav-Contacts-QuickOpenFullContacts")})}];this.appTitleMenu=ws.widget.createMenu(a)},addContact:function(a){ws.WebSuite.editContact(0,null,!0);b.stopEvent(a);ws.reporting.reportDLAction("Mail-LeftNav-Contacts-EmptyAddNewContact")},appMenu:function(a){b.stopEvent(a);this.appTitleMenu||this.createAppMenu();this.appTitleMenu.open(this.appTitleLink)},
searchContacts:function(a){b.stopEvent(a);this.searchMode?(b.query(".searchBox",this.domNode).style("display","none"),b.addClass(this.appTitleSearch,"appTitleSearch"),b.removeClass(this.appTitleSearch,"appTitleSearchSel"),this.searchBox.clear(),this.model.search("")):(b.query(".searchBox",this.domNode).style("display","block"),b.addClass(this.appTitleSearch,"appTitleSearchSel"),this.searchBox.focus());this.layoutWidget.layout();this.searchMode=!this.searchMode;ws.reporting.reportDLAction("Mail-LeftNav-Contacts-QuickSearchContact")},
onKeyPressSearchField:function(a){a.keyCode==b.keys.ESCAPE?(this.searchTimer&&clearTimeout(this.searchTimer),this.model.search("")):(this.searchTimer&&clearTimeout(this.searchTimer),this.searchTimer=setTimeout(b.hitch(this,function(){this.model.search(this.searchBox.getValue())}),500))},searchClear:function(){this.searchTimer&&clearTimeout(this.searchTimer);this.model.search("")}})})},"ws/address/AddressModel":function(){define("ws/address/AddressModel","dojo/_base/declare dojo ws/address/record ws/address/ABUtils dojo/Deferred dojo/promise/all ws/io ws/lang ws/string".split(" "),
function(f,k,d,b,a,h){var l=f(null,{dlIdPrefix:"dl",constructor:function(a){this.reset();a&&a.loadData&&(ws.WebSuite&&ws.WebSuite.initialized&&!ws.WebSuite.deferredInitComplete?(this.waitForDeferredInit=!0,k.subscribe("WSDeferredInit",this,"deferredInit")):this.loadData());k.subscribe("SettingsChanged/General",this,k.hitch(this,"settingsChanged",!0));k.subscribe("AddressModelCore/refreshContacts",this,k.hitch(this,"loadData",!1,!0))},reset:function(){this.sortBy=this.hash="";this.sortDirection="Ascending";
this.errorState=this.loadDataInProgress=!1;this.categories="Family Friends Co-Workers Auto-Added Uncategorized General".split(" ");this.initLoadFinished=!1},coreUpdated:function(a){a&&this.sortCoreData(this.abList,this.sortBy,this.sortDirection,a);k.publish("ws.address.AddressModel.coreUpdated",a)},updateCategories:function(a){a&&a.category&&-1==k.indexOf(this.categories,a.category)&&this.categories.push(a.category)},loadData:function(){this.waitForDeferredInit||this.loadDataInProgress||(this.reset(),
this.loadDataInProgress=!0,this.loadContactList())},loadContactList:function(a){var e=Config.XobniCntctListURL,g=k.hitch(this,function(a){this.loadDataInProgress=!1;this.errorState=!0;k.publish("ws.address.AddressModel.loadError")});this.abList=[];this.abData={};e={url:e,substiParam:{count:Config.XobniMaxContacts},timeout:7E3,withCredentials:!0,load:k.hitch(this,function(b){this.loadDataInProgress=!1;ws&&ws.WebSuite&&(ws.WebSuite.isXobnified?this.errorState=!1:(ws.WebSuite.checkForXobnified("addrMod",
k.hitch(this,function(){this.errorState=!1;this.coreUpdated(!0)})),this.errorState=!0));if(b&&b.contacts&&b.contacts.length){this.errorState=!1;b=b.contacts;for(var e=0;e<b.length;e++){var g=b[e];if(g&&g.id&&(g.endpoints&&g.endpoints.length||g.first_name||g.last_name||g.nickname)){this.abList.push(g.id);var h=new d(g);h.category&&this.updateCategories(h);this.abData[g.id]=h}}a&&a.load&&a.load()}this.abListReady();this.groupListsAction("lists",{load:k.hitch(this,function(a){if(a&&a.all_groups.length){for(var b=
[],d=0;d<a.all_groups.length;d++)a.all_groups[d]&&b.push(""+a.all_groups[d].id);if(b.length){this.loadGroupLists(b);return}}this.initLoadComplete()}),error:k.hitch(this,function(a){this.initLoadComplete()})})}),error:g};b.doCXABReq(e)},uidsToEditTokens:function(a){var b=[];if(a&&this.abData)for(var d=0;d<a.length;d++){var e=this.abData[a[d]];e&&e.edit_token&&b.push(e.edit_token)}return b},addressAction:function(a,h){var e=Config.XobniCntctActionURL,f=null,l=null;switch(a){case "create":l=h.postData;
f=k.hitch(this,function(a){if(a&&a.resulting_contacts&&a.resulting_contacts.length&&this.abData){for(var b=[],e=0;e<a.resulting_contacts.length;e++){var g=a.resulting_contacts[e];if(g&&g.id&&(g.endpoints&&g.endpoints.length||g.name)){this.abList.push(g.id);var f=new d(g);this.abData[g.id]=f;f.update(g,!0);b.push(f)}}h&&h.load&&h.load(b);this.coreUpdated(!0)}});break;case "liteEdit":l=h.postData;f=k.hitch(this,function(a){if(a&&a.resulting_contacts&&a.resulting_contacts[0]&&a.resulting_contacts[0].id&&
this.abData&&(a=a.resulting_contacts[0],this.abData[a.id])){var b=this.abData[a.id];b.update(a,!0);h&&h.load&&h.load(b);this.coreUpdated(!0)}});break;case "delete":l={sources:this.uidsToEditTokens(h.uids)};f=k.hitch(this,function(a){if(a&&a.deleted_contacts&&a.deleted_contacts.length){for(var b=0;b<a.deleted_contacts.length;b++){var d=a.deleted_contacts[b].id;this.abData[d]&&delete this.abData[d];d=k.indexOf(this.abList,d);-1!=d&&this.abList.splice(d,1)}this.coreUpdated(!0);h&&h.load&&h.load(a.deleted_contacts)}});
break;default:return}var q=k.hitch(this,function(a){h&&h.error&&h.error(a)}),e={url:e,substiParam:{action:a},timeout:7E3,headers:{"Content-Type":"application/json"},usePost:!0,withCredentials:!0,load:f,error:q};l&&(e.postData=k.toJson(l));b.doCXABReq(e)},loadFullContact:function(a){var d={url:Config.XobniCntctFullURL,substiParam:{id:a.uid,include_group_id:"false"},timeout:7E3,withCredentials:!0,load:k.hitch(this,function(b){if(b&&b.id&&this.abData&&this.abData[b.id]){var d=this.abData[b.id];d.update(b,
!0);this.updateCategories(d);a&&a.load&&a.load(d)}}),error:k.hitch(this,function(b){a&&a.error&&a.error(b)})};b.doCXABReq(d)},loadFullContactsList:function(a){if(a&&a.cmd&&a.ids.length){var e=this.dlIdPrefix,g=k.hitch(this,function(a,b){for(var d=[],g=0;g<a.length;g++){var h=a[g];-1==h.indexOf(e)?b&&b[h]&&d.push(b[h]):this.abData[h]&&d.push(this.abData[h])}return d}),h=a.ids,f=h.filter(function(a){return a&&-1==a.indexOf(e)?!0:!1});f.length?(f={url:Config.XobniCntctActionURL+"count\x3d"+Config.XobniMaxContacts,
substiParam:{action:""},timeout:7E3,headers:{"Content-Type":"application/json"},usePost:!0,postData:k.toJson({ids:f}),withCredentials:!0,load:k.hitch(this,function(b){if(b&&b.contacts&&b.contacts.length){for(var e={},f=0;f<b.contacts.length;f++){var l=new d(b.contacts[f],!0);l.emails=l.getEmailList();l.phones=l.getPhonesAndTypes();e[l.uid]=l}b=g(h,e);a&&a.load&&a.load(b)}else a&&a.error&&a.error()}),error:k.hitch(this,function(b){a&&a.error&&a.error(b);window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.AjaxErr,
"Error in loadFullContactsList(print)",b,"AddressModel.js")})},b.doCXABReq(f)):(f=g(h,null),a&&a.load&&a.load(f))}else a&&a.load&&a.load([])},makeDistList:function(a){var b={uid:this.dlIdPrefix+a.id,bType:"d",distributionListType:"Standard",name:"",count:0,composeValue:"",hasEmail:!1,sortedContactsAndAddresses:[]};a.name&&(b.name=a.name);if(a.endpoints&&a.endpoints.length){a.endpoints.sort(function(a,b){var d=a.ep||"",d=d.toUpperCase(),e=b.ep||"",e=e.toUpperCase();return d<e?-1:d>e?1:0});for(var d=
0;d<a.endpoints.length;d++){var e=a.endpoints[d];if(e.ep&&"smtp:"==e.ep.substr(0,5)&&e.contact_id){var h=e.ep.substr(5);b.composeValue+=h+", ";b.sortedContactsAndAddresses.push({uid:e.contact_id,fullName:e.name,lastName:e.name,firstName:"",email1:h});b.count++}}b.composeValue&&(b.hasEmail=!0)}return b.name?b:null},loadOneGroupList:function(a,b,d){a={xobId:a,load:k.hitch(this,function(a){if(a){if(a=this.makeDistList(a))this.abList.push(a.uid),this.abData[a.uid]=a;b&&b.load&&b.load(a,d)}}),error:k.hitch(this,
function(a){b&&b.error&&b.load(a,d)})};this.groupListsAction("get",a)},loadGroupLists:function(b){if(b&&b.length){for(var d=[],e=null,f=0;f<b.length;f++)e=new a,this.loadOneGroupList(b[f],{load:function(a,b){b.resolve()},error:function(a,b){b.reject()}},e),e.then(),d.push(e.promise);h(d).then(k.hitch(this,function(){this.initLoadComplete()}),k.hitch(this,function(){}))}},getGroupListsId:function(a){var b=null,d=this.dlIdPrefix.length;a&&a.substr(0,d)==this.dlIdPrefix&&(b=a.substr(d));return b},groupListsAction:function(a,
d){var e=Config.XobniCntctGroupListsURL,h=null,f=null,l=null;switch(a){case "lists":a="";l=k.hitch(this,function(a){d&&d.load&&d.load(a)});break;case "get":a=d.xobId;l=k.hitch(this,function(a){d&&d.load&&d.load(a)});break;case "create":a="";h=d.postData;l=k.hitch(this,function(a){a&&a.created_group&&"undefined"!=typeof a.created_group.id&&this.loadOneGroupList(a.created_group.id,{load:k.hitch(this,function(a){d&&d.load&&d.load(a);this.coreUpdated(!0)}),error:k.hitch(this,function(a){d&&d.load&&d.load(a)})})});
break;case "edit":var m=this.getGroupListsId(d.uid);m&&(h=d.postData,a=m+"/edit",l=k.hitch(this,function(a){d&&d.load&&d.load(a);this.coreUpdated(!0)}));break;case "rename":if(m=this.getGroupListsId(d.uid))h=d.postData,a=m+"/edit",l=k.hitch(this,function(a){d&&d.load&&d.load(a);this.coreUpdated(!0)});else{d&&d.error&&d.error(v);return}break;case "delete":var p=d.uid;if(m=this.getGroupListsId(d.uid))f="DELETE",a=m,l=k.hitch(this,function(a){if(a&&"success"==a.status){this.abData[p]&&delete this.abData[p];
var b=k.indexOf(this.abList,p);-1!=b&&this.abList.splice(b,1);this.coreUpdated(!0);d&&d.load&&d.load(a)}else d&&d.error&&d.error(v)});else{d&&d.error&&d.error(v);return}break;default:return}var m=k.hitch(this,function(a){d&&d.error&&d.error(a)}),v={url:e,substiParam:{action:a},timeout:7E3,headers:{"Content-Type":"application/json"},usePost:!1,withCredentials:!0,load:l,error:m};h&&(v.usePost=!0,v.postData=k.toJson(h));f&&(v.method=f);b.doCXABReq(v)},PIKnowPref:function(a){var d=Config.XobniPIKnowPrefURL,
e=a&&"boolean"===typeof a.setVal;e||"boolean"!==typeof this.current_enable_pik?(this.current_enable_pik=null,d={url:d,timeout:2E4,withCredentials:!0,load:k.hitch(this,function(b){e?b&&"success"==b.status?(this.current_enable_pik=a.setVal,a&&a.load&&a.load()):a&&a.error&&a.error():b&&"undefined"!=typeof b.enable_pik?(this.current_enable_pik=b.enable_pik,a&&a.load&&a.load(b)):a&&a.error&&a.error()}),error:k.hitch(this,function(b){a&&a.error&&a.error(b)})},e&&(d.headers={"Content-Type":"application/json"},
d.usePost=!0,d.postData=k.toJson({enable_pik:a.setVal})),b.doCXABReq(d)):a&&a.load&&a.load({enable_pik:this.current_enable_pik})},getTotalEmailAddressCount:function(){for(var a=0,b=0;b<this.abList.length;b++){var d=this.abData[this.abList[b]];d&&"c"==d.bType&&(a+=d.getEmailList().length)}return a},searchDLName:function(a){var b=a.toLowerCase();return(a=this.abList.filter(k.hitch(this,function(a){return(a=this.abData[a])&&"d"===a.bType&&a.name.toLowerCase()===b?!0:!1})))&&a.length?this.abData[a[0]]:
null},abListReady:function(){this.coreABListReady=!0;k.publish("ws.address.AddressModel.coreABListReady",[!0]);if(this.pendingRecordSearch&&this.pendingRecordSearch.length){var a=this.pendingRecordSearch.shift();this.getRecordByEmail(a.s,a.callback)}},getRecordByEmail:function(a,b){if(!this.abList&&b)return this.pendingRecordSearch||(this.pendingRecordSearch=[]),this.pendingRecordSearch.push({s:a,callback:b}),null;if(!a)return null;var d=a.toLowerCase(),e=null,h=this.abList.filter(k.hitch(this,function(a){if((a=
this.abData[a])&&"c"===a.bType){a=a.getEmailList();for(var b=0;b<a.length;b++)if(d===a[b].toLowerCase())return!0}return!1}));h&&h.length&&(e=this.abData[h[0]]);b&&b(e);return e},listRegEx:/, /g,searchData:function(a,b,d){var e=[];if(b||d)b=b.toLowerCase(),e=a.filter(k.hitch(this,function(a){a=this.abData[a];var e=!1;if(a&&"c"==a.bType){var g=[a.fullName],g=g.concat(a.getEmailList()),g=g.concat(a.getPhoneList());if(b&&-1!=g.join("\t").toLowerCase().indexOf(b))if(d)e=!0;else return!0;if(d&&a.category&&
d==a.category)return b?e:!0}else if(a&&"d"==a.bType){if(d)return!1;g=a.name+"\t"+a.composeValue.replace(this.listRegEx,"\t");if(-1!=g.toLowerCase().indexOf(b))return!0}return!1}));return e},sortData:function(a,b,d){var e="Ascending"==d?-1:1,g=-1*e,h,f;"PreferredEmail"==b?(h="email1",f="composeValue"):(h="fullNameSortKey",f="name");a.sort(k.hitch(this,function(a,b){var d=this.abData[a],l="c"===d.bType?h:f,m=d[l]||"",m=m.toUpperCase();"A">m.substr(0,1)&&(m="~"+m);d=this.abData[b];l="c"===d.bType?h:
f;d=d[l]||"";d=d.toUpperCase();"A">d.substr(0,1)&&(d="~"+d);return m<d?e:m>d?g:0}))},sortCoreData:function(a,b,d,h){this.initLoadFinished&&(this.sortBy!=b||this.sortDirection!=d||h)&&(this.sortBy=b,this.sortDirection=d,this.sortData(a,b,d))},settingsChanged:function(){for(var a=0;a<this.abList.length;a++){var b=this.abData[this.abList[a]];"c"==b.bType&&b.setFullName()}this.sortCoreData(this.abList,Settings.AddressNameSortOrder?Settings.AddressNameSortOrder:Config.DefaultAddressNameSortOrder,this.sortDirection,
!0);this.coreUpdated()},initLoadComplete:function(){this.errorState||(this.initLoadFinished=!0,this.sortCoreData(this.abList,Settings.AddressNameSortOrder?Settings.AddressNameSortOrder:Config.DefaultAddressNameSortOrder,"Ascending"),k.publish("ws.address.AddressModel.initLoadComplete",[!0]),this.coreUpdated())},isLoading:function(){return!this.abList&&(this.waitForDeferredInit||this.loadDataInProgress)},deferredInit:function(){this.waitForDeferredInit=!1;this.loadData()}});return f("ws.address.AddressModel",
null,{sortList:null,sortCurrent:!1,searchList:null,searchCurrent:!1,sortBy:"",sortDirection:"",currentTextSearch:"",currentCategorySearch:"",allEmailRolodex:!0,constructor:function(a){a=a||{};k.mixin(this,a);this.core||(ws.address.AddressModel.prototype.core=new l({loadData:Config.EnableAutoCompleteContactsOnStartUp}));this._abList="abList";this.filteredIndex={offsets:[],fields:[]};this.searchFilteredIndex={offsets:[],fields:[]};this.categoryFilteredIndex={offsets:[],fields:[]};this._isSortableListModel=
a.sortable;this._isFullTextSearchable=a.fullTextSearchable;Config.EnableAutoCompleteContactsOnStartUp||a.fetchDataOnInit&&this.initData();this.selectedUids={};k.subscribe("ws.address.AddressModel.coreABListReady",k.hitch(this,function(){this.core&&this.core.coreABListReady&&this.abListReadyCB&&(this.abListReadyCB(),this.abListReadyCB=null)}));k.subscribe("ws.address.AddressModel.initLoadComplete",this,"initLoadComplete");k.subscribe("ws.address.AddressModel.coreUpdated",this,"_coreUpdated");k.subscribe("ws.address.AddressModel.loadError",
k.hitch(this,function(){this.abListReadyCB&&(this.abListReadyCB(),this.abListReadyCB=null);this.modelUpdated()}));k.subscribe("SettingsChanged/AddressNameDisplayFormat",k.hitch(this,function(){this.allEmails=null}))},setABListReadyCB:function(a){this.core&&this.core.coreABListReady&&a?a():this.abListReadyCB=a},invalidAddresses:function(a){return b.invalidAddresses(a)},initData:function(){this.core&&!this.core.errorState&&this.core.initLoadFinished||this.core.loadData()},deferredInit:function(){this.core.deferredInit()},
isLoading:function(){return this.core.isLoading()},isErrorState:function(){return this.core.errorState},initLoadComplete:function(a,b){this.searchCurrent=!1;this.sortBy=this.core.sortBy;this.sortDirection=this.core.sortDirection},_coreUpdated:function(a){a&&(this.sortCurrent=!1);this.allEmails=this.sortList=null;this._updateViews()},_updateViews:function(){this.modelUpdated(!0)},modelUpdated:function(){},change:function(a){},getActiveAbList:function(a){var b=[];this.core&&this.core.abList&&(this.core.initLoadFinished?
this.sortCurrent?b=this.sortList||this.core.abList:(this.core.sortBy!=this.sortBy||this.core.sortDirection!=this.sortDirection?(b=this.core.abList.concat(),this.core.sortData(b,this.sortBy,this.sortDirection),this.sortList=b):(b=this.core.abList,this.sortList=null),this.sortCurrent=!0,this.searchCurrent=!1):b=this.core.abList,a?(this.searchList&&a.length>this.currentTextSearch.length&&0==a.indexOf(this.currentTextSearch)?this.searchList=this.core.searchData(this.searchList,a,this.currentCategorySearch):
this.searchList=this.core.searchData(b.concat(),a,this.currentCategorySearch),this.currentTextSearch=a,b=this.searchList):this.currentTextSearch||this.currentCategorySearch?(this.searchCurrent&&this.searchList||(this.searchList=this.core.searchData(b.concat(),this.currentTextSearch,this.currentCategorySearch)),b=this.searchList):this.searchList=null);this.searchCurrent=!0;return b},getAutoCompleteContacts:function(a,b){var d=this.getAllEmails(),e=[];if(d.length){if(a){a=a.toLowerCase();var h=a.length,
f=0,l=d.filter(k.hitch(this,function(d){var e=!1;if(d&&f<b){var g=d.name?d.name.toLowerCase():"";if("c"==d.bType){if(d.composeValue&&d.composeValue.length>=h&&0==d.composeValue.toLowerCase().indexOf(a))e=!0,f++;else if(g){d=g.split(" ");for(var l=0;l<d.length;l++)if(d[l].length>=h&&0==d[l].indexOf(a)){e=!0;f++;break}}g&&!e&&g.length>=h&&0==g.indexOf(a)&&(e=!0,f++)}else"d"==d.bType&&g.length>=h&&0==g.indexOf(a)&&(e=!0,f++)}return e}))}for(d=0;d<l.length;d++){var p=l[d];if("c"==p.bType)e.push({e:p.composeValue,
nd:p.name||p.composeValue});else if("d"==p.bType&&p.composeValue){for(var v={i:"LIST",n:p.name||"",es:[]},p=p.composeValue.split(","),u=0;u<p.length;u++){var z=k.trim(p[u]);z&&v.es.push({e:z})}e.push(v)}}}return e},getFullAbList:function(){return this.core&&this.core.abList?this.core.abList:[]},sortData:function(a,b){if(this.sortBy!=a||this.sortDirection!=b)this.sortBy=a,this.sortDirection=b,this.searchCurrent=this.sortCurrent=!1,this.getActiveAbList(),this._updateViews()},search:function(a,b){a?
this.getActiveAbList(a):(this.currentTextSearch="",this.searchCurrent=!1,this.getActiveAbList(null));this._updateViews()},getCategories:function(){return this.core.categories},getCurrentCategorySearchString:function(){return this.currentCategorySearch},categoryFilter:function(a){this.currentCategorySearch=a;this.searchCurrent=!1;this.getActiveAbList(null,a);this._updateViews()},getRow:function(a){var b=null;(a=this.getActiveAbList()[a])&&this.core.abData&&this.core.abData[a]&&(b=this.core.abData[a]);
return b},getRowCount:function(){return this.getActiveAbList().length},getAllEmails:function(){if(!this.allEmails){this.allEmails=[];this.rolodex=[];for(var a=this.getFullAbList(),b=0;b<a.length;b++){var d=this.core.abData[a[b]];if(!this.allEmailRolodex)d.name="d"==d.bType?d.name:d.fullName||d.email1||"",d.fullNameSortKey="d"==d.bType?d.name:d.fullNameSortKey||"",this.allEmails.push(d);else if("d"==d.bType)this.allEmails.push(d);else if(d&&"c"==d.bType)for(var h=d.getEmailList(),f=d.fullName||"",
l=d.uid,m=0;m<h.length;m++)this.allEmails.push({uid:l,fullNameSortKey:d.fullNameSortKey,name:f,composeValue:h[m],bType:"c"})}this.allEmails.sort(function(a,b){var d="d"==a.bType?"name":"fullNameSortKey",e=a[d],e=e?e.toUpperCase():"",d="d"==b.bType?"name":"fullNameSortKey",d=(d=b[d])?d.toUpperCase():"";"A">e.substr(0,1)&&(e="~"+e);"A">d.substr(0,1)&&(d="~"+d);return e<d?-1:e>d?1:0});a=ws.string.alphabet.toLowerCase();d=Array(a.length);if(d.fill)d.fill(-1);else for(b=0;b<d.length;b++)d[b]=-1;for(b=
this.allEmails.length-1;0<=b;b--)(h=this.allEmails[b].name.substr(0,1).toLowerCase())&&-1!=a.indexOf(h)&&(d[a.indexOf(h)]=b);this.rolodex=d}return this.allEmails},getTotalEmailAddressCount:function(){return this.core&&this.core.abData?this.core.getTotalEmailAddressCount():0},getRowForAllEmails:function(a){this.allEmails||this.getAllEmails();return this.allEmails[a]},getRowCountForAllEmails:function(){this.allEmails||this.getAllEmails();return this.allEmails.length},getUnfilteredRowCount:function(){return this.getFullAbList().length},
getUidForRow:function(a){return(a=this.getRow(a))?a.uid:null},getRowForUid:function(a){return a?k.indexOf(this.getActiveAbList(),a):-1},getRecordByUID:function(a){return this.core&&this.core.abData&&this.core.abData[a]?this.core.abData[a]:null},getRowsForUids:function(a){var b=[];if(this.core[this._abList])for(var d=0;d<a.length;d++)b.push(this.getRowForUid(a[d]));return b},isSelected:function(a){return a in this.selectedUids},isAllInViewSelected:function(){return this.isAllSelected()},isAllSelected:function(){var a=
this.getSelectedUids();return 0<a.length&&this.getRowCount()==a.length},isAllSelReal:function(){return this.isAllSelected()},isAnySelected:function(){return!ws.lang.isEmptyObject(this.selectedUids)},toggleSelectRow:function(a,b){this.toggleSelectUid(this.getUidForRow(a),b)},toggleSelectUid:function(a,b){(b="undefined"==typeof b?!this.isSelected(a):b)?this.selectedUids[a]=!0:delete this.selectedUids[a];this.change(this.getRowForUid(a))},selectRange:function(a,b,d){for(;a<=b;a++)this.toggleSelectRow(a,
d);return!0},selectAll:function(){this.selectedUids={};for(var a=this.getActiveAbList(),b=0;b<a.length;b++)this.selectedUids[a[b]]=!0;this.modelUpdated();return!0},deselectAll:function(){this.selectedUids={};this.modelUpdated()},getSelectedUids:function(){var a=[],b;for(b in this.selectedUids)a.push(b);return a},getIdsForCat:function(a){if(a){var b=this.getFullAbList();if(b)return this.core.searchData(b,"",a)}return null},getSearchString:function(){return this.currentTextSearch},searchDLName:function(a){return this.core.searchDLName(a)},
getRecordByScreenName:function(a,b){return this.core.getRecordByEmail(a+"@aol.com",b)},getRecordByEmail:function(a,b){return this.core.getRecordByEmail(a,b)},clearRolodex:function(){this.allEmails=null},getRolodex:function(){this.allEmails||this.getAllEmails();return this.rolodex},deleteAddresses:function(a){if(a&&a.uids&&a.uids.length){var b=a.uids.length,d=0,e=function(e){d+=e;d>=b&&a.load&&a.load({isSuccess:!0})},h=[],f=this.core.dlIdPrefix;a.uids=a.uids.filter(function(a){return 0==a.indexOf(f)?
(h.push(a),!1):!0});if(a.uids.length){var l=a.uids.length;this.core.addressAction("delete",{uids:a.uids,load:function(){e(l)},error:function(b){a.error&&a.error()}})}if(h.length)for(var k=0;k<h.length;k++)this.distributionListAction("delete",{uid:h[k],load:function(){e(1)},error:function(b){a.error&&a.error()}})}},getContact:function(a){this.core&&a&&a.uid&&(this.core.abData[a.uid]&&this.core.abData[a.uid].fullContact?a&&a.load&&a.load(this.getRecordByUID(a.uid)):this.core.loadFullContact(a))},loadFullContactsList:function(a){var b=
!0;if(a&&a.cmd){var d=null;"all"==a.cmd?d=this.getFullAbList():"selected"==a.cmd&&a.selIds&&a.selIds.length?d=a.selIds:"category"==a.cmd&&a.cats&&(d=this.getIdsForCat(a.cats));this.core&&d&&(b=!1,a.ids=d,this.core.loadFullContactsList(a))}b&&a.load&&a.load()},distributionListAction:function(a,b){this.core&&this.core.groupListsAction(a,b)},xobSMTP:function(a,b){return{name:"",endpoints:[{ep:"smtp:"+a}]}},xobEndpoint:function(a,b){return{ep:"smtp:"+a,name:b}},distListCreateMissingContacts:function(a,
b){for(var d=this.getAllEmails(),e=0;e<d.length;e++){var h=d[e];if(h&&"c"==h.bType&&a[h.composeValue.toLowerCase()]){var f=h.composeValue.toLowerCase();a[f].uid=h.uid;a[f].name=h.name}}d=[];for(f in a)a[f]&&"undefined"===typeof a[f].uid&&d.push(this.xobSMTP(f,""));d.length?(f={postData:{source_contacts:d},load:k.hitch(this,function(d){if(d&&d.length){for(var e=0;e<d.length;e++){var g=d[e];if(g&&g.uid&&g.email1){var h=g.email1.toLowerCase();a[h]&&(a[h].name=g.fullName,a[h].uid=g.uid)}}b&&b.load&&b.load(a)}else b&&
b.error&&b.error()}),error:k.hitch(this,function(a){b&&b.error&&b.error(a)})},this.createContact(f)):b.load&&b.load(a)},getDistributionList:function(a){var b=this.getRecordByUID(a.uid);b?a.load&&a.load(b):a.error&&a.error()},createContact:function(a){if(Config.PIKnowContactLimit&&-1!=Config.PIKnowContactLimit.indexOf(",")){var b=k.hitch(this,function(){this.PIKnowPref({load:k.hitch(this,function(a){if(a&&"boolean"==typeof a.enable_pik&&a.enable_pik){var b=Config.PIKnowContactLimit.split(",");a=b[0];
var b=b[1],d=null,e=this.getTotalEmailAddressCount(),g=null;e>=a&&e<b?(d=ws.string.substituteParams(Config.Strings.PIKnowContactWarn,b,a),g="Contacts-PIKWarn-adding"):e>=b&&(d=ws.string.substituteParams(Config.Strings.PIKnowContactExceed,b),g="Contacts-PIKExceed-adding");d&&(ws.widget.Dialogs.ok(d),ws.reporting.reportDLAction(g))}})})}),d=a&&a.load?a.load:null;a.load=function(a){d&&d(a);b()}}this.core.addressAction("create",a)},modifyContact:function(a){this.core.addressAction("liteEdit",a)},PIKnowPref:function(a){this.core.PIKnowPref(a)},
undoDeletedItem:function(){var a=this.getUndoItem();if(a&&"c"==a.bType&&a.original){var b={first_name:1,last_name:1,nickname:1,aol_tag:1,department:1,spouse:1,kids:1,birthday:1,anniversary:1,notes:1},a=a.original,d={};if(a.attributes&&a.attributes.length)for(var h=0;h<a.attributes.length;h++){var f=a.attributes[h];f.key&&b[f.key]&&f.value&&(d[f.key]=f.value)}d.endpoints=[];if(a.endpoints&&a.endpoints.length)for(h=0;h<a.endpoints.length;h++)(b=a.endpoints[h])&&b.ep&&(f={ep:b.ep},b&&b.type&&(f.type=
b.type),d.endpoints.push(f));a.role&&a.role.company&&(d.company=a.role.company);a.role&&a.role.position&&(d.position=a.role.position);this.core.addressAction("create",{postData:{source_contacts:[d]}})}else if(a&&"d"==a.bType){d=[];if(a.name&&a.sortedContactsAndAddresses&&a.sortedContactsAndAddresses.length)for(h=0;h<a.sortedContactsAndAddresses.length;h++)b=a.sortedContactsAndAddresses[h],b.email1&&d.push(this.xobEndpoint(b.email1,b.fullName||""));d.length&&(postData={name:a.name,endpoints:d},this.distributionListAction("create",
{postData:postData}))}ws.reporting.reportDLAction("Contacts-UndoDelete");this.setUndoItem()},setUndoItem:function(a){this.core.undoItem=a?a:null},getUndoItem:function(){return this.core.undoItem}})})},"ws/address/record":function(){define("ws/address/record",["dojo/_base/declare","dojo","ws/address/AddressBookUtil","ws/settings"],function(f,k,d){return f("ws.address.record",null,{constructor:function(b,a){this.update(b,a)},clearAll:function(){this.deleteAllEmails();this.deleteAllPhones();this.deleteAllAddresses();
delete this.fullName;delete this.firstName;delete this.lastName;delete this.nickName;delete this.jobTitle;delete this.company;delete this.category;delete this.personalBirthday;delete this.personalAnniversary;delete this.dept;delete this.personalSpouse;delete this.personalFamily;delete this.personalNotes;delete this.original;delete this.edit_token},setFullName:function(){var b="",a=this.firstName,d=this.lastName,f=a&&d?" ":"",e=this.nickName?f+"("+this.nickName+")":"";switch(Settings.AddressNameDisplayFormat){case "FirstLastNick":b=
a+f+d+e;break;case "LastFirstNick":b=d+(f?", ":"")+a+e;break;case "LastNoCommaFirstNick":b=d+f+a+e}this.fullName=b;b="";switch(Settings.AddressNameSortOrder){case "FirstLastEmailScreenNamePhone":b=a+f+d+e;break;case "LastFirstEmailScreenNamePhone":b=d+f+a+e}b==e&&(b=this.nickName);this.fullNameSortKey=b||this.getFirstEmail()},nameregex:/[\(\)]/g,update:function(b,a){if(b){a&&(this.clearAll(),this.fullContact=!0,this.original=b);this.uid||(this.uid=b.id);this.bType="c";this.hasEmail=!1;var d=1,f=1,
e=!0,k=b;b.name&&"object"==typeof b.name&&(k=b.name,"boolean"===typeof k.is_real_name&&!1===k.is_real_name&&(e=!1));this.firstName=k.first_name&&e?k.first_name:"";this.lastName=k.last_name&&e?k.last_name:"";this.nickName=k.nickname||"";this.firstName=this.firstName.replace(this.nameregex,"");this.lastName=this.lastName.replace(this.nameregex,"");this.nickName=this.nickName.replace(this.nameregex,"");this.edit_token=b.edit_token;this.category=b.aol_tag||"Uncategorized";var g="";if(b.endpoints&&b.endpoints.length)for(e=
0;e<b.endpoints.length;e++)if((g=b.endpoints[e])&&g.ep){var n=g.ep.indexOf(":"),t="",q="",k=g.type||"";-1!=n&&(t=g.ep.substr(0,n),q=g.ep.substr(n+1));if(t)switch(t){case "smtp":q&&(this["email"+d]=q,d++,this.hasEmail=!0);break;case "tel":q&&(g.display&&(q=g.display),g="phone"+f,this[g]=q,g+="Type",this[g]=k||"",f++);break;case "adr":if(a&&(g="Street3 Street2 Street1 City State Zip Country".split(" "),q=q.split(";"),9==q.length&&("home"==k||"work"==k)))for(q[0]&&q[1]?q[1]=q[0]+" "+q[3]:q[0]&&!q[1]&&
(q[1]=q[0]),q.splice(0,1),n=0;n<g.length;n++)this[k.toLowerCase()+g[n]]=q[n]}}d=null;if(b.attributes&&b.attributes.length)for(e=0;e<b.attributes.length;e++)if((d=b.attributes[e])&&d.key&&d.value)switch(d.key){case "nickname":this.nickName=d.value;break;case "department":this.dept=d.value;break;case "spouse":this.personalSpouse=d.value;break;case "kids":this.personalFamily=d.value;break;case "birthday":this.personalBirthday=this.parseSimpleDate(d.value||"");break;case "anniversary":this.personalAnniversary=
this.parseSimpleDate(d.value||"");break;case "notes":this.personalNotes=d.value;break;case "role":q=d.value.split(";");q[0]&&(this.jobTitle=q[0]);q[1]&&(this.company=q[1]);break;case "aol_tag":this.category=d.value}this.category||(this.category="Uncategorized");this.setFullName()}},parseSimpleDate:function(b){var a="";(b=ws.date.ParseDateFromFormat(b,"yyyy-M-d",!0))&&(b=ws.date.formatDateTime(b,Config.Strings.CalDateFormat))&&(a=b);return a},getEmailList:function(){for(var b=[],a=1,d=this["email"+
a];"undefined"!=typeof d;)d&&b.push(d),a++,d=this["email"+a];return b},getFirstEmail:function(){var b=this.getEmailList();return b.length?b[0]:""},deleteAllEmails:function(){for(var b=1,a="email"+b;"undefined"!=typeof this[a];)delete this[a],b++,a="email"+b},getPhoneList:function(){for(var b=[],a=1,d=this["phone"+a];"undefined"!=typeof d;)d&&b.push(d),a++,d=this["phone"+a];return b},getPhonesAndTypes:function(){for(var b=[],a=1,d=this["phone"+a],f=this["phone"+a+"Type"];"undefined"!=typeof d;)d&&
b.push({value:d,phonetype:f||""}),a++,d=this["phone"+a],f=this["phone"+a+"Type"];return b},deleteAllPhones:function(){for(var b=1,a="phone"+b;"undefined"!=typeof this[a];)delete this[a],a+="Type",this[a]&&delete this[a],b++,a="phone"+b},deleteAllAddresses:function(){for(var b=["home","work"],a="Street3 Street2 Street1 City State Zip Country".split(" "),d=0;d<b.length;d++)for(var f=0;f<a.length;f++)delete this[b[d]+a[f]]},getXobniData:function(){}})})},"ws/address/AddressBookUtil":function(){define("ws/address/AddressBookUtil",
"dojo/_base/declare dojo dojo/_base/lang ws/UserContext ws/string ws/reporting ws/io".split(" "),function(f,k,d){d.setObject("ws.address.AddressBookUtil",{LoadSortDefaults:function(){},OpenAddressPrintWindow:function(b){b=Config.BaseABPagesURL+"AddressListPrint?"+b;var a=ws.string.substituteParams("status\x3dyes,resizable\x3dyes,menubar\x3dyes,scrollbars\x3dyes,left\x3d{0},top\x3d{1},width\x3d{2},height\x3d{3}","5","5","780","500");(b=ws.io.openWindow(b,"",a))&&b.focus();ws.reporting.report("Print Contacts",
"Addresses")},getNameInfoHTML:function(b,a,d){var h=[];b.fullName&&h.push(b.fullName);d||(b.nickName&&h.push("("+b.nickName+")"),b.nickName||b.fullName||(b.email1?h.push(b.email1):b.email2?h.push(b.email2):b.phone&&h.push(b.phone)));b=h.join(" ");a||(b=ws.string.escapeXml(b));return b}})})},"ws/address/ABUtils":function(){define("ws/address/ABUtils",["dojo","dojo/request/xhr","ws/string"],function(f,k){return{dspNameRegEx:/.*< *([^@<> ]+@[^@<>]+) *>/,getAddressList:function(d,b,a){var h=[];if(d){d=
f.map(d.split(/[;,]/),f.trim);for(var l=0;l<d.length;l++){var e=d[l];if(e){var k=e,g=e.match(this.dspNameRegEx);g&&2==g.length&&(k=g[1].toLowerCase());e=b?e:k;a?ws.string.isValidEmail(k)&&h.push(e):h.push(e)}}}return h},invalidAddresses:function(d){for(var b=[],a=0;a<d.length;a++)ws.string.isValidEmail(d[a])||b.push(ws.string.escapeXml(d[a]));return b},CXABUrl:function(d,b){var a=!0;b=b||{};var h=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+
(window.location.port?":"+window.location.port:"");-1!=d.indexOf("{wmHost}")&&(b.wmHost=h);-1!=d.indexOf("{_OAB_wssid}")&&(h=" ",!this.WSSId&&ws&&ws.Jws&&ws.Jws.jwsData&&ws.Jws.jwsData.wssid&&(this.WSSId=ws.Jws.jwsData.wssid),"string"==typeof this.WSSId&&(h=this.WSSId),b._OAB_wssid=h);-1!=d.indexOf("{_oath_Guid}")&&(Settings.GUID?b._oath_Guid=Settings.GUID:a=!1);if(a){a="";try{d=ws.string.substituteParams(d,b)}catch(l){return null}window.ws&&window.ws.io&&(a=window.ws.io.createYmreqid());a&&a.length&&
(d+="\x26"+a);return d}return null},doCXABReq:function(d){if(d.url){var b=d.timeout||5E3,a=this.CXABUrl(d.url,d.substiParam||{}),b={handleAs:"json",timeout:b,method:"GET"};d.headers&&(b.headers=d.headers);d.handleAs&&(b.handleAs=d.handleAs);"undefined"!=typeof d.withCredentials&&(b.withCredentials=d.withCredentials);d.usePost&&(d.postData&&(b.data=d.postData),b.method="POST");d.method&&(b.method=d.method);d.data&&(b.data=d.data);d.form&&(b.form=d.form);k(a,b).then(f.hitch(this,function(a,b){d&&d.load&&
d.load(a,b)}),f.hitch(this,function(a){var b=null;a&&a.xhr&&a.xhr.getResponseHeader?b=a.xhr.getResponseHeader("WSSIdReissue"):a&&a.response&&a.response.status&&"403"==a.response.status&&a.response.data&&a.response.data.wssid&&(b=a.response.data.wssid);d.errRetries?d.errRetries++:d.errRetries=1;4>d.errRetries&&b?(this.WSSId=b,this.doCXABReq(d)):d&&d.error&&d.error(a)}))}}}})},"ws/widget/ClearableTextbox":function(){define("ws/widget/ClearableTextbox",["dojo/_base/declare","dojo","dijit","ws/widget/DefaultTextbox",
"ws/html"],function(f,k,d,b){return f([b],{templateString:"\x3cdiv class\x3d'clearTextbox'\x3e\x3cinput type\x3d'text' maxlength\x3d'${maxlength}' class\x3d'wsInput ${clearableInputClassName}' tabindex\x3d'${tabindex}' data-dojo-attach-point\x3d'textbox' data-dojo-attach-event\x3d'onblur:_onBlur,onfocus:_onFocus,onkeyup:_onKeyUp'\x3e\x3cdiv data-dojo-attach-point\x3d'clearButton' data-dojo-attach-event\x3d'onclick:clear' class\x3d'wsHotClearButton' style\x3d'display:none;'\x3e\x3csvg class\x3d'svgIcon'\x3e\x3cuse xlink:href\x3d'#iconClose'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\x3c/div\x3e",
_onKeyUp:function(a){this.inherited(arguments);ws.html.setShowing(this.clearButton,!!this.getValue())},clear:function(){this.setValue("");this._onKeyUp()}})})},"ws/widget/DefaultTextbox":function(){define("ws/widget/DefaultTextbox","dojo/_base/declare dojo dijit dijit/_Widget dijit/_TemplatedMixin ws/html".split(" "),function(f,k,d,b,a){return f([b,a],{templateString:"\x3cinput type\x3d'text' maxlength\x3d'${maxlength}' id\x3d'${id}' class\x3d'wsInput' size\x3d'${size}' tabindex\x3d'${tabindex}' style\x3d'width:${fieldWidth}' data-dojo-attach-point\x3d'textbox' data-dojo-attach-event\x3d'onblur:_onBlur,onfocus:_onFocus,onkeyup:_onKeyUp,onkeypress:_onKeyPress,onclick: onInputClick'\x3e",
value:"",origValue:"",defaultValue:"",doValueSelect:!1,clearableInputClassName:"",size:50,fieldWidth:"",maxlength:255,tabindex:500,startup:function(){this.inherited(arguments);this.setValue(this.value);this.value&&(this.origValue=this.value)},getValue:function(){return this.textbox.value==this.defaultValue?"":k.trim(this.textbox.value)},getOrigValue:function(){return this.origValue},setOrigValue:function(a){this.origValue=a},setValue:function(a,b){a=a||"";this.textbox.value=""!=k.trim(a)||b?a:this.defaultValue;
this.doValueSelect&&this.value==this.textbox.value&&setTimeout(k.hitch(this,function(){ws.html.selectInputText(this.textbox)}),100);this._updateClass()},focus:function(){this.textbox.focus()},blur:function(){this.textbox.blur()},select:function(){this.textbox.select()},_onFocus:function(a){this.textbox.value!=this.defaultValue||this.doValueSelect||(this.textbox.value="",this.textbox.focus());this._updateClass();this.onFocus()},onFocus:function(){},_onBlur:function(a){""==k.trim(this.textbox.value)&&
(this.textbox.value=this.defaultValue);this._updateClass();this.onBlur(a)},onBlur:function(){},onInputClick:function(){k.isMoz&&this.domNode.focus()},_onKeyUp:function(a){ws.lang.setTimeout(k.hitch(this,"onChange",a),0)},onChange:function(){},_updateClass:function(){""==this.defaultValue||this.doValueSelect||k.toggleClass(this.textbox,"wsInputDefault",this.textbox.value==this.defaultValue)},_onKeyPress:function(a){var b=a.charCode||65<=a.keyCode&&90>=a.keyCode;this.textbox.value.length>=this.maxLength&&
b&&a.preventDefault();this.onKeyPress(a)},onKeyPress:function(){}})})},"ws/calendar/EventsApp":function(){define("ws/calendar/EventsApp","dojo/_base/declare dojo/text!ws/calendar/EventsApp.html dojo/text!ws/calendar/EventsApp.css dojo dijit dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ws/Spinner ws/calendar/CalendarViewModel ws/widget/WSMenu ws/widget/WSMenuItem ws/widget/WSMenuSeparator".split(" "),function(f,k,d,b,a,h,l,e,p,g,n,t,q){return f([h,l,e],{templateString:k,css:{templateString:d},
_earlyTemplatedStartup:!0,dateFormat:Config.Strings.Panel_EventPanel_DateFormat,timeFormat:Config.Strings.Panel_EventPanel_TimeFormat,dayofWeekFormat:Config.Strings.Panel_EventPanel_DayOfWeekFormat,numDays:90,isAnonymous:!1,_inited:!1,model:null,calendarNodes:{},startup:function(){this.currDate=new Date;this.connect(this.eventNode.domNode,"oncontextmenu","onContextMenu")},onMouseOut:function(){b.removeClass(this.appTitleAddEv,"appTitleAddEvSel")},onMouseOver:function(){b.addClass(this.appTitleAddEv,
"appTitleAddEvSel")},setModel:function(a){this.model=a;this.connect(this.model,"modelUpdated","modelUpdated");this.connect(this.model,"requestUpdate","loadData")},init:function(){if(!this._inited&&ws.WebSuite.theCalendarModel){this.model||this.setModel(ws.WebSuite.theCalendarModel);this.model.isModelFetchedOnce?this.modelUpdated():ws.lang.setTimeout(this,function(){this.spinner||(this.spinner=new p("AimSignIn",this.eventSpinner));this.spinner.spin();this.eventNode.hide();this.eventLoading.show();
this.loadData()},100);this._inited=!0;var a=ws.UserContext.Locale;"fr-fr"!=a&&"fr-ca"!=a&&"es-us"!=a||b.addClass(this.layoutWidget.domNode,"l10n")}},onResized:function(){this.inherited(arguments);0==this.hasEventDaysCount&&this.toolbar.layout()},loadData:function(){this.calStartDate=this.model.dtstart;this.calEndDate=this.model.dtend;ws.WebSuite.isSettingLoaded("cal")?this.model.getData():ws.settings.load({scope:"cal",load:b.hitch(this,"loadData"),error:function(){ws.widget.Dialogs.ok(Config.Strings.Cal_ServiceTemporarilyUnavailable)}})},
updateEventData:function(){this.eventLists=Array(this.numDays);ws.date.formatDateTime(this.currDate,Config.Strings.Panel_EventPanel_MonthFormat);this.hasEventDaysCount=0;for(var a=this.model.components,b=this.currDate,d=0;d<this.numDays;d++){var e=ws.date.formatDateTime(b,this.dateFormat);this.eventLists[d]={rawDate:b,date:e,dayList:[]};b=ws.date.add(b,ws.date.dateParts.DAY,1)}for(d=0;d<a.length;d++)for(var e=a[d],g=this.model.getCalendarById(e.folderId),b=null,b=ws.date.formatDateTime(e.startTime,
this.dateFormat),e={startTimeFormatted:ws.date.formatDateTime(e.startTime,this.timeFormat),startTime:e.startTime,endTime:e.endTime,comp:e,writeable:!g.isReadonly},g=0;g<this.numDays;g++)if(b==this.eventLists[g].date){this.eventLists[g].dayList.push(e);this.hasEventDaysCount++;break}},modelUpdated:function(){if(this.model&&this.model.isModelFetchedOnce){this.updateEventData();this.updateAppMenu();this.eventLoading.hide();var a=this.eventNode.domNode;if(0<this.hasEventDaysCount){this.appEventEmpty.hide();
this.eventNode.show();for(var d=a.childNodes,e=d.length-1;0<=e;e--)b.destroy(d[e]);for(d=0;d<this.eventLists.length;d++)if(e=this.eventLists[d].dayList,0<e.length){this.eventLists[d].node=b.create("div",{className:"eRow dayRow",innerHTML:this.eventLists[d].rawDate==this.currDate?Config.Strings.Panel_EventPanel_Today:this.eventLists[d].date},a);for(var g=0;g<e.length;g++){var h=e[g].startTimeFormatted;e[g].comp.allDay&&(h=Config.Strings.AllDay);var f=b.create("div",{className:"eRow eventRow bgColor",
evid:e[g].comp.uid,_day:d},a);b.create("span",{className:"eventTime",innerHTML:h},f);b.create("span",{className:"eventSummary",innerHTML:e[g].comp.summary,title:e[g].comp.summary},f)}}}else this.appEventEmpty.show(),this.eventNode.hide(),this.toolbar.layout();b.publish("WSFeedbackEnd",[Config.Strings.Loading]);b.setSelectable(a,!1)}},getComponent:function(a,b){var d=0,e=this.eventLists.length;b&&(d=b,e=b+1);for(;d<e;d++)for(var g=this.eventLists[d].dayList,h=0;h<g.length;h++)if(a==g[h].comp.uid)return g[h];
return null},restoreApp:function(a){b.stopEvent(a);ws.WebSuite.Navigation.restoreApp()},calFullView:function(d){d&&b.stopEvent(d);ws.WebSuite.Navigation.searchActive(!1);ws.WebSuite.Navigation.showCalendar(!0,function(){a.byId("calendarView").backToList()})},addEvent:function(a){a&&b.stopEvent(a);ws.WebSuite.getAddEditWidget(b.hitch(this,function(a){null!=a&&(a.setModel(this.model),a.show(0))}))},addEventPlus:function(a){this.addEvent(a);ws.reporting.reportDLAction("Mail-LeftNav-Events-QuickPlusNewEvent")},
addEventBtn:function(a){this.addEvent(a);ws.reporting.reportDLAction("Mail-LeftNav-Events-EmptyAddNewEvent")},addEventMenu:function(a){this.addEvent(a);ws.reporting.reportDLAction("Mail-LeftNav-Events-QuickAddNewEvent")},viewEvent:function(a){b.stopEvent(a);var d=ws.widget.getEventTarget(a,"eRow","eventNode");if(b.hasClass(d,"dayRow")){var e=null;for(a=0;a<this.eventLists.length;a++)d==this.eventLists[a].node&&(e=this.eventLists[a].rawDate);e&&ws.WebSuite.selectTab("calendarView",function(a){a.selectDayView();
a.setDate(e)})}else{a=b.attr(d,"evid");var g=b.attr(d,"_day"),h=this.getComponent(a,+g).comp,f=this.model.getCalendarById(h.folderId);h&&f&&ws.WebSuite.getEventQuickViewWidget(b.hitch(this,function(a){a.setModel(this.model);a.initializeView(h,!f.isReadOnly,d,"right","");ws.reporting.reportDLAction("Mail-LeftNav-QuickViewEvent")}))}},updateAppMenu:function(){var a=this.model.getCalendarList();if(a){if(this.appTitleMenu){var d=this.appTitleMenu.getChildren();b.forEach(d,b.hitch(this,function(a,b){4<
b&&(this.appTitleMenu.removeChild(a),a.destroy())}))}else this.createAppMenu();for(d=0;d<a.length;d++){var e=a[d],g="\x3cdiv class\x3d'wsCalCB "+("wsCalCB_"+ws.calendar.calutil.convertToAolColor(e.color).substring(1)+(e.isActive?" checked":" unchecked"))+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'text'\x3e"+ws.string.escapeXml(e.name)+"\x3c/div\x3e",g=new t({caption:g,onClick:b.hitch(this,"toggleCalendarItem",e.id)});g._onClick=b.hitch(g,function(a){if(!this.disabled)this.onClick();b.stopEvent(a)});this.appTitleMenu.addChild(g);
this.calendarNodes[e.id]=g}}},toggleCalendarItem:function(a){var d=this.model.getCalendarById(a);d.isActive=!d.isActive;b.publish("WSFeedbackStart",[Config.Strings.Loading]);this.model.saveCalendar(a,d).then(b.hitch(this,function(){this.model.getEventData()}),function(){b.publish("WSFeedbackEnd",[Config.Strings.Loading])})},createMenu:function(a,d){var e=new n({id:a});b.forEach(d,function(a){a&&(a=new (a.dojoType?eval(a.dojoType):a.separator?q:t)(a),e.addChild(a))});b.body().appendChild(e.domNode);
e.startup();return e},promptConfirmDelete:function(){var a=this.eventData;a.recurrence?ws.calendar.calutil.showConfirmRecurDialog("delete",b.hitch(this,function(b,d){b&&this.deleteEvent(a,d)})):ws.widget.Dialogs.ok(Config.Strings.RegEventMsg,b.hitch(this,function(b){b&&this.deleteEvent(a)}),!0)},deleteEvent:function(a,d){this.model.deleteEvent(a,d).then(b.hitch(this,function(){b.publish("WSFeedbackStart",[Config.Strings.EventDeleted,!0])}))},createAppMenu:function(){var a=[{caption:Config.Strings.NewEvent,
onClick:b.hitch(this,function(){this.addEventMenu()})},{caption:Config.Strings.AddCalendar,onClick:b.hitch(this,function(){ws.WebSuite.Navigation.selectApp(ws.WebSuite.Navigation.APP_ADDCALENDAR);ws.reporting.reportDLAction("Mail-LeftNav-Events-QuickAddNewCalendar")})},{separator:!0},{caption:Config.Strings.EventAppFullTip,onClick:b.hitch(this,function(){this.calFullView();ws.reporting.reportDLAction("Mail-LeftNav-Events-QuickOpenCalendar")})},{separator:!0}];this.appTitleMenu=this.createMenu("eventAppMenu",
a)},appMenu:function(a){b.stopEvent(a);this.appTitleMenu||this.createAppMenu();this.appTitleMenu.open(this.appTitleLink)},createContextMenu:function(){var a=[{caption:Config.Strings.Edit,onClick:b.hitch(this,function(a){this.eventData&&ws.WebSuite.getAddEditWidget(b.hitch(this,function(a){a.setModel(this.model);a.show(1,this.eventData)}))})},{caption:Config.Strings.Delete,onClick:b.hitch(this,function(){this.promptConfirmDelete()})}];this.contextMenu=ws.widget.createMenu(a)},onContextMenu:function(a){b.stopEvent(a);
var d=ws.widget.getEventTarget(a,"eventRow","eventNode");if(d){var e=b.attr(d,"_day");this.eventData=this.getComponent(b.attr(d,"evid"),+e).comp;this.nodeData=d;this.contextMenu||this.createContextMenu();this.contextMenu.open(a.pageX,a.pageY)}}})})},"ws/calendar/CalendarViewModel":function(){define("ws/calendar/CalendarViewModel","dojo/_base/declare dojo/request/xhr dojo/_base/lang dojo/json dojo/Deferred dojo/date ws/calendar/CalApi ws/widget/Dialogs ws/calendar/calutil ws/io ws/date".split(" "),
function(f,k,d,b,a,h,l){return f(null,{RECUR_CHANGE_CURRENT:1,RECUR_CHANGE_FUTURE:2,constructor:function(a){var b=new Date;b.setDate(1);this.dtstart=ws.date.add(b,ws.date.dateParts.MONTH,-Config.WCAPInitialFetchLookBehindRange);this.dtend=ws.date.add(b,ws.date.dateParts.MONTH,Config.WCAPInitialFetchLookAheadRange+1);this.dtend.setDate(0);this.today=null;this.totalMatchingFilter=this.totalItems=0;this.sortBy="Date";this.sortDir="Descending";this.isSuccess=!1;this.searchStr=null;this.isDummyCalendarAccount=
!1;this.modelType="event";this.calendars=[];this.components=[];this.eventData=[];this.todos=[];this.dayBucketIndex=null;this.isAnonymous=this.loadDataInProgress=!1;this.currentTZIDForPulldown=this.anonymousInitTZIDOffsetStr=this.anonymousCalid="";this.wssid=null;this.isModelFetchedOnce=!1;a&&(this.modelType=a.modelType,this.isAnonymous=a.isAnonymous,this.anonymousCalid=a.anonymousCalid,this.anonymousTicket=a.anonymousTicket);dojo.subscribe("CalendarViewModel/modelUpdated",this,"doModelUpdated");dojo.subscribe("EditCalendar/Delete",
this,"requestUpdate");dojo.subscribe("SettingsChanged/Calendar",this,"requestUpdateFullRefresh");ws.CalApi||(this.isAnonymous?((a=this.anonymousCalid.split(":"))&&2!=a.length&&(a=["",""]),ws.CalApi=new l(a[0],a[1],this.anonymousTicket)):ws.CalApi=new l)},setDummyTZID:function(){var a=null;this.isDummyCalendarAccount&&(a=ws.calendar.calutil.ConvertTimeZoneStringToTZID());return a},getDefaultArgs:function(){return{startTime:this.dtstart?ws.date.formatISO8601(this.dtstart):null,endTime:this.dtend?ws.date.formatISO8601(this.dtend):
null,tzid:Settings.CalendarTimeZone}},getDefaultTaskArgs:function(){return{folderId:"131",priority:"0",status:"NEEDS_ACTION",summary:"",description:""}},searchUpdated:function(){},getSearchArgs:function(a){a={dtstart:this.dtstart?ws.date.formatISO8601(this.dtstart):null,dtend:this.dtend?ws.date.formatISO8601(this.dtend):null,search:a};this.searchUpdated();return a},setSortData:function(a,b){a&&(this.sortBy=a,this.sortDir=b,this.setSearchStr(this.searchStr,!0))},setSearchStr:function(a,b){if(b||a!=
this.searchStr){var d=this.getSearchArgs(a);this.searchEvents(d)}},getSearchString:function(){return this.searchStr},refreshSearchResult:function(){},getDefaultCalendarArgs:function(){return{name:"New Calendar",isActive:!0}},getCalendarArgs:function(a){var b=this.getDefaultCalendarArgs(),d;for(d in a)switch(d){case "isActive":case "id":case "color":case "name":case "isReadOnly":case "type":b[d]=a[d]}return b},getDefaultComponentArgs:function(a){a=this.getDefaultArgs(a);a.tzid=Settings.CalendarTimeZone;
a.startTime=ws.date.formatISO8601(new Date);var b=ws.date.add(new Date,ws.date.dateParts.HOUR,1);a.endTime=ws.date.formatISO8601(b);a.allDay=!0;a.summary="";a.description="";a.reminders={count:0};return a},getComponentArgs:function(a){var b=this.getDefaultComponentArgs(),d;for(d in a)switch(d){case "allDay":case "startTime":case "endTime":case "folderId":case "summary":case "description":case "tzid":b[d]=a[d]}return b},getComponentArgsForTask:function(a){a=this.getComponentArgs(a);a.compType="Todo";
a.calendars=!0;a.components=!0;a.index=!0;a.dayBucketIndex=!1;a.enums=!0;a.sortBy=null;a.sortDir=null;return a},getDataSettingsChanged:function(){this.needsRepaint=!0;this.getData()},getData:function(a){this.loadDataInProgress=!0;ws.CalApi.getCalendars().then(d.hitch(this,function(b){this.calendars=b.folders?b.folders.folder:[b.folder];this.fixCalendarData();this.calendars=this.sortCalendarList();this.loadCalsInProgress=!1;this.getEventData(a)}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,
"Dialogs.ok shown - Error Handler for getData",null,"CalendarViewModel.js");ws.widget.Dialogs.ok(Config.Strings.Cal_ServiceTemporarilyUnavailable)})},getEventData:function(a,b){var e=a&&a.dtstart?a.dtstart:this.dtstart,h=a&&a.dtend?a.dtend:this.dtend;this.loadEventsInProgress=!0;ws.CalApi.getEvents(e,h).then(d.hitch(this,function(a){this.dtstart="string"==typeof e?this.parseTardisDate(e):e;this.dtend="string"==typeof h?this.parseTardisDate(h):h;this.components=a.events&&0<a.events.count?a.events.event:
[];this.isModelFetchedOnce=!0;this.loadDataInProgress=this.loadEventsInProgress=!1;this.searchStr?this.searchEvents({search:this.searchStr}):(this.makeDayBuckets(),this.checkModelUpdated());b&&b()}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for getEventData",null,"CalendarViewModel.js");ws.widget.Dialogs.ok(Config.Strings.Cal_ServiceTemporarilyUnavailable)})},searchEvents:function(a){null!=a.search&&""!=a.search?(this.searchStr?this.components=
this.eventData:(this.sortBy="Date",this.sortDir="Descending"),this.searchResults=this.components.filter(function(b){return b.summary&&-1!=b.summary.toLowerCase().indexOf(a.search.toLowerCase())||b.description&&-1!=b.description.toLowerCase().indexOf(a.search.toLowerCase())?!0:!1}),this.eventData=this.components,this.components=this.searchResults,this.sortEvents()):(this.components=this.eventData,this.searchResults=[],this.eventData=[]);this.searchStr=a.search;this.makeDayBuckets();this.searchUpdated();
this.modelUpdated()},sortEvents:function(){this.components.sort(d.hitch(this,"eventComparator"))},eventComparator:function(a,b){if(!a||!b)return 0;var d="Ascending"==this.sortDir,e=d?a:b,d=d?b:a;switch(this.sortBy){case "Date":case "Time":if("string"!=typeof e.startTime&&"string"!=typeof d.startTime)return e.startTime.getTime()-d.startTime.getTime();break;case "Event":return e.summary.toLocaleLowerCase().localeCompare(d.summary.toLocaleLowerCase());case "Cal":return e=this.getCalendarById(e.folderId),
d=this.getCalendarById(d.folderId),e.name.toLocaleLowerCase().localeCompare(d.name.toLocaleLowerCase())}return 0},fixCalendar:function(a){"string"==typeof a.isActive&&(a.isActive="true"==a.isActive);a.name=ws.string.unescapeXml(a.name);a.isReadOnly=a.isReadOnly||a.url},fixCalendarData:function(){this.calendars.forEach(d.hitch(this,function(a){this.fixCalendar(a)}))},checkModelUpdated:function(){this.loadCalsInProgress||this.loadEventsInProgress||(this.isModelFetchedOnce=this.isSuccess=!0,this.modelUpdated())},
parseTardisLeadTime:function(a){var b=0;a&&a.reminders&&0<a.reminders.count&&a.reminders.reminder&&0<a.reminders.reminder.length&&(a=a.reminders.reminder[0].offset.match(/-?PT(\d+)M/))&&1<a.length&&(b=+a[1]);return b},parseTardisDate:function(a){if("string"!=typeof a)return a;var b=-1==a.indexOf("T")?ws.date.RFC2445:ws.date.RFC2445WithTime;return ws.date.ParseDateFromFormat(a,b)},makeDayBuckets:function(){var a=[];this.componentIndex={};for(var b=ws.date.daysSpanned(this.dtstart,this.dtend),d=0;d<
b;d++)a[d]=[];for(var h=this.components,d=0;d<h.length;d++){var f=h[d].startTime,l=h[d].endTime;this.addEventToIndex(h[d]);h[d].startTime=this.parseTardisDate(f);h[d].endTime=this.parseTardisDate(l);if(h[d].startTime){var m=ws.date.daysSpanned(this.dtstart,h[d].startTime);if(0<=m&&m<b){var k=[h[d].uid,null,h[d].startTime,null];if(h[d].recurrence||h[d].recurId)k[1]=f,k[3]=l;a[m].push(k);!h[d].allDay&&h[d].startTime.getDate()!=h[d].endTime.getDate()&&a[m+1]&&a[m+1].push(k)}}}for(d=0;d<a.length;d++)1<
a[d].length&&a[d].sort(function(a,b){return a&&b?a[2].getTime()-b[2].getTime():0});this.dayBucketIndex=a},getCalendarById:function(a){for(var b=0;b<this.calendars.length;b++)if(this.calendars[b].id==a)return this.calendars[b];return null},getEventById:function(a,b){var d=this.componentIndex[a];if(d&&1==d.length)return d[0];if(b)for(var e=0;e<d.length;e++)if(d[e].startTime==b)return d[e];return null},isCalendarPublic:function(a){if(a&&a.grants)for(var b=0;b<a.grants.length;b++)if("pub"==a.grants[b].granteeType)return!0;
return!1},addEventToIndex:function(a){this.componentIndex.hasOwnProperty(a.uid)?this.componentIndex[a.uid].push(a):this.componentIndex[a.uid]=[a]},updateCalendar:function(a,b){if(!a)return this.calendars.push(b);for(var d=0;d<this.calendars.length;d++)if(this.calendars[d].id==a)return this.calendars[d]=b;return null},saveCalendar:function(b,h){var e=new a;ws.CalApi.saveCalendar(b,h).then(d.hitch(this,function(a){this.fixCalendar(a.folder);this.updateCalendar(b,a.folder);this.modelUpdated();e.resolve(a)}),
function(a){b?(window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for update Calendar",a,"CalendarViewModel.js"),ws.widget.Dialogs.ok(ws.string.substituteParams(Config.Strings.CalendarUpdatedError,h.name))):(window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for new Calendar",a,"CalendarViewModel.js"),ws.widget.Dialogs.ok(ws.string.substituteParams(Config.Strings.CalendarAddedError,h.name)));e.reject(a)});return e.promise},
resetCalenderToken:function(a,b){var e=this.getCalendarById(a);e.webToken="reset";this.saveCalendar(a,e).then(d.hitch(this,function(a){b&&b(a)}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for SetCalendar",a,"CalendarViewModel.js");ws.widget.Dialogs.ok(Config.Strings.CalShareResetError)})},deleteCalendar:function(b){var e=new a;ws.CalApi.deleteCalendar(b).then(d.hitch(this,function(a){this.getData();e.resolve()}),function(a){dojo.publish("WSFeedbackEnd",
[Config.Strings.Loading]);window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for deleteCalendar",a,"CalendarViewModel.js");ws.widget.Dialogs.ok(ws.string.substituteParams(Config.Strings.CalendarDeletedError,b.name));e.reject()});return e.promise},saveComponent:function(b,h,g){var e=new a;ws.CalApi.saveEvent(b,h,g).then(d.hitch(this,function(a){this.getEventData(null,function(){e.resolve()})}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,
"Dialogs.ok shown - Error Handler for saveComponent",a,"CalendarViewModel.js");ws.widget.Dialogs.ok(Config.Strings.CalServerErrorSaving);e.reject(a)});return e.promise},importFromFile:function(b,h){var e=new a;ws.CalApi.importEvents(b,h).then(d.hitch(this,function(){this.getData();e.resolve()}),function(){e.reject()});return e.promise},doModelUpdated:function(a){a!=this&&a&&a.modelType==this.modelType&&this.requestUpdate()},modelUpdated:function(){},requestUpdate:function(){},requestUpdateFullRefresh:function(){},
toggleSelectRow:function(a){},deleteEvent:function(b,h){if(b){var e=new a;ws.CalApi.deleteEvent(b,h).then(d.hitch(this,function(){b.recurrence?this.getEventData(null,function(){e.resolve()}):(this.deleteEventLocal(b),this.makeDayBuckets(),this.checkModelUpdated(),e.resolve())}),function(a){ws.widget.Dialogs.ok(Config.Strings.CalServerErrorDeletingB2);e.reject(a)});return e.promise}},deleteEventLocal:function(a){for(var b=0;b<this.components.length;b++)this.components[b].uid==a.uid&&this.components[b].startTime==
a.startTime&&(this.components.splice(b,1),delete this.componentIndex[a.uid]);for(b=0;b<this.eventData.length;b++)this.eventData[b].uid==a.uid&&this.eventData[b].startTime==a.startTime&&this.eventData.splice(b,1)},updateEventLocal:function(a){for(var b=0;b<this.components.length;b++)this.components[b].uid==a.uid&&this.components[b].startTime==a.startTime&&(this.components[b]=a);for(b=0;b<this.eventData.length;b++)this.eventData[b].uid==a.uid&&this.eventData[b].startTime==a.startTime&&(this.eventData[b]=
a)},calendarComparator:function(a,b){return"131"==a.id?-1:"131"==b.id||a.isRemote&&!b.isRemote?1:!a.isRemote&&b.isRemote?-1:a.name.toLowerCase()<=b.name.toLowerCase()?-1:1},isLoading:function(){return!this.isSuccess||this.loadDataInProgress},sortCalendarList:function(){var a=[];if(!this.calendars)return a;a=this.calendars.slice();a.sort(this.calendarComparator);return a},getCalendarList:function(){return this.calendars},loadTodos:function(){var b=new a;this.todos=[];ws.CalApi.getTodos().then(d.hitch(this,
function(a){this.todos=a;b.resolve(a)}),function(a){b.reject(a)});return b.promise},getTodos:function(){return this.todos},findTodo:function(a){if(a)for(var b=0;b<this.todos.length;b++)if(this.todos[b].uid==a.uid)return b;return-1},updateTodo:function(b){var e=new a,g=this.findTodo(b);-1==g?e.reject("Invalid input todo"):ws.CalApi.updateTodo(b).then(d.hitch(this,function(a){this.todos[g]=a;e.resolve(a)}),function(a){e.reject(a)});return e.promise},createTodo:function(b){var e=new a;ws.CalApi.createTodo(b).then(d.hitch(this,
function(a){this.todos.push(a);e.resolve(a)}),function(a){e.reject(a)});return e.promise},deleteTodo:function(b){var e=new a,g=this.findTodo(b);-1==g?e.reject("Invalid input todo"):ws.CalApi.deleteTodo(b).then(d.hitch(this,function(){this.todos.splice(g,1);e.resolve()}),function(a){e.reject(a)});return e.promise}})})},"ws/calendar/CalApi":function(){define("ws/calendar/CalApi",["dojo/_base/declare","dojo/request/xhr","dojo/json","dojo/_base/lang","dojo/Deferred"],function(f,k,d,b,a){return f(null,
{model:null,wssid:null,isAnonymous:!1,constructor:function(a,b,d){this.isAnonymous=a&&b;this.anonUser=a;this.anonCalid=b;this.anonTicket=d;a=this.isAnonymous?ws.encoding.encode64("t\x3daol,g\x3d"+a):Settings.GUID;this.baseUrl=Config.BaseCalRpcURL+"users/"+a},handleNewWssid:function(a){if(a&&a.response&&a.response.status&&401===a.response.status&&a.response.text&&(a=d.parse(a.response.text))&&a.calendarError&&a.calendarError.wssid){if(a=a.calendarError.wssid)this.wssid=a;return!0}return!1},getArgs:function(a){var b=
{handleAs:"json",query:ws.io.createYmreqid(),headers:{"Content-type":"application/json","Accept-Language":"en-US"}};a||this.addArg(b,"format","json");this.wssid&&this.addArg(b,"wssid",this.wssid);this.isAnonymous&&(b.headers.entityEnc="b64id");return b},addArg:function(a,b,d){""!=a.query&&(a.query+="\x26");a.query+=b+"\x3d"+encodeURIComponent(d)},addArgs:function(a,d){Object.keys(d).forEach(b.hitch(this,function(b){d[b]&&this.addArg(a,b,d[b])}));return a},makeEventOut:function(a){var b=ws.lang.shallowCopy(a);
b.startTime="string"!=typeof a.startTime?ws.date.formatISO8601(a.startTime):a.startTime;b.endTime="string"!=typeof a.endTime?ws.date.formatISO8601(a.endTime):a.endTime;return b},getSettings:function(){var d=new a,f=this.getArgs();k.get(this.baseUrl+"/options/",f).then(b.hitch(this,function(a){d.resolve(a)}),b.hitch(this,function(a){this.handleNewWssid(a)?this.getSettings().then(function(a){d.resolve(a)},function(a){d.reject(a)}):(window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to acquire calendar settings.",
a),d.reject(a))}));return d.promise},saveSettings:function(h){var f=new a,e=this.getArgs();e.method="PATCH";e.data=d.stringify({options:h});k(this.baseUrl+"/options/",e).then(b.hitch(this,function(a){f.resolve(a)}),b.hitch(this,function(a){this.handleNewWssid(a)?this.saveSettings(h).then(function(a){f.resolve(a)},function(a){f.reject(a)}):(window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to save calendar settings.",a),f.reject(a))}));return f.promise},getEvents:function(d,f){this.loadEventsInProgress=
!0;var e=new a,h=this.getArgs(),g="",l="string"==typeof d?d:ws.date.formatRFC2445(d),t="string"==typeof f?f:ws.date.formatRFC2445(f),h=this.addArgs(h,{dtstart:l,dtend:t});this.isAnonymous&&(g=this.anonCalid+"/",h=this.anonTicket?this.addArgs(h,{key:this.anonTicket}):this.addArgs(h,{access:"public"}));k.get(this.baseUrl+"/calendars/"+g+"events/",h).then(b.hitch(this,function(a){this.loadEventsInProgress=!1;e.resolve(a)}),b.hitch(this,function(a){this.loadEventsInProgress=!1;this.handleNewWssid(a)?
this.getEvents(d,f).then(function(a){e.resolve(a)},function(a){e.reject(a)}):(window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to acquire calendar events.",a),e.reject(a))}));return e.promise},getCalendars:function(){this.loadCalsInProgress=!0;var d=new a,f=this.getArgs(),e="",f=this.addArgs(f,{type:"EVENT"});this.isAnonymous&&(e=this.anonCalid,f=this.anonTicket?this.addArgs(f,{key:this.anonTicket}):this.addArgs(f,{access:"public"}));k.get(this.baseUrl+"/calendars/"+e,f).then(function(a){d.resolve(a)},
b.hitch(this,function(a){this.handleNewWssid(a)?this.getCalendars().then(function(a){d.resolve(a)},function(a){d.reject(a)}):(this.loadCalsInProgress=!1,window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to acquire calendars.",a),d.reject(a))}));return d.promise},saveCalendar:function(h,f){var e=new a,l=this.getArgs();l.data=d.stringify({folder:f});l.method=h?"PATCH":"POST";k(this.baseUrl+"/calendars/"+(h?h:""),l).then(function(a){e.resolve(a)},b.hitch(this,function(a){this.handleNewWssid(a)?this.saveCalendar(h,
f).then(function(a){e.resolve(a)},function(a){e.reject(a)}):(window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to update calendar id\x3d"+h,a),e.reject(a))}));return e.promise},deleteCalendar:function(d){var h=new a,e=this.getArgs();e.method="DELETE";k(this.baseUrl+"/calendars/"+d.id,e).then(function(){h.resolve()},b.hitch(this,function(a){this.handleNewWssid(a)?this.deleteCalendar(d).then(function(a){h.resolve(a)},function(a){h.reject(a)}):(window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to delete calendar id\x3d"+
d.id,a),h.reject(a))}));return h.promise},saveEvent:function(h,f,e){var l=new a,g=this.getArgs();g.method=h.uid?"PATCH":"POST";g.data=d.stringify({event:h});var n=h.uid?h.uid+"/":"",t=e?e.folderId:h.folderId;if(h.recurrence&&e){if(f)if("C"==f)g.method="PUT",n=h.uid+"/instances/"+("string"!=typeof e.startTime?ws.date.formatISO8601(e.startTime):e.startTime);else if("F"==f)return this.splitEvent(e).then(b.hitch(this,function(a){a.event?(h.uid=a.event.uid,this.saveEvent(h,null,e).then(function(){l.resolve()},
function(a){window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to save event series id\x3d"+h.uid,a);l.reject(a)})):(window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to save event series id\x3d"+h.uid),l.reject())}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to split event series id\x3d"+e.uid,a);l.reject(a)}),l.promise}else h.recurId&&(g.method="PUT",n=h.uid+"/instances/"+h.recurId);k(this.baseUrl+"/calendars/"+t+"/events/"+n,g).then(function(a){l.resolve(a)},b.hitch(this,function(a){if(this.handleNewWssid(a))this.saveEvent(h,
f,e).then(function(a){l.resolve(a)},function(a){l.reject(a)});else{var b="",b=h.id?"Failed to update event id\x3d"+h.id:"Failed to create event on calendar id\x3d"+h.folderId;window.ws_ErrLgr&&ws_ErrLgr.logCalError(b,a);l.reject(a)}}));return l.promise},deleteEvent:function(d,f){var e=new a,h=this.getArgs();h.method="DELETE";var g="";if(d.recurrence)if("C"==f)g="/instances/"+("string"!=typeof d.startTime?ws.date.formatISO8601(d.startTime):d.startTime);else{if("F"==f)return this.splitEvent(d).then(b.hitch(this,
function(a){a.event?this.deleteEvent(a.event).then(function(){e.resolve()},function(a){window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to delete event series id\x3d"+d.uid,a);e.reject(a)}):(window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to delete event series id\x3d"+d.uid),e.reject())}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to split event series id\x3d"+d.uid,a);e.reject(a)}),e.promise}else d.recurId&&(g="/instances/"+d.recurId);k(this.baseUrl+"/calendars/"+d.folderId+"/events/"+
d.uid+g,h).then(function(){e.resolve()},b.hitch(this,function(a){this.handleNewWssid(a)?this.deleteEvent(d,f).then(function(a){e.resolve(a)},function(a){e.reject(a)}):(window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to delete event id\x3d"+d.uid,a),e.reject(a))}));return e.promise},splitEvent:function(h){var f=new a,e=this.getArgs();e.method="PUT";e.data=d.stringify({event:this.makeEventOut(h)});k(this.baseUrl+"/calendars/"+h.folderId+"/events/"+h.uid+"/split",e).then(function(a){f.resolve(a)},b.hitch(this,
function(a){this.handleNewWssid(a)?this.splitEvent(h).then(function(a){f.resolve(a)},function(a){f.reject(a)}):(window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to split series event id\x3d"+h.uid,a),f.reject(a))}));return f.promise},searchEvents:function(d,f,e){var h=new a,g=this.getArgs(),g=this.addArgs(g,{type:"Event",kw:d,dtstart:f,dtend:e});k.get(this.baseUrl+"/items/",g).then(b.hitch(this,function(a){var b=[];a.calendaritems&&a.calendaritems.events&&(b=a.calendaritems.events);h.resolve(b)}),
b.hitch(this,function(a){this.handleNewWssid(a)?this.searchEvents(d,f,e).then(function(a){h.resolve(a)},function(a){h.reject(a)}):(window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to search for events",a),h.reject(a))}));return h.promise},importEvents:function(d,f){var e=new a,h=this.getArgs();h.headers={"Content-type":"text/calendar; charset\x3dutf-8"};h.data=f;h.method="POST";k(this.baseUrl+"/calendars/"+d,h).then(function(a){e.resolve()},b.hitch(this,function(a){this.handleNewWssid(a)?this.importEvents(d,
f).then(function(a){e.resolve(a)},function(a){e.reject(a)}):(window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to import events calid\x3d"+d,a),e.reject(a))}));return e.promise},getExportUrl:function(a,b,d){var e=this.getArgs(!0);this.addArgs(e,{dtstart:b,dtend:d});return this.baseUrl+"/calendars/"+a+"/export?"+e.query},getTodos:function(){this.loadTodosInProgress=!0;var d=new a,f=this.getArgs();k.get(this.baseUrl+"/calendars/131/todos/",f).then(b.hitch(this,function(a){this.loadTodosInProgress=!1;
a.todos?d.resolve(0==a.todos.count?[]:a.todos.todo):d.reject()}),b.hitch(this,function(a){this.loadTodosInProgress=!1;this.handleNewWssid(a)?this.getTodos().then(function(a){d.resolve(a)},function(a){d.reject(a)}):(window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to acquire Todos.",a),d.reject(a))}));return d.promise},updateTodo:function(h){var f=new a,e=this.getArgs();e.method="PUT";e.data=d.stringify({todo:h});k(this.baseUrl+"/calendars/"+h.folderId+"/todos/"+h.uid,e).then(b.hitch(this,function(a){f.resolve(a.todo)}),
b.hitch(this,function(a){this.handleNewWssid(a)?this.updateTodo(h).then(function(a){f.resolve(a)},function(a){f.reject(a)}):(window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to update Todo id\x3d"+h.uid,a),f.reject(a))}));return f.promise},createTodo:function(h){var f=new a,e=this.getArgs();e.method="POST";e.data=d.stringify({todo:h});k(this.baseUrl+"/calendars/"+h.folderId+"/todos/",e).then(b.hitch(this,function(a){f.resolve(a.todo)}),b.hitch(this,function(a){this.handleNewWssid(a)?this.createTodo(h).then(function(a){f.resolve(a)},
function(a){f.reject(a)}):(window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to create Todo",a),f.reject(a))}));return f.promise},deleteTodo:function(d){var h=new a,e=this.getArgs();e.method="DELETE";k(this.baseUrl+"/calendars/"+d.folderId+"/todos/"+d.uid,e).then(b.hitch(this,function(a){h.resolve()}),b.hitch(this,function(a){this.handleNewWssid(a)?this.deleteTodo(d).then(function(a){h.resolve(a)},function(a){h.reject(a)}):(window.ws_ErrLgr&&ws_ErrLgr.logCalError("Failed to delete Todo id\x3d"+d.uid,
a),h.reject(a))}));return h.promise}})})},"ws/calendar/calutil":function(){define("ws/calendar/calutil","dojo dojo/_base/lang ws/date ws/io ws/reporting ws/string ws/UserContext".split(" "),function(f,k){k.setObject("ws.calendar.calutil",{kADDRESS_STREET:0,kADDRESS_CITY:1,kADDRESS_STATE:2,kADDRESS_ZIP:3,kADDRESS_COUNTRY:4,yahoo2aolColorMap:{defaultColor:"#0360EB",darkpurple:"#646496",blue:"#0360EB",orange:"#E76808",red:"#CC0000",green:"#009712",purple:"#6600FF",cyan:"#0088FF",magenta:"#800080",aquamarine:"#008080",
pink:"#FF0080",yellow:"#808000",gray:"#6C6C6C",lightblue:"#0088FF"},componentColorMap:{"#009712":{border:"#009712",dark:"#009712",light:"#009712",yahoo:"green"},"#0360EB":{border:"#0360EB",dark:"#0360EB",light:"#0360EB",yahoo:"blue"},"#CC0000":{border:"#CC0000",dark:"#CC0000",light:"#CC0000",yahoo:"red"},"#E76808":{border:"#E76808",dark:"#E76808",light:"#E76808",yahoo:"orange"},"#808000":{border:"#808000",dark:"#808000",light:"#808000",yahoo:"yellow"},"#6600FF":{border:"#6600FF",dark:"#6600FF",light:"#6600FF",
yahoo:"purple"},"#008080":{border:"#008080",dark:"#008080",light:"#008080",yahoo:"aquamarine"},"#800080":{border:"#800080",dark:"#800080",light:"#800080",yahoo:"magenta"},"#6C6C6C":{border:"#6C6C6C",dark:"#6C6C6C",light:"#6C6C6C",yahoo:"gray"},"#0088FF":{border:"#0088FF",dark:"#0088FF",light:"#0088FF",yahoo:"cyan"},"#646496":{border:"#646496",dark:"#646496",light:"#646496",yahoo:"darkpurple"},"#FF0080":{border:"#FF0080",dark:"#FF0080",light:"#FF0080",yahoo:"pink"}},convertToAolColor:function(d){d=
this.yahoo2aolColorMap[d];ws.lang.undefinedOrNull(d)&&(d="#0360EB");return d},convertToYahooColor:function(d){d=this.componentColorMap[d];return d=ws.lang.undefinedOrNull(d)?"blue":d.yahoo},componentColorMapRGBAIE:{"#009712":"#B2E6A8","#0360EB":"#AACDF5","#CC0000":"#F69E9D","#E76808":"#FED295","#808000":"#F2E7B1","#6600FF":"#B7ADEA","#008080":"#9DDBD6","#800080":"#C0A594","#6C6C6C":"#D7D7D7","#0088FF":"#D4E099","#646496":"#B0B0B0","#FF0080":"#F6B7D1"},componentColorMapTxt:{"#009712":"#397031","#0360EB":"#2A5581",
"#CC0000":"#8F2121","#E76808":"#6C450E","#808000":"#695B13","#6600FF":"#382D72","#008080":"#086D65","#800080":"#4D230A","#6C6C6C":"#656565","#0088FF":"#5F6f0E","#646496":"#292929","#FF0080":"#9F2254"},componentColorMapRGBA:{"#009712":"rgba(66,195,48,0.4)","#0360EB":"rgba(49,137,230,0.4)","#CC0000":"rgba(234,25,25,0.4)","#E76808":"rgba(253,148,0,0.4)","#808000":"rgba(223,197,70,0.4)","#6600FF":"rgba(81,60,204,0.4)","#008080":"rgba(20,170,158,0.4)","#800080":"rgba(104,39,0,0.4)","#6C6C6C":"rgba(155,155,155,0.4)",
"#0088FF":"rgba(148,178,0,0.4)","#646496":"rgba(58,58,58,0.4)","#FF0080":"rgba(233,76,139,0.4)"},initSimpleLocation:function(){return{street:"",city:"",state:"",zip:"",country:"US",originalLocationString:""}},initMapViewStruct:function(){return{width:"140",height:"140",zoom:"10",zoomCtrl:"true",viewCtrl:"false"}},privateSetSimpleLocationField:function(d,b,a){b=f.trim(b);switch(a){case this.kADDRESS_STREET:d.street=b;break;case this.kADDRESS_CITY:d.city=b;break;case this.kADDRESS_STATE:d.state=b;break;
case this.kADDRESS_ZIP:d.zip=b}},reallySimpleLocationToUSAddressParser:function(d){var b=this.initSimpleLocation();b.originalLocationString=d;var a=d.split(",");if(3==a.length){var h=f.trim(a[2]),l=h.lastIndexOf(" ");if(0<=l){var e=h.substring(l+1),e=f.trim(e),k=e.charAt(0);null!=k&&"0"<=k&&"9">=k&&(a[2]=f.trim(h.substring(0,l)),a[3]=e)}}for(h=0;h<a.length;h++)this.privateSetSimpleLocationField(b,a[h],h);2==a.length&&(e=f.trim(a[1]),h=f.trim(a[0]),5==e.length&&0<parseInt(e)?0<parseInt(h)?(this.privateSetSimpleLocationField(b,
e,3),this.privateSetSimpleLocationField(b,"",1)):2==h.length&&(this.privateSetSimpleLocationField(b,"",1),this.privateSetSimpleLocationField(b,h,2),this.privateSetSimpleLocationField(b,e,3),this.privateSetSimpleLocationField(b,"",0)):(h=e,e=f.trim(a[0]),0<parseInt(e)||2!=h.length||(this.privateSetSimpleLocationField(b,"",0),this.privateSetSimpleLocationField(b,e,1),this.privateSetSimpleLocationField(b,h,2))));if(1==a.length)if(e=f.trim(a[0]),k=e.charAt(0),null!=k&&"0"<=k&&"9">=k){d=!0;if(5==e.length)for(h=
1;5>h;h++){if("0">e.charAt(h)||"9"<e.charAt(h))d=!1}else d=!1;d?(this.privateSetSimpleLocationField(b,"",0),this.privateSetSimpleLocationField(b,"",1),this.privateSetSimpleLocationField(b,"",2),this.privateSetSimpleLocationField(b,e,3)):(this.privateSetSimpleLocationField(b,"",0),this.privateSetSimpleLocationField(b,b.originalLocationString,1),this.privateSetSimpleLocationField(b,"",2),this.privateSetSimpleLocationField(b,"",3))}else a=d.split(/\s+/),2==a.length?(h=a[0],e=a[1],2==h.length&&this.privateSetSimpleLocationField(b,
h,2),k=e.charAt(0),null!=k&&"0"<=k&&"9">=k&&this.privateSetSimpleLocationField(b,e,3),this.privateSetSimpleLocationField(b,"",0),1>b.state.length&&1>b.zip.length&&this.privateSetSimpleLocationField(b,b.originalLocationString,1)):(1==a.length&&2==a[0].length?(this.privateSetSimpleLocationField(b,"",0),this.privateSetSimpleLocationField(b,"",1),this.privateSetSimpleLocationField(b,a[0],2)):(this.privateSetSimpleLocationField(b,"",0),this.privateSetSimpleLocationField(b,b.originalLocationString,1),this.privateSetSimpleLocationField(b,
"",2)),this.privateSetSimpleLocationField(b,"",3));return b},showMapLink:function(d,b){var a=ws.calendar.calutil.reallySimpleLocationToUSAddressParser(d);this.showMapLinkFromLocStruct(a,b,"map")},showMapLinkFromLocStruct:function(d,b,a){if(null!=d&&(!b||this.IsLocationStructValidUSAddress(d))){b=null;switch(a){case null:case "map":b="http://www.mapquest.com/maps/map.adp?address\x3d"+d.street+"\x26city\x3d"+d.city+"\x26state\x3d"+d.state+"\x26zipcode\x3d"+d.zip+"\x26country\x3dUS\x26cid\x3dlfmaplink";
break;case "to":b="http://www.mapquest.com/directions/main.adp?src\x3dmaps\x261sb\x3drevise\x262v\x3dADDRESS\x262a\x3d"+d.street+"\x262c\x3d"+d.city+"\x262s\x3d"+d.state+"\x262z\x3d"+d.zip+"\x262y\x3dUS";break;case "from":b="http://www.mapquest.com/directions/main.adp?src\x3dmaps\x262sb\x3drevise\x261v\x3dADDRESS\x261a\x3d"+d.street+"\x261c\x3d"+d.city+"\x261s\x3d"+d.state+"\x261z\x3d"+d.zip+"\x261y\x3dUS"}null!=b&&(d=ws.io.openWindow(b,"Mapquest",""),null!=d&&(d.focus(),ws.reporting.reportDLAction("Mail-Calendar-ShowMap")))}},
getMapIFrameURL:function(d,b){var a=null;return a=Config.EnableShowInlineMapFreeformParse?ws.string.substituteParams("{0}common/MapUtil.aspx?fullAddress\x3d{1}\x26width\x3d{2}\x26height\x3d{3}\x26zoom\x3d{4}\x26zoomCtrl\x3d{5}\x26viewCtrl\x3d{6}",Config.BasePagesURL,d.originalLocationString,b.width,b.height,b.zoom,b.zoomCtrl,b.viewCtrl):ws.string.substituteParams("{0}common/MapUtil.aspx?street\x3d{1}\x26city\x3d{2}\x26state\x3d{3}\x26country\x3dUS\x26width\x3d{4}\x26height\x3d{5}\x26zoom\x3d{6}\x26zoomCtrl\x3d{7}\x26viewCtrl\x3d{8}",
Config.BasePagesURL,d.street,d.city,d.state,b.width,b.height,b.zoom,b.zoomCtrl,b.viewCtrl)},kStateAbbrevArray:"AL AK AS AZ AR CA CO CT DE DC FM FL GA GU HI ID IL IN IA KS KY LA ME MH MD MA MI MN MS MO MT NE NV NH NJ NM NY NC ND MP OH OK OR PW PA PR RI SC SD TN TX UT VT VI VA WA WV WI WY".split(" "),kStateFullArray:"ALABAMA;ALASKA;AMERICAN SAMOA;ARIZONA;ARKANSAS;CALIFORNIA;COLORADO;CONNECTICUT;DELAWARE;DISTRICT OF COLUMBIA;FEDERATED STATES OF MICRONESIA;FLORIDA;GEORGIA;GUAM;HAWAII;IDAHO;ILLINOIS;INDIANA;IN;IOWA;KANSAS;KENTUCKY;LOUISIANA;MAINE;MARSHALL ISLANDS;MARYLAND;MASSACHUSETTS;MICHIGAN;MINNESOTA;MISSISSIPPI;MISSOURI;MONTANA;NEBRASKA;NEVADA;NEW HAMPSHIRE;NEW JERSEY;NEW MEXICO;NEW YORK;NORTH CAROLINA;NORTH DAKOTA;NORTHERN MARIANA ISLANDS;OHIO;OKLAHOMA;OREGON;PALAU;PENNSYLVANIA;PUERTO RICO;RHODE ISLAND;SOUTH CAROLINA;SOUTH DAKOTA;TENNESSEE;TEXAS;UTAH;VERMONT;VIRGIN ISLANDS;VIRGINIA;WASHINGTON;WEST VIRGINIA;WISCONSIN;WYOMING".split(";"),
IsLocationStructValidUSAddress:function(d){var b=!1;if(null==d||0==d.length)return!1;if(Config.EnableShowInlineMapFreeformParse)return!0;if(!(d.street&&d.city&&d.state))return!1;d=d.state.toUpperCase();var a=0;2==d.length&&(a=f.indexOf(this.kStateAbbrevArray,d),0<=a&&(b=!0));return b},LocalPopulateCalendarListFromCalArray:function(d,b,a){if(null!=d&&0<d.length)for(var h=0,f=null!=b,e=[],h=0;h<d.length;h++){var k=d[h],g=k.id,k=ws.string.escapeXml(k.name);f?e.push({display:k,value:g,selected:g==b}):
e.push({display:k,value:g,selected:0==h});a.setOptions(e)}},GetDefaultCalid:function(d){for(var b=ws.WebSuite.theCalendarModel,a=ws.WebSuite.theCalendarModel.calendars,h=0;h++;h<a.length)if(0==d&&0==a[h][b.calendarEnum.calType]||1==d&&1==a[h][b.componentEnum])return a[h][b.calendarEnum.id];return""},DecodeHTMLEntities:function(d){for(var b=d.match(/&#\d+;?/g),a=b?b.length:0,h=0;h<a;h++){var f=String.fromCharCode(b[h].replace(/\D/g,""));d=d.replace(/&#\d+;?/,f)}return d},DecodeHTML:function(d){if(null==
d)return null;d=d.replace(/&#38;|&amp;/g,"\x26");d=d.replace(/&#60;|&lt;/g,"\x3c");d=d.replace(/&#62;|&gt;/g,"\x3e");d=d.replace(/&#34;|&quot;/g,'"');d=d.replace(/&#39;|&apos;/g,"'");return d=d.replace(/\\x2f/g,"/")},GetNext30MinuteIncrement:function(d){30>d.getMinutes()?d.setMinutes(30):(d=ws.date.add(d,ws.date.dateParts.HOUR,1),d.setMinutes(0));return d},GetTimezoneInfo:function(){var d=new Date,b=new Date(d.getFullYear(),0,1,0,0,0,0),d=new Date(d.getFullYear(),6,1,0,0,0,0),b=b.getTimezoneOffset(),
d=d.getTimezoneOffset();return ws.string.substituteParams("{0}|{1}",-b,-d)},GetTimezoneInfoInObject:function(){var d=new Date,b=new Date(d.getFullYear(),0,1,0,0,0,0),d=new Date(d.getFullYear(),6,1,0,0,0,0),b=b.getTimezoneOffset(),d=d.getTimezoneOffset(),a={};a.winterOffset=-b;a.summerOffset=-d;return a},ConvertTimeZoneStringToTZID:function(d){d="";var b=this.GetTimezoneInfoInObject();if(null!=b){var a=b.winterOffset,b=b.summerOffset;-480==a&&-420==b?d="America/Los_Angeles":-420==a&&-360==b?d="America/Denver":
-360==a&&-300==b?d="America/Chicago":-300==a&&-240==b?d="America/New_York":-420==a&&-420==b?d="America/Phoenix":-300==a&&-300==b?d="America/Indianapolis":-540==a&&-480==b?d="America/Anchorage":-600==a&&-600==b?d="Pacific/Honolulu":-240==a&&-180==b?d="America/Halifax":-210==a&&-150==b&&(d="America/St_Johns")}return d},AdjustEndTimeTo30MinsAfterStart:function(d,b,a,h,f,e){if(23!=b.hr||23==b.hr&&0==b.min)0==b.min?(a.hr=b.hr,a.min=30):(a.hr=b.hr+1,a.min=0),b=null,b=null!=h?ws.date.ParseDateFromFormat(h,
f):new Date,b.setHours(a.hr,a.min),d=ws.date.formatDateTime(b,e);return d},AdjustStartTimeTo30MinsBeforeEnd:function(d,b,a,h,f,e){if(0!=a.hr||0!=a.min)30<=a.min?(b.hr=a.hr,b.min=0):(b.hr=a.hr-1,b.min=30),a=null,a=null!=h?ws.date.ParseDateFromFormat(h,f):new Date,a.setHours(b.hr,b.min),d=ws.date.formatDateTime(a,e);return d},showConfirmRecurDialog:function(d,b){if("edit"==d)var a=Config.Strings.RepeatEventMsg,h=[Config.Strings.RepeatEventOnly,Config.Strings.RepeatEventFuture,Config.Strings.Cancel];
else a=Config.Strings.RepeatEventDelMsg,h=[Config.Strings.RepeatEventDelOnly,Config.Strings.RepeatEventDelFuture,Config.Strings.Cancel];ws.widget.Dialogs.show(a,h,function(a){b&&b(2!=a,0==a?"C":"F")},{width:500})},getNewCalTicket:function(){return"tk"+(new Date).getTime()},getPublicCalendarURL:function(d,b){var a=ws.encoding.encode64(Settings.GUID+":"+d);return Config.PubCalEmailURL+"?encalid\x3d"+a+(null!=b&&0<b.length?"\x26t\x3d"+b:"")},getSubscribeCalendarURL:function(d,b,a){d=ws.encoding.encode64(-1!=
d.indexOf(":")?d:Settings.GUID+":"+d);b=b?"\x26oc\x3d"+encodeURIComponent(ws.encoding.encode64(b)):"";var h=h?"\x26t\x3d"+encodeURIComponent(h):"";return Config.BaseDotNETPagesURL+"calendar/SubscribeCalendar.aspx?encalid\x3d"+d+b+h},getPublicCalendarData:function(d,b){var a=ws.encoding.encode64(Settings.GUID+":"+d),h=new Date;h.setDate(1);var f=ws.date.add(h,ws.date.dateParts.YEAR,1);return Config.BaseCalPagesUrl+"anon/export?comptype\x3dEVENT\x26encalid\x3d"+encodeURIComponent(a)+"\x26dtstart\x3d"+
ws.date.formatRFC2445(h)+"\x26dtend\x3d"+ws.date.formatRFC2445(f)+(null!=b&&0<b.length?"\x26t\x3d"+b:"")},getSharingTableRowNode:function(d,b){var a=f.create("tr",{onmouseover:f.hitch(b,"onMouseOverScreenNameRow"),onmouseout:f.hitch(b,"onMouseOutScreenNameRow")});a.nSn=d;a.appendChild(f.create("td",{className:"buddyIconTD",width:"0px"}));a.appendChild(f.create("td",{width:"155px",innerHTML:"\x3cspan style\x3d'padding-right:5px' title\x3d'"+d+"'\x3e"+ws.string.escapeXml(d)+"\x3c/span\x3e"}));a.appendChild(f.create("td",
{align:"left",width:"30px",innerHTML:"\x3cdiv style\x3d'display:none' class\x3d'wsHotClearButton'\x3e\x3csvg class\x3d'svgIcon'\x3e\x3cuse xlink:href\x3d'#iconClose'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e"}));a.appendChild(f.create("td",{style:"width:155px;"}));return a},selectedCalendarsExist:function(d){d=d.calendars;for(var b=0;b<d.length;b++)if(d[b].isActive)return!0;return!1},showNoCalendarsSelectedDialog:function(d){return ws&&ws.WebSuite&&(!ws.WebSuite.shownNoCalendarSelectedDialog||d)&&ws.WebSuite.theCalendarModel&&
!ws.WebSuite.theCalendarModel.isAnonymous?(ws.WebSuite.shownNoCalendarSelectedDialog=!0,ws.widget.Dialogs.ok(Config.Strings.NoSelectedCalendars),!0):!1},getIntlTimezone:function(d){for(var b=0;b<this.timeZoneList.length;b++)if(d==this.timeZoneList[b].id)return d;return(d=this.otherTimezones[d.toLowerCase()])?d:"UTC"},timeZoneList:[{id:"Pacific/Fiji",disp:"UTC -12:00 South Pacific / Fiji"},{id:"Pacific/Apia",disp:"UTC -11:00 South Pacific / Midway"},{id:"Pacific/Honolulu",disp:"UTC -10:00 South Pacific / Tahiti"},
{id:"America/Anchorage",disp:"UTC -09:00 North America / Anchorage"},{id:"America/Los_Angeles",disp:"UTC -08:00 North America / Pacific"},{id:"America/Denver",disp:"UTC -07:00 North America / Mountain"},{id:"America/Chicago",disp:"UTC -06:00 North America / Central"},{id:"America/Mexico_City",disp:"UTC -06:00 Central America / Mexico City"},{id:"America/New_York",disp:"UTC -05:00 North America / Eastern"},{id:"America/Bogota",disp:"UTC -05:00 South America / Bogota"},{id:"America/Caracas",disp:"UTC -04:30 South America / Caracas"},
{id:"America/Santiago",disp:"UTC -04:00 South America / Santiago"},{id:"America/Halifax",disp:"UTC -04:00 Atlantic Time Canada"},{id:"America/St_Johns",disp:"UTC -03:30 Newfoundland"},{id:"America/Buenos_Aires",disp:"UTC -03:00 South America / Buenos Aires"},{id:"America/Sao_Paulo",disp:"UTC -03:00 South America / Sao Paulo"},{id:"America/Noronha",disp:"UTC -02:00 South America / Noronha"},{id:"Atlantic/Cape_Verde",disp:"UTC -01:00 East Atlantic / Azores"},{id:"UTC",disp:"Universal Coordinated Time"},
{id:"Europe/London",disp:"UTC +00:00 West Europe/London"},{id:"Europe/Paris",disp:"UTC +01:00 Central Europe / Paris / Berlin / Prague"},{id:"Africa/Brazzaville",disp:"UTC +01:00 Central Africa / Brazzaville"},{id:"Europe/Athens",disp:"UTC +02:00 East Europe / Athens / Istanbul / Helsinki"},{id:"Africa/Johannesburg",disp:"UTC +02:00 South Africa / Johannesburg"},{id:"Asia/Riyadh",disp:"UTC +03:00 Middle East / Riyadh"},{id:"Europe/Moscow",disp:"UTC +03:00 Russian Fed. / Moscow"},{id:"Asia/Dubai",
disp:"UTC +04:00 Middle East / Dubai"},{id:"Asia/Karachi",disp:"UTC +05:00 West Asia / Karachi"},{id:"Asia/Calcutta",disp:"UTC +05:30 India / Calcutta"},{id:"Asia/Dhaka",disp:"UTC +06:00 Asia / Dhaka"},{id:"Asia/Novosibirsk",disp:"UTC +06:00 Russian Fed. / Kazakhstan"},{id:"Asia/Bangkok",disp:"UTC +07:00 South Asia / Bangkok"},{id:"Asia/Shanghai",disp:"UTC +08:00 China / Hong Kong / Taipei / Singapore / Kuala_Lumpur / Manila"},{id:"Australia/Perth",disp:"UTC +08:00 West Australia / Perth"},{id:"Asia/Tokyo",
disp:"UTC +09:00 Asia / Tokyo / Seoul"},{id:"Australia/Adelaide",disp:"UTC +09:30 Central Australia / Adelaide"},{id:"Australia/Sydney",disp:"UTC +10:00 East Australia / Sydney"},{id:"Australia/Brisbane",disp:"UTC +10:00 Australia Brisbane"},{id:"Pacific/Guadalcanal",disp:"UTC +11:00 South Pacific / Solomon Is."},{id:"Pacific/Auckland",disp:"UTC +12:00 South Pacific / Auckland"}],otherTimezones:{"etc/gmt":"UTC","etc/gmt+0":"UTC","etc/gmt0":"UTC","etc/gmt-0":"UTC","etc/utc":"UTC","etc/gmt+1":"Atlantic/Cape_Verde",
"etc/gmt+2":"America/Noronha","etc/gmt+3":"America/Sao_Paulo","etc/gmt+4":"America/Halifax","etc/gmt+5":"America/New_York","etc/gmt+6":"America/Chicago","etc/gmt+7":"America/Denver","etc/gmt+8":"America/Los_Angeles","etc/gmt+9":"America/Anchorage","etc/gmt+10":"Pacific/Honolulu","etc/gmt+11":"Pacific/Apia","etc/gmt+12":"Pacific/Fiji","etc/gmt-1":"Europe/Paris","etc/gmt-2":"Europe/Athens","etc/gmt-3":"Europe/Moscow","etc/gmt-4":"Asia/Dubai","etc/gmt-5":"Asia/Karachi","etc/gmt-6":"Asia/Dhaka","etc/gmt-7":"Asia/Bangkok",
"etc/gmt-8":"Asia/Shanghai","etc/gmt-9":"Asia/Tokyo","etc/gmt-10":"Australia/Sydney","etc/gmt-11":"Pacific/Guadalcanal","etc/gmt-12":"Pacific/Auckland"}})})},"ws/date":function(){define("ws/date",["dojo/date","ws/string"],function(f){ws.date={};ws.date.firstDayOfWeek=Config.FirstDayOfWeek;ws.date.RFC2445=Config.Strings.DateRFC2445;ws.date.RFC2445WithTime=Config.Strings.DateRFC2445WithTime;ws.date.months=[Config.Strings.January,Config.Strings.February,Config.Strings.March,Config.Strings.April,Config.Strings.May,
Config.Strings.June,Config.Strings.July,Config.Strings.August,Config.Strings.September,Config.Strings.October,Config.Strings.November,Config.Strings.December];ws.date.shortMonths=[Config.Strings.Jan,Config.Strings.Feb,Config.Strings.Mar,Config.Strings.Apr,Config.Strings.ShortMay,Config.Strings.Jun,Config.Strings.Jul,Config.Strings.Aug,Config.Strings.Sep,Config.Strings.Oct,Config.Strings.Nov,Config.Strings.Dec];ws.date.days=[Config.Strings.Sunday,Config.Strings.Monday,Config.Strings.Tuesday,Config.Strings.Wednesday,
Config.Strings.Thursday,Config.Strings.Friday,Config.Strings.Saturday];ws.date.shortDays=[Config.Strings.Sun,Config.Strings.Mon,Config.Strings.Tue,Config.Strings.Wed,Config.Strings.Thu,Config.Strings.Fri,Config.Strings.Sat];ws.date.monthNames=ws.date.months.concat(ws.date.shortMonths);ws.date.dayNames=ws.date.days.concat(ws.date.shortDays);ws.date.abbrevDays=[Config.Strings.AbbSunday,Config.Strings.AbbMonday,Config.Strings.AbbTuesday,Config.Strings.AbbWednesday,Config.Strings.AbbThursday,Config.Strings.AbbFriday,
Config.Strings.AbbSaturday];ws.date.amAbb=Config.Strings.Date_am;ws.date.pmAbb=Config.Strings.Date_pm;ws.date.kEmptyDate=null;ws.date.MONTH_LENGTH=[31,28,31,30,31,30,31,31,30,31,30,31];ws.date.LEAP_MONTH_LENGTH=[31,29,31,30,31,30,31,31,30,31,30,31];ws.date.dateParts={YEAR:0,MONTH:1,DAY:2,HOUR:3,MINUTE:4,SECOND:5,MILLISECOND:6,QUARTER:7,WEEK:8,WEEKDAY:9};ws.date.add=function(f,d,b){switch(d){case ws.date.dateParts.YEAR:f=new Date(f.getFullYear()+b,f.getMonth(),f.getDate(),f.getHours(),f.getMinutes(),
f.getSeconds(),f.getMilliseconds());break;case ws.date.dateParts.MONTH:0>f.getMonth()+b?(b=Math.abs(f.getMonth()+b),d=12-b%12,b=Math.floor(b/12)+1,f=new Date(f.getFullYear()-b,d,f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds(),f.getMilliseconds())):(d=f.getMonth()+b,b=Math.floor(d/12),d%=12,f=new Date(f.getFullYear()+b,d,f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds(),f.getMilliseconds()));break;case ws.date.dateParts.HOUR:f=new Date(f.getFullYear(),f.getMonth(),f.getDate(),f.getHours()+
b,f.getMinutes(),f.getSeconds(),f.getMilliseconds());break;case ws.date.dateParts.MINUTE:f=new Date(f.getTime()+6E4*b);break;case ws.date.dateParts.SECOND:f=new Date(f.getFullYear(),f.getMonth(),f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds()+b,f.getMilliseconds());break;case ws.date.dateParts.MILLISECOND:f=new Date(f.getFullYear(),f.getMonth(),f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds(),f.getMilliseconds()+b);break;default:f=new Date(f.getFullYear(),f.getMonth(),f.getDate()+b,f.getHours(),
f.getMinutes(),f.getSeconds(),f.getMilliseconds())}return f};ws.date.getFirstDayOfWeekFromDate=function(f){var d=f.getDay()-ws.date.firstDayOfWeek;0>d&&(d+=7);return ws.date.add(f,ws.date.dateParts.DAY,-d)};ws.date.getLastDayOfWeek=function(f){var d=f.getDay();return ws.date.add(f,ws.date.dateParts.DAY,(ws.date.firstDayOfWeek-d+6)%7)};ws.date.getFirstDayInMonthView=function(f){f=new Date(f.getFullYear(),f.getMonth(),1);return ws.date.getFirstDayOfWeekFromDate(f)};ws.date.getLastDayInMonthView=function(f){var d=
null,d=ws.date.getFirstDayInMonthView(f);return d=ws.date.add(d,ws.date.dateParts.DAY,35).getMonth()!=f.getMonth()?ws.date.add(d,ws.date.dateParts.DAY,34):ws.date.add(d,ws.date.dateParts.DAY,41)};ws.date.numberOfWeeksSpanMonth=function(f){var d=null,d=ws.date.getFirstDayInMonthView(f);return d=ws.date.add(d,ws.date.dateParts.DAY,35).getMonth()!=f.getMonth()?5:6};ws.date.getADateInPreviousMonth=function(f){return ws.date.add(f,ws.date.dateParts.DAY,-f.getDate())};ws.date.getPreviousMonth=function(f){var d=
f,d=ws.date.getADateInPreviousMonth(f);f.getDate()<d.getDate()&&d.setDate(f.getDate());return d};ws.date.getADateInNextMonth=function(k){var d=f.getDaysInMonth(k);k=new Date(k.getFullYear(),k.getMonth(),1);return ws.date.add(k,ws.date.dateParts.DAY,d)};ws.date.getNextMonth=function(f){var d=ws.date.getADateInNextMonth(f),b=ws.date.GetDaysInMonth(d.getFullYear(),d.getMonth());f.getDate()>b?d.setDate(b):d.setDate(f.getDate());return d};ws.date.daysSpanned=function(f,d){var b=6E4*f.getTimezoneOffset(),
a=6E4*d.getTimezoneOffset(),b=f.getTime()-b,a=d.getTime()-a;return Math.floor(a/864E5)-Math.floor(b/864E5)};ws.date.shortestDate=function(k,d){var b=new Date,a=b.getDate(),h=b.getMonth(),b=b.getYear(),l=new Date(k),e=l.getDate(),p=l.getMonth(),g=l.getYear(),a=f.difference(new Date(g,p,e),new Date(b,h,a),"day"),h=d?"":Config.Strings.Today+" ";return 0==a?h+ws.date.formatDateTime(l,Config.Strings.DateToday):1!=a||d?7>a?ws.date.formatDateTime(l,Config.Strings.DateWeek):b==g?ws.date.formatDateTime(l,
Config.Strings.DateThisYear):ws.date.formatDateTime(l,Config.Strings.DateYear):Config.Strings.Yesterday+" "+ws.date.formatDateTime(l,Config.Strings.DateToday)};ws.date.timeAgo=function(f){var d=new Date;f=new Date(f);var b=(d-f)/1E3;1>b&&(b=1);var a=Math.round(b/60),h=Math.floor(b/86400);return 60>b?ws.string.substituteParams(Config.Strings.TimeAgo_NSeconds,Math.round(b)):1==a?Config.Strings.TimeAgo_OneMinute:3600>b?ws.string.substituteParams(Config.Strings.TimeAgo_NMinutes,a):5400>b?Config.Strings.TimeAgo_OneHour:
0==h&&d.getDate()==f.getDate()?ws.string.substituteParams(Config.Strings.TimeAgo_NHours,Math.round(b/3600)):1>=h?Config.Strings.TimeAgo_OneDay:7>=h?ws.string.substituteParams(Config.Strings.TimeAgo_NDays,h):d.getYear()==f.getYear()?ws.date.formatDateTime(f,Config.Strings.TimeAgo_ThisYearDate):ws.date.formatDateTime(f,Config.Strings.TimeAgo_PreviousYearDate)};ws.date.readableDuration=function(f){if(60>f)return Math.round(f)+Config.Strings.SecondsAbbrev;var d=[];86400<=f&&(d.push(Math.round(f/86400)+
Config.Strings.DaysAbbrev),f%=86400);3600<=f&&(d.push(Math.round(f/3600)+Config.Strings.HoursAbbrev),f%=3600);60<=f&&(d.push(Math.round(f/60)+Config.Strings.MinutesAbbrev),f%=60);return d.join(" ")};ws.date.formatISO8601=function(f){var d=f.getMonth()+1,b=f.getDate(),a=f.getHours(),h=f.getMinutes(),l=f.getSeconds();return""+f.getFullYear()+(0>d||9<d?d:"0"+d)+(0>b||9<b?b:"0"+b)+"T"+(0>a||9<a?a:"0"+a)+(0>h||9<h?h:"0"+h)+(0>l||9<l?l:"0"+l)};ws.date.formatRFC2445=function(f){var d=f.getMonth()+1,b=f.getDate();
return""+f.getFullYear()+(0>d||9<d?d:"0"+d)+(0>b||9<b?b:"0"+b)};ws.date.formatRFC2445WithTime=function(f){var d=f.getMonth()+1,b=f.getDate(),a=f.getHours(),h=f.getMinutes(),l=f.getSeconds();return""+f.getFullYear()+(0>d||9<d?d:"0"+d)+(0>b||9<b?b:"0"+b)+(0>a||9<a?a:"0"+a)+(0>h||9<h?h:"0"+h)+(0>l||9<l?l:"0"+l)};ws.date.formatDateTime=function(f,d){var b=f.getFullYear()+"",a=f.getMonth()+1,h=f.getDate(),l=f.getDay(),e=f.getHours(),k=f.getMinutes(),g=f.getSeconds(),n=new Date,t={};t.y=b;t.yyyy=b;t.yy=
b.substring(2,4);t.Y=f.getFullYear()==n.getFullYear()?"":b;t.M=a;t.MM=0>a||9<a?a:"0"+a;t.MMM=ws.date.monthNames[a-1];t.NNN=ws.date.monthNames[a+11];t.d=h;t.dd=0>h||9<h?h:"0"+h;t.E=ws.date.dayNames[l+7];t.EE=ws.date.dayNames[l];t.H=e;t.HH=0>e||9<e?e:"0"+e;t.h=0==e?12:12<e?e-12:e;t.hh=0>t.h||9<t.h?t.h:"0"+t.h;t.K=11<e?e-12:e;t.k=e+1;t.KK=0>t.K||9<t.K?t.K:"0"+t.K;t.kk=0>t.k||9<t.k?t.k:"0"+t.k;t.a=11<e?ws.date.pmAbb:ws.date.amAbb;t.m=k;t.mm=0>k||9<k?k:"0"+k;t.s=g;t.ss=0>g||9<g?g:"0"+g;b="";a=d.split("");
h=0;for(e=l=null;h<d.length;){l=a[h];for(e="";a[h]==l&&h<a.length;)e+=a[h++];b=null!=t[e]?b+t[e]:b+e}return b};ws.date.formatTime=function(f,d,b){var a=f.getHours(),h=f.getMinutes(),l=f.getSeconds();f={};f.H=a;f.HH=0>a||9<a?a:"0"+a;f.h=0==a?12:12<a?a-12:a;f.hh=0>f.h||9<f.h?f.h:"0"+f.h;f.K=11<a?a-12:a;f.k=a+1;f.KK=0>f.K||9<f.K?f.K:"0"+f.K;f.kk=0>f.k||9<f.k?f.k:"0"+f.k;f.a=11<a?ws.date.pmAbb:ws.date.amAbb;f.m=h;f.mm=0>h||9<h?h:"0"+h;f.s=l;f.ss=0>l||9<l?l:"0"+l;b&&0==h&&(d=b);b="";for(var h=d.split(""),
a=0,e=l=null;a<d.length;){l=h[a];for(e="";h[a]==l&&a<h.length;)e+=h[a++];b=null!=f[e]?b+f[e]:b+e}return b};ws.date.formatMinutes=function(f,d,b){f%=1440;var a=Math.floor(f/60),h=f-60*a;f={};f.H=a;f.HH=0>a||9<a?a:"0"+a;f.h=0==a?12:12<a?a-12:a;f.hh=0>f.h||9<f.h?f.h:"0"+f.h;f.K=11<a?a-12:a;f.k=a+1;f.KK=0>f.K||9<f.K?f.K:"0"+f.K;f.kk=0>f.k||9<f.k?f.k:"0"+f.k;f.a=11<a?ws.date.pmAbb:ws.date.amAbb;f.m=h;f.mm=0>h||9<h?h:"0"+h;b&&0==h&&(d=b);b="";for(var a=d.split(""),h=0,l=null,e=null;h<d.length;){l=a[h];
for(e="";a[h]==l&&h<a.length;)e+=a[h++];b=null!=f[e]?b+f[e]:b+e}return b};ws.date.IsInteger=function(f){for(var d=0;d<f.length;d++)if(-1=="1234567890".indexOf(f.charAt(d)))return!1;return!0};ws.date.GetInt=function(f,d,b,a){for(;a>=b;a--){var h=f.substring(d,d+a);if(h.length<b)break;if(ws.date.IsInteger(h))return h}return null};ws.date.GetDateFromFormat=function(f,d){f+="";d+="";for(var b=0,a=0,h="",l="",e,k,g=new Date,n=g.getYear(),t=g.getMonth()+1,q=1,m=g.getHours(),w=g.getMinutes(),g=g.getSeconds(),
v="";a<d.length;){h=d.charAt(a);for(l="";d.charAt(a)==h&&a<d.length;)l+=d.charAt(a++);if("yyyy"==l||"yy"==l||"y"==l){"yyyy"==l&&(k=e=4);"yy"==l&&(k=e=2);"y"==l&&(e=2,k=4);n=ws.date.GetInt(f,b,e,k);if(null==n)return null;b+=n.length;2==n.length&&(n=70<n?1900+(n-0):2E3+(n-0))}else if("MM"==l||"M"==l){t=ws.date.GetInt(f,b,l.length,2);if(null==t||1>t||12<t)return null;b+=t.length}else if("dd"==l||"d"==l){q=ws.date.GetInt(f,b,l.length,2);if(null==q||1>q||31<q)return null;b+=q.length}else if("hh"==l||"h"==
l){m=ws.date.GetInt(f,b,l.length,2);if(null==m||1>m||12<m)return null;b+=m.length}else if("HH"==l||"H"==l){m=ws.date.GetInt(f,b,l.length,2);if(null==m||0>m||23<m)return null;b+=m.length}else if("KK"==l||"K"==l){m=ws.date.GetInt(f,b,l.length,2);if(null==m||0>m||11<m)return null;b+=m.length}else if("kk"==l||"k"==l){m=ws.date.GetInt(f,b,l.length,2);if(null==m||1>m||24<m)return null;b+=m.length;m--}else if("mm"==l||"m"==l){w=ws.date.GetInt(f,b,l.length,2);if(null==w||0>w||59<w)return null;b+=w.length}else if("ss"==
l||"s"==l){g=ws.date.GetInt(f,b,l.length,2);if(null==g||0>g||59<g)return null;b+=g.length}else if("a"==l){h=0;v=Config.Strings.Date_am.length;h=f.substring(b,b+v).toLowerCase();if(h==Config.Strings.Date_am)h=v,v="AM";else if(h==Config.Strings.Date_pm)h=Config.Strings.Date_pm.length,v="PM";else return null;b+=h}else{if(f.substring(b,b+l.length)!=l)return null;b+=l.length}}if(b!=f.length&&"Z"!=f.charAt(b))return null;if(2==t)if(0==n%4&&0!=n%100||0==n%400){if(29<q)return null}else if(28<q)return null;
if((4==t||6==t||9==t||11==t)&&30<q)return null;12>m&&"PM"==v?m=m-0+12:11<m&&"AM"==v&&(m-=12);return(new Date(n,t-1,q,m,w,g)).getTime()};ws.date.ParseDate=function(f){var d=2==arguments.length?arguments[1]:!1;generalFormats="y-M-d;MMM d, y;MMM d,y;y-MMM-d;d-MMM-y;MMM d".split(";");monthFirst="M/d/y M-d-y M.d.y MMM-d M/d M-d".split(" ");dateFirst="d/M/y d-M-y d.M.y d-MMM d/M d-M".split(" ");for(var d=["generalFormats",d?"dateFirst":"monthFirst",d?"monthFirst":"dateFirst"],b=null,a=0;a<d.length;a++)for(var h=
window[d[a]],l=0;l<h.length;l++)if(b=ws.date.GetDateFromFormat(f,h[l]),null!=b)return new Date(b);return null};ws.date.ParseDateFromFormat=function(f,d){var b=null;try{var a=ws.date.GetDateFromFormat(f,d);null!=a&&(b=new Date(a))}catch(h){b=null}return b};ws.date.ParseTimeFromFormat=function(f,d){var b=new Date,a=b.getYear()+1900,h=b.getMonth()+1,b=b.getDate();return ws.date.ParseDateFromFormat(h+"/"+b+"/"+a+" "+f,"M/d/yyyy "+d)};ws.date.ParseHourMinTextField=function(f,d,b){var a=0,h=0,l=!1,e=[];
d=ws.date.ParseTimeFromFormat(f,d);null==d?l=!0:(a=d.getHours(),h=d.getMinutes());l&&(d=ws.date.ParseTimeFromFormat(f,b),null!=d&&(a=d.getHours(),h=0));if(null==d)return null;e.hr=a;e.min=h;return e};ws.date.GetPreviousWeekDate=function(f){return ws.date.add(f,ws.date.dateParts.DAY,-7)};ws.date.GetNextWeekDate=function(f){return ws.date.add(f,ws.date.dateParts.DAY,7)};ws.date.GetFirstDayInWeek=function(f,d){var b=f.getDay()-d;0>b&&(b+=7);return ws.date.add(f,ws.date.dateParts.DAY,-b)};ws.date.GetLastDayInWeek=
function(f,d){var b=f.getDay();return ws.date.add(f,ws.date.dateParts.DAY,(d-b+6)%7)};ws.date.IsValidDate=function(f){return f!=ws.date.kEmptyDate&&f.getTime};ws.date.TimeRangeFormatter=function(f,d,b,a,h){if(b||!ws.date.IsValidDate(f))return"";b=ws.date.formatDateTime(f,0<f.getMinutes()?a:h);ws.date.IsValidDate(d)&&f.getTime()!=d.getTime()?(f=ws.date.formatDateTime(d,0<d.getMinutes()?a:h),f=b+"-"+f):f=b;return f};ws.date.FormatTimeRange=function(f,d,b,a,h){(f=ws.date.TimeRangeFormatter(f,d,b,a,h))&&
(f=f.toLowerCase());return f};ws.date.IsLeapYear=function(f){return 0==f%4&&(0!=f%100||0==f%400)};ws.date.GetDaysInMonth=function(f,d){return ws.date.IsLeapYear(f)?ws.date.LEAP_MONTH_LENGTH[d]:ws.date.MONTH_LENGTH[d]};ws.date.incrementMonth=function(f){var d=f.getDate();f=new Date(f.getFullYear(),f.getMonth()+1,1);var b=ws.date.GetDaysInMonth(f.getFullYear(),f.getMonth());d<=b?f.setDate(d):f.setDate(b);return f};ws.date.isSameDay=function(f,d){return f.getFullYear()==d.getFullYear()&&f.getMonth()==
d.getMonth()&&f.getDate()==d.getDate()}})},"ws/calendar/TodoApp":function(){define("ws/calendar/TodoApp","dojo/_base/declare dojo/text!ws/calendar/TodoApp.html dojo/text!ws/calendar/TodoApp.css dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/lang ws/Spinner ws/calendar/CalendarViewModel ws/date".split(" "),function(f,k,d,b,a,h,l,e,p){return f([b,a,h],{templateString:k,css:{templateString:d},_earlyTemplatedStartup:!0,sortBy:"DueTime",sortDir:"Decending",dateFormat:Config.Strings.Cal_TodoPanel_DueDateFormat,
numHoursShowCompleted:24,showCompleted:!1,taskList:[],quickAddMode:!1,_inited:!1,_started:!1,startup:function(){this._started||(this.model=new p({modelType:"todo"}),this.connect(this.model,"requestUpdate","loadData"),this.model.isAnonymous=this.isAnonymous,this.newTaskBox._onKeyUp=l.hitch(this,"addTaskKeyUp"),this._started=!0)},onMouseOut:function(){this.quickAddMode||dojo.removeClass(this.appTitleAddTask,"appTitleAddTaskSel")},onMouseOver:function(){dojo.addClass(this.appTitleAddTask,"appTitleAddTaskSel")},
restoreApp:function(a){dojo.stopEvent(a);ws.WebSuite.Navigation.restoreApp()},init:function(){this._inited||(this.spinner||(this.spinner=new e("AimSignIn",this.todoSpinner)),this.spinner.spin(),this.contentNode.hide(),this.todoFail.hide(),this.todoLoading.show(),this.sessionStart=(new Date).getTime(),Settings.ToDo_LastClearedCompleted_Timestamp&&(this.lastClearedTime=(new Date(parseFloat(Settings.ToDo_LastClearedCompleted_Timestamp))).getTime()),this.loadData(),this._inited=!0)},loadData:function(){this.model.loadTodos().then(l.hitch(this,
function(a){this.modelUpdated()}),l.hitch(this,function(a){this.contentNode.hide();this.todoLoading.hide();this.todoFail.show()}))},restart:function(){this._inited=!1;this.init()},onResized:function(){this.inherited(arguments);var a=dojo._getMarginSize(this.domNode).w;150<a&&dojo.query(".newItemBox .wsInput",this.domNode).style({width:a-30+"px"})},createAppMenu:function(){var a=[{caption:Config.Strings.TodoAppNew,onClick:l.hitch(this,function(){this._quickAdd();ws.reporting.reportDLAction("Mail-LeftNav-ToDo-QuickAddNewToDo")})},
{separator:!0},{caption:Config.Strings.TodoAppShowAll,isCheckable:!0,checked:!1,onClick:l.hitch(this,function(){this.showCompleted=!this.showCompleted;this.modelUpdated();ws.reporting.reportDLAction("Mail-LeftNav-ToDo-QuickShowCompletedTasks")})}];this.appTitleMenu=ws.widget.createMenu(a)},updateAppMenu:function(){this.appTitleMenu.getChildren()[2].setChecked(this.showCompleted)},appMenu:function(a){dojo.stopEvent(a);this.appTitleMenu||this.createAppMenu();this.updateAppMenu();this.appTitleMenu.open(this.appTitleLink)},
modelUpdated:function(){var a=this.model.getTodos(),b=null,d=!1,d=!1,e=null;this.taskList=[];for(var f=0;f<a.length;f++)b=a[f],d=!1,d="COMPLETED"==b.status,e=b.completedOn?this.model.parseTardisDate(b.completedOn):null,(d=d?this.showCompleted?this.lastClearedTime?e&&e>=this.sessionStart&&e.getTime()>this.lastClearedTime:!0:e>=this.sessionStart:!0)&&this.taskList.push(b);this.orderTaskList();this.buildDom();this.todoLoading.hide();this.contentNode.show();dojo.style(dojo.body(),"position","absolute");
setTimeout(function(){dojo.style(dojo.body(),"position","")},100)},isToday:function(a){var b=new Date;return b.getYear()==a.getYear()&&b.getMonth()==a.getMonth()&&b.getDate()==a.getDate()},buildDom:function(){this.todoNode.innerHTML="";this.newItem=null;if(0==this.taskList.length)this.todoNode.style.display="none",this.appTodoEmpty.domNode.style.display="block";else{this.todoNode.style.display="block";this.appTodoEmpty.domNode.style.display="none";for(var a=0;a<this.taskList.length;a++){var b=this.taskList[a],
d="COMPLETED"==b.status,e=b.dueOn?this.model.parseTardisDate(b.dueOn):null,f=dojo.create("div",{className:"taskItem",_row:""+a},this.todoNode);-1!=dojo.indexOf(this.model.newComponents,b.uid)&&(this.newItem=f);d&&dojo.addClass(f,"taskComp");dojo.create("div",{className:"taskCk "+(d?"ckOn":"ckOff"),innerHTML:"\x3csvg\x3e\x3cuse xlink:href\x3d'#"+(d?"iconCheckboxOn":"iconCheckboxOff")+"'\x3e\x3c/use\x3e\x3c/svg\x3e"},f);dojo.create("div",{className:"taskName",innerHTML:ws.string.summary(b.summary,47)},
f);b.dueOn&&(b=dojo.create("div",{className:"taskDateDiv"},f),e=this.isToday(e)?Config.Strings.Panel_EventPanel_Today:ws.date.formatDateTime(e,this.dateFormat),dojo.create("span",{className:"taskDue",innerHTML:e},b));dojo.create("div",{className:"taskDelete",innerHTML:"\x3csvg\x3e\x3cuse xlink:href\x3d'#iconClose'\x3e\x3c/use\x3e\x3c/svg\x3e"},f)}this.newItem&&setTimeout(l.hitch(this,function(){this.newItem.scrollIntoView();dojo.body().scrollTop=dojo.body().scrollLeft=0}),100)}},orderTaskList:function(){this.taskList.sort(function(a,
b){if(a.completedOn&&!b.completedOn)return 1;if(!a.completedOn&&b.completedOn||a.dueOn&&!b.dueOn)return-1;if(b.dueOn&&!a.dueOn)return 1;if(b.dueOn&&a.dueOn){if(a.dueOn<b.dueOn)return-1;if(b.dueOn<a.dueOn)return 1}return 0})},onClearCompleted:function(){ws.widget.Dialogs.ok(Config.Strings.ClearCompletedDialog,l.hitch(this,function(a){a&&(this.lastClearedTime=(new Date).getTime(),ws.settings.save({ToDo_LastClearedCompleted_Timestamp:this.lastClearedTime.toString()}),this.modelUpdated())}),!0)},onItemClick:function(a){dojo.stopEvent(a);
var b=ws.widget.getEventTarget(a,"taskDelete","todoNode"),d=ws.widget.getEventTarget(a,"taskCk","todoNode");if(a=ws.widget.getEventTarget(a,"taskItem","todoNode")){var e=+dojo.attr(a,"_row"),g=this.taskList[e];b?this.model.deleteTodo(g).then(l.hitch(this,function(){this.modelUpdated();dojo.publish("WSFeedbackStart",[Config.Strings.ToDoDeleted,!0])}),function(a){dojo.publish("WSFeedbackStart",[Config.Strings.ToDoDeleteError,!0])}):d?this.markItem(a,g,"COMPLETED"!=g.status):require(["ws/calendar/TodoEditDialog"],
l.hitch(this,function(a){this.editDetailDlg||(this.editDetailDlg=new a({model:this.model,destroyOnClose:!1}),this.editDetailDlg.startup());this.editDetailDlg.addNote();this.editDetailDlg.addReminder();this.editDetailDlg.onSavedCB=l.hitch(this,"modelUpdated");this.editDetailDlg.openPopUp(g)}))}},markItem:function(a,b,d){d&&(b.completedOn=ws.date.formatISO8601(new Date));b.status=d?"COMPLETED":b.completedOn?"NEEDS_ACTION":"IN_PROGRESS";var e=dojo.query(".taskCk",a)[0];d?(e.innerHTML="\x3csvg\x3e\x3cuse xlink:href\x3d'#iconCheckboxOn'\x3e\x3c/use\x3e\x3c/svg\x3e",
dojo.addClass(a,"taskComp"),dojo.removeClass(e,"ckOff"),dojo.addClass(e,"ckOn")):(e.innerHTML="\x3csvg\x3e\x3cuse xlink:href\x3d'#iconCheckboxOff'\x3e\x3c/use\x3e\x3c/svg\x3e",dojo.removeClass(a,"taskComp"),dojo.removeClass(e,"ckOn"),dojo.addClass(e,"ckOff"));this.model.updateTodo(b).then(l.hitch(this,function(){this.orderTaskList();this.buildDom();dojo.publish("WSFeedbackStart",[d?Config.Strings.ToDoMarkedCompleted:Config.Strings.ToDoMarkedIncomplete,!0])}),function(a){dojo.publish("WSFeedbackStart",
[Config.Strings.ToDoUpdateError,!0])})},quickAdd:function(a){this._quickAdd(a);ws.reporting.reportDLAction("Mail-LeftNav-ToDo-QuickPlusNewToDo")},_quickAdd:function(a){a&&dojo.stopEvent(a);this.quickAddMode?(dojo.query(".newItemBox",this.domNode).style("display","none"),dojo.removeClass(this.appTitleAddTask,"appTitleAddTaskSel")):(dojo.query(".newItemBox",this.domNode).style("display","block"),dojo.addClass(this.appTitleAddTask,"appTitleAddTaskSel"),this.newTaskBox.textbox.focus());this.layoutWidget.layout();
this.quickAddMode=!this.quickAddMode},createTask:function(a){this._createTask(ws.string.sanitize(this.newTaskBox.getValue()));this.newTaskBox.setValue("")},_createTask:function(a){if(a&&0!=a.length&&(a=dojo.trim(a),""!=a)){var b=this.model.getDefaultTaskArgs();b.summary=a;this.model.createTodo(b).then(l.hitch(this,function(){this.modelUpdated();dojo.publish("WSFeedbackStart",[Config.Strings.ToDoCreated,!0])}),function(a){dojo.publish("WSFeedbackStart",[Config.Strings.ToDoCreateError,!0])})}},addTaskKeyUp:function(a){a.keyCode==
dojo.keys.ENTER?(this.createTask(),this.newTaskBox.textbox.blur()):a.keyCode==dojo.keys.ESCAPE&&(this.newTaskBox.setValue(""),this.newTaskBox.textbox.blur())}})})},"dijit/layout/BorderContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/touch ../_WidgetBase ../_Widget ../_TemplatedMixin ./LayoutContainer ./utils".split(" "),function(f,k,d,b,a,h,l,e,p,g,n,t,q,m,w,v){var u=
d("dijit.layout._Splitter",[q,m],{live:!0,templateString:'\x3cdiv class\x3d"dijitSplitter" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex\x3d"0" role\x3d"separator"\x3e\x3cdiv class\x3d"dijitSplitterThumb"\x3e\x3c/div\x3e\x3c/div\x3e',constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?1:-1;this._cookieName=
this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);b.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var a=k(this._cookieName);a&&(this.child.domNode.style[this.horizontal?"height":"width"]=a)}},_computeMaxSize:function(){var a=this.horizontal?"h":"w",b=h.getMarginBox(this.child.domNode)[a],d=f.filter(this.container.getChildren(),function(a){return"center"==a.region})[0],a=h.getContentBox(d.domNode)[a]-10;return Math.min(this.child.maxSize,
b+a)},_startDrag:function(d){this.cover||(this.cover=a.place("\x3cdiv class\x3ddijitSplitterCover\x3e\x3c/div\x3e",this.child.domNode,"after"));b.add(this.cover,"dijitSplitterCoverActive");this.fake&&a.destroy(this.fake);(this._resize=this.live)||((this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),b.add(this.domNode,"dijitSplitterShadow"),a.place(this.fake,this.domNode,"after"));b.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");this.fake&&b.remove(this.fake,
"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var e=this._factor,f=this.horizontal,m=f?"pageY":"pageX",q=d[m],k=this.domNode.style,f=f?"h":"w",t=l.getComputedStyle(this.child.domNode),w=h.getMarginBox(this.child.domNode,t)[f],u=this._computeMaxSize(),v=Math.max(this.child.minSize,h.getPadBorderExtents(this.child.domNode,t)[f]+10),f=this.region,z="top"==f||"bottom"==f?"top":"left",B=parseInt(k[z],10),Z=this._resize,Q=p.hitch(this.container,"_layoutChildren",this.child.id),f=
this.ownerDocument;this._handlers=this._handlers.concat([g(f,n.move,this._drag=function(a,b){var d=a[m]-q,g=e*d+w,f=Math.max(Math.min(g,u),v);(Z||b)&&Q(f);k[z]=d+B+e*(f-g)+"px"}),g(f,"dragstart",function(a){a.stopPropagation();a.preventDefault()}),g(this.ownerDocumentBody,"selectstart",function(a){a.stopPropagation();a.preventDefault()}),g(f,n.release,p.hitch(this,"_stopDrag"))]);d.stopPropagation();d.preventDefault()},_onMouse:function(a){a="mouseover"==a.type||"mouseenter"==a.type;b.toggle(this.domNode,
"dijitSplitterHover",a);b.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",a)},_stopDrag:function(d){try{this.cover&&b.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&a.destroy(this.fake),b.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),this._drag(d),this._drag(d,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&k(this._cookieName,this.child.domNode.style[this.horizontal?"height":
"width"],{expires:365})},_cleanupHandlers:function(){for(var a;a=this._handlers.pop();)a.remove()},_onKeyDown:function(a){this._resize=!0;var b=this.horizontal,d=1;switch(a.keyCode){case b?e.UP_ARROW:e.LEFT_ARROW:d*=-1;case b?e.DOWN_ARROW:e.RIGHT_ARROW:break;default:return}b=h.getMarginSize(this.child.domNode)[b?"h":"w"]+this._factor*d;this.container._layoutChildren(this.child.id,Math.max(Math.min(b,this._computeMaxSize()),this.child.minSize));a.stopPropagation();a.preventDefault()},destroy:function(){this._cleanupHandlers();
delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),z=d("dijit.layout._Gutter",[q,m],{templateString:'\x3cdiv class\x3d"dijitGutter" role\x3d"presentation"\x3e\x3c/div\x3e',postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments);b.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}});d=d("dijit.layout.BorderContainer",w,{gutters:!0,liveSplitters:!0,
persist:!1,baseClass:"dijitBorderContainer",_splitterClass:u,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},_setupChild:function(b){this.inherited(arguments);var d=b.region,e=b.isLeftToRight();"leading"==d&&(d=e?"left":"right");"trailing"==d&&(d=e?"right":"left");d&&"center"!=d&&(b.splitter||this.gutters)&&!b._splitterWidget&&(e=b.splitter?this._splitterClass:z,p.isString(e)&&(e=p.getObject(e)),e=new e({id:b.id+"_splitter",container:this,child:b,
region:d,live:this.liveSplitters}),e.isSplitter=!0,b._splitterWidget=e,d="bottom"==d||d==(this.isLeftToRight()?"right":"left"),a.place(e.domNode,b.domNode,d?"before":"after"),e.startup())},layout:function(){this._layoutChildren()},removeChild:function(a){var b=a._splitterWidget;b&&(b.destroy(),delete a._splitterWidget);this.inherited(arguments)},getChildren:function(){return f.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(a){return f.filter(this.getChildren(),
function(b){return b.region==a})[0]._splitterWidget},resize:function(a,b){if(!this.cs||!this.pe){var d=this.domNode;this.cs=l.getComputedStyle(d);this.pe=h.getPadExtents(d,this.cs);this.pe.r=l.toPixelValue(d,this.cs.paddingRight);this.pe.b=l.toPixelValue(d,this.cs.paddingBottom);l.set(d,"padding","0px")}this.inherited(arguments)},_layoutChildren:function(a,b){if(this._borderBox&&this._borderBox.h){var d=[];f.forEach(this._getOrderedChildren(),function(a){d.push(a);a._splitterWidget&&d.push(a._splitterWidget)});
v.layoutChildren(this.domNode,{l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},d,a,b)}},destroyRecursive:function(){f.forEach(this.getChildren(),function(a){var b=a._splitterWidget;b&&b.destroy();delete a._splitterWidget});this.inherited(arguments)}});d.ChildWidgetProperties={splitter:!1,minSize:0,maxSize:Infinity};p.mixin(d.ChildWidgetProperties,w.ChildWidgetProperties);p.extend(t,d.ChildWidgetProperties);d._Splitter=u;d._Gutter=z;return d})},"dijit/layout/LayoutContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-style dojo/_base/lang ../_WidgetBase ./_LayoutWidget ./utils".split(" "),
function(f,k,d,b,a,h,l,e){k=k("dijit.layout.LayoutContainer",l,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){this._started||(f.forEach(this.getChildren(),this._setupChild,this),this.inherited(arguments))},_setupChild:function(a){this.inherited(arguments);a.region&&d.add(a.domNode,this.baseClass+"Pane")},_getOrderedChildren:function(){var a=f.map(this.getChildren(),function(a,b){return{pane:a,weight:["center"==a.region?Infinity:0,a.layoutPriority,("sidebar"==this.design?1:
-1)*(/top|bottom/.test(a.region)?1:-1),b]}},this);a.sort(function(a,b){for(var d=a.weight,e=b.weight,g=0;g<d.length;g++)if(d[g]!=e[g])return d[g]-e[g];return 0});return f.map(a,function(a){return a.pane})},layout:function(){e.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},addChild:function(a,b){this.inherited(arguments);this._started&&this.layout()},removeChild:function(a){this.inherited(arguments);this._started&&this.layout();d.remove(a.domNode,this.baseClass+"Pane");b.set(a.domNode,
{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});b.set(a.domNode,/top|bottom/.test(a.region)?"width":"height","auto")}});k.ChildWidgetProperties={region:"",layoutAlign:"",layoutPriority:0};a.extend(h,k.ChildWidgetProperties);return k})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang ../_Widget ../_Container ../_Contained ../Viewport dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),function(f,k,d,b,a,h,l,e,p){return h("dijit.layout._LayoutWidget",
[k,d,b],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments);l.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var b=this.getParent&&this.getParent();b&&b.isLayoutContainer||(this.resize(),this.own(a.on("resize",f.hitch(this,"resize"))))}},resize:function(a,b){var d=this.domNode;a&&e.setMarginBox(d,a);var g=b||{};f.mixin(g,a||{});"h"in g&&"w"in g||(g=f.mixin(e.getMarginBox(d),
g));var h=p.getComputedStyle(d),l=e.getMarginExtents(d,h),k=e.getBorderExtents(d,h),g=this._borderBox={w:g.w-(l.w+k.w),h:g.h-(l.h+k.h)},l=e.getPadExtents(d,h);this._contentBox={l:p.toPixelValue(d,h.paddingLeft),t:p.toPixelValue(d,h.paddingTop),w:g.w-l.w,h:g.h-l.h};this.layout()},layout:function(){},_setupChild:function(a){l.add(a.domNode,this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:""))},addChild:function(a,b){this.inherited(arguments);this._started&&this._setupChild(a)},removeChild:function(a){l.remove(a.domNode,
this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:""));this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(f,k,d,b,a){function h(a){return a.substring(0,1).toUpperCase()+a.substring(1)}function l(b,e){var g=b.resize?b.resize(e):d.setMarginBox(b.domNode,e);g?a.mixin(b,g):(a.mixin(b,d.getMarginBox(b.domNode)),a.mixin(b,e))}var e={marginBox2contentBox:function(a,
e){var g=b.getComputedStyle(a),f=d.getMarginExtents(a,g),h=d.getPadBorderExtents(a,g);return{l:b.toPixelValue(a,g.paddingLeft),t:b.toPixelValue(a,g.paddingTop),w:e.w-(f.w+h.w),h:e.h-(f.h+h.h)}},layoutChildren:function(b,d,e,t,q){d=a.mixin({},d);k.add(b,"dijitLayoutContainer");e=f.filter(e,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(f.filter(e,function(a){return"center"==a.region||"client"==a.layoutAlign}));f.forEach(e,function(a){var b=a.domNode,e=a.region||a.layoutAlign;
if(!e)throw Error("No region setting for "+a.id);var g=b.style;g.left=d.l+"px";g.top=d.t+"px";g.position="absolute";k.add(b,"dijitAlign"+h(e));b={};t&&t==a.id&&(b["top"==a.region||"bottom"==a.region?"h":"w"]=q);"leading"==e&&(e=a.isLeftToRight()?"left":"right");"trailing"==e&&(e=a.isLeftToRight()?"right":"left");"top"==e||"bottom"==e?(b.w=d.w,l(a,b),d.h-=a.h,"top"==e?d.t+=a.h:g.top=d.t+d.h+"px"):"left"==e||"right"==e?(b.h=d.h,l(a,b),d.w-=a.w,"left"==e?d.l+=a.w:g.left=d.l+d.w+"px"):"client"!=e&&"center"!=
e||l(a,d)})}};a.setObject("dijit.layout.utils",e);return e})},"dijit/layout/StackContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/ready dojo/topic dojo/when ../registry ../_WidgetBase ./_LayoutWidget".split(" "),function(f,k,d,b,a,h,l,e,p,g,n,t,q,m){d=d("dijit.layout.StackContainer",m,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);b.add(this.domNode,
"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,"keydown",l.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var a=this.getChildren();f.forEach(a,this._setupChild,this);this.persist?this.selectedChildWidget=t.byId(k(this.id+"_selectedChild")):f.some(a,function(a){a.selected&&(this.selectedChildWidget=a);return a.selected},this);var b=this.selectedChildWidget;!b&&a[0]&&(b=this.selectedChildWidget=a[0],b.selected=!0);g.publish(this.id+
"-startup",{children:a,selected:b,textDir:this.textDir});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}this.inherited(arguments)},_setupChild:function(b){var d=b.domNode,e=a.place("\x3cdiv role\x3d'tabpanel' class\x3d'"+this.baseClass+"ChildWrapper dijitHidden'\x3e",b.domNode,"replace"),g=b["aria-label"]||b.title||b.label;g&&e.setAttribute("aria-label",g);a.place(d,e);b._wrapper=e;this.inherited(arguments);
"none"==d.style.display&&(d.style.display="block");b.domNode.removeAttribute("title")},addChild:function(a,b){this.inherited(arguments);this._started&&(g.publish(this.id+"-addChild",a,b),this.selectedChildWidget||this.selectChild(a))},removeChild:function(b){var d=f.indexOf(this.getChildren(),b);this.inherited(arguments);a.destroy(b._wrapper);delete b._wrapper;this._started&&g.publish(this.id+"-removeChild",b);if(!this._descendantsBeingDestroyed&&this.selectedChildWidget===b&&(this.selectedChildWidget=
void 0,this._started)){var e=this.getChildren();e.length&&this.selectChild(e[Math.max(d-1,0)])}},selectChild:function(a,b){var d;a=t.byId(a);this.selectedChildWidget!=a&&(d=this._transition(a,this.selectedChildWidget,b),this._set("selectedChildWidget",a),g.publish(this.id+"-selectChild",a),this.persist&&k(this.id+"_selectedChild",this.selectedChildWidget.id));return n(d||!0)},_transition:function(a,b){b&&this._hideChild(b);var d=this._showChild(a);a.resize&&(this.doLayout?a.resize(this._containerContentBox||
this._contentBox):a.resize());return d},_adjacent:function(a){var b=this.getChildren(),d=f.indexOf(b,this.selectedChildWidget),d=d+(a?1:b.length-1);return b[d%b.length]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyDown:function(a){g.publish(this.id+"-containerKeyDown",{e:a,page:this})},layout:function(){var a=this.selectedChildWidget;a&&a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):
a.resize())},_showChild:function(a){var d=this.getChildren();a.isFirstChild=a==d[0];a.isLastChild=a==d[d.length-1];a._set("selected",!0);a._wrapper&&b.replace(a._wrapper,"dijitVisible","dijitHidden");return a._onShow&&a._onShow()||!0},_hideChild:function(a){a._set("selected",!1);a._wrapper&&b.replace(a._wrapper,"dijitHidden","dijitVisible");a.onHide&&a.onHide()},closeChild:function(a){a.onClose&&a.onClose(this,a)&&(this.removeChild(a),a.destroyRecursive())},destroyDescendants:function(a){this._descendantsBeingDestroyed=
!0;this.selectedChildWidget=void 0;f.forEach(this.getChildren(),function(b){a||this.removeChild(b);b.destroyRecursive(a)},this);this._descendantsBeingDestroyed=!1}});d.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",showTitle:!0};l.extend(q,d.ChildWidgetProperties);return d})},"ws/widget/DropDownButton":function(){define("ws/widget/DropDownButton","dojo/_base/declare dojo dijit ws/widget/Button ws/widget/DropDownBase ws/html".split(" "),function(f,k,d,b,a){return f([b,
a],{showArrow:!0,dyn:!1,startup:function(){this.inherited(arguments);k.addClass(this.domNode,"DropDownButton");""!=this.size&&k.addClass(this.domNode,"DropDownButton"+this.size)},enableArrow:function(a){this.showArrow=a;this.arrowNode.style.display=a?"":"none";this.showArrowBorder&&k.toggleClass(this.arrowNode,"btnSplitArrow",a);k.toggleClass(this.domNode,"DropDownButton",a)},resize:function(){if(this.dyn){var a=k.marginBox(this.containerNode).w;this.domNode.style.width=a+"px"}},isArrowEnabled:function(){return this.showArrow},
updateMenu:function(){this.inherited(arguments);this.menu.padding=[0,-1]}})})},"ws/widget/DropDownBase":function(){define("ws/widget/DropDownBase",["dojo/_base/declare","dojo","dijit","ws/html"],function(f,k,d){return f(null,{menuId:"",menu:null,menuDefinition:null,menuClassName:"",anchorPosition:null,onClick:function(b){b.stopPropagation?b.stopPropagation():b.cancelBubble=!0;this.toggleMenu()},onKeyPress:function(b){b.keyCode==k.keys.ENTER&&setTimeout(k.hitch(this,"toggleMenu"),0)},toggleMenu:function(){ws.lang.ensureLayersLoaded(k.hitch(this,
function(){(!this.menu||k.isIE&&"true"==this.menuicons)&&this.getMenu();this.menu.isShowing()?(this.setHighlight&&this.setHighlight(!1),this.menu.close()):(this.updateMenu(this.menu),this.menu.open(this.anchorPosition||this.domNode),this.setHighlight&&this.setHighlight(!0),this.tip&&ws.widget.hideInstatip(this.domNode))}))},getMenu:function(){this.menuId?this.menu=d.byId(this.menuId):this.createMenu()},createMenu:function(){this.menu=ws.widget.createMenu(this.menuDefinition);""!=this.menuClassName&&
k.addClass(this.menu.domNode,this.menuClassName);this.setHighlight&&this.menu.connect(this.menu,"onClose",k.hitch(this,function(){this.setHighlight(!1)}))},setMenuDefinition:function(b){this.menu&&(this.menu.isShowing()&&this.menu.close(),this.menu.destroyRecursive(),this.menu=null);this.menuDefinition=b},updateMenu:function(b){}})})},"ws/widget/WSSplitContainer":function(){define("ws/widget/WSSplitContainer","dojo/_base/declare dojo dojo/query dojo/_base/event dojo/_base/array dijit/layout/SplitContainer ws/widget/popup ws/html".split(" "),
function(f,k,d,b,a,h){return f([h],{startup:function(){this.inherited(arguments);k.marginBox(this.virtualSizer,this.isHorizontal?{w:this.sizerWidth,h:this.paneHeight}:{w:this.paneWidth,h:this.sizerWidth})},_addSizer:function(){this.inherited(arguments);d(".thumb",this.domNode).innerHTML("\x3csvg\x3e\x3cuse xlink:href\x3d'#iconDown'\x3e\x3c/use\x3e\x3c/svg\x3e")},addSizerFunc:function(a){this.sizerFunc=a},addClickFunc:function(a){this.clickFunc=a},_checkSizes:function(){var b=0,d=0,f=this.getChildren();
a.forEach(f,function(a){d+=a.sizeActual;b+=a.sizeMin});if(b<=d){var g=0,h=this._forceGrow;a.forEach(f,function(a){a.sizeActual<a.sizeMin&&(h||!h&&a.sizeActual>a.sizeMin/2)&&(g+=a.sizeMin-a.sizeActual,a.sizeActual=a.sizeMin)});0<g&&(f=this.isDraggingLeft?f.reverse():f,a.forEach(f,function(a){g=this._growPane(g,a)},this))}else a.forEach(f,function(a){a.sizeActual=Math.round(a.sizeMin/b*d)})},legaliseSplitPoint:function(a){a+=this.sizingSplitter.position;this.isDraggingLeft=!!(0<a);if(!this.activeSizing){var b=
this.paneBefore.position+this.paneBefore.sizeMin;this.paneBefore.collapsable?a<b&&(a=a<b-this.paneBefore.sizeMin/2?b-this.paneBefore.sizeMin:b):a<b&&(a=b);b=this.paneAfter.position+(this.paneAfter.sizeActual-(this.sizerWidth+this.paneAfter.sizeMin));this.paneAfter.collapsable?a>b&&(a=a>b+this.paneAfter.sizeMin/2?b+this.paneAfter.sizeMin:b):a>b&&(a=b)}this.sizerFunc&&(a=this.sizerFunc(this,a));a-=this.sizingSplitter.position;this._checkSizes();return a},isClick:function(){var a=this.lastTime-this.startTime;
return 4>Math.abs(this.startPoint-this.lastPoint)&&1E3>a},endSizing:function(a){if(this.isSizing){this.cover&&(this.cover.style.zIndex=-1);this.activeSizing||this._hideSizingLine();a=this.legaliseSplitPoint(this.lastPoint-this.startPoint);this._updateSize(a);this.isSizing=!1;for(this.persist&&this._saveState(this);a=this._ownconnects.pop();)a.remove();k.publish("SplitContainer/EndSizing");this.lastTime=+new Date;this.isClick()&&this.clickFunc&&this.clickFunc()}},beginSizing:function(a,b){ws.html.clearSelection();
this.inherited(arguments);this.startTime=+new Date;k.publish("SplitContainer/BeginSizing")},changeSizing:function(a,d,f){this.isSizing&&(a&&d&&f&&(a.pageX=d,a.pageY=f),this.lastPoint=this.isHorizontal?a.pageX:a.pageY,d=this.legaliseSplitPoint(this.lastPoint-this.startPoint),this.activeSizing?this._updateSize(d):this._moveSizingLine(d),b.stop(a))},_onSizerMouseDown:function(a){ws.widget.popup.closeAllPopups();var b=a.target;k.hasClass(b,"thumb")&&(b=b.parentNode);if(b.id){for(var d=0;d<this.sizers.length&&
this.sizers[d].id!=b.id;d++);d<this.sizers.length&&this.beginSizing(a,d)}}})})},"dijit/layout/SplitContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/_base/event dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ../registry ../_WidgetBase ./_LayoutWidget".split(" "),function(f,k,d,b,a,h,l,e,p,g,n,t,q,m,w,v){d=d("dijit.layout.SplitContainer",v,{constructor:function(){g.deprecated("dijit.layout.SplitContainer is deprecated",
"use BorderContainer with splitter instead",2)},activeSizing:!1,sizerWidth:7,orientation:"horizontal",persist:!0,baseClass:"dijitSplitContainer",postMixInProperties:function(){this.inherited("postMixInProperties",arguments);this.isHorizontal="horizontal"==this.orientation},postCreate:function(){this.inherited(arguments);this.sizers=[];q("mozilla")&&(this.domNode.style.overflow="-moz-scrollbars-none");if("object"==typeof this.sizerWidth)try{this.sizerWidth=parseInt(this.sizerWidth.toString())}catch(z){this.sizerWidth=
7}var a=this.ownerDocument.createElement("div");this.virtualSizer=a;a.style.position="relative";a.style.zIndex=10;a.className=this.isHorizontal?"dijitSplitContainerVirtualSizerH":"dijitSplitContainerVirtualSizerV";this.domNode.appendChild(a);b.setSelectable(a,!1)},destroy:function(){delete this.virtualSizer;if(this._ownconnects)for(var a;a=this._ownconnects.pop();)a.remove();this.inherited(arguments)},startup:function(){this._started||(f.forEach(this.getChildren(),function(a,b,d){this._setupChild(a);
b<d.length-1&&this._addSizer()},this),this.persist&&this._restoreState(),this.inherited(arguments))},_setupChild:function(b){this.inherited(arguments);b.domNode.style.position="absolute";a.add(b.domNode,"dijitSplitPane")},_onSizerMouseDown:function(a){if(a.target.id){for(var b=0;b<this.sizers.length&&this.sizers[b].id!=a.target.id;b++);b<this.sizers.length&&this.beginSizing(a,b)}},_addSizer:function(a){a=void 0===a?this.sizers.length:a;var d=this.ownerDocument.createElement("div");d.id=m.getUniqueId("dijit_layout_SplitterContainer_Splitter");
this.sizers.splice(a,0,d);this.domNode.appendChild(d);d.className=this.isHorizontal?"dijitSplitContainerSizerH":"dijitSplitContainerSizerV";a=this.ownerDocument.createElement("div");a.className="thumb";d.appendChild(a);this.connect(d,"onmousedown","_onSizerMouseDown");b.setSelectable(d,!1)},removeChild:function(a){if(this.sizers.length){var b=f.indexOf(this.getChildren(),a);-1!=b&&(b==this.sizers.length&&b--,h.destroy(this.sizers[b]),this.sizers.splice(b,1))}this.inherited(arguments);this._started&&
this.layout()},addChild:function(a,b){if("undefined"==typeof b||"last"==b)b=this.getChildren().length;this.inherited(arguments,[a,b]);this._started&&(1<this.getChildren().length&&this._addSizer(b),this.layout())},layout:function(){this.paneWidth=this._contentBox.w;this.paneHeight=this._contentBox.h;var a=this.getChildren();if(a.length){var b=this.isHorizontal?this.paneWidth:this.paneHeight;1<a.length&&(b-=this.sizerWidth*(a.length-1));var d=0;f.forEach(a,function(a){d+=a.sizeShare});var e=b/d,g=0;
f.forEach(a.slice(0,a.length-1),function(a){var b=Math.round(e*a.sizeShare);a.sizeActual=b;g+=b});a[a.length-1].sizeActual=b-g;this._checkSizes();var h=0,l=a[0].sizeActual;this._movePanel(a[0],h,l);a[0].position=h;h+=l;this.sizers&&f.some(a.slice(1),function(a,b){if(!this.sizers[b])return!0;this._moveSlider(this.sizers[b],h,this.sizerWidth);this.sizers[b].position=h;h+=this.sizerWidth;l=a.sizeActual;this._movePanel(a,h,l);a.position=h;h+=l},this)}},_movePanel:function(a,b,d){this.isHorizontal?(a.domNode.style.left=
b+"px",a.domNode.style.top=0,b={w:d,h:this.paneHeight}):(a.domNode.style.left=0,a.domNode.style.top=b+"px",b={w:this.paneWidth,h:d});a.resize?a.resize(b):l.setMarginBox(a.domNode,b)},_moveSlider:function(a,b,d){this.isHorizontal?(a.style.left=b+"px",a.style.top=0,l.setMarginBox(a,{w:d,h:this.paneHeight})):(a.style.left=0,a.style.top=b+"px",l.setMarginBox(a,{w:this.paneWidth,h:d}))},_growPane:function(a,b){0<a&&b.sizeActual>b.sizeMin&&(b.sizeActual-b.sizeMin>a?(b.sizeActual-=a,a=0):(a-=b.sizeActual-
b.sizeMin,b.sizeActual=b.sizeMin));return a},_checkSizes:function(){var a=0,b=0,d=this.getChildren();f.forEach(d,function(d){b+=d.sizeActual;a+=d.sizeMin});if(a<=b){var e=0;f.forEach(d,function(a){a.sizeActual<a.sizeMin&&(e+=a.sizeMin-a.sizeActual,a.sizeActual=a.sizeMin)});0<e&&(d=this.isDraggingLeft?d.reverse():d,f.forEach(d,function(a){e=this._growPane(e,a)},this))}else f.forEach(d,function(d){d.sizeActual=Math.round(d.sizeMin/a*b)})},beginSizing:function(a,b){var d=this.getChildren();this.paneBefore=
d[b];this.paneAfter=d[b+1];this.paneBefore.sizeBeforeDrag=this.paneBefore.sizeActual;this.paneAfter.sizeBeforeDrag=this.paneAfter.sizeActual;this.paneAfter.positionBeforeDrag=this.paneAfter.position;this.isSizing=!0;this.sizingSplitter=this.sizers[b];this.sizingSplitter.positionBeforeDrag=e.get(this.sizingSplitter,this.isHorizontal?"left":"top");this.cover?this.cover.style.zIndex=5:this.cover=h.create("div",{style:{position:"absolute",zIndex:5,top:0,left:0,width:"100%",height:"100%"}},this.domNode);
this.sizingSplitter.style.zIndex=6;this.startPoint=this.lastPoint=this.isHorizontal?a.pageX:a.pageY;this.maxDelta=this.paneAfter.sizeActual-this.paneAfter.sizeMin;this.minDelta=-1*(this.paneBefore.sizeActual-this.paneBefore.sizeMin);this.activeSizing||this._showSizingLine();this._ownconnects=[t(this.ownerDocument.documentElement,"mousemove",n.hitch(this,"changeSizing")),t(this.ownerDocument.documentElement,"mouseup",n.hitch(this,"endSizing"))];p.stop(a)},changeSizing:function(a){if(this.isSizing){this.lastPoint=
this.isHorizontal?a.pageX:a.pageY;var b=Math.max(Math.min(this.lastPoint-this.startPoint,this.maxDelta),this.minDelta);this.activeSizing?this._updateSize(b):this._moveSizingLine(b);p.stop(a)}},endSizing:function(){if(this.isSizing){this.cover&&(this.cover.style.zIndex=-1);this.activeSizing||this._hideSizingLine();this._updateSize(Math.max(Math.min(this.lastPoint-this.startPoint,this.maxDelta),this.minDelta));this.isSizing=!1;this.persist&&this._saveState(this);for(var a;a=this._ownconnects.pop();)a.remove()}},
_updateSize:function(a){this.paneBefore.sizeActual=this.paneBefore.sizeBeforeDrag+a;this.paneAfter.position=this.paneAfter.positionBeforeDrag+a;this.paneAfter.sizeActual=this.paneAfter.sizeBeforeDrag-a;f.forEach(this.getChildren(),function(a){a.sizeShare=a.sizeActual});this._started&&this.layout()},_showSizingLine:function(){this._moveSizingLine(0);l.setMarginBox(this.virtualSizer,this.isHorizontal?{w:this.sizerWidth,h:this.paneHeight}:{w:this.paneWidth,h:this.sizerWidth});this.virtualSizer.style.display=
"block"},_hideSizingLine:function(){this.virtualSizer.style.display="none"},_moveSizingLine:function(a){e.set(this.virtualSizer,this.isHorizontal?"left":"top",a+this.sizingSplitter.positionBeforeDrag+"px")},_getCookieName:function(a){return this.id+"_"+a},_restoreState:function(){f.forEach(this.getChildren(),function(a,b){var d=this._getCookieName(b);if(d=k(d))d=parseInt(d),"number"==typeof d&&(a.sizeShare=d)},this)},_saveState:function(){this.persist&&f.forEach(this.getChildren(),function(a,b){k(this._getCookieName(b),
a.sizeShare,{expires:365})},this)}});d.ChildWidgetProperties={sizeMin:10,sizeShare:10};n.extend(w,d.ChildWidgetProperties);return d})},"ws/widget/Checkbox":function(){define("ws/widget/Checkbox","dojo/_base/declare dojo/text!ws/widget/Checkbox.css dojo dijit dijit/_Widget dijit/_TemplatedMixin".split(" "),function(f,k,d,b,a,h){return f([a,h],{templateString:'\x3cdiv class\x3d"chkBoxCntr" data-dojo-attach-event\x3d"onclick:toggle"\x3e\x3csvg class\x3d"chkBox" data-dojo-attach-point\x3d"chkNode"\x3e\x3cuse xlink:href\x3d"#iconCheckboxOff"\x3e\x3c/use\x3e\x3c/svg\x3e\x3cspan class\x3d"chkBoxLabel" data-dojo-attach-point\x3d"labelNode"\x3e\x3c/span\x3e\x3c/div\x3e',
css:{templateString:k},checked:!1,label:"",disabled:!1,startup:function(){this.checked&&this.setChecked(!0);this.setLabel(this.label);this.setDisabled(this.disabled)},setChecked:function(a){var b=d.query("use",this.domNode);0<b.length&&(this.checked=a=a?!0:!1,b[0].setAttributeNS("http://www.w3.org/1999/xlink","href",a?"#iconCheckboxOn":"#iconCheckboxOff"),d.toggleClass(this.domNode,"chkBoxChecked",a))},setDisabled:function(a){this.disabled=a;d.toggleClass(this.domNode,"chkBoxDisabled",this.disabled)},
setLabel:function(a){this.label=a;this.labelNode.innerHTML=this.label},toggle:function(a){this.disabled||(this.setChecked(!this.checked),this.onClick(a))},onClick:function(a){}})})},"ws/dom":function(){define("ws/dom",["dojo","dojo/_base/lang"],function(f,k){k.setObject("ws.dom",{forEachNode:function(d,b,a){if(d){d=d.childNodes;for(var f=0;f<d.length;f++){var l=d[f],e=!1;null!=b&&(e=b(l));e||(ws.dom.forEachNode(l,b,a),null!=a&&(f+=a(l)))}}},findAncestorByClass:function(d,b){for(;d;){if(f.hasClass(d,
b))return d;d=d.parentNode}return null},checkParentNodeForHidden:function(d){if(d){var b=!1,a=!1;do{if("none"===d.style.display||f.hasClass(d,"dijitHidden")){b=!0;break}d.parentNode&&d.parentNode.style?d=d.parentNode:a=!0}while(!a);return b}}})})},"ws/sound":function(){define("ws/sound",["dojo","dojo/_base/lang"],function(f,k){k.setObject("ws.sound",{play:function(d){this._audioElement?this._audioElement.src=d:this._audioElement=f.create("audio",{src:d,autoplay:!0},f.body())},_audioElement:null})})},
"ws/widget/Pane":function(){define("ws/widget/Pane",["dojo/_base/declare","dijit/_Widget"],function(f,k){return f(k,{})})},"ws/widget/util":function(){define("ws/widget/util","dojo dijit dojo/window dijit/registry dijit/_Widget dijit/WidgetSet ws/widget/WSMenu ws/widget/WSMenuItem ws/widget/WSMenuSeparator ws/reporting".split(" "),function(f,k,d,b,a,h,l,e,p){f.extend(a,{show:function(){if(f.hasClass(this.domNode,"dijitStackContainer-child")){var a=this.domNode.parentNode;a&&f.removeClass(a,"dijitHidden")}this.domNode.style.display=
""},hide:function(){if(f.hasClass(this.domNode,"dijitStackContainer-child")){var a=this.domNode.parentNode;a&&f.addClass(a,"dijitHidden")}this.domNode.style.display="none"},isShowing:function(){if(this.domNode&&f.hasClass(this.domNode,"dijitStackContainer-child")){var a=this.domNode.parentNode;return a&&f.hasClass(a,"dijitStackContainerChildWrapper")?!f.hasClass(a,"dijitHidden"):!f.hasClass(this.domNode,"dijitHidden")}return this.domNode&&"none"!=this.domNode.style.display},setShowing:function(a){a?
this.show():this.hide()},setEnabled:function(a){a?this.enable():this.disable()},resize:function(a){!a||this.coords&&this.coords.w==a.w&&this.coords.h==a.h||(this.coords=a,f.marginBox(this.domNode,a));this.onResized()},onResized:function(){var a=this.stackWidget||this.layoutWidget;a&&a.resize&&a.resize()},onShow:function(){var a=f.contentBox(this.domNode);if(a.w!=this.width||a.h!=this.height)this.onResized();this.width=a.w;this.height=a.h},onHide:function(){},spacer:Config.SpacerImageURL,baseimages:Config.BaseImagesURL,
images:Config.BaseResourcesURL+"images/",affinityimages:Config.BaseAffinityResourcesURL+"images/",toolbarPosition:"left"});f.extend(h,{first:function(){for(var a in this._hash)return this._hash[a];return null}});f.mixin(ws.widget,{insertCssText:function(a,b){if(a&&0!=a.length){var d=a.match(/\$\{([^\}]+)\}/g);if(d)for(var e=0;e<d.length;e++){var g=d[e],g=g.substring(2,g.length-1);(g=k._Widget.prototype[g])&&(a=a.replace(d[e],g))}var h,d=f.doc.getElementsByTagName("style");25>d.length?(h=f.doc.createElement("style"),
d=f.doc.getElementsByTagName(f.isSafari||b?"head":"body")[0],d||(d=f.doc.createElement("head"),f.place(d,f.doc.documentElement,"first")),d.appendChild(h)):h=d[d.length-1];h.styleSheet?(d=function(){try{h.styleSheet.cssText+=a}catch(v){}},h.styleSheet.disabled?setTimeout(d,10):d()):(d=f.doc.createTextNode(a),h.appendChild(d));return h}},createMenu:function(a){var b=new l;f.forEach(a,function(a){a&&(a=new (a.dojoType?a.dojoType:a.separator?p:e)(a),b.addChild(a))});f.body().appendChild(b.domNode);b.startup();
return b},fixFFCursor:function(a){f.isMoz&&(a.style.overflow="hidden",ws.lang.setTimeout(this,function(){a.style.overflow="auto"},0))},pointer:function(a){var b=f.query(".wsPointerContainer",a.node)[0];b||(b=document.createElement("div"),a.node.appendChild(b));b.className="wsPointerContainer wsPointerContainer-"+a.side;b.style.display="block";b.style.zIndex=2;var d=f.query(".wsPointer",a.node)[0];d||(b.innerHTML="\x3csvg class\x3d'wsPointer wsPointer-"+a.side+"'\x3e\x3cuse xlink:href\x3d'#iconPointer'\x3e\x3c/use\x3e\x3c/svg\x3e",
d=f.query(".wsPointer",a.node)[0]);d.pointerSide=a.side;var e=f.position(a.node),g=f.position(a.target);"right"==a.side||"left"==a.side?(e=g.y-e.y,e+=a.target.offsetHeight/2,e-=ws.widget.pointerHeight,e+=a.nudge?a.nudge:0,d.style.top=Math.round(e)+"px",d.style.left="0",b.style.width=this.pointerWidth+"px",b.style.height=f._getMarginSize(a.node).h+"px",f.addClass(b,"wsPointerContainer-0Top"),f.removeClass(b,".wsPointerContainer-0Left")):(e=g.x-e.x,e+=a.target.offsetWidth/2,e-=ws.widget.pointerWidth,
e+=a.nudge?a.nudge:0,d.style.left=Math.round(e)+"px",d.style.top="0",b.style.height=this.pointerHeight+"px",b.style.width=f._getMarginSize(a.node).w+"px",f.addClass(b,"wsPointerContainer-0Left"),f.removeClass(b,".wsPointerContainer-0Top"));return b},setPointerLoc:function(a,b){if(null!=b){var d=f.query(".wsPointer",a)[0];d||(d=document.createElement("div"),a.appendChild(d));d.pointerSide=b.side;d.className="wsPointer wsPointer-"+b.side;d.style.display="block";d.style.zIndex=2;"right"==b.side||"left"==
b.side?(d.style.top=b.offset+"px",d.style.left=""):(d.style.left=b.offset+"px",d.style.top="")}},getPointerLoc:function(a){var b=f.query(".wsPointer",a)[0];if(!b)return null;a=b.pointerSide;b="right"==a||"left"==a?parseInt(b.style.top):parseInt(b.style.left);return{offset:isNaN(b)?0:b,side:a}},hidePointer:function(a){if(a=f.query(".wsPointer",a)[0])a.style.display="none"},pointerWidth:15,pointerHeight:12,getEventTarget:function(a,b,d){a=a.target||a.srcElement;3==a.nodeType&&(a=a.parentNode);if(f.hasClass(a,
b))return a;for(;!("BODY"==a.nodeName||d&&f.hasClass(a,d));){if(f.hasClass(a,b))return a;a=a.parentNode}return null},_showInstatip:function(a,b,e,h,l){f.byId("instatip").innerHTML=b;e||(e=f.marginBox(window.wsBaseTip));b=e.w;tipHeight=e.h;h=h||f.position(a);if(0!=h.w||0!=h.y){e=h.x+h.w/2-b/2;var g=h.y+h.h+4,m=b/2-6,q=-7,k="instatipArrow";"right"==l?(e=h.x+h.w+12,g=h.y+(h.h-tipHeight)/2,m=-8,q=tipHeight/2-6,k+=" instatipArrowR"):"left"==l?(e=h.x-b-12,g=h.y+(h.h-tipHeight)/2,m=b+7,q=tipHeight/2-6,k+=
" instatipArrowL"):"top"==l&&(q=tipHeight-4,g=h.y-tipHeight-4-11,k+=" instatipArrowT");if(0>e)e=3,m=h.x+h.w/2-8;else{l=e+b;var n=d.getBox().w;l>n&&(e-=l-n+3,m=b-h.w/2-4-(n-(h.x+h.w)))}f.style(window.wsBaseTip,{top:g+"px",left:e+"px"});f.query(".instatipArrow").removeClass().addClass(k).style({left:m+"px",top:q+"px"});window.wsBaseTip.style.visibility="visible";this.currentInstatipNode=a}},hideInstatip:function(a){this.instatipAboutToShowNode&&a==this.instatipAboutToShowNode&&this.clearInstatipTimer();
window.wsBaseTip.style.visibility="hidden"},showInstatip:function(a,b){if(a){b||(b={});b.noCache&&(f.removeAttr(a,"data-tip-width"),this.currentInstatipNode=null);if(this.instatipShowTimer){if(a==this.instatipAboutToShowNode)return;this.clearInstatipTimer()}b.label||(b.label=f.attr(a,"data-title")||f.attr(a,"title"),b.label&&f.attr(a,"data-title",b.label));if(b.label){f.removeAttr(a,"title");b.side||(b.side="bottom");this.instatipAboutToShowNode=a;var d=300;if(f.body().className.indexOf(!0)){var e=
f.query(".label",a);e&&e[0]&&"none"!=f.style(e[0],"display")&&(d=1E3)}this.instatipShowTimer=setTimeout(f.hitch(this,function(){this._showInstatip(a,b.label,b.tipDimensions,b.nodePosition,b.side);this.clearInstatipTimer()}),d)}}},isInstatipShowing:function(){return"visible"==window.wsBaseTip.style.visibility},clearInstatipTimer:function(){this.instatipShowTimer&&(clearTimeout(this.instatipShowTimer),this.instatipShowTimer=null);this.instatipAboutToShowNode=null},instatipAboutToShowNode:null,currentInstatipNode:null});
f.mixin(k,{setWaiRole:function(a,b){},setWaiState:function(a,b,d){},removeWaiState:function(a,b){}});f.connect(b,"add",function(a){for(;null!=a;){if(a.css){var b=a.css.templatePath,d=a.css.templateString;b&&!k._Widget._cssFiles[b.toString()]&&(d=d||f._getText(b),k._Widget._cssFiles[b.toString()]=!0);d&&!k._Widget._cssStrings[d]&&(ws.widget.insertCssText(d,null,b),k._Widget._cssStrings[d]=!0)}a=a.constructor.superclass}});a._cssFiles={};a._cssStrings={}})},"ws/calendar/CNavigation":function(){define("ws/calendar/CNavigation",
"dojo/_base/declare dojo/text!ws/calendar/CNavigation.html dojo/text!ws/calendar/CNavigation.css dojo/promise/all dojo/_base/lang dijit/registry dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ws/dnd/NavigationDropTarget ws/widget/CalendarColorPickerMenuItem ws/calendar/EditCalendar ws/calendar/TodoApp ws/browser ws/dom ws/html ws/io ws/lang ws/string ws/widget/Dialogs ws/widget/WSMenu ws/widget/WSToolbar ws/widget/WSDatePicker".split(" "),function(f,k,d,b,a,h,l,e,p,g,n,t){return f([l,
e,p],{templateString:k,css:{templateString:d},_earlyTemplatedStartup:!0,searchScope:"alltext",searchFieldColor:"#000000",APP_MAIL:0,APP_CALENDAR:1,APP_CONTACTS:2,APP_TODAY:3,APP_FEEDS:4,APP_SETTINGS:5,APP_ADDCALENDAR:6,APP_EDITCALENDAR:7,DRAGTYPES_MAIL:[],DRAGTYPES_CALENDAR:[0,1,2],DRAGTYPES_CONTACTS:[],startup:function(){this.selectedApp=null;this.calendarNodes={};this.dropTargets={};this.disableHover=!1;this.showCalendarIndexCB=null;dojo.connect(this.navDatePicker,"selectDateConnect",this,"setDate");
dojo.subscribe("dragStart",this,function(){this.disableHover=!0});dojo.subscribe("dragEnd",this,function(){this.disableHover=!1});dojo.subscribe("ws_view-selectChild",this,"hiliteCurrentApp");this.defineMenus();ws.WebSuite.theCalendarModel.isAnonymous?dojo.byId("todoApp").style.display="none":h.byId("todoApp").init();dojo.connect(this.searchField,"onfocus",this,"onFocusSearchField");dojo.connect(this.searchField,"onblur",this,"onBlurSearchField");this.clearSearchField()},setDate:function(a){ws.CalSolo.getCalendarView().setDate(a)},
onResized:function(){this.inherited(arguments);var a=dojo._getMarginSize(this.domNode).w,b=this.mainPane.domNode.scrollHeight!=this.mainPane.domNode.clientHeight?20:0;dojo.query(".text span",this.calendarContainer).forEach(function(d){d.style.width=Math.max(a-b-53,0)+"px"})},selectApp:function(a){if(a!=this.selectedApp){this.selectedApp!=this.APP_CALENDAR&&this.selectedApp!=this.APP_ADDCALENDAR&&this.selectedApp!=this.APP_EDITCALENDAR||a==this.APP_ADDCALENDAR||a==this.APP_EDITCALENDAR||this.showCalendar(!1);
switch(a){case this.APP_CALENDAR:this.showCalendar(!0);break;case this.APP_EDITCALENDAR:this.showEditCalendar();break;case this.APP_ADDCALENDAR:this.showAddCalendar()}this.onResized()}},hiliteCurrentApp:function(){switch(h.byId("ws_view").selectedChildWidget.id){case "soloCalendarView":this.selectedApp=this.APP_CALENDAR;break;case "addCalendar":case "editCalendar":case "subscribeCalendar":this.selectedApp=this.APP_CALENDAR;break;default:this.selectedApp=this.APP_CALENDAR}this.currentHiliteNode&&dojo.removeClass(this.currentHiliteNode,
"navItemCurrent")},searchActive:function(){},setCalendarModel:function(a){this.calendarModel=a;a.isAnonymous||dojo.connect(a,"modelUpdated",this,"updateCalendarList");dojo.connect(a,"searchUpdated",dojo.hitch(this,"modelUpdated","calendar"))},updateCalendarList:function(){var a=this.calendarModel.getCalendarList();if(a){for(var b={},d=0;d<a.length;d++){var e=a[d],f=e.id,h=ws.calendar.calutil.convertToAolColor(e.color),l=e.isRemote?this.subCalendarsNode:this.myCalendarsNode,k=e.name,n=ws.string.escapeXml(k),
p=this.calendarNodes[f];p?(k=p.childNodes[0],dojo.removeClass(k),dojo.addClass(k,"wsCalCB  wsCalCB_"+h.substring(1)+(e.isActive?" checked":" unchecked")),k=p.childNodes[1].childNodes[0],k.innerHTML!=n&&(k.innerHTML=n)):(p=document.createElement("div"),p.className="navItem calendarNavItem",dojo.connect(p,"onmouseover",dojo.hitch(this,"onMouseOverCalItem",p)),dojo.connect(p,"onmouseout",dojo.hitch(this,"onMouseOutCalItem",p)),l.appendChild(p),h="wsCalCB_"+h.substring(1)+(e.isActive?" checked":" unchecked"),
p.innerHTML='\x3cdiv class\x3d"wsCalCB '+h+'"\x3e\x3c/div\x3e\x3cdiv class\x3d"text"\x3e\x3cspan\x3e'+n+"\x3c/span\x3e\x3c/div\x3e",n=dojo.query(".wsCalCB",p)[0],dojo.connect(n,"onclick",dojo.hitch(this,this.toggleCalendarItem,f)),h=dojo.query(".text",p)[0],dojo.connect(h,"onclick",dojo.hitch(this,this.toggleCalendarItem,f,n)),k={type:"Calendar",calId:f,displayName:k,showShare:Config.EnableCalendarSharingTab&&!e.isRemote,showPublish:Config.EnableCalendarPublishTab&&!e.isRemote,showAddEvent:!e.isReadOnly,
showDelete:!e.isReadOnly},n=document.createElement("span"),n.innerHTML="\x3csvg\x3e\x3cuse xlink:href\x3d'#iconDown'\x3e\x3c/use\x3e\x3c/svg\x3e",n.className="ctrl wsQuickAction",n.style.display="none",dojo.connect(n,"onclick",dojo.hitch(this,"onQuickActionMenu",k,n)),p.appendChild(n),dojo.connect(p,"oncontextmenu",dojo.hitch(this,"onContextMenu",k)),e.isReadOnly||new g(p,this.DRAGTYPES_CALENDAR,this,f),this.calendarNodes[f]=p);this.subCalendarsNode.childNodes&&0<this.subCalendarsNode.childNodes&&
dojo.place("\x3cdiv class\x3d'wsSeparator'\x3e\x3c/div\x3e",this.subCalendarsNode,"before");b[f]=!0}for(f in this.calendarNodes)f in b||(dojo._destroyElement(this.calendarNodes[f]),delete this.calendarNodes[f]);this.onResized()}},showCalendar:function(a){a?(dojo.addClass(this.calendarContainer,"navTile24 navItemHover"),this.calendarContainer.style.display="",ws.CalSolo.selectCalendarApp()):this.calendarContainer.style.display="none"},hideCalendar:function(){this.calendarContainer&&(this.calendarContainer.style.display=
"none")},modifyNavDatePicker:function(){this.navDatePicker.displayForPublicView()},displayForPublicView:function(){this.calendarContainer.style.display="none";this.navDatePicker.displayForPublicView()},editCalendar:function(a,b){var d=h.byId("editCalendar");d||(d=new t({id:"editCalendar",editCalendar:!0}),d.closeCB=dojo.hitch(this,"showCalendar",!0),d.setModel(ws.CalSolo.theCalendarModel),ws.CalSolo.ViewWidget.addChild(d));d.getCalId()!=a?d.isShowing()?d.confirmSwitchEditCalendar(a):(d.setCalId(a),
this.selectApp(this.APP_EDITCALENDAR)):d.isShowing()||this.selectApp(this.APP_EDITCALENDAR);b&&b.stopPropagation()},showAddCalendar:function(){ws.CalSolo.selectTab("addCalendar");this.calendarContainer.style.display=""},showEditCalendar:function(){ws.CalSolo.selectTab("editCalendar")},addCalendar:function(a){this.selectApp(this.APP_ADDCALENDAR);a.stopPropagation()},selectCalendar:function(a){this.calendarModel.getCalendarById(a).isActive||this.calendarModel.saveCalendar(a,{id:a,isActive:!0})},selectThisCalendarOnly:function(d){for(var e=
this.calendarModel.getCalendarList(),g=[],f=0;f<e.length;f++){var h=e[f];h.id==d?h.isActive||g.push(this.calendarModel.saveCalendar(h.id,{id:h.id,isActive:!0})):h.isActive&&g.push(this.calendarModel.saveCalendar(h.id,{id:h.id,isActive:!1}))}b(g).then(a.hitch(this,function(){this.calendarModel.getData()}))},toggleCalendarItem:function(b,d,e){e||(e=d,d=e.target);var g=dojo.hasClass(d,"checked");dojo.toggleClass(d,"checked");(d=!g)&&dojo.publish("WSFeedbackStart",[Config.Strings.Loading]);this.calendarModel.saveCalendar(b,
{id:b,isActive:d}).then(a.hitch(this,function(){this.calendarModel.getData();dojo.publish("WSFeedbackEnd",[Config.Strings.Loading])}),function(){dojo.publish("WSFeedbackEnd",[Config.Strings.Loading])});e.stopPropagation()},deleteCalendar:function(a,b){var d=this.calendarModel.getCalendarById(a);ws.widget.Dialogs.okCancel(d&&d.grants&&0<d.grants.length?Config.Strings.ConfirmCalDeleteShared:Config.Strings.ConfirmCalDelete,dojo.hitch(this,function(a){a&&(dojo.publish("WSFeedbackStart",[Config.Strings.Loading]),
this.calendarModel.deleteCalendar(d).then(function(){dojo.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.CalendarDeleted,b),!0])},function(){dojo.publish("WSFeedbackEnd",[Config.Strings.Loading])}),dojo.publish("EditCalendar/Delete"))}))},makeCalendarPublic:function(a,b){dojo.publish("WSFeedbackStart",[Config.Strings.Loading]);var d=this.calendarModel.getCalendarById(a),e=this.calendarModel.isCalendarPublic(d),g=[];d.grants&&(g=d.grants);e||g.push({granteeId:"pub",granteeName:"pub",
granteeType:"pub",permissions:"r",rights:"r",action:"P"});this.calendarModel.saveCalendar(a,d).then(function(){dojo.publish("WSFeedbackEnd",[Config.Strings.Loading]);var d=ws.string.substituteParams(e?Config.Strings.AlreadyPublic:Config.Strings.MakePublicSuccess,b);dojo.publish("WSFeedbackStart",[d,!0,function(){var d=ws.calendar.calutil.getPublicCalendarURL(a,null),e=ws.string.substituteParams(Config.Strings.PubCalEmailSubject,b),g=ws.string.substituteParams("\x3ca href\x3d'{0}'\x3e{1}\x3c/a\x3e",
d,b),f=(ws.string.substituteParams(Config.Strings.PubCalEmailBody,g,ws.UserContext.ActiveScreenName)+"\x3csmall\x3e"+ws.string.substituteParams(Config.Strings.PubCalEmailFooter,d)+"\x3c/small\x3e").replace(/\\n/g,"\x3cbr\x3e");ws.CalSolo.popupCompose(function(a){a.reset({subject:e,body:f,dontAddSignature:!0,isDirty:!0})})},null,Config.Strings.ShareLink])},function(){ws.widget.Dialogs.ok(Config.Strings.CalErrorSavingCal);dojo.publish("WSFeedbackEnd",[Config.Strings.Loading])})},setCalendarColor:function(a,
b){var d=this.calendarModel.getCalendarById(a);d.color=ws.calendar.calutil.convertToYahooColor(b);this.calendarModel.saveCalendar(d)},onMouseOverItem:function(a){this.disableHover||(dojo.addClass(a,"navTile24 navItemHover"),dojo.query(".ctrl",a).style("display",""))},onMouseOutItem:function(a){if(!this.disableHover){dojo.removeClass(a,"navTile24 navItemHover");var b=dojo.query(".ctrl",a);0<b.length&&(b[0].style.display="none",dojo.query(".text .unseen",a).style("display",""))}},onMouseOverCalItem:function(a){this.disableHover||
dojo.query(".ctrl",a).style("display","")},onMouseOutCalItem:function(a){this.disableHover||dojo.query(".ctrl",a).forEach(function(a){a.style.display="none"},this)},handleRightClickAction:function(a,b){var d=this.rightClickMenuArgs;switch(a){case "goToCalendar":this.selectApp(this.APP_CALENDAR);break;case "addCalendar":this.selectApp(this.APP_ADDCALENDAR);break;case "newEvent":ws.CalSolo.getAddEditWidget(dojo.hitch(this,function(a){a.show();d.calId&&a.calendarMenu.selectCalendar(d.calId)}));break;
case "selectThisCalendar":this.selectCalendar(d.calId);break;case "selectThisCalendarOnly":this.selectThisCalendarOnly(d.calId);break;case "shareCalendar":case "editCalendar":this.editCalendar(d.calId);break;case "deleteCalendar":this.deleteCalendar(d.calId,d.displayName);break;case "makeCalendarPublic":this.makeCalendarPublic(d.calId,d.displayName);break;case "setCalendarColor":this.setCalendarColor(d.calId,b)}this.rightClickMenuArgs=null},defineMenus:function(){this.rightClickMenuDefinition={CalendarHead:[{caption:Config.Strings.GoToCalendar,
onClick:dojo.hitch(this,"handleRightClickAction","goToCalendar")},{separator:!0},{caption:Config.Strings.AddCalendar,onClick:dojo.hitch(this,"handleRightClickAction","addCalendar")},{caption:Config.Strings.NewEventBtn,onClick:dojo.hitch(this,"handleRightClickAction","newEvent")}],Calendar:[{caption:Config.Strings.AddEventBtn,onClick:dojo.hitch(this,"handleRightClickAction","newEvent")},{caption:Config.Strings.ShowThisCalendarOnly,onClick:dojo.hitch(this,"handleRightClickAction","selectThisCalendarOnly")},
{separator:!0},{caption:Config.Strings.Edit,onClick:dojo.hitch(this,"handleRightClickAction","editCalendar")},{caption:Config.Strings.ShareThisCalendar,onClick:dojo.hitch(this,"handleRightClickAction","shareCalendar")},{caption:Config.Strings.MakePublic,onClick:dojo.hitch(this,"handleRightClickAction","makeCalendarPublic")},{caption:Config.Strings.Delete,onClick:dojo.hitch(this,"handleRightClickAction","deleteCalendar")},{separator:!0},{dojoType:n,onClick:dojo.hitch(this,"handleRightClickAction",
"setCalendarColor")}]}},createRightClickMenu:function(a){var b=this.rightClickMenuDefinition[a];if(b)return this.rightClickMenu[a]=ws.widget.createMenu(b),dojo.connect(this.rightClickMenu[a],"close",this,"onCloseMenu"),this.rightClickMenu[a]},getRightClickMenu:function(a){this.rightClickMenu||(this.rightClickMenu={});if(this.rightClickMenuDefinition[a]){var b=this.rightClickMenu[a];b||(b=this.createRightClickMenu(a));return b}},updateRightClickMenu:function(a){var b=this.rightClickMenuArgs,d=a.getChildren();
a==this.rightClickMenu.Calendar&&(d[0].setShowing(b.showAddEvent),d[4].setShowing(b.showShare),d[5].setShowing(b.showPublish),d[6].setShowing(b.showDelete),a=this.calendarModel.getCalendarById(b.calId),d[8]&&d[8].setCurrentColor(ws.calendar.calutil.convertToAolColor(a.color)))},onQuickActionMenu:function(a,b){ws.lang.ensureLayersLoaded(dojo.hitch(this,"_onContextMenu",a,-1,-1,b));this.activeQuickActionButton=b},onContextMenu:function(a,b){dojo.stopEvent(b);ws.lang.ensureLayersLoaded(dojo.hitch(this,
"_onContextMenu",a,b.pageX,b.pageY,b.target))},_onContextMenu:function(a,b,d,e){var g=a.type,f=this.getRightClickMenu(g);f&&(f.isShowing()&&f.close(),this.rightClickMenuArgs=a,f=this.getRightClickMenu(g),this.updateRightClickMenu(f),0<=b?f.open(b,d,e):f.open(e))},onCloseMenu:function(){this.activeQuickActionButton&&(this.activeQuickActionButton.style.display="none",this.activeQuickActionButton=null)},setSearchScope:function(a,b){},getSearchGhostText:function(a){return Config.Strings.SearchCalendar},
searchApp:function(){this.isSearchField()?ws.widget.Dialogs.ok(Config.Strings.SearchFieldEmpty):this.searchCalendar(this.searchScope)},searchCalendar:function(a){this.searchCalendarCB&&""!=this.searchField.style.color&&this.searchCalendarCB(a,dojo.trim(this.searchField.value))},onFocusSearchField:function(){this.isSearchField()&&(this.searchField.value="");this.searchField.style.color=this.searchFieldColor},isSearchField:function(){return""==this.searchField.style.color||""==dojo.trim(this.searchField.value)?
!0:!1},clearSearchField:function(){this.searchField.value="";this.resetSearchField()},resetSearchField:function(){""==this.searchField.value&&(this.searchField.style.color="",this.searchField.value=this.getSearchGhostText())},onBlurSearchField:function(){this.resetSearchField()},onKeyPressSearchField:function(a){a.keyCode==dojo.keys.ENTER&&(this.searchApp(),a.preventDefault())},modelUpdated:function(a){this.searchStrUpdated(a)},searchStrUpdated:function(a){var b=null;"calendar"==a&&null!=this.calendarModel&&
(b=this.calendarModel.getSearchString());null==b&&(b="");this.searchField.value!=b&&(this.searchField.value=b,a=!1,""!=this.searchField.value&&(a=!0),this.resetSearchField(),a&&(this.searchField.style.color=this.searchFieldColor))},onMouseOverSearchBtn:function(){dojo.addClass(this.searchBtn,"goSearchHover")},onMouseOutSearchBtn:function(){dojo.removeClass(this.searchBtn,"goSearchHover")}})})},"ws/dnd/NavigationDropTarget":function(){define("ws/dnd/NavigationDropTarget","dojo/_base/declare dojo ws/dnd/DropTarget ws/dnd/HtmlDragManager ws/html ws/string".split(" "),
function(f,k,d){return f([d],{constructor:function(b,a,d,f){0!=arguments.length&&(this.domNode=k.byId(b),a&&k.isString(a)&&(a=[a]),this.acceptedTypes=a||[],this.parentWidget=d,this.itemid=f,this.dragObjectClone=null,ws.dnd.dragManager.registerDropTarget(this))},onDragOver:function(b){if(!b.dragObjects||!b.dragObjects[0])return!1;if("myFolders"==this.itemid)return b.dragObjects[0].dragClone.className="gridDragObjectNormal",this.parentWidget.expandMyFolders()&&ws.dnd.dragManager.cacheTargetLocations(),
!1;if(!this.accepts(b.dragObjects,!0))return b.dragObjects[0].dragClone.className="gridDragObjectBadDrop",this.dragObjectClone=b.dragObjects[0].dragClone,!1;k.addClass(this.domNode,"navTile24 navItemHover");b.dragObjects[0].dragClone.className="gridDragObjectGoodDrop";this.dragObjectClone=b.dragObjects[0].dragClone;return!0},onDragMove:function(b,a){},onDragOut:function(b){k.removeClass(this.domNode,"navTile24 navItemHover");this.dragObjectClone&&(this.dragObjectClone.className="gridDragObjectNormal",
this.dragObjectClone=null)},accepts:function(b,a){var d=this.inherited(arguments);return a?d&&k.every(b,function(a){return"message"==a.type})&&-1!=k.indexOf(this.parentWidget.mailModel.getFoldersCanMoveTo(),this.itemid):d&&k.every(b,function(a){return"message"==a.type})},onDrop:function(b){var a;switch(b.dragObject.type){case 0:case 1:case 2:a=this.onDropCalendar(b);break;case "message":a=this.onDropMessage(b);break;default:a=!1}this.onDragOut(b);return a},onDropCalendar:function(b){var a=b.dragObject.dragSource.componentInstance;
if(null==a)return!1;b=this.parentWidget.calendarModel;a=b.components[a[b.indexEnum.id]];if(this.itemid==a[b.componentEnum.calid])return!1;a=b.getComponentArgs(a);a.calid=this.itemid;b.saveComponent(a);return!0},onDropMessage:function(b){var a=this.parentWidget.mailModel;b=a.getRowData(b.dragObject.dragSource.rowIndex).id;var d=a.isAllSelected(),f=a.isSelected(b)?a.getSelectedUids():[b];b=a.getOpSize(f);var e=a.getFolderByName(this.itemid),p=a.getFolderDisplayName(e),g=dijit.byId("messageList"),n=
a.getFolderByType("TRASH");if(a.currentFolder!=n.name&&a.isFolderType(e,"TRASH")){var t=null;p&&(t=1==b.opSize?ws.string.substituteParams(Config.Strings.MessageMoved,p):ws.string.substituteParams(Config.Strings.MessagesMoved,b.opSize,p));g.maybePreviewNextMessage(f);a.deleteMessages(f).then(k.hitch(this,function(b){t&&(b=null,f&&(b=k.hitch(a,"undoMoveMessages",f,Config.DeletedItemsFolderName)),k.publish("WSFeedbackStart",[t,!0,b]));d&&(a.activeCachedList.Clear({preserveSort:!0}),a.setFolder(a.currentFolder,
null,null,null,"descending",!0))}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for model.deleteMessages-onDropMessage",a,"NavigationDropTarget.js");ws.widget.Dialogs.ok(Config.Strings.ErrorDeleting)})}else a.isFolderType(a.getCurrentFolder(),"BULK")&&a.isFolderType(e,"BULK")?(g.maybePreviewNextMessage(f),this._reportSpamMessages(a,f,!1,b,!0)):a.isFolderType(e,"BULK")?(g.maybePreviewNextMessage(f),this._reportSpamMessages(a,f,!0,b)):(g.maybePreviewNextMessage(f),
this._moveMessages(a,f,p,b));return!0},_restoreMessages:function(b,a,d){b&&a&&b.restoreMessages({uids:a,folder:Config.DeletedItemsFolderName,load:k.hitch(this,function(a){b.refetchFolderIndex(b.currentFolder);a=1==d.opSize?Config.Strings.MessageRestored:ws.string.substituteParams(Config.Strings.MessagesRestored,d.opSize);k.publish("WSFeedbackStart",[a,!0])}),error:function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for model.restoreMessages-_restoreMessages",
a,"NavigationDropTarget.js");ws.widget.Dialogs.ok(Config.Strings.ErrorRestoring)}})},_reportSpamMessages:function(b,a,d,f,e){if(b&&a){var h=b.makeUidList(a);b.reportSpamMessages(a,d).then(k.hitch(this,function(e){d?(e=k.hitch(b,"undoMoveMessages",h),1==a.length?k.publish("WSFeedbackStart",[ws.string.unescapeXml(Config.Strings.MessageMarkedSpam),!0,e]):k.publish("WSFeedbackStart",[ws.string.unescapeXml(ws.string.substituteParams(Config.Strings.MessagesMarkedSpam,f.opSize)),!0,e])):(e=1==a.length?Config.Strings.MessageMarkedNotSpam:
ws.string.substituteParams(Config.Strings.MessagesMarkedNotSpam,f.opSize),k.publish("WSFeedbackStart",[ws.string.unescapeXml(e),!0,null]))}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for model.reportSpamMessages-_reportSpamMessages",a,"NavigationDropTarget.js");ws.widget.Dialogs.ok(Config.Strings.ReportSpamError)})}},_moveMessages:function(b,a,d,f){b&&a&&b.moveMessages(a,this.itemid).then(k.hitch(this,function(b){d&&(1==a.length?k.publish("WSFeedbackStart",
[ws.string.substituteParams(Config.Strings.MessageMoved,d),!0,null]):k.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.MessagesMoved,f.opSize,d),!0,null]))}),function(a){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for model.moveMessages-_moveMessages",a,"NavigationDropTarget.js");ws.widget.Dialogs.ok(Config.Strings.MoveMessageError)})}})})},"ws/dnd/DropTarget":function(){define("ws/dnd/DropTarget",["dojo/_base/declare"],function(f){return f(null,
{constructor:function(){this.acceptedTypes=[]},acceptsType:function(f){return-1==dojo.indexOf(this.acceptedTypes,"*")&&-1==dojo.indexOf(this.acceptedTypes,f)?!1:!0},accepts:function(f){if(-1==dojo.indexOf(this.acceptedTypes,"*"))for(var d=0;d<f.length;d++)if(-1==dojo.indexOf(this.acceptedTypes,f[d].type))return!1;return!0},unregister:function(){ws.dnd.dragManager.unregisterDropTarget(this)},onDragOver:function(f){},onDragOut:function(f){},onDragMove:function(f){},onDropStart:function(f){},onDrop:function(f){},
onDropEnd:function(){}})})},"ws/dnd/HtmlDragManager":function(){define("ws/dnd/HtmlDragManager",["dojo","dojo/_base/lang"],function(f,k){k.setObject("ws.dnd.DragEvent",function(){this.target=this.dragObject=this.dragSource=null;this.eventStatus="success"});k.setObject("ws.dnd.dragManager",{disabled:!1,nestedTargets:!1,mouseDownTimer:null,dsCounter:0,dsPrefix:"dojoDragSource",dropTargetDimensions:[],currentDropTarget:null,previousDropTarget:null,_dragTriggered:!1,lastDragTarget:null,currentDragTarget:null,
selectedSources:[],dragObjects:[],dragSources:[],dropTargets:[],currentX:null,currentY:null,lastX:null,lastY:null,mouseDownX:null,mouseDownY:null,threshold:7,dropAcceptable:!1,cancelEvent:function(a){a.stopPropagation();a.preventDefault()},registerDragSource:function(a){if(a.domNode){var b=this.dsPrefix,d=b+"Idx_"+this.dsCounter++;a.dragSourceId=d;this.dragSources[d]=a;a.domNode.setAttribute(b,d);f.isIE&&(this.dragstartHandle=f.connect(a.domNode,"ondragstart",this.cancelEvent))}},unregisterDragSource:function(a){if(a.domNode){var b=
this.dsPrefix,d=a.dragSourceId;delete a.dragSourceId;delete this.dragSources[d];a.domNode.setAttribute(b,null);f.isIE&&f.disconnect(this.dragstartHandle)}},registerDropTarget:function(a){this.dropTargets.push(a)},unregisterDropTarget:function(a){a=f.indexOf(this.dropTargets,a,null,!0);0<=a&&this.dropTargets.splice(a,1)},getDragSource:function(a){a=a.target;if(a!==f.body()){var b=null;for(a&&a.getAttribute&&(b=a.getAttribute(this.dsPrefix));!b&&a;){a=a.parentNode;if(!a||a===f.body())return;a.getAttribute&&
(b=a.getAttribute(this.dsPrefix))}return b?this.dragSources[b]:null}},onKeyDown:function(a){if(0!=this.selectedSources.length)switch(a.keyCode){case f.keys.ESCAPE:this.dropAcceptable=!1,this.onMouseUp(a,!0)}},onMouseDown:function(a){if(a&&!this.disabled){if(9>f.isIE){if(1!=a.button)return}else if(1!=a.which)return;var b=3==a.target.nodeType?a.target.parentNode:a.target;if(!b||!b.tagName||-1==f.indexOf(["button","textarea","input","select","option"],b.tagName.toLowerCase())){var d=this.getDragSource(a);
d&&(-1==f.indexOf(this.selectedSources,d)&&(this.selectedSources.push(d),d.onSelected()),this.mouseDownX=a.pageX,this.mouseDownY=a.pageY,this.mouseDownTarget=b,a.preventDefault(),this.mousemoveHandle=f.connect(document,"onmousemove",this,"onMouseMove"))}}},onMouseUp:function(a,b){if(a&&0!=this.selectedSources.length){this.mouseDownY=this.mouseDownX=null;this._dragTriggered=!1;a.dragSource=this.dragSource;if(!a.shiftKey&&!a.ctrlKey){if(this.currentDropTarget)this.currentDropTarget.onDropStart();f.forEach(this.dragObjects,
function(b){var d=null;if(b){if(this.currentDropTarget){a.dragObject=b;var f=this.currentDropTarget.domNode.childNodes;if(0<f.length)for(a.dropTarget=f[0];a.dropTarget==b.domNode;)a.dropTarget=a.dropTarget.nextSibling;else a.dropTarget=this.currentDropTarget.domNode;if(this.dropAcceptable)d=this.currentDropTarget.onDrop(a);else this.currentDropTarget.onDragOut(a)}a.dragStatus=this.dropAcceptable&&d?"dropSuccess":"dropFailure";setTimeout(function(){try{b.dragSource.onDragEnd(a)}catch(t){var d={},e;
for(e in a)"type"==e?d.type="mouseup":d[e]=a[e];b.dragSource.onDragEnd(d)}},0);setTimeout(function(){b.onDragEnd(a)},0)}},this);this.selectedSources=[];this.dragObjects=[];this.dragSource=null;if(this.currentDropTarget)this.currentDropTarget.onDropEnd()}f.disconnect(this.mousemoveHandle);this.currentDropTarget=null}},onScroll:function(){for(var a=0;a<this.dragObjects.length;a++)this.dragObjects[a].updateDragOffset&&this.dragObjects[a].updateDragOffset();this.dragObjects.length&&this.cacheTargetLocations()},
_dragStartDistance:function(a,b){if(this.mouseDownX&&this.mouseDownX){var d=Math.abs(a-this.mouseDownX),e=Math.abs(b-this.mouseDownY);return parseInt(Math.sqrt(d*d+e*e),10)}},cacheTargetLocations:function(){this.dropTargetDimensions=[];f.forEach(this.dropTargets,function(a){var b=a.domNode;if(b&&b.parentNode&&a.accepts([this.dragSource])){var d=f.position(b),e=f.contentBox(b),b=f._getPadBorderExtents(b);this.dropTargetDimensions.push([[d.x,d.y],[d.x+e.w-b.w,d.y+e.h-b.h],a])}},this)},onMouseMove:function(a){if(a)if(9>
f.isIE&&1!=a.button)this.currentDropTarget=null,this.onMouseUp(a,!0);else{if(this.selectedSources.length&&!this.dragObjects.length){var b,d;if(!this._dragTriggered){this._dragTriggered=this._dragStartDistance(a.pageX,a.pageY)>this.threshold;if(!this._dragTriggered)return;b=a.pageX-this.mouseDownX;d=a.pageY-this.mouseDownY}this.dragSource=this.selectedSources[0];f.forEach(this.selectedSources,function(e){if(e){var g=e.onDragStart(a);g&&(g.onDragStart(a),g.dragOffset.y+=d,g.dragOffset.x+=b,g.dragSource=
e,this.dragObjects.push(g))}},this);this.previousDropTarget=null;this.cacheTargetLocations()}f.forEach(this.dragObjects,function(b){if(b)b.onDragMove(a)});if(this.currentDropTarget)var e=f.position(this.currentDropTarget.domNode),e=[[e.x,e.y],[e.x+e.w,e.y+e.h]];if(!this.nestedTargets&&e&&this.isInsideBox(a,e)){if(this.dropAcceptable)this.currentDropTarget.onDragMove(a,this.dragObjects)}else if(e=this.findBestTarget(a),null===e.target)this.currentDropTarget&&(this.currentDropTarget.onDragOut(a),this.previousDropTarget=
this.currentDropTarget,this.currentDropTarget=null),this.dropAcceptable=!1;else if(this.currentDropTarget!==e.target)this.currentDropTarget&&(this.previousDropTarget=this.currentDropTarget,this.currentDropTarget.onDragOut(a)),this.currentDropTarget=e.target,a.dragObjects=this.dragObjects,this.dropAcceptable=this.currentDropTarget.onDragOver(a);else if(this.dropAcceptable)this.currentDropTarget.onDragMove(a,this.dragObjects)}},findBestTarget:function(a){var b=this,d={target:null,points:null};f.every(this.dropTargetDimensions,
function(e){if(!b.isInsideBox(a,e))return!0;d.target=e[2];d.points=e;return!!b.nestedTargets});return d},isInsideBox:function(a,b){return a.pageX>b[0][0]&&a.pageX<b[1][0]&&a.pageY>b[0][1]&&a.pageY<b[1][1]?!0:!1},onMouseOver:function(a){},onMouseOut:function(a){}});var d=document,b=ws.dnd.dragManager;f.connect(d,"onkeydown",b,"onKeyDown");f.connect(d,"onmouseover",b,"onMouseOver");f.connect(d,"onmouseout",b,"onMouseOut");f.connect(d,"onmousedown",b,"onMouseDown");f.connect(d,"onmouseup",b,"onMouseUp");
f.connect(window,"onscroll",b,"onScroll")})},"ws/widget/CalendarColorPickerMenuItem":function(){define("ws/widget/CalendarColorPickerMenuItem",["dojo/_base/declare","dojo","dijit","ws/widget/WSMenuItem","ws/string"],function(f,k,d,b){return f("ws.widget.CalendarColorPickerMenuItem",[b],{colors:"009712 0360EB CC0000 E76808 808000 6600FF 008080 800080 6C6C6C 0088FF 646496 FF0080".split(" "),_getHoverColor:function(){return"#fff"},setCurrentColor:function(a){a="";for(var b=0;b<this.colors.length;b++)a+=
ws.string.substituteParams("{br}\x3cimg src\x3d'{spacer}' class\x3d'wsCalCB wsCalCB_{color} {checked}'\x3e",{spacer:Config.SpacerImageURL,color:this.colors[b],checked:" checked",br:b==this.colors.length/2?"\x3cbr\x3e":""});this.labelNode.innerHTML=a},_onClick:function(a){a.target&&k.forEach(this.colors,function(b){k.hasClass(a.target,"wsCalCB_"+b)&&(this.onClick("#"+b),this.getParent()&&this.getParent().close())},this)}})})},"ws/calendar/EditCalendar":function(){define("ws/calendar/EditCalendar",
"dojo/_base/declare dojo/text!ws/calendar/EditCalendar.html dojo/text!ws/calendar/EditCalendar.css dojo dijit dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ws/address/AddressModel ws/mail/MailModel ws/widget/WSSelect dijit/layout/BorderContainer ws/string ws/address/SingleAddressField ws/calendar/calutil ws/reporting ws/encoding ws/widget/Pane ws/widget/Dialogs ws/widget/DefaultTextbox ws/calendar/ColorPicker ws/widget/Checkbox ws/widget/Button ws/widget/WSToolbar ws/settings".split(" "),
function(f,k,d,b,a,h,l,e,p,g,n){function t(a,b){this.screenName=a;this.hasWriteAccess=b;this.deleted=!1}return f([h,l,e],{templateString:k,css:{templateString:d},_earlyTemplatedStartup:!0,calId:null,calTicket:null,lastTicket:null,reportSubdepartment:"Calendar",sendFailedList:null,last_clicked:0,removeEmailAddrDomain:!1,defaultCalColor:"#0360EB",ScreenNameRegexp:/^[a-zA-Z]{1}[a-zA-Z\d]{2,15}$/,currentScreenName:null,sharingMap:null,addressModel:null,startup:function(){null!=ws.CalSolo?(this.rightBlock.style.display=
"none",this.leftBlock.style.marginRight="0",b.addClass(this.leftBlock,"editCalLeftBlock"),this.personalCalendarHeader.innerHTML=Config.Strings.EditCalendarHeader):Config.EnableCalendarDirectoryURL&&Config.EventDirectoryURL||(this.rightBlock.style.display="none",this.leftBlock.style.marginRight="0");this.currentScreenName=this.normalizedScreenName(ws.UserContext.ActiveScreenName);this.sharingMap={};this.sendFailedList={};this.addressModel=new p;this.mailModel=new g;null!=ws.CalSolo&&(ws.CalSolo.setMailModel(this.mailModel),
this.reportSubdepartment="Standalone Calendar");Settings.AccountMigratedToOath?(this.calTypePrivateButton.checked=!0,this.calTypeOffBlock.style.display="none"):this.calTypeOffButton.checked=!0;this.hideAddressArea();b.subscribe("AddressFieldFocusChange",this,"onScreenNameFocus");b.subscribe("AddressFieldBlurChange",this,"onScreenNameBlur");b.subscribe("AddressFieldKeyPressHandle",this,"onScreenNameKeyPress");b.addClass(this.screenName.domNode,"screenNameInput");b.addClass(this.screenName.domNode,
"defaultInputColor");this.screenName.domNode.style.width="310px";this.screenName.domNode.value=Config.Strings.EnterEmailAddress;this.connect(this.colorPicker,"onColorSelected","setDirty")},setCalId:function(a){this.calId=a},getCalId:function(a){return this.calId},init:function(){this.reset();var a=this.model.getCalendarById(this.calId);if(a){this.calendarName.setValue(a.name);this.readOnlyCalendarName.innerHTML=this.calendarName.getValue();this.calendarName.setOrigValue(this.calendarName.getValue());
this.colorPicker.setSelectedColor(ws.calendar.calutil.convertToAolColor(a.color),!0);this.calTicket=a.webToken;var b=a.isRemote?2:0,d=!a.isReadOnly,e=this.model.isCalendarPublic(a);this.calTypeOffBlock.style.display="none";this.lastTicket=this.calTicket;e?(this.calTypePublicButton.checked=!0,this.publicOptionSelected(null,!0)):(this.calTypePrivateButton.checked=!0,this.privateOptionSelected(null,!0));this.deleteCalendar.show();this.accessLevel.style.display="";ws.html.setInnerText(this.accessLevelValue,
d?Config.Strings.Cal_EditCalendar_AccessLevel_ReadWrite:Config.Strings.Cal_EditCalendar_AccessLevel_ReadOnly);this.shareCalSeparator1.style.display="none";this.publishRow.style.display="none";this.shareCalSeparator2.style.display="none";this.shareCalendarRow.style.display="none";this.screenNameRow.style.display="none";this.readOnlyCalendarName.style.display="none";this.calendarName.domNode.style.display="";this.calendarName.domNode.disabled=!1;this.calendarName.select();if(2!=b&&d&&(Config.EnableCalendarPublishTab&&
(this.shareCalSeparator1.style.display="",this.publishRow.style.display=""),Config.EnableCalendarSharingTab)){this.shareCalSeparator2.style.display="";this.shareCalendarRow.style.display="";this.screenNameRow.style.display="";e=a.grants;a={};if(e)for(b=0;b<e.length;b++){var g=e[b].granteeId;g&&(d=new t(g,"rw"==e[b].rights),a[g]=d)}e=Object.keys(a);e.sort();for(b=0;b<e.length;b++)d=a[e[b]],this.addScreenNameRow(d.screenName,d.hasWriteAccess),this.sharingMap[d.screenName]=d}ws.reporting.report("Edit Calendar",
this.reportSubdepartment)}},onShow:function(){this.init();this.onResized()},reset:function(){this.screenName.domNode.value=Config.Strings.EnterEmailAddress;b.addClass(this.screenName.domNode,"defaultInputColor");this.setDirty(!1);this.deleteAllScreenNameRows();this.showErrorCalendarName(!1);this.showErrorScreenName(!1);Settings.AccountMigratedToOath?this.calTypePrivateButton.checked=!0:this.calTypeOffButton.checked=!0;this.sharingMap={}},getCalendarList:function(){this.model.getData()},setModel:function(a){this.model=
a;this.model.calendars||this.getCalendarList()},setDirty:function(a){a?this.updateCalendar.enable():a||this.updateCalendar.disable();this.dirty=a},onResetPrivateLink:function(a){ws.widget.Dialogs.ok(Config.Strings.ConfirmResetCalAddressText,b.hitch(this,function(a){a&&this.resetPrivateLink()}),!0)},resetPrivateLink:function(){this.model.resetCalenderToken(this.calId,b.hitch(this,function(a){this.calTicket=a.folder.webToken;this.pubCalLink.innerHTML=ws.calendar.calutil.getPublicCalendarURL(this.calId,
this.calTicket);this.pubCalLinkData.innerHTML=ws.calendar.calutil.getPublicCalendarData(this.calId,this.calTicket);b.publish("WSFeedbackStart",[Config.Strings.CalShareResetMsg,!0])}))},hideAddressArea:function(){this.calTypeInfo.style.display="none";this.publishText.style.display="none";this.publishTextData.style.display="none";this.resetAddressButton.hide()},showAddressArea:function(a){this.calTypeInfo.style.display="";Config.EnableCalendarPublicHTMLURL&&(this.publishText.style.display="");this.publishTextData.style.display=
"";a?this.resetAddressButton.show():this.resetAddressButton.hide()},offOptionSelected:function(a,d){d?this._selectOffOption(a,d):0!=this.last_clicked&&ws.widget.Dialogs.ok(Config.Strings.ConfirmAccessLossText,b.hitch(this,function(b){b?this._selectOffOption(a,d):2==this.last_clicked?this.calTypePublicButton.checked=!0:1==this.last_clicked&&(this.calTypePrivateButton.checked=!0)}),!0)},_selectOffOption:function(a,b){b||this.setDirty(!0);this.hideAddressArea();this.last_clicked=0},privateOptionSelected:function(a,
d){this.calTypeText.innerHTML=Config.Strings.PrivateCalSelectedText;this.calTypeText.style.display="";d?this._selectPrivateOption(a,d):2==this.last_clicked?ws.widget.Dialogs.ok(Config.Strings.ConfirmAccessLossText,b.hitch(this,function(b){b?this._selectPrivateOption(a,d):2==this.last_clicked&&(this.calTypePublicButton.checked=!0)}),!0):0==this.last_clicked&&this._selectPrivateOption(a,d)},_selectPrivateOption:function(a,b){b||this.setDirty(!0);this.calId&&(this.pubCalLink.innerHTML=this.calId?ws.calendar.calutil.getPublicCalendarURL(this.calId,
this.calTicket):"",this.pubCalLinkData.innerHTML=this.calId?ws.calendar.calutil.getPublicCalendarData(this.calId,this.calTicket):"");this.showAddressArea(!0);this.last_clicked=1},publicOptionSelected:function(a,b){this.calTypeText.innerHTML=Config.Strings.PublicCalSelectedText;this.calTypeText.style.display="";b||this.setDirty(!0);this.pubCalLink.innerHTML=this.calId?ws.calendar.calutil.getPublicCalendarURL(this.calId,null):"";this.pubCalLinkData.innerHTML=this.calId?ws.calendar.calutil.getPublicCalendarData(this.calId,
null):"";this.showAddressArea(!1);this.last_clicked=2},openEmailWindowData:function(){if(this.dirty)this.onUpdateCalendar(!0);var a=ws.calendar.calutil.getPublicCalendarData(this.calId,this.calTypePrivateButton.checked?this.calTicket:null),d=ws.string.substituteParams(Config.Strings.PubCalEmailSubject2,this.calendarName.getValue()),e=ws.string.substituteParams("\x3ca href\x3d'{0}'\x3e{1}\x3c/a\x3e",a,this.calendarName.getValue()),g=(ws.string.substituteParams(Config.Strings.PubCalEmailBody2,e,ws.UserContext.ActiveScreenName)+
"\x3csmall\x3e"+ws.string.substituteParams(Config.Strings.PubCalEmailFooter2,a)+"\x3c/small\x3e").replace(/\\n/g,"\x3cbr\x3e"),a=b.hitch(this,function(a){a.reset({subject:d,body:g,dontAddSignature:!0,hideIMButton:!0})});ws.CalSolo?ws.CalSolo.popupCompose(a):ws.WebSuite.getCompose("calendar",a)},openEmailWindow:function(){if(this.dirty)this.onUpdateCalendar(!0);var a=ws.calendar.calutil.getPublicCalendarURL(this.calId,this.calTypePrivateButton.checked?this.calTicket:null),d=ws.string.substituteParams(Config.Strings.PubCalEmailSubject,
this.calendarName.getValue()),e=ws.string.substituteParams("\x3ca href\x3d'{0}'\x3e{1}\x3c/a\x3e",a,this.calendarName.getValue()),g=(ws.string.substituteParams(Config.Strings.PubCalEmailBody,e,ws.UserContext.ActiveScreenName)+"\x3csmall\x3e"+ws.string.substituteParams(Config.Strings.PubCalEmailFooter,a)+"\x3c/small\x3e").replace(/\\n/g,"\x3cbr\x3e"),a=b.hitch(this,function(a){a.reset({subject:d,body:g,dontAddSignature:!0,hideIMButton:!0})});ws.CalSolo?ws.CalSolo.popupCompose(a):ws.WebSuite.getCompose("calendar",
a)},onBrowserCalendars:function(){ws.io.openWindow(Config.EventDirectoryURL,"","status\x3dyes,resizable\x3dyes,menubar\x3dyes,scrollbars\x3dyes,location\x3dyes,toolbar\x3dyes,top\x3d50,left\x3d50")},grabFocus:function(a,d){(!d||b.isMoz)&&a&&a.focus()},onCalNameChange:function(){""==this.calendarName.getValue()?this.setDirty(!1):this.setDirty(!0);this.showErrorCalendarName(!1)},onScreenNameFocus:function(){b.hasClass(this.screenName.domNode,"defaultInputColor")&&(this.screenName.domNode.value="",this.grabFocus(this.screenName.domNode,
!0),b.removeClass(this.screenName.domNode,"defaultInputColor"))},onScreenNameBlur:function(){""==b.trim(this.screenName.domNode.value)&&(this.screenName.domNode.value=Config.Strings.EnterEmailAddress,b.addClass(this.screenName.domNode,"defaultInputColor"),b.removeClass(this.addImage,"wsLargeAdd"),b.addClass(this.addImage,"wsLargeAddDisabled"))},onScreenNameKeyPress:function(a,d,e){e||d!=b.keys.ENTER?(this.setDirty(!0),this.showErrorScreenName(!1),b.removeClass(this.addImage,"wsLargeAddDisabled"),
b.addClass(this.addImage,"wsLargeAdd")):(this.onAddScreenName(),this.onScreenNameFocus())},getSelectedColor:function(a){return this.selectedColor||this.defaultCalColor},normalizedScreenName:function(a){return a?a.replace(/\s/g,"").toLowerCase():null},showErrorCalendarName:function(a,b){a?(this.errorCalendarName.innerHTML=b,this.errorCalendarName.style.display=""):(this.errorCalendarName.innerHTML="",this.errorCalendarName.style.display="none")},showErrorScreenName:function(a,b){a?(this.errorScreenName.innerHTML=
b,this.errorScreenName.style.display=""):(this.errorScreenName.innerHTML="",this.errorScreenName.style.display="none")},isValidScreenName:function(a,b){if(!this.ScreenNameRegexp.test(b)){var d=a.match(/(.+)@(.+)\.(.+)/);if(null==d||4!=d.length)return this.showErrorScreenName(!0,Config.Strings.InvalidScreenNameOrEmail),!1}return null==this.sharingMap[b]||this.sharingMap[b].deleted?b==this.currentScreenName?(this.showErrorScreenName(!0,Config.Strings.OwnerScreenNameOrEmail),!1):!0:(this.showErrorScreenName(!0,
a+" "+Config.Strings.DuplicateScreenNameOrEmail),!1)},getSelectOption:function(a){var b=[];b.push({value:a+":View",display:Config.Strings.ViewOnly+"\x26nbsp;\x26nbsp"});b.push({value:a+":ViewAndEdit",display:Config.Strings.ViewAndEdit+"\x26nbsp;\x26nbsp"});return b},addScreenNameRow:function(a,d){0==this.screenNameTableBody.getElementsByTagName("tr").length&&(this.screenNameTableHead.style.display="");var e=ws.calendar.calutil.getSharingTableRowNode(a,this),g=e.childNodes[2].getElementsByTagName("div")[0];
b.connect(g,"onclick",this,"onDeleteScreenName");e.delDiv=g;this.screenNameTableBody.appendChild(e);g={options:this.getSelectOption(a)};e.perSelector=new n(g);e.childNodes[3].appendChild(e.perSelector.domNode);e.perSelector.domNode.style.border="0px";e.perSelector.domNode.style.backgroundColor="transparent";d?e.perSelector.setOption(1):e.perSelector.setOption(0);e.perSelector.valueChanged=b.hitch(this,"onAccessLevelChanged",e.perSelector);(e=this.addressModel.getRecordByScreenName(a))&&this.screenNameFound(e)},
onAddScreenName:function(){if(!b.hasClass(this.addImage,"wsLargeAddDisabled")){var a=this.screenName.domNode.value,d=!0;b.hasClass(this.screenName.domNode,"defaultInputColor")?(this.showErrorScreenName(!0,Config.Strings.EMPTY_ADD_MESSAGE),d=!1):this.removeEmailAddrDomain&&((d=ws.string.parseEmailAddress(a))&&-1!=b.indexOf(Config.KnownDomains,d.domain)&&(a=d.name),d=this.isValidScreenName(a));d&&(d=new t(a,!1),this.sharingMap[a]=d,this.addScreenNameRow(a),this.screenName.domNode.value="",b.addClass(this.screenName.domNode,
"defaultInputColor"));this.screenName.domNode.focus();b.publish("WSFeedbackStart",[Config.Strings.SharedContactAdded,!0])}},onAccessLevelChanged:function(a,b){var d=a.currentValue,e=d.indexOf(":"),g=d.substring(0,e),d=d.substring(e+1);if(g=this.sharingMap[g])g.hasWriteAccess="View"==d?!1:!0;b||this.setDirty(!0)},onMouseOverScreenNameRow:function(a){a=a.currentTarget;b.addClass(a,"screenNameRowHover");a.childNodes[2].getElementsByTagName("div")[0].style.display=""},onMouseOutScreenNameRow:function(a){a=
a.currentTarget;b.removeClass(a,"screenNameRowHover");a.childNodes[2].getElementsByTagName("div")[0].style.display="none"},findParentRow:function(a){for(;null!=a.parentNode&&(a=a.parentNode,"tr"!=a.tagName.toLowerCase()););return a},onDeleteScreenName:function(a){a=this.findParentRow(a.currentTarget);this.deleteScreenNameRow(a);0==this.screenNameTableBody.getElementsByTagName("tr").length&&(this.screenNameTableHead.style.display="");this.setDirty(!0);b.publish("WSFeedbackStart",[Config.Strings.SharedContactDeleted,
!0])},deleteAllScreenNameRows:function(){for(var a=this.screenNameTableBody.getElementsByTagName("tr"),b=a.length-1;0<=b;b--)this.deleteScreenNameRow(a[b]);this.screenNameTableHead.style.display="none"},deleteScreenNameRow:function(a){a&&(null!=a.perSelector&&(a.perSelector.destroy(),a.perSelector=null),null!=a.delDiv&&(b.connect(a.delDiv,"onclick",this,"onDeleteScreenName"),a.delDiv=null),null!=a.nSn&&(this.sharingMap[a.nSn].deleted=!0),null!=a.rowIndex&&this.screenNameTable.deleteRow(a.rowIndex))},
backToCalendarView:function(){ws.reporting.skipBeaconReporting=!0;this.closeCB?this.closeCB():ws.Navigation&&ws.Navigation.showCalendar()},isValidCalendarName:function(a){return ws.string.sanitize(a).length==a.length&&-1==a.search(/[\|~\^:\/\"]/)},checkCalendarName:function(a,b){var d=!0;if(1>a.length)this.showErrorCalendarName(!0,Config.Strings.EmptyCalendarName),this.calendarName.focus(),d=!1;else if(40<a.length)this.showErrorCalendarName(!0,Config.Strings.CalNameTooLongOrInvalidChars),this.calendarName.focus(),
d=!1;else if(this.isValidCalendarName(a)){var e=this.model.calendarEnum,g=this.model.calendars;if(g&&e)for(var f in g){var h=g[f];f=h[e.id];if(f!=b){var l=h[e.displayName];if(0==h[e.compType]&&a==l&&l!=this.calendarName.getOrigValue()){this.showErrorCalendarName(!0,Config.Strings.DuplicateCalendarName);this.calendarName.focus();d=!1;break}}}}else this.showErrorCalendarName(!0,Config.Strings.CalNameTooLongOrInvalidChars),this.calendarName.focus(),d=!1;return d},resetAccessList:function(){for(var a in this.sharingMap){var b=
this.sharingMap[a];null!=b&&(b.deleted?this.sharingMap[a]=null:b.initHasWriteAccess=b.hasWriteAccess)}},getAccessList:function(){var a=[],b;for(b in this.sharingMap){var d=this.sharingMap[b];if(d&&!d.deleted){var e={granteeId:d.screenName,granteeType:"usr"};d.hasWriteAccess?(e.permissions="rwidx",e.rights="rw"):(e.permissions="r",e.rights="r");a.push(e)}}return a},sendSharingMessage:function(a,b,d,e,g){a=a.split(",");for(var f=0;f<a.length;f++)a[f]&&!this.sendFailedList[a[f]]&&this._sendSharingMessage(a[f],
b,d,e,g)},_sendSharingMessage:function(a,d,e,g,f){g=g.replace(/\\n/g,"\x3cbr\x3e");f||(f=g);e={content:{From:ws.UserContext.UserAddress,To:a,Subject:e,RichBody:g,PlainBody:f,RichEdit:!0},error:b.hitch(this,function(e){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.show - Error Handler for mailModel.sendMessage-_sendSharingMessage",e,"EditCalendar.js");this.sendFailedList[a]=!0;"delete"!=d&&ws.widget.Dialogs.show(Config.Strings.CalShareMailSentError+"\x3cbr\x3e\x3cbr\x3e"+(e?
e:""),[Config.Strings.OK],b.hitch(this,function(){this.backToCalendarView()}))})};this.mailModel.sendMessage(e)},notifyBuddy:function(a,d,e,g){var f=a[0],h=a[1];a=a[2];var l="",m="",k="",q="",n="",p="",t="",w="";e=ws.encoding.encode64(e);var v=ws.calendar.calutil.getSubscribeCalendarURL(e,g,this.calTicket);g=ws.string.substituteParams("\x3ca href\x3d'{0}'\x3e",v);e=ws.string.substituteParams("'{0}'",v);var v=ws.string.substituteParams("{0}",v),G=b.trim(this.calendarName.getValue());if(d)q=f,n=h;else{d=
f.split(",");for(f=0;f<d.length;f++)(l=this.sharingMap[d[f]])&&!l.deleted&&(-1==l.initHasWriteAccess?q+=l.nScreenName+",":l.initHasWriteAccess!=l.hasWriteAccess&&(p+=l.nScreenName+","));d=h.split(",");for(f=0;f<d.length;f++)(l=this.sharingMap[d[f]])&&!l.deleted&&(-1==l.initHasWriteAccess?n+=l.nScreenName+",":l.initHasWriteAccess!=l.hasWriteAccess&&(t+=l.nScreenName+","))}""!=q&&(w="addView",k=ws.string.substituteParams(Config.Strings.CalShareInvitationPlainContent,Config.Strings.ViewOnly.toLowerCase(),
G,e,ws.UserContext.ActiveScreenName)+"\x3cbr\x3e\x3cbr\x3e\x3csmall\x3e"+ws.string.substituteParams(Config.Strings.CalShareInvitationFooter,v)+"\x3c/small\x3e",m=ws.string.substituteParams(Config.Strings.CalShareInvitationContent,"\x3cb\x3e"+Config.Strings.ViewOnly.toLowerCase()+"\x3c/b\x3e",G,g,"\x3c/a\x3e",ws.UserContext.ActiveScreenName)+"\x3cbr\x3e\x3cbr\x3e\x3csmall\x3e"+ws.string.substituteParams(Config.Strings.CalShareInvitationFooter,v)+"\x3c/small\x3e",l=ws.string.substituteParams(Config.Strings.CalShareInvitationSubject,
G),this.sendSharingMessage(q,w,l,m,k));""!=n&&(w="addEdit",k=ws.string.substituteParams(Config.Strings.CalShareInvitationPlainContent,Config.Strings.ViewAndEdit.toLowerCase(),G,e,ws.UserContext.ActiveScreenName)+"\x3cbr\x3e\x3cbr\x3e\x3csmall\x3e"+ws.string.substituteParams(Config.Strings.CalShareInvitationFooter,v)+"\x3c/small\x3e",m=ws.string.substituteParams(Config.Strings.CalShareInvitationContent,"\x3cb\x3e"+Config.Strings.ViewAndEdit.toLowerCase()+"\x3c/b\x3e",G,g,"\x3c/a\x3e",ws.UserContext.ActiveScreenName)+
"\x3cbr\x3e\x3cbr\x3e\x3csmall\x3e"+ws.string.substituteParams(Config.Strings.CalShareInvitationFooter,v)+"\x3c/small\x3e",l=ws.string.substituteParams(Config.Strings.CalShareInvitationSubject,G),this.sendSharingMessage(n,w,l,m,k));""!=p&&(w="updateView",m=ws.string.substituteParams(Config.Strings.CalShareUpdateContent,G,"\x3cb\x3e"+Config.Strings.ViewOnly.toLowerCase()+"\x3c/b\x3e"),l=ws.string.substituteParams(Config.Strings.CalShareUpdateSubject,G),this.sendSharingMessage(p,w,l,m));""!=t&&(w="updateEdit",
m=ws.string.substituteParams(Config.Strings.CalShareUpdateContent,G,"\x3cb\x3e"+Config.Strings.ViewAndEdit.toLowerCase()+"\x3c/b\x3e"),l=ws.string.substituteParams(Config.Strings.CalShareUpdateSubject,G),this.sendSharingMessage(t,w,l,m));""!=a&&(w="delete",m=ws.string.substituteParams(Config.Strings.CalShareDeletionContent,"",G),l=ws.string.substituteParams(Config.Strings.CalShareDeletionSubject,G),this.sendSharingMessage(a,w,l,m))},onDeleteCalendar:function(){var a=this.model.getCalendarById(this.calId),
d=Config.Strings.ConfirmCalDelete;a.grants&&0<a.grants.length&&(d=Config.Strings.ConfirmCalDeleteShared);ws.widget.Dialogs.ok(d,b.hitch(this,function(b){b&&this._deleteCalendar(a)}),!0)},_deleteCalendar:function(a){var d=this.calendarName.getValue();this.model.deleteCalendar(a).then(function(){b.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.CalendarDeleted,d),!0])},function(){b.publish("WSFeedbackEnd",[Config.Strings.Loading])});b.publish("EditCalendar/Delete");this.dirty=!1;
this.backToCalendarView()},onUpdateCalendar:function(a){var d=b.trim(this.calendarName.getValue()),e=this.model.getCalendarById(this.calId),g=this.checkCalendarName(d,this.calId);e&&g&&(e={color:ws.calendar.calutil.convertToYahooColor(this.colorPicker.getSelectedColor()),name:d,isActive:!0,grants:this.getAccessList()},this.calTypePublicButton.checked&&(e.grants||(e.grants=[]),e.grants.push({granteeId:"pub",granteeName:"pub",granteeType:"pub",permissions:"r",rights:"r",action:"P"})),0==e.grants.length&&
e.grants.push({}),this.model.saveCalendar(this.calId,e).then(b.hitch(this,function(){this.resetAccessList();this.model.getEventData();b.publish("WSFeedbackStart",[ws.string.substituteParams(Config.Strings.CalendarUpdated,d),!0]);this.dirty=!1;a&&this.backToCalendarView()})))},confirmClose:function(a){this.dirty?ws.widget.Dialogs.ok(Config.Strings.ConfirmSaveCalendarSetting,function(b){b&&a&&a()},!0):a&&a()},confirmSwitchEditCalendar:function(a){var b=function(a,b){a.setCalId(b);a.init()},d=this,e=
Config.Strings.ConfirmSaveSettings,e=e.replace(/\\n/g,"\n");this.dirty?ws.widget.Dialogs.ok(e,function(e){if(e)d.onUpdateCalendar(!1);b(d,a)},!0):b(d,a)},screenNameFound:function(a){if(this.isShowing()&&a.name)for(var b=this.screenNameTableBody.getElementsByTagName("tr"),d=0;d<b.length;d++)if(b[d].nSn.toLowerCase()==a.screenName.toLowerCase()){b[d].childNodes[1].childNodes[0].innerHTML=a.fullName?a.fullName:a.nickName?a.nickName:a.screenName;break}}})})},"ws/widget/WSSelect":function(){define("ws/widget/WSSelect",
"dojo/_base/declare dojo/text!ws/widget/WSSelect.css dojo dijit dijit/_Widget dijit/_TemplatedMixin dijit/_Container ws/widget/WSMenu ws/widget/WSMenuItem ws/widget/WSMenuSeparator ws/html ws/lang".split(" "),function(f,k,d,b,a,h,l,e,p,g){return f([a,h,l],{templateString:'\x3cdiv id\x3d"${id}" tabindex\x3d"${tabindex}" class\x3d"wsSelect" title\x3d"${title}" data-dojo-attach-event\x3d"onclick: toggleMenu, onkeypress: onKeyPress, onmousedown:_onMouseDown, onmouseup:_onMouseUp, onmouseout:_onMouseOut, onmouseover:onMouseOver"\x3e\t\x3cdiv class\x3d"option" data-dojo-attach-point\x3d"currentValueNode"\x3e\x3c/div\x3e\t\x3cdiv class\x3d"wsArrow" data-dojo-attach-point\x3d"arrowNode"\x3e\x3csvg class\x3d"svgIcon"\x3e\x3cuse xlink:href\x3d"#iconDown"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\x3c/div\x3e',
css:{templateString:k},options:null,currentValue:-1,id:"",tabindex:"",title:"",enabled:!0,isMenuDirty:!1,optionalLabelPrefix:null,staticMenuHeader:null,useTinyArrow:!1,disableCheck:!1,disableMouseStates:!1,setPreventMouseDefault:!1,size:"byValue",constructor:function(a){if(a&&a.options){var b=[];a=a.options;for(var d=0;d<a.length;d++)b.push({display:a[d].display,value:a[d].value,selected:a[d].selected});null!=b&&(this.options=b)}},buildRendering:function(){var a=[];if(null!=this.srcNodeRef)for(var b=
this.srcNodeRef.getElementsByTagName("li"),d=0;d<b.length;d++)a.push({display:b[d].innerHTML,value:""+b[d].getAttribute("value"),selected:"true"==b[d].getAttribute("selected")});null==this.options&&(this.options=a);this.inherited(arguments)},startup:function(){this.setOptions(this.options);this.disableMouseStates||ws.html.addHoverClass(this.domNode,"wsSelectHover");this.useTinyArrow&&(this.arrowNode.className="wsTinyArrow",d.isIE&&setTimeout(d.hitch(this,"fixArrow"),10));this.setPreventMouseDefault&&
this.preventMouseDefaultOnNode(this.domNode)},fixArrow:function(){null!=this.arrowNode&&(this.arrowNode.style.zoom="",this.arrowNode.style.zoom=1)},setOptions:function(a){this.options=a;this.isMenuDirty=!0;for(var b=0,e=0;e<a.length;e++)a[e].selected&&(b=e);0<a.length&&this.setOption(b);this.enabled=1<a.length;d.toggleClass(this.domNode,"wsSelectDisabled",!this.enabled)},getMenu:function(){if(this.menu&&!this.isMenuDirty)return this.menu;this.menu?this.menu.destroyDescendants():this.createMenu();
for(var a=0;a<this.options.length;a++){var b;b=this.options[a].isSeparator?new g:new p({caption:this.options[a].display,disabled:this.options[a].disabled||!1,checked:this.disableCheck?!1:this.options[a].checked});this.options[a].disabled||(this.options[a]._onClick?b._onClick=this.options[a]._onClick:b.onClick=d.hitch(this,"setOption",a,!0));this.menu.addChild(b);b.startup()}this.isMenuDirty=!1;return this.menu},preventMouseDefaultOnNode:function(a){var b=function(a){a&&a.preventDefault&&a.preventDefault()};
this.connect(a,"onclick",b);this.connect(a,"onmousedown",b);this.connect(a,"onmouseup",b)},createMenu:function(){this.menu=new e;this.menu.startup();d.body().appendChild(this.menu.domNode);this.preventMouseDefaultOnNode(this.menu.domNode)},toggleMenu:function(){var a=this.getMenu();a.isShowing()||!this.enabled?a.close():a.open(this.domNode)},onKeyPress:function(a){a.keyCode==d.keys.ENTER&&ws.lang.setTimeout(this,function(){this.toggleMenu()},0)},sizeMyself:function(){if("byMenu"==this.size)var a=
this.getMenu().getBorderBoxWidth()-14;else"byValue"==this.size?(this.currentValueNode.style.width="",a=d._getMarginSize(this.currentValueNode).w+14):a=parseInt(this.size);d.contentBox(this.currentValueNode,{w:a});d.isIE&&setTimeout(d.hitch(this,"fixButtons"),10)},setOptionalLabelPrefixHTML:function(a){this.optionalLabelPrefix=a},setOption:function(a,b){this.staticMenuHeader||this.currentValue==this.options[a].value||(this.currentValueNode.innerHTML=null!=this.optionalLabelPrefix?this.optionalLabelPrefix+
this.options[a].display:this.options[a].display);null!=this.staticMenuHeader&&(this.currentValueNode.innerHTML=this.staticMenuHeader);this.currentValueNode.style.display=""==this.currentValueNode.innerHTML?"none":"";this.currentValue=this.options[a].value;this.currentIndex=a;this.sizeMyself();b&&this.valueChanged()},setOptionByValue:function(a){for(var b=0;b<this.options.length;b++)if(this.options[b].value==a)return this.setOption(b),!0;return!1},setClass:function(a){this.domNode.className="wsSelect "+
a},fixButtons:function(){null!=this.domNode&&(this.domNode.style.position="static",this.domNode.style.position="relative")},_onMouseDown:function(a){this.disabled||(this.disableMouseStates||d.addClass(this.domNode,"wsSelectClick"),this.onMouseDown(a))},_onMouseUp:function(a){this.disabled||(this.disableMouseStates||d.removeClass(this.domNode,"wsSelectClick"),this.onMouseUp(a))},_onMouseOut:function(a){this.disabled||(this.disableMouseStates||d.removeClass(this.domNode,"wsSelectClick"),this.onMouseOut(a))},
onMouseOver:function(){},onMouseDown:function(){},onMouseUp:function(){},onMouseOut:function(){},valueChanged:function(){}})})},"ws/address/SingleAddressField":function(){define("ws/address/SingleAddressField",["dojo/_base/declare","dojo","dijit","ws/address/AddressField"],function(f,k,d,b){return f([b],{templateString:"\x3cinput maxlength\x3d'${maxlength}' type\x3d'text' data-dojo-attach-point\x3d'field' data-dojo-attach-event\x3d'onkeydown: onKeyDown, onkeypress: onKeyPress' tabindex\x3d'${tabindex}' class\x3d'wsInput' style\x3d'width: ${fieldWidth};' value\x3d'${value}' /\x3e",
maxlength:Config.MaxFilterFieldLength,isSingle:!0,resizeSelf:function(){},scrollToEnd:function(){}})})},"ws/address/AddressField":function(){define("ws/address/AddressField","dojo/_base/declare dojo dijit dijit/_Widget dijit/_TemplatedMixin ws/address/PeoplePicker ws/address/AutoComplete ws/address/ABUtils ws/address/AllAddressModel".split(" "),function(f,k,d,b,a,h,l,e,p){return f("ws.address.AddressField",[b,a],{templateString:"\x3ctextarea data-dojo-attach-point\x3d'field' data-dojo-attach-event\x3d'onkeydown: onKeyDown, onkeypress: onKeyPress, onfocus: onFocus, onblur: onBlur' tabindex\x3d'${tabindex}' class\x3d'wsInput ${className}' style\x3d'float: left; height: 18px; overflow-x: hidden; overflow-y: auto; width: ${fieldWidth}; padding: 1px 2px;'\x3e${value}\x3c/textarea\x3e",
value:"",defaultValue:"",_wordSeparators:";,",_pickerMode:"",tabindex:500,minHeight:k.isMac?16:17,maxHeight:60,fieldWidth:"90%",className:"",autoComplete:null,startup:function(){this.selectedContacts=[];this.createPeoplePicker();this.connect(this.peoplePicker,"onOpen",k.hitch(this,function(){"autocomplete"==this._pickerMode&&this.autoComplete&&this.autoComplete.close();this._pickerMode="explicit"}));this.connect(this.peoplePicker,"onClose",k.hitch(this,function(){"explicit"==this._pickerMode&&(this._pickerMode=
"")}));this.createAutoComplete();this.connect(this.autoComplete,"onOpen",k.hitch(this,function(){"explicit"==this._pickerMode&&this.peoplePicker&&this.peoplePicker.close();this._pickerMode="autocomplete"}));this.connect(this.autoComplete,"onClose",k.hitch(this,function(){"autocomplete"==this._pickerMode&&(this._pickerMode="")}));this.setValue(this.value)},isAutoOrPickerOpen:function(){return this._pickerMode},createPeoplePicker:function(){this.peoplePicker||(ws.address.AddressField.prototype.peoplePicker=
new h,this.peoplePicker.setModel(new p({fetchDataOnInit:!1,sortable:!0})),this.peoplePicker.model.initData())},createAutoComplete:function(){this.autoComplete||(ws.address.AddressField.prototype.autoComplete=new l,this.autoComplete.startup())},togglePeoplePicker:function(a){"explicit"==this._pickerMode?this.peoplePicker.close():(this.peoplePicker.showHighlight(!1),this.peoplePicker.searchAndOpen("",this._getAnchorNode(a),k.hitch(this,this.onContactSelected)),clearTimeout(this.keypressTimeout),this.field.focus())},
getValue:function(){var a=this.field.value==this.defaultValue?"":k.trim(this.field.value);return a=a.replace(/,[, ]*/g,",")},getAddressList:function(a,b){return e.getAddressList(this.getValue(),a,b)},invalidAddresses:function(){return e.invalidAddresses(this.getAddressList())},setValue:function(a,b,d){this.selectedContacts=[];a==this.defaultValue?this.field.value=a:((a=a||"")&&"string"==typeof a&&(a=a.replace(/, */g,", "),a=a.replace(/; */g,"; "),a=a.replace(/\s+$/,"")),""==k.trim(a)?this.field.value=
this.defaultValue:this.isSingle||";"==a.charAt(a.length-1)||","==a.charAt(a.length-1)?this.field.value=b?a:a+" ":this.field.value=a+", ");this.resizeSelf(d);this._updateClass()},_updateClass:function(){""!=this.defaultValue&&k.toggleClass(this.field,"wsInputDefault",this.field.value==this.defaultValue)},onFocus:function(){k.publish("AddressFieldFocusChange",[this]);this.field.value==this.defaultValue&&(this.field.value="");this._updateClass();this.field.focus()},onBlur:function(){k.publish("AddressFieldBlurChange",
[this]);""==k.trim(this.field.value)&&(this.field.value=this.defaultValue);this._updateClass()},onKeyDown:function(a){if(k.isIE)if(a.keyCode==k.keys.ESCAPE)"explicit"==this._pickerMode?this.peoplePicker.close():"autocomplete"==this._pickerMode&&this.autoComplete.close(),a.preventDefault();else if(a.keyCode==k.keys.BACKSPACE)this.onKeyPress(a)},onKeyPress:function(a){a.stopPropagation();this.autoComplete&&"autocomplete"==this._pickerMode&&this.autoComplete.processSpecialKeys(a)?k.publish("AddressFieldKeyPressHandle",
[this,a.keyCode,!0]):this.peoplePicker&&"explicit"==this._pickerMode&&this.peoplePicker.processKeyPress(a)?k.publish("AddressFieldKeyPressHandle",[this,a.keyCode,!0]):(k.publish("AddressFieldKeyPressHandle",[this,a.keyCode,!1]),a.keyCode==k.keys.ENTER?k.stopEvent(a):(a.target.selectionStart!=a.target.textLength||";"!=a.keyChar&&","!=a.keyChar||(this.field.value+=a.keyChar+" ",k.stopEvent(a)),this.keypressTimeout&&clearTimeout(this.keypressTimeout),this.keypressTimeout=ws.lang.setTimeout(this,"_onKeyPress",
100,a),this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=ws.lang.setTimeout(this,"resizeSelf",150)))},_getAnchorNode:function(a){var b=a&&a.domNode?a.domNode:null;return b=!b&&a&&a.tagName?a:this.anchorNode||this.field},_onKeyPress:function(a){a=this.matchText();a=null==a?"":k.trim(a);var b=this.autoComplete&&"autocomplete"==this._pickerMode;this.peoplePicker&&"explicit"==this._pickerMode&&this.peoplePicker.close();""==a?b&&this.autoComplete.close():this.field.value!=this._lastValue&&
this.autoComplete&&(this.autoComplete.isActive||this.autoComplete.activate(this._getAnchorNode(),k.hitch(this,this.onContactSelected)),b=this.field.value.substring(0,this._matchStart),b=e.getAddressList(b,!1,!0),this.autoComplete.processKeyPress(a,b));this._lastValue=this.field.value},matchText:function(){var a=this.field.value,b=this._lastValue?this._lastValue:"",d=this._wordSeparators,e=-1;if(a==b)return this._matchValue;var f=a.length>b.length?b.length:a.length;for(i=0;i<f;++i)if(a.charAt(i)!=
b.charAt(i)){e=i;break}0>e&&(e=a.length-1);for(b=e;0<b&&0>d.indexOf(a.charAt(b));)--b;for(;e<a.length&&0>d.indexOf(a.charAt(e));)e++;for(a=a.substring(b,e);0<a.length&&(0<=d.indexOf(a.charAt(0))||" "==a.charAt(0));)a=a.substring(1),++b;this._matchValue=a.toLowerCase();this._matchStart=b;this._matchEnd=e;return a},onContactSelected:function(a){if(a){this.selectedContacts.push(a);var b=a.composeValue;""!=k.trim(b)&&(this.autoComplete&&"autocomplete"==this._pickerMode?(this.matchText(),this.isSingle?
this.field.value=b:(this._matchEnd==this.field.value.length&&(b+=", "),0<=this._matchStart&&0<=this._matchEnd&&(this.field.value=this.field.value.substring(0,this._matchStart)+b+this.field.value.substring(this._matchEnd))),this.setInsertionPoint(-1),this.clearMatch(),this.autoComplete.close()):(b=this.field.value,b=b.replace(/^\s+/,""),b=b.replace(/\s+$/,""),this.field.value=b,this.isSingle||(""==k.trim(b)?this.field.value=a.composeValue+", ":";"==b.charAt(b.length-1)||","==b.charAt(b.length-1)?this.field.value+=
" "+a.composeValue+", ":this.field.value+=", "+a.composeValue+", ",this.scrollToEnd())),this.resizeSelf(),this.focus())}},setInsertionPoint:function(a){this.setSelectionRange(a,a);0>a&&this.scrollToEnd()},setSelectionRange:function(a,b){if(0>a||a>this.field.value.length)a=this.field.value.length;if(0>b||b>this.field.value.length)b=this.field.value.length;b<a&&(b=a);if(this.field.setSelectionRange)this.field.setSelectionRange(a,b);else if(this.field.createTextRange){var d=this.field.createTextRange();
d.collapse(!0);d.moveEnd("character",b);d.moveStart("character",a);d.select()}},clearMatch:function(){this._matchValue="";this._insertionPoint=this._matchEnd=this._matchStart=-1;this._lastValue=this.value},focus:function(a){a=a?a:0;try{this.field.focus()}catch(n){3>a&&(a++,ws.lang.setTimeout(this,this.focus,200,a))}},resizeSelf:function(){this.createMeasureNode();this.measureNode.innerHTML=this.field.value.replace(/\n/g,"\x3cbr\x3e");this.measureNode.style.width=parseInt(this.field.style.width)+"px";
var a=Math.min(this.maxHeight,Math.max(this.minHeight,k.contentBox(this.measureNode).h));a!=parseInt(this.field.style.height)&&(this.field.style.height=a+"px","explicit"==this._pickerMode?this.peoplePicker.move(this.field):"autocomplete"==this._pickerMode&&this.autoComplete.move(this.field),this.onResizedSelf())},createMeasureNode:function(){this.measureNode||(this.measureNode=k.create("div",{style:{position:"absolute",visibility:"hidden",top:"-10000px",left:"10000px",fontSize:"12px"}},k.body()))},
onResizedSelf:function(){},scrollToEnd:function(){this.field.scrollTop=1E4}})})},"ws/address/PeoplePicker":function(){define("ws/address/PeoplePicker","dojo/_base/declare dojo/text!ws/address/PeoplePicker.html dojo/text!ws/address/PeoplePicker.css dojo dijit ws/widget/ListView ws/address/PeoplePickerGridModel dijit/layout/BorderContainer ws/address/AddressModel ws/string ws/widget/Pane ws/widget/popup ws/widget/util".split(" "),function(f,k,d,b,a,h,l){return f([h],{templateString:k,css:{templateString:d},
wrapperModelClass:l,showHeader:!1,highlightRow:0,rowHeight:20,autosizeColumnId:"NameAndEmail",addrFieldContactSelectedCB:null,initView:function(){this.columns=[{id:"NameAndEmail",width:"75px"}];this.inherited(arguments);this.subscribe("Suite/onKeyOnPress","onKeyPress")},showHighlight:function(a){b.toggleClass(this.grid.domNode,"showHighlight",a)},handleCellClick:function(a){if(a=this.model.getRow(a.rowIndex))this.onContactSelected(a)},onContactSelected:function(a){a&&this.addrFieldContactSelectedCB&&
this.addrFieldContactSelectedCB(a)},searchAndOpen:function(a,d,g){this.addrFieldContactSelectedCB=g;this.highlightRow=0;this.model.search(a);if(this.model.isLoading())this.showRolodex(!1),a||(this.showRolodexHandle=b.connect(this.model,"modelUpdated",b.hitch(this,function(){this.showRolodex(!a);this.onResized();b.disconnect(this.showRolodexHandle);this.showRolodexHandle=null}))),ws.widget.popup({popup:this,around:d,padding:this.padding||[0,-1]});else{if(0==this.model.getRowCount()){ws.widget.popup.close(this);
return}this.isShowing()||(this.showRolodex(!a),ws.widget.popup({popup:this,around:d,padding:this.padding||[0,-1]}),this.scrollToRow(0))}b.isMac&&b.isMoz&&(this.domNode.style.overflow="auto",ws.lang.setTimeout(this,function(){this.domNode.style.overflow=""},0))},move:function(d,f){a.placeOnScreenAroundElement(this.popupNode,d,{BL:"TL",TL:"BL"});if(f){var e=b.marginBox(this.popupNode);f.offsetHeight&&(this.popupNode.style.top=e.t+f.offsetHeight+"px");f.offsetWidth&&(this.popupNode.style.left=e.l+f.offsetWidth+
"px")}},close:function(){ws.widget.popup.close(this)},onOpen:function(){this.onResized()},onClose:function(){},showRolodex:function(a){this.rolodexPane.setShowing(a);if(a){if(!this.rolodexBuilt){var d=Array(ws.string.alphabet.length);ucLetters=ws.string.alphabet.toUpperCase();for(a=0;a<ws.string.alphabet.length;a++)d.push('\x3cspan class\x3d"wsLink"\x3e'+ucLetters.charAt(a)+"\x3c/span\x3e");this.rolodexPane.domNode.innerHTML=d.join("");this.connect(this.rolodexPane.domNode,"onclick",b.hitch(this,
"scrollToLetter"));this.rolodexBuilt=!0}d=b.query("span",this.domNode);for(a=0;a<ws.string.alphabet.length;a++)b.toggleClass(d[a],"ppLinkDisabled",-1==this.model.getRolodex()[a])}},scrollToLetter:function(a){if(a.target&&(a=a.target.innerHTML)&&1==a.length&&(a=ws.string.alphabet.indexOf(a.toLowerCase()),a=this.model.getRolodex()[a],-1!=a)){this.grid.focus.setFocusIndex(a,0);this.scrollToRow(a);var b=this.grid.rows.overRow;this.grid.rows.setOverRow(a);this.onMouseOutRow({rowIndex:b});this.onMouseOverRow({rowIndex:a})}},
processKeyPress:function(a){if(!this.isShowing())return!1;var d=!0;switch(a.keyCode){case b.keys.TAB:case b.keys.ENTER:var e=this.model.getRow(this.highlightRow);this.onContactSelected(e);break;case b.keys.DOWN_ARROW:this.setHighlightRow(this.highlightRow+1,!0);break;case b.keys.UP_ARROW:this.setHighlightRow(this.highlightRow-1,!1);break;case b.keys.ESCAPE:ws.widget.popup.close(this);break;default:d=!1}d&&a.preventDefault();return d},setHighlightRow:function(a,b){0>a?a=0:a>=this.model.getRowCount()&&
(a=this.model.getRowCount()-1);this.highlightRow=a;var d=this.grid.views.views[0];if(d.getCellNode(this.highlightRow,0)){var e=!1;if(b){var f=Math.floor((d.scrollboxNode.scrollTop+this.grid.scroller.windowHeight)/this.rowHeight-1);this.highlightRow>f&&(e=!0)}else f=Math.floor(d.scrollboxNode.scrollTop/this.rowHeight+1),this.highlightRow<f&&(e=!0);e&&this.scrollOnKeyPress(b?d.scrollboxNode.scrollTop+this.rowHeight:d.scrollboxNode.scrollTop-this.rowHeight)}this.model.modelUpdated()},getRowClasses:function(a){var b=
this.inherited(arguments);a==this.highlightRow&&b.push("row-highlight");return b},getHighlightedContact:function(){return 0<this.model.getRowCount()?this.model.getRow(0):null},onKeyPress:function(a){this.isShowing()&&this._onKeyPress(a)},onEnterKeyPress:function(a){a=this.model.getRow(a);this.onContactSelected(a)},onOtherKeyPress:function(a){if(Config.EnableKeyboardShortcuts)switch(a.keyCode){case b.keys.ESCAPE:ws.widget.popup.close(this)}}})})},"ws/widget/ListView":function(){define("ws/widget/ListView",
"dojo/_base/declare dojo/text!ws/widget/ListView.css dojo dijit dojo/dom-geometry dojo/dom-class dojo/query dojo/_base/lang dijit/registry dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojox/grid/Grid dojox/grid/drag ws/html ws/string ws/widget/Dialogs ws/widget/util".split(" "),function(f,k,d,b,a,h,l,e,p,g,n,t){dojox.grid._grid.GridView.prototype.hasScrollbar=function(){return!0};dojox.grid._grid.GridView.prototype._doscroll=dojox.grid._grid.GridView.prototype.doscroll;dojox.grid._grid.GridView.prototype.doscroll=
function(a){window.clearTimeout(this.scrollTimeout);var b=d.isChrome?0:50;l(".messageListView .dojoxGrid-header").toggleClass("headerShadow",0!=this.scrollboxNode.scrollTop);this.scrollTimeout=ws.lang.setTimeout(d.hitch(this,"_doscroll"),b,a)};d.extend(dojox.grid.Grid,{onMoveColumn:function(a,b,d){},onEndDragColumn:function(){},onKeyDown:function(){}});d.mixin(dojox.grid,{arrayMove:function(a,b,d){var e=a[b];a.splice(b,1);dojox.grid.arrayInsert(a,d<b?d:d-1,e)},moveIndex:function(a,b,d){return a==
b?d-(a<d):a-(a>b)+(a>=d)}});d.extend(dojox.grid.headerBuilder,{getCellX:function(a){return d.isFF&&!a.offsetX?a.layerX:a.offsetX},endResizeColumn:function(a){this.grid&&this.grid.ownerListView&&(this.grid.ownerListView.checkColumnSizes(a.index),this.grid.ownerListView.autosizeColumns(),this.grid.ownerListView.onHeaderColumnChange())},beginMoveColumn:function(a){d.stopEvent(a);if(a.cellNode&&a.cellNode.parentNode){var b={headerNode:a.cellNode.parentNode,colIndex:a.cellIndex,cellNode:a.cellNode,rowLeft:d.position(this.grid.views.views[0].headerNode,
!0).x},e=d.hitch(this,"startDragColumn",b),f=d.hitch(this,"doDragColumn",b),b=d.hitch(this,"endDragColumn",b);dojox.grid.drag.start(a.cellNode.parentNode,f,b,a,e)}},startDragColumn:function(a,b){this.moving=!0;this.cols=this.grid.views.views[0].structure.cells[0];a.cellNode.style.backgroundColor="#ddd";a.headerNode.style.cursor="move"},doDragColumn:function(a,b){var d=this.findColumnByX(a.colIndex,b.clientX-a.rowLeft);0<=d&&d!=a.colIndex&&(this.moveColumn(a.colIndex,d),a.colIndex=d)},endDragColumn:function(a){a.headerNode.style.cursor=
"";a.cellNode.style.backgroundColor="";this.moving=!1;this.grid.onEndDragColumn()},findColumnByX:function(b,d){var f=0,g,h=b;l(".dojoxGrid-header .dojoxGrid-cell",this.grid.domNode).some(e.hitch(this,function(e,l,m){g=a.getMarginBox(e).w;if(f+g>d)return h=l<b?f<d?l:b:f+g>d?l-1:b,!0;f+=g;return!1}));return h},moveColumn:function(a,b){var e=b>a?1:0,f=b+e,g=d.query(".dojoxGrid-cell",this.grid.views.views[0].headerContentNode);g.length-1>b&&(g[0].parentNode.insertBefore(g[a],g[f]),dojox.grid.arrayMove(this.cols,
a,f),this.grid.onMoveColumn(a,f,e),e=this.grid.getSortIndex(),g=this.grid.getSortAsc(),e=dojox.grid.moveIndex(e,a,f)+1,this.grid.sortInfo=e*(g?1:-1))},domousemove:function(a){var b=this.overRightResizeArea(a)?"ew-resize":this.overLeftResizeArea(a)?"ew-resize":"";b&&!this.canResize(a)&&(b="default");var d=0<=a.cellIndex&&this.grid.views.views[0].structure.cells[0][a.cellIndex];!b&&d&&this.grid.model.canSort(a.cellIndex+1)&&(b="pointer");a.sourceView.headerNode.style.cursor=b||""},domousedown:function(a){dojox.grid.drag.dragging||
((this.overRightResizeArea(a)||this.overLeftResizeArea(a))&&this.canResize(a)?this.beginColumnResize(a):this.beginMoveColumn(a))}});return f([g,n,t],{_earlyTemplatedStartup:!0,speedUp:!1,wrapperModelClass:null,fixedRowHeight:!0,cellWidthPad:10,quickActionCol:3,showHeader:!0,dragType:null,preventFixColumns:!1,pinMenu:-1,css:{templateString:k},setModel:function(a){a!==this.model&&(this.model=a,this.gridModel=this.wrapperModelClass?new this.wrapperModelClass(null,null,this.model):this.model,this.initView())},
initView:function(){d.toggleClass(this.domNode,"listViewFixedRowHeight",this.fixedRowHeight);this.grid.autosizeColumnId=this.autosizeColumnId;var a=this.grid;this.grid.ownerListView=this;this.updateColumns();a.onCellClick=d.hitch(this,"onCellClick");a.onStyleRow=d.hitch(this,"onStyleRow");a.onHeaderCellClick=d.hitch(this,"onHeaderCellClick");this.initHoverControl();this.initDrag();d.connect(a,"buildViews",this,"initDrag");d.connect(a,"onHeaderContextMenu",this,"onHeaderContextMenu");d.connect(a,"onMoveColumn",
this,"onMoveColumn");d.connect(a,"onEndDragColumn",this,"onEndMoveColumn");this.grid.domNode.onfocus=null;d.connect(this.gridModel,"modelUpdated",d.hitch(this,function(){this.gridModel.allChange();this.updateHeader();this.updateZeroRowsView();this.updateToolbarState()}));a.fastScroll=!1;a.setModel(this.gridModel);this.updateZeroRowsView();this.updateToolbarState();p.byId(this.grid.domNode.parentNode.getAttribute("widgetId")).onResized=d.hitch(this,function(){this.grid.resize();this.autosizeColumns()})},
onResized:function(){this.stackWidget&&this.stackWidget.resize?this.stackWidget.resize():this.layoutWidget&&(this.domNode.style.overflow="hidden",this.layoutWidget.resize(a.getContentBox(this.domNode)))},updateGrid:function(){this.autosizeColumns();this.updateHeader();this.grid.update()},toggleSelectRow:function(a){this.model.toggleSelectRow(a);this.lastSelectRow=a;this.updateHeader();this.updateToolbarState()},onCellClick:function(a){var b="Select"in this.gridModel.columns,e=this.model.getCurrentRow?
this.model.getCurrentRow():-1;if(b&&a.shiftKey)-1!=e&&(this.model.toggleSelectRow(e,!0),this.lastSelectRow=e),this.model.selectRange&&"lastSelectRow"in this?(b="ON"==this.gridModel.getDatum(this.lastSelectRow,this.gridModel.columns.Select)[0],this.model.selectRange(Math.min(this.lastSelectRow,a.rowIndex),Math.max(this.lastSelectRow,a.rowIndex),b,d.hitch(this,function(){this.lastSelectRow=a.rowIndex;this.updateHeader();this.updateToolbarState()}))):(this.model.toggleSelectRow(a.rowIndex),this.lastSelectRow=
a.rowIndex,this.updateHeader(),this.updateToolbarState());else if(b&&(d.isMac?a.metaKey:a.ctrlKey))-1!=e&&this.model.toggleSelectRow(e,!0),this.toggleSelectRow(a.rowIndex);else switch(a.cellIndex){case this.gridModel.columns.Select:this.toggleSelectRow(a.rowIndex);break;case this.gridModel.columns.Hover:this.handleHoverControlClick(a);break;default:this.handleCellClick(a)}},handleCellClick:function(a){},updateToolbarState:function(){},onHeaderContextMenu:function(a){},onHeaderColumnChange:function(){},
initDrag:function(){this.dragSource&&this.dragSource.unregister();this.dragType&&ws.lang.ensureLayersLoadedSoon(d.hitch(this,function(){require(["ws/dnd/GridDragSource"],d.hitch(this,function(a){this.dragSource=new a(this.grid.views.views[0].contentNode,this.dragType,this)}))}))},scrollToRow:function(a){a=this.grid.scroller.findScrollTop(a);this.grid.views.views[0].scrollboxNode.scrollTop=a},onStyleRow:function(a){this.disableHover||(a.customClasses=-1!=this.pinMenu?a.customClasses+(a.index==this.pinMenu?
" dojoxGrid-row-over":""):a.customClasses+(a.over?" dojoxGrid-row-over":""));a.customClasses+=" "+this.getRowClasses(a.index).join(" ")},getRowClasses:function(a){var b=[];"Select"in this.gridModel.columns&&"ON"==this.gridModel.getDatum(a,this.gridModel.columns.Select)[0]&&b.push("row-selected");this.model.isCurrentRow&&this.model.isCurrentRow(a)&&b.push("row-current");return b},fixColumns:function(){if(!this.preventFixColumns){var b=this.grid.views.views[0],e=a.getContentBox(b.scrollboxNode).h,b=
a.getContentBox(b.contentNode).h<e;this.grid.views.views[0].noscroll=b;if(d.isMac&&!d.isSafari||7<=d.isSafari)b=!0;return b}},initHoverControl:function(){this.gridModel.getHoverColumnCB=d.hitch(this,"getHoverColumn");d.connect(this.grid,"onMouseOverRow",d.hitch(this,"onMouseOverRow"));d.connect(this.grid,"onMouseOutRow",d.hitch(this,"onMouseOutRow"));d.connect(document.body,"onmouseover",d.hitch(this,"handleMouseOverNotRow"));this.rightClickMenuDefinition&&d.connect(this.grid,"onRowContextMenu",this,
"onContextMenu");this.disableHover=!1;d.subscribe("dragStart",this,function(){this.disableHover=!0});d.subscribe("dragEnd",this,function(){this.disableHover=!1})},getHoverColumn:function(a,b){var d=this.getQuickActionMenu(!0),d=d&&d.isShowing()?this.quickActionRow:this.grid.rows.overRow;return a!=d||this.disableHover||-1!=this.pinMenu?b?b:"":b?b+this.hoverColumnHtml:this.hoverColumnHtml},_overRow:-1,onMouseOverRow:function(a){a.rowIndex!=this._overRow&&"Hover"in this.gridModel.columns&&(-1!=this._overRow&&
this.grid.updateRow(this._overRow),this._overRow=a.rowIndex,this.grid.updateRow(a.rowIndex))},handleMouseOverNotRow:function(a){if("none"!=this.domNode.style.display){if(d.isIE){if(null==a.target.parentNode)return;var b=this.grid.views.views[0].scrollboxNode;for(a=a.target;a;){if(11==a.nodeType||a==b)return;a=a.parentNode}}else if(a.rowNode)return;b=this.grid.rows.overRow;-1<b&&(this.grid.rows.setOverRow(-1),this.onMouseOutRow({rowIndex:b}))}},onMouseOutRow:function(a){"Hover"in this.gridModel.columns&&
(this._overRow=-1,this.grid.updateRow(a.rowIndex))},onMouseMove:function(a){var b=!0;d.isIE&&("undefined"==typeof this._lastMouseX&&(this._lastMouseX=a.pageX,this._lastMouseY=a.pageY),b=0!=a.pageX-this._lastMouseX&&0!=a.pageY-this._lastMouseY?!0:!1);b&&(this.grid.onMouseOverRow=this._origMouseOverRow,d.disconnect(this._mouseMoveConnect),this._mouseMoveConnect=null,this._lastMouseX=this._lastMouseY=void 0)},getQuickActionMenu:function(a){if(this.quickActionMenu)return this.quickActionMenu;if(a)return null;
this.createQuickActionMenu();return this.quickActionMenu},getRightClickMenu:function(a){this.rightClickMenu||a||(this.rightClickMenu=ws.widget.createMenu(this.rightClickMenuDefinition),d.connect(this.rightClickMenu,"onClose",this,"OnCloseContextMenu"));return this.rightClickMenu},handleHoverControlClick:function(a){if(d.hasClass(a.target,"quickActionHover")){var b=this.getQuickActionMenu();b.isShowing()&&this.quickActionRow==a.rowIndex?b.close():(this.quickActionRow=a.rowIndex,this.updateQuickActionMenu(b),
b.open(a.target),this.selectOnlyQuickActionRow())}},onContextMenu:function(a){d.stopEvent(a);var b=this.getRightClickMenu();b.isShowing()&&b.close();this.quickActionRow=this.pinMenu=a.rowIndex;this.updateRightClickMenu(b);b.open(a.pageX,a.pageY);this.selectOnlyQuickActionRow()},OnCloseContextMenu:function(a){a=this.pinMenu;this.pinMenu=-1;this.grid.updateRow(a)},selectOnlyQuickActionRow:function(){this.model.isAnySelected&&this.model.isAnySelected()&&(this.model.deselectAll(),this.model.toggleSelectRow(this.quickActionRow))},
createQuickActionMenu:function(){this.quickActionMenu=ws.widget.createMenu(this.quickActionMenuDefinition);d.connect("after",this.quickActionMenu,"close",d.hitch(this,function(){this.grid.update(this.quickActionRow,this.gridModel.columns.Hover)}));return this.quickActionMenu},updateQuickActionMenu:function(a){},createRightClickMenu:function(){},onHeaderCellClick:function(a){this.gridModel&&a.cell.index==this.gridModel.columns.Select&&this.model.selectAll?this.model.isAllInViewSelected()?this.model.deselectAll():
this.model.selectAll():this.grid.setSortIndex(a.cell.index);ws.widget.popup.closeAllPopups()},updateHeader:function(){if(this.showHeader&&this.gridModel){var a;this.model.isAllInViewSelected?a=this.model.isAllInViewSelected():(a=this.model&&this.model.isAllSelReal(),this.model&&this.model.getSearchString&&null!=this.model.getSearchString()&&this.model.getRowCount()==ws.lang.getPropCount(this.model.selectedUids)&&(a=!0));a=a?"iconCheckboxOn":"iconCheckboxOff";this.grid.views.views[0].structure.rows[0][this.gridModel.columns.Select].name=
"\x3csvg class\x3d'gridSVGIcon "+a+"'\x3e\x3cuse xlink:href\x3d'#"+a+"'\x3e\x3c/use\x3e\x3c/svg\x3e";this.grid.views.views[0].renderHeader();this.grid.headerNode.style.display="block"}else this.grid.headerNode.style.display="none"},updateZeroRowsView:function(){var a=0==this.gridModel.getRowCount(),b=this.model.isLoading&&this.model.isLoading(),e=this.model.isErrorState&&this.model.isErrorState();if(a||b||e){if(!this.zeroRowsNode){this.zeroRowsNode=document.createElement("div");this.zeroRowsNode.className=
"loading";this.grid.domNode.appendChild(this.zeroRowsNode);ws&&ws.WebSuite&&ws.WebSuite.SidePanel&&ws.WebSuite.SidePanel.setupAdScroll(this.zeroRowsNode,"listview");var f=document.createElement("div");f.style.position="relative";f.style.paddingTop="27px";f.innerHTML="\x3ctable\x3e\x3ctr\x3e\x3ctd valign\x3d'center'\x3e\x3cdiv class\x3d'lmsg' style\x3d'display:none'\x3e\x3c/div\x3e\x3cdiv class\x3d'emsg' style\x3d'display:none'\x3e\x3c/div\x3e\x3cdiv class\x3d'zmsg' style\x3d'display:none'\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e";
this.zeroRowsNode.innerHTML="";this.zeroRowsNode.appendChild(f);var f=d.query(".zmsg",this.zeroRowsNode)[0],g=this.getZeroRowsMessage();"string"===typeof g?f.innerHTML=g:f.appendChild(g);this.postCreateZeroRowsMessage()}b&&"none"!=this.domNode.style.display&&(this.lastLoadingMsg=this.getLoadingMessage(),d.publish("WSFeedbackStart",[this.lastLoadingMsg]));d.query(".emsg",this.zeroRowsNode)[0].innerHTML=this.getErrorMessage();this.setupZeroRowsMessage(b,e)}!b&&this.lastLoadingMsg&&d.publish("WSFeedbackEnd",
[this.lastLoadingMsg]);if("boolean"!=typeof this.lastShowZeroRow||this.lastShowZeroRow!==a)this.grid.headerNode.style.display=a?"none":"block",this.grid.viewsNode.style.display=a?"none":"block",this.zeroRowsNode&&(ws.html.setShowing(this.zeroRowsNode,a),this.onResized());this.lastShowZeroRow=a},getLoadingMessage:function(){return Config.Strings.Loading},getErrorMessage:function(){return Config.Strings.Error},getZeroRowsMessage:function(){return Config.Strings.NoMatchesFound},postCreateZeroRowsMessage:function(){},
setupZeroRowsMessage:function(a,b){var e=d.query(".lmsg",this.zeroRowsNode)[0],f=d.query(".emsg",this.zeroRowsNode)[0],g=d.query(".zmsg",this.zeroRowsNode)[0];ws.html.setShowing(e,!1);ws.html.setShowing(f,!1);ws.html.setShowing(g,!1);a?ws.html.setShowing(e,!0):b?ws.html.setShowing(f,!0):(ws.html.setShowing(g,!0),this.beforeShowZeroRowsMessage(a,b))},beforeShowZeroRowsMessage:function(){},baseSprites:{chkBox:{NONE:"",ON:"iconCheckboxOn",OFF:"iconCheckboxOff"}},getColMinMax:function(a){var b={min:50,
max:0};this.columnDefaults&&(a=this.columnDefaults[a],a.min&&(b.min=a.min),a.max&&(b.max=a.max));return b},limitMinMax:function(a,b){var d=b;b<a.min?d=a.min:b>a.max&&(d=a.max);return d},autosizeColumns:function(b){var d=this.gridModel.columns[this.autosizeColumnId],e=this.grid.views.views[0];b||this.fixColumns();b=a.getMarginBox(this.grid.domNode).w;var f=17;_ws_isOpenerWS()?f=opener.ws.WebSuite.scrollbarWidth:ws&&ws.Websuite&&ws.WebSuite.scrollbarWidth&&(f=ws.WebSuite.scrollbarWidth);b-=f+4;if(!(0>
b)){for(var f=e.structure.rows[0],g=this.cellWidthPad,h=0,l=0;l<f.length;l++){var k=f[l];k.index==d||k.hidden||(b-=parseInt(k.unitWidth)+g,h++)}b-=this.widthPad?this.widthPad:0;this.grid.autoColWidth=b;e.setColWidth(d,b);e.update()}},checkColumnSizes:function(b){var d=this.gridModel.columns[this.autosizeColumnId];if(0<=d){for(var e=a.getContentBox(this.grid.domNode).w-18,f=this.grid.views.views[0],g=f.structure.rows[0],h=this.cellWidthPad,l=this.getColMinMax(g[d].id),k=g[b],n=this.getColMinMax(k.id),
q=0;q<g.length;q++){var p=g[q];p.index==d||p.hidden||(e=p.index==b?e-this.limitMinMax(n,parseInt(p.unitWidth)+h):e-(parseInt(p.unitWidth)+h))}e-=h;q=Math.max(l.min,e);k=parseInt(k.unitWidth)+h;g=parseInt(g[d].unitWidth)+h;b==d?k>e?(f.setColWidth(d,q),this.autoWidthSizedTo=q):k<l.min?(f.setColWidth(d,l.min),this.autoWidthSizedTo=l.min):this.autoWidthSizedTo=k:(n=this.limitMinMax(n,k),n!=k&&f.setColWidth(b,n),g>e&&(q=this.limitMinMax(l,e),f.setColWidth(d,q)));f.update()}},onMoveColumn:function(a,b){var e=
d.hitch(this,function(a){var b=d.filter(this.columns,function(a){return!a.hidden});return a>=b.length?this.columns.length:d.indexOf(this.columns,b[a])});a=e(a);b=e(b);dojox.grid.arrayMove(this.columns,a,b);for(e=0;e<this.columns.length;e++)this.gridModel.columns[this.columns[e].id]=e},onEndMoveColumn:function(){this.updateColumns();this.onHeaderColumnChange()},_onKeyPress:function(a){if(this.isShowing()){var b=!1,e=this.grid,f=e.views.views[0],g=this.model.getCurrentRow?this.model.getCurrentRow():
-1;-1==g&&(g=e.rows.overRow);var h=-1,l=this.gridModel.getRowCount(),k=Math.floor(e.scroller.pageHeights[0]/Math.min(l,e.scroller.rowsPerPage)),n=this.grid.views.views[0].scrollboxNode.offsetHeight,q=!1;if(Config.EnableKeyboardShortcuts&&a.keyChar&&d.isString(a.keyChar)&&!(a.ctrlKey||a.altKey||a.metaKey)){if(0<=g)switch(a.keyChar.toLowerCase()){case Config.Strings.KeyListToggleCheckItem:this.toggleSelectRow(g);b=!0;break;case Config.Strings.KeyListOpenQuickActionMenu:ws.lang.ensureLayersLoaded(d.hitch(this,
function(){var a=this.getQuickActionMenu(!1);a&&a.isShowing()&&this.quickActionRow!=g&&a.close();var b=f.getCellNode(g,this.quickActionCol);if(b){this.quickActionRow=g;this.updateQuickActionMenu(a);for(var e=null,h=0;h<b.childNodes.length;h++)if(d.hasClass(b.childNodes[h],"quickActionHover")){e=b.childNodes[h];break}e&&a.open(e);this.selectOnlyQuickActionRow()}})),b=!0}}else if(Config.EnableKeyboardShortcuts){if(ws.widget.popup.isAnyPopupOpen())return;var p=a.keyCode;d.isMac&&a.metaKey&&(a.keyCode==
d.keys.UP_ARROW?p=d.keys.PAGE_UP:a.keyCode==d.keys.DOWN_ARROW?p=d.keys.PAGE_DOWN:a.keyCode==d.keys.LEFT_ARROW?p=d.keys.HOME:a.keyCode==d.keys.RIGHT_ARROW&&(p=d.keys.END));switch(p){case d.keys.UP_ARROW:0>g&&(g=Math.floor((f.scrollboxNode.scrollTop+this.grid.scroller.windowHeight)/k));1<=g&&(h=g-1);q=b=!0;break;case d.keys.DOWN_ARROW:0>g&&(g=Math.floor(f.scrollboxNode.scrollTop/k));g+1<l&&(h=g+1);q=b=!0;break;case d.keys.LEFT_ARROW:case d.keys.RIGHT_ARROW:this.toggleSelectRow(g);break;case d.keys.PAGE_UP:0>
g&&(g=Math.min(this.grid.scroller.lastVisibleRow,l-1));h=this.grid.scroller.firstVisibleRow;if(g==h||g==h+1)h=g-Math.floor(n/k),h=Math.max(0,h);q=b=!0;break;case d.keys.PAGE_DOWN:0>g&&(g=this.grid.scroller.firstVisibleRow);h=this.grid.scroller.lastVisibleRow;if(g==h||g==h-1)h=g+Math.floor(n/k);h=Math.min(h,l-1);q=b=!0;break;case d.keys.HOME:h=0;q=b=!0;break;case d.keys.END:h=l-1;q=b=!0;break;case d.keys.DELETE:k=[];d.isFunction(this.model.getSelectedUids)?k=this.model.getSelectedUids():d.isFunction(this.gridModel.getSelectedUids)&&
(k=this.gridModel.getSelectedUids());if(k.length)this.onDelKeyPress(k);else if(0<=g)this.onDelKeyPress(g);b=!0;break;case d.keys.BACKSPACE:if(d.isMac){k=[];d.isFunction(this.model.getSelectedUids)?k=this.model.getSelectedUids():d.isFunction(this.gridModel.getSelectedUids)&&(k=this.gridModel.getSelectedUids());if(k.length)this.onDelKeyPress(k);else if(0<=g)this.onDelKeyPress(g);b=!0}break;case d.keys.ENTER:if(0<=g)this.onEnterKeyPress(g);b=!0}}-1!=h&&(-1!=(this.model.getCurrentRow?this.model.getCurrentRow():
-1)?(k=e.rows.overRow,e.rows.setOverRow(-1),this.onMouseOutRow({rowIndex:k}),this.setCurrentRow(h),this._mouseMoveConnect||(this._origMouseOverRow||(this._origMouseOverRow=this.grid.onMouseOverRow),this.grid.onMouseOverRow=function(){},this._mouseMoveConnect=d.connect(d.doc.documentElement,"onmousemove",this,"onMouseMove"))):(this.clearMouseHandler(),k=e.rows.overRow,e.rows.setOverRow(h),this.onMouseOutRow({rowIndex:k}),this.onMouseOverRow({rowIndex:h})),q&&this.scrollIntoView(h));if(b)a.preventDefault();
else this.onOtherKeyPress(a,g)}},setCurrentRow:function(a){},scrollOnKeyPress:function(a){this.clearMouseHandler();this.grid.views.views[0].scrollboxNode.scrollTop=a},clearMouseHandler:function(){this._origMouseOverRow||(this._origMouseOverRow=this.grid.onMouseOverRow);this._origMouseOutRow||(this._origMouseOutRow=this.grid.onMouseOutRow);this.grid.onMouseOverRow=function(){};this.grid.onMouseOutRow=function(){};ws.lang.setTimeout(this,"restoreMouseHandler",150)},restoreMouseHandler:function(){this.grid.onMouseOverRow=
this._origMouseOverRow;this.grid.onMouseOutRow=this._origMouseOutRow},scrollIntoView:function(a){if(!(0>a)){var b=this.grid.scroller,d=this.grid.views.views[0].scrollboxNode,e=Math.floor(b.pageHeights[0]/Math.min(this.gridModel.getRowCount(),b.rowsPerPage)),b=Math.floor(d.offsetHeight/e),d=Math.floor(d.scrollTop/e),e=-1;d>a?e=a:d+b<=a&&(e=a-b+1);-1!=e&&(this.clearMouseHandler(),this.scrollToRow(e))}},onEnterKeyPress:function(a){},onDelKeyPress:function(a){},onOtherKeyPress:function(a){},toggleColumn:function(a,
b){var d=!1;if("RESET"==a)d=!0,this.autoWidthSizedTo=0,this.initColumns(!0),this.grid.setSortIndex(Math.abs(this.defSort),0<=this.defSort);else{var e=ws.lang.findByProp(this.columns,"id",a),e=this.columns[e];"undefined"==typeof b&&(d=!0,b=!e.hidden);e.hidden=b}this.updateColumns();if(d)this.onHeaderColumnChange(null,"RESET"==a)},updateColumns:function(){for(var a=0,b=0;b<this.columns.length;b++){var e=this.columns[b];e&&(e.hidden?this.gridModel.columns[e.id]=-1:(this.gridModel.columns[e.id]=a,a++))}a=
d.filter(this.columns,function(a){return a&&!a.hidden});if(0!=this.grid.sortInfo&&this.grid.views.views[0])for(e=d.query("th.dojoxGrid-cell",this.grid.headerNode),b=0;b<e.length;b++){var g=e[b];if("div"===g.nodeName&&g.children&&0<g.children.length&&-1!=g.children[0].className.indexOf("dojoxGrid-sort")){this.grid.sortInfo=(0>this.grid.sortInfo?-1:1)*(b+1);break}}this.grid.setStructure([{cells:[a]}]);this.autosizeColumns()},formatSprite:function(a,b,d){if(d){var e=d.sort&&d[1]||"";d=d.sort&&d[0]||
d;return(a=a&&a[d]?a[d]:null)?b?("sel"===b&&(b=a),ws.string.substituteParams('\x3cdiv title\x3d"%{1}"\x3e\x3csvg class\x3d"gridSVGIcon %{0}"\x3e\x3cuse xlink:href\x3d"#{2}"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e',a,e,b)):ws.string.substituteParams("\x3cdiv class\x3d'gridIcon %{0}' %{1}\x3e\x3c/div\x3e",a,e):""}}})})},"dojox/grid/Grid":function(){define("dojox/grid/Grid",["dojo/_base/declare","dojox/grid/VirtualGrid","dojo/text!dojox/grid/_grid/Grid.css","dojo","dojox/grid/data/Dynamic"],function(f,
k,d,b){return f("dojox.grid.Grid",[k],{css:{templateString:d},model:"dojox.grid.data.Dynamic",postCreate:function(){if(this.model){var a=this.model;b.isString(a)&&(a=b.getObject(a));this.model=b.isFunction(a)?new a:a;this._setModel(this.model)}this.inherited(arguments)},destroy:function(){this.setModel(null);this.inherited(arguments)},_structureChanged:function(){this.indexCellFields();this.inherited(arguments)},_setModel:function(a){if(this.model=a)this.model.observer(this),this.model.measure(),
this.indexCellFields()},setModel:function(a){this.model&&this.model.notObserver(this);this._setModel(a)},get:function(a){return this.grid?this.grid.model.getDatum(a,this.fieldIndex):this.model.getDatum(a,this.fieldIndex)},modelAllChange:function(){this.rowCount=this.model?this.model.getRowCount():0;this.updateRowCount(this.rowCount)},modelRowChange:function(a,b){this.updateRow(b)},modelDatumChange:function(a,b,d){this.updateRow(b)},modelFieldsChange:function(){this.indexCellFields();this.render()},
modelInsertion:function(a){this.updateRowCount(this.model.getRowCount())},modelRemoval:function(a){this.updateRowCount(this.model.getRowCount())},getCellName:function(a){var b=this.model.fields.values,d=a.fieldIndex;return 0<=d&&d<b.length&&b[d].name||this.inherited(arguments)},indexCellFields:function(){for(var a=this.layout.cells,d=0,f;a&&(f=a[d]);d++)b.isString(f.field)&&(f.fieldIndex=this.model.fields.indexOf(f.field))},refresh:function(){this.edit.cancel();this.model.measure()},canSort:function(a){return(a=
this.getSortField(a))&&this.model.canSort(a)},getSortField:function(a){return(this.getCell(this.getSortIndex(a)).fieldIndex+1)*(0<this.sortInfo?1:-1)},sort:function(){this.edit.apply();this.model.sort(this.getSortField())},addRow:function(a,b){this.edit.apply();var d=b||-1;0>d&&(d=this.selection.getFirstSelected()||0);0>d&&(d=0);this.model.insert(a,d);this.model.beginModifyRow(d);for(var e=0,f;(f=this.getCell(e))&&!f.editor;e++);f&&f.editor&&this.edit.setEditCell(f,d)},removeSelectedRows:function(){this.edit.apply();
var a=this.selection.getSelected();a.length&&(this.model.remove(a),this.selection.clear())},canEdit:function(a,b){return this.model.canModify?this.model.canModify(b):!0},doStartEdit:function(a,b){var d=this.canEdit(a,b);d&&(this.model.beginModifyRow(b),this.onStartEdit(a,b));return d},doApplyCellEdit:function(a,b,d){this.model.setDatum(a,b,d);this.onApplyCellEdit(a,b,d)},doCancelEdit:function(a){this.model.cancelModifyRow(a);this.onCancelEdit.apply(this,arguments)},doApplyEdit:function(a){this.model.endModifyRow(a);
this.onApplyEdit(a)},styleRowState:function(a){if(this.model.getState){for(var b=this.model.getState(a.index),d="",e=0,f=["inflight","error","inserting"],g;g=f[e];e++)if(b[g]){d=" dojoxGrid-row-"+g;break}a.customClasses+=d}},onStyleRow:function(a){this.styleRowState(a);this.inherited(arguments)},junk:0})})},"dojox/grid/VirtualGrid":function(){define("dojox/grid/VirtualGrid","dojo/_base/declare dojo dijit/_Widget dijit/_TemplatedMixin dojox/grid/scroller/columns dojox/grid/layout dojox/grid/_grid/views dojox/grid/rows dojox/grid/_grid/selection dojox/grid/focus dojox/grid/edit dojox/grid/_grid/lib dojox/grid/scroller dojox/grid/_grid/GridView dojox/grid/_grid/GridRowView dojox/grid/_grid/publicEvents".split(" "),
function(f,k,d,b,a,h,l,e,p,g,n){f=f("dojox.grid.VirtualGrid",[d,b],{templateString:'\x3cdiv class\x3d"dojoxGrid" hidefocus\x3d"hidefocus"\x3e\x3cdiv class\x3d"dojoxGrid-master-header" dojoAttachPoint\x3d"headerNode"\x3e\x3c/div\x3e\x3cdiv class\x3d"dojoxGrid-master-view" dojoAttachPoint\x3d"viewsNode"\x3e\x3c/div\x3e\x3cspan dojoAttachPoint\x3d"lastFocusNode" tabindex\x3d"0"\x3e\x3c/span\x3e\x3c/div\x3e',classTag:"dojoxGrid",get:function(a){},rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:!1,autoHeight:!1,
autoRender:!0,defaultHeight:"15em",structure:"",elasticView:-1,singleClickEdit:!1,sortInfo:0,themeable:!0,buildRendering:function(){this.inherited(arguments);this.get==dojox.grid.VirtualGrid.prototype.get&&(this.get=null);this.domNode.getAttribute("tabIndex")||(this.domNode.tabIndex="0");this.createScroller();this.createLayout();this.createViews();this.createManagers();dojox.grid.initTextSizePoll();this.connect(dojox.grid,"textSizeChanged","textSizeChanged");dojox.grid.funnelEvents(this.domNode,this,
"doKeyEvent",dojox.grid.keyEvents);this.connect(this,"onShow","renderOnIdle")},postCreate:function(){this.styleChanged=this._styleChanged;this.setStructure(this.structure)},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;this.edit.destroy();this.views.destroyViews();this.inherited(arguments)},styleChanged:function(){this.setStyledClass(this.domNode,"")},_styleChanged:function(){this.styleChanged();this.update()},textSizeChanged:function(){setTimeout(k.hitch(this,"_textSizeChanged"),
1)},_textSizeChanged:function(){this.domNode&&(this.views.forEach(function(a){a.content.update()}),this.render())},sizeChange:function(){dojox.grid.jobs.job(this.id+"SizeChange",50,k.hitch(this,"update"))},renderOnIdle:function(){setTimeout(k.hitch(this,"render"),1)},createManagers:function(){this.rows=new e(this);this.focus=new g(this);this.selection=new p(this);this.edit=new n(this)},createScroller:function(){this.scroller=new a;this.scroller.renderRow=k.hitch(this,"renderRow");this.scroller.removeRow=
k.hitch(this,"rowRemoved")},createLayout:function(){this.layout=new h(this)},createViews:function(){this.views=new l(this);this.views.createView=k.hitch(this,"createView")},createView:function(a){a=new (eval(a))({grid:this});this.viewsNode.appendChild(a.domNode);this.headerNode.appendChild(a.headerNode);this.views.addView(a);return a},buildViews:function(){for(var a=0,b;b=this.layout.structure[a];a++)this.createView(b.type||"dojox.grid._grid.GridView").setStructure(b);this.scroller.setContentNodes(this.views.getContentNodes())},
setStructure:function(a){this.views.destroyViews();(this.structure=a)&&k.isString(this.structure)&&(this.structure=dojox.grid.getProp(this.structure));this.structure||(this.structure=window.layout);this.structure&&(this.layout.setStructure(this.structure),this._structureChanged())},_structureChanged:function(){this.buildViews();this.autoRender&&this.render()},resize:function(){if(this.domNode.parentNode){var a=k._getPadBorderExtents(this.domNode);this.autoHeight?(this.domNode.style.height="auto",
this.viewsNode.style.height=""):!(0<this.flex)&&this.domNode.clientHeight<=a.h&&(this.domNode.parentNode==k.body()?this.domNode.style.height=this.defaultHeight:this.fitTo="parent");if("parent"==this.fitTo){var b=k._getContentBox(this.domNode.parentNode).h;k.marginBox(this.domNode,{h:Math.max(0,b)})}b=this.views.measureHeader();this.headerNode.style.height=b+"px";b=this.autoHeight?-1:Math.max(this.domNode.clientHeight-b,0)||0;this.autoWidth?this.domNode.style.width=this.views.arrange(1,0,0,b)+"px":
this.views.arrange(1,0,this.domNode.clientWidth||this.domNode.offsetWidth-a.w,b);this.scroller.windowHeight=b;this.scroller.defaultRowHeight=this.rows.getDefaultHeightPx()+1;this.postresize()}},resizeHeight:function(){var a=this.views.measureHeader();this.headerNode.style.height=a+"px";a=this.autoHeight?-1:Math.max(this.domNode.clientHeight-a,0)||0;this.views.onEach("setSize",[0,a]);this.views.onEach("resizeHeight");this.scroller.windowHeight=a},render:function(){this.domNode&&(this.update=this.defaultUpdate,
this.scroller.init(this.rowCount,this.keepRows,this.rowsPerPage),this.prerender(),this.setScrollTop(0),this.postrender())},prerender:function(){this.views.render();this.resize()},postrender:function(){this.postresize();this.focus.initFocusView();k.setSelectable(this.domNode,!1)},postresize:function(){this.autoHeight&&(this.viewsNode.style.height=this.views.measureContent()+"px")},renderRow:function(a,b){this.views.renderRow(a,b)},rowRemoved:function(a){this.views.rowRemoved(a)},invalidated:null,updating:!1,
beginUpdate:function(){this.invalidated=[];this.updating=!0},endUpdate:function(){this.updating=!1;var a=this.invalidated;if(a.all)this.update();else if(void 0!=a.rowCount)this.updateRowCount(a.rowCount);else for(r in a)this.updateRow(Number(r));this.invalidated=null},defaultUpdate:function(){this.updating?this.invalidated.all=!0:(this.prerender(),this.scroller.invalidateNodes(),this.setScrollTop(this.scrollTop),this.postrender())},update:function(){this.render()},updateRow:function(a){a=Number(a);
this.updating?this.invalidated[a]=!0:(this.views.updateRow(a,this.rows.getHeight(a)),this.scroller.rowHeightChanged(a))},updateRowCount:function(a){this.updating?this.invalidated.rowCount=a:(this.rowCount=a,this.scroller.updateRowCount(a),this.setScrollTop(this.scrollTop),this.resize())},updateRowStyles:function(a){this.views.updateRowStyles(a)},rowHeightChanged:function(a){this.views.renormalizeRow(a);this.scroller.rowHeightChanged(a)},fastScroll:!0,delayScroll:!1,scrollRedrawThreshold:k.isIE?100:
50,scrollTo:function(a){if(this.fastScroll){var b=Math.abs(this.lastScrollTop-a);this.lastScrollTop=a;b>this.scrollRedrawThreshold||this.delayScroll?(this.delayScroll=!0,this.scrollTop=a,this.views.setScrollTop(a),dojox.grid.jobs.job("dojoxGrid-scroll",200,k.hitch(this,"finishScrollJob"))):this.setScrollTop(a)}else this.setScrollTop(a)},finishScrollJob:function(){this.delayScroll=!1;this.setScrollTop(this.scrollTop)},setScrollTop:function(a){this.scrollTop=this.views.setScrollTop(a);this.scroller.scroll(this.scrollTop)},
scrollToRow:function(a){this.setScrollTop(this.scroller.findScrollTop(a)+1)},styleRowNode:function(a,b){b&&this.rows.styleRowNode(a,b)},getCell:function(a){return this.layout.cells[a]},setCellWidth:function(a,b){this.getCell(a).unitWidth=b},getCellName:function(a){return"Cell "+a.index},canSort:function(a){},sort:function(){},getSortAsc:function(a){a=void 0==a?this.sortInfo:a;return 0<a},getSortIndex:function(a){a=void 0==a?this.sortInfo:a;return Math.abs(a)-1},setSortIndex:function(a,b){var d=a+
1;void 0!=b?d*=b?1:-1:this.getSortIndex()==a&&(d=-this.sortInfo);this.setSortInfo(d)},setSortInfo:function(a){this.canSort(a)&&(this.sortInfo=a,this.sort(),this.update())},doKeyEvent:function(a){a.dispatch="do"+a.type;this.onKeyEvent(a)},_dispatch:function(a,b){if(a in this)return this[a](b)},dispatchKeyEvent:function(a){this._dispatch(a.dispatch,a)},dispatchContentEvent:function(a){this.edit.dispatchEvent(a)||a.sourceView.dispatchContentEvent(a)||this._dispatch(a.dispatch,a)},dispatchHeaderEvent:function(a){a.sourceView.dispatchHeaderEvent(a)||
this._dispatch("doheader"+a.type,a)},dokeydown:function(a){this.onKeyDown(a)},doclick:function(a){if(a.cellNode)this.onCellClick(a);else this.onRowClick(a)},dodblclick:function(a){if(a.cellNode)this.onCellDblClick(a);else this.onRowDblClick(a)},docontextmenu:function(a){if(a.cellNode)this.onCellContextMenu(a);else this.onRowContextMenu(a)},doheaderclick:function(a){if(a.cellNode)this.onHeaderCellClick(a);else this.onHeaderClick(a)},doheaderdblclick:function(a){if(a.cellNode)this.onHeaderCellDblClick(a);
else this.onHeaderDblClick(a)},doheadercontextmenu:function(a){if(a.cellNode)this.onHeaderCellContextMenu(a);else this.onHeaderContextMenu(a)},doStartEdit:function(a,b){this.onStartEdit(a,b)},doApplyCellEdit:function(a,b,d){this.onApplyCellEdit(a,b,d)},doCancelEdit:function(a){this.onCancelEdit(a)},doApplyEdit:function(a){this.onApplyEdit(a)},addRow:function(){this.updateRowCount(this.rowCount+1)},removeSelectedRows:function(){this.updateRowCount(Math.max(0,this.rowCount-this.selection.getSelected().length));
this.selection.clear()}});k.mixin(dojox.grid.VirtualGrid.prototype,dojox.grid.publicEvents);return f})},"dojox/grid/scroller/columns":function(){define("dojox/grid/scroller/columns",["dojo/_base/declare","dojo","dojox/grid/scroller"],function(f,k,d){return f("dojox.grid.scroller.columns",d,{constructor:function(b){this.setContentNodes(b)},setContentNodes:function(b){this.colCount=(this.contentNodes=b)?this.contentNodes.length:0;this.pageNodes=[];for(b=0;b<this.colCount;b++)this.pageNodes[b]=[]},getDefaultNodes:function(){return this.pageNodes[0]||
[]},scroll:function(b){this.colCount&&dojox.grid.scroller.prototype.scroll.call(this,b)},resize:function(){this.scrollboxNode&&(this.windowHeight=this.scrollboxNode.clientHeight);for(var b=0;b<this.colCount;b++)dojox.grid.setStyleHeightPx(this.contentNodes[b],this.height)},positionPage:function(b,a){for(var d=0;d<this.colCount;d++)this.positionPageNode(this.pageNodes[d][b],a)},preparePage:function(b,a){for(var d=a?this.popPage():null,f=0;f<this.colCount;f++)this.preparePageNode(b,d,this.pageNodes[f])},
installPage:function(b){for(var a=0;a<this.colCount;a++)this.contentNodes[a].appendChild(this.pageNodes[a][b])},destroyPage:function(b){for(var a=0;a<this.colCount;a++)dojox.grid.removeNode(this.invalidatePageNode(b,this.pageNodes[a]))},renderPage:function(b){for(var a=[],d=0;d<this.colCount;d++)a[d]=this.pageNodes[d][b];d=0;for(b*=this.rowsPerPage;d<this.rowsPerPage&&b<this.rowCount;d++,b++)this.renderRow(b,a)}})})},"dojox/grid/scroller":function(){define("dojox/grid/scroller",["dojo/_base/declare",
"dojo","dojox/grid/scroller/base"],function(f,k,d){return f("dojox.grid.scroller",[d],{constructor:function(){this.pageNodes=[]},renderRow:function(b,a){},removeRow:function(b){},getDefaultNodes:function(){return this.pageNodes},getDefaultPageNode:function(b){return this.getDefaultNodes()[b]},positionPageNode:function(b,a){b.style.top=a+"px"},getPageNodePosition:function(b){return b.offsetTop},repositionPageNodes:function(b,a){for(var d=0,f=0;f<this.stack.length;f++)d=Math.max(this.stack[f],d);for(var e=
(f=a[b])?this.getPageNodePosition(f)+this.getPageHeight(b):0,k=b+1;k<=d;k++){if(f=a[k]){if(this.getPageNodePosition(f)==e)break;this.positionPage(k,e)}e+=this.getPageHeight(k)}},invalidatePageNode:function(b,a){var d=a[b];d&&(delete a[b],this.removePage(b,d),dojox.grid.cleanNode(d),d.innerHTML="");return d},preparePageNode:function(b,a,d){a=null===a?this.createPageNode():this.invalidatePageNode(a,d);a.pageIndex=b;a.id="page-"+b;d[b]=a},pageExists:function(b){return!!this.getDefaultPageNode(b)},measurePage:function(b){return this.getDefaultPageNode(b).offsetHeight},
positionPage:function(b,a){this.positionPageNode(this.getDefaultPageNode(b),a)},repositionPages:function(b){this.repositionPageNodes(b,this.getDefaultNodes())},preparePage:function(b,a){this.preparePageNode(b,a?this.popPage():null,this.getDefaultNodes())},installPage:function(b){this.contentNode.appendChild(this.getDefaultPageNode(b))},destroyPage:function(b){b=this.invalidatePageNode(b,this.getDefaultNodes());dojox.grid.removeNode(b)},renderPage:function(b){var a=this.pageNodes[b],d=0;for(b*=this.rowsPerPage;d<
this.rowsPerPage&&b<this.rowCount;d++,b++)this.renderRow(b,a)},removePage:function(b){var a=0;for(b*=this.rowsPerPage;a<this.rowsPerPage;a++,b++)this.removeRow(b)},getPageRow:function(b){return b*this.rowsPerPage},getLastPageRow:function(b){return Math.min(this.rowCount,this.getPageRow(b+1))-1},getFirstVisibleRowNodes:function(b,a,d,f){var e=this.getPageRow(b);b=dojox.grid.divkids(f[b]);f=0;for(var h=b.length;f<h&&a<d;f++,e++)a+=b[f].offsetHeight;return e?e-1:e},getFirstVisibleRow:function(b,a,d){return this.pageExists(b)?
this.getFirstVisibleRowNodes(b,a,d,this.getDefaultNodes()):0},getLastVisibleRowNodes:function(b,a,d,f){var e=this.getLastPageRow(b);b=dojox.grid.divkids(f[b]);for(f=b.length-1;0<=f&&a>d;f--,e--)a-=b[f].offsetHeight;return e+1},getLastVisibleRow:function(b,a,d){return this.pageExists(b)?this.getLastVisibleRowNodes(b,a,d,this.getDefaultNodes()):0},findTopRowForNodes:function(b,a){for(var d=dojox.grid.divkids(a[this.page]),f=0,e=d.length,k=this.pageTop,g;f<e;f++)if(g=d[f].offsetHeight,k+=g,k>=b)return this.offset=
g-(k-b),f+this.page*this.rowsPerPage;return-1},findScrollTopForNodes:function(b,a){for(var d=Math.floor(b/this.rowsPerPage),f=0,e=0;e<d;e++)f+=this.getPageHeight(e);this.pageTop=f;this.needPage(d,this.pageTop);for(var k=dojox.grid.divkids(a[d]),d=b-this.rowsPerPage*d,e=0,g=k.length;e<g&&e<d;e++)f+=k[e].offsetHeight;return f},findTopRow:function(b){return this.findTopRowForNodes(b,this.getDefaultNodes())},findScrollTop:function(b){return this.findScrollTopForNodes(b,this.getDefaultNodes())},dummy:0})})},
"dojox/grid/scroller/base":function(){define("dojox/grid/scroller/base",["dojo/_base/declare","dojo"],function(f,k){return f("dojox.grid.scroller.base",null,{constructor:function(){this.pageHeights=[];this.stack=[]},rowCount:0,defaultRowHeight:10,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,page:0,pageTop:0,init:function(d,b,a){switch(arguments.length){case 3:this.rowsPerPage=a;case 2:this.keepRows=
b;case 1:this.rowCount=d}this.defaultPageHeight=this.defaultRowHeight*this.rowsPerPage;this.pageCount=Math.ceil(this.rowCount/this.rowsPerPage);this.keepPages=Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2);this.invalidate();this.scrollboxNode&&(this.scrollboxNode.scrollTop=0,this.scroll(0),this.scrollboxNode.onscroll=k.hitch(this,"onscroll"))},invalidate:function(){this.invalidateNodes();this.pageHeights=[];this.height=this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():
0;this.resize()},updateRowCount:function(d){this.invalidateNodes();this.rowCount=d;oldPageCount=this.pageCount;this.pageCount=Math.ceil(this.rowCount/this.rowsPerPage);if(this.pageCount<oldPageCount)for(d=oldPageCount-1;d>=this.pageCount;d--)this.height-=this.getPageHeight(d),delete this.pageHeights[d];else this.pageCount>oldPageCount&&(this.height+=this.defaultPageHeight*(this.pageCount-oldPageCount-1)+this.calcLastPageHeight());this.resize()},pageExists:function(d){},measurePage:function(d){},positionPage:function(d,
b){},repositionPages:function(d){},installPage:function(d){},preparePage:function(d,b,a){},renderPage:function(d){},removePage:function(d){},pacify:function(d){},pacifying:!1,pacifyTicks:200,setPacifying:function(d){this.pacifying!=d&&(this.pacifying=d,this.pacify(this.pacifying))},startPacify:function(){this.startPacifyTicks=(new Date).getTime()},doPacify:function(){var d=(new Date).getTime()-this.startPacifyTicks>this.pacifyTicks;this.setPacifying(!0);this.startPacify();return d},endPacify:function(){this.setPacifying(!1)},
resize:function(){this.scrollboxNode&&(this.windowHeight=this.scrollboxNode.clientHeight);dojox.grid.setStyleHeightPx(this.contentNode,this.height)},calcLastPageHeight:function(){if(!this.pageCount)return 0;var d=(this.rowCount%this.rowsPerPage||this.rowsPerPage)*this.defaultRowHeight;return this.pageHeights[this.pageCount-1]=d},updateContentHeight:function(d){this.height+=d;this.resize()},updatePageHeight:function(d){if(this.pageExists(d)){var b=this.getPageHeight(d),a=this.measurePage(d)||b;(this.pageHeights[d]=
a)&&b!=a&&(this.updateContentHeight(a-b),this.repositionPages(d))}},rowHeightChanged:function(d){this.updatePageHeight(Math.floor(d/this.rowsPerPage))},invalidateNodes:function(){for(;this.stack.length;)this.destroyPage(this.popPage())},createPageNode:function(){var d=document.createElement("div");d.style.position="absolute";d.style.left="0";return d},getPageHeight:function(d){d=this.pageHeights[d];return void 0!==d?d:this.defaultPageHeight},pushPage:function(d){return this.stack.push(d)},popPage:function(){return this.stack.shift()},
findPage:function(d){for(var b=0,a=0,f=0;b<this.pageCount&&!(f=this.getPageHeight(b),a+f>=d);b++,a+=f);this.page=b;this.pageTop=a},buildPage:function(d,b,a){this.preparePage(d,b);this.positionPage(d,a);this.installPage(d);this.renderPage(d);this.pushPage(d)},needPage:function(d,b){var a=this.getPageHeight(d),f=a;this.pageExists(d)?this.positionPage(d,b):(this.buildPage(d,this.keepPages&&this.stack.length>=this.keepPages,b),a=this.measurePage(d)||a,(this.pageHeights[d]=a)&&f!=a&&this.updateContentHeight(a-
f));return a},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop)},scroll:function(d){this.startPacify();this.findPage(d);for(var b=this.height,a=this.getScrollBottom(d),f=this.page,l=this.pageTop;f<this.pageCount&&(0>a||l<a);f++)l+=this.needPage(f,l);this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,d);this.lastVisibleRow=this.getLastVisibleRow(f-1,l,a);b!=this.height&&this.repositionPages(f-1);this.endPacify()},getScrollBottom:function(d){return 0<=this.windowHeight?
d+this.windowHeight:-1},processNodeEvent:function(d,b){for(var a=d.target;a&&a!=b&&a.parentNode&&a.parentNode.parentNode!=b;)a=a.parentNode;if(!a||!a.parentNode||a.parentNode.parentNode!=b)return!1;d.topRowIndex=a.parentNode.pageIndex*this.rowsPerPage;d.rowIndex=d.topRowIndex+dojox.grid.indexInParent(a);d.rowTarget=a;return!0},processEvent:function(d){return this.processNodeEvent(d,this.contentNode)},dummy:0})})},"dojox/grid/layout":function(){define("dojox/grid/layout",["dojo/_base/declare","dojo",
"dojox/grid/cell"],function(f,k,d){return f("dojox.grid.layout",null,{constructor:function(b){this.grid=b},cells:null,structure:null,defaultWidth:"6em",setStructure:function(b){this.fieldIndex=0;this.cells=[];for(var a=this.structure=[],d=0,f;f=b[d];d++)a.push(this.addViewDef(f));this.cellCount=this.cells.length},addViewDef:function(b){this._defaultCellProps=b.defaultCell||{};return k.mixin({},b,{rows:this.addRowsDef(b.rows||b.cells)})},addRowsDef:function(b){for(var a=[],d=0,f;b&&(f=b[d]);d++)a.push(this.addRowDef(d,
f));return a},addRowDef:function(b,a){for(var d=[],f=0,e;e=a[f];f++)e=this.addCellDef(b,f,e),d.push(e),this.cells.push(e);return d},addCellDef:function(b,a,f){var h=0,h=1<f.colSpan?0:isNaN(f.width)?f.width||this.defaultWidth:f.width+"em",e=void 0!=f.field?f.field:f.get?-1:this.fieldIndex;void 0==f.field&&f.get||(this.fieldIndex=(-1<f.field?f.field:this.fieldIndex)+1);return new d(k.mixin({},this._defaultCellProps,f,{grid:this.grid,subrow:b,layoutIndex:a,index:this.cells.length,fieldIndex:e,unitWidth:h}))}})})},
"dojox/grid/cell":function(){define("dojox/grid/cell",["dojo/_base/declare","dojo"],function(f,k){return f("dojox.grid.cell",null,{styles:"",constructor:function(d){k.mixin(this,d);this.editor&&(this.editor=new this.editor(this))},format:function(d){var b,a=this.grid.edit.info,f=this.get?this.get(d):this.value;return this.editor&&(this.editor.alwaysOn||a.rowIndex==d&&a.cell==this)?this.editor.format(f,d):(b=this.formatter)?b.call(this,f,d):f},getNode:function(d){return this.view.getCellNode(d,this.index)},
isFlex:function(){var d=this.unitWidth;return d&&("auto"==d||"%"==d.slice(-1))},applyEdit:function(d,b){this.grid.edit.applyCellEdit(d,this,b)},cancelEdit:function(d){this.grid.doCancelEdit(d)},_onEditBlur:function(d){this.grid.edit.isEditCell(d,this.index)&&this.grid.edit.apply()},registerOnBlur:function(d,b){this.commitOnBlur&&k.connect(d,"onblur",function(a){setTimeout(k.hitch(this,"_onEditBlur",b),250)})}})})},"dojox/grid/_grid/views":function(){define("dojox/grid/_grid/views",["dojo/_base/declare",
"dojo"],function(f,k){return f("dojox.grid._grid.views",null,{constructor:function(d){this.grid=d},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render");this.normalizeHeaderNodeHeight()},addView:function(d){d.idx=this.views.length;this.views.push(d)},destroyViews:function(){for(var d=0,b;b=this.views[d];d++)b.destroy();this.views=[]},getContentNodes:function(){for(var d=[],b=0,a;a=this.views[b];b++)d.push(a.contentNode);return d},forEach:function(d){for(var b=
0,a;a=this.views[b];b++)d(a,b)},onEach:function(d,b){b=b||[];for(var a=0,f;f=this.views[a];a++)d in f&&f[d].apply(f,b)},normalizeHeaderNodeHeight:function(){for(var d=[],b=0,a;a=this.views[b];b++)a.headerContentNode.firstChild&&d.push(a.headerContentNode);this.normalizeRowNodeHeights(d)},normalizeRowNodeHeights:function(d){},renormalizeRow:function(d){for(var b=[],a=0,f,l;(f=this.views[a])&&(l=f.getRowNode(d));a++)l.firstChild.style.height="",b.push(l);this.normalizeRowNodeHeights(b)},getViewWidth:function(d){return this.views[d].getWidth()||
this.defaultWidth},measureHeader:function(){this.forEach(function(b){b.headerContentNode.style.height=""});var d=0;this.forEach(function(b){d=Math.max(b.headerNode.offsetHeight,d)});return d},measureContent:function(){var d=0;this.forEach(function(b){d=Math.max(b.domNode.offsetHeight,d)});return d},findClient:function(d){d=this.grid.elasticView||-1;if(0>d)for(var b=1,a;a=this.views[b];b++)if(a.viewWidth){for(b=1;a=this.views[b];b++)if(!a.viewWidth){d=b;break}break}0>d&&(d=Math.floor(this.views.length/
2));return d},_arrange:function(d,b,a,f){var h,e,k,g=this.views.length,n=0>=a?g:this.findClient(),t=function(a,b,d){with(a.domNode.style)left=b+"px",top=d+"px";with(a.headerNode.style)left=b+"px",top=0};for(h=0;(e=this.views[h])&&h<n;h++)k=this.getViewWidth(h),e.setSize(k,f),t(e,d,b),k=e.domNode.offsetWidth,d+=k;h++;for(var q=g-1;(e=this.views[q])&&h<=q;q--)k=this.getViewWidth(q),e.setSize(k,f),k=e.domNode.offsetWidth,a-=k,t(e,a,b);n<g&&(e=this.views[n],k=Math.max(1,a-d),e.setSize(k+"px",f),t(e,d,
b));return d},arrange:function(d,b,a,f){a=this._arrange(d,b,a,f);this.resize();return a},renderRow:function(d,b){for(var a=[],f=0,l,e;(l=this.views[f])&&(e=b[f]);f++)l=l.renderRow(d),e.appendChild(l),a.push(l);this.normalizeRowNodeHeights(a)},rowRemoved:function(d){this.onEach("rowRemoved",[d])},updateRow:function(d,b){for(var a=0,f;f=this.views[a];a++)f.updateRow(d,b);this.renormalizeRow(d)},updateRowStyles:function(d){this.onEach("updateRowStyles",[d])},setScrollTop:function(d){for(var b=d,a=0,
f;f=this.views[a];a++)b=f.setScrollTop(d);return b},getFirstScrollingView:function(){for(var d=0,b;b=this.views[d];d++)if(b.hasScrollbar())return b}})})},"dojox/grid/rows":function(){define("dojox/grid/rows",["dojo/_base/declare","dojo"],function(f,k){return f("dojox.grid.rows",null,{constructor:function(d){this.grid=d},linesToEms:2,defaultRowHeight:1,overRow:-2,getHeight:function(d){return""},getDefaultHeightPx:function(){return 32},prepareStylingRow:function(d,b){return{index:d,node:b,odd:!!(d&
1),selected:this.grid.selection.isSelected(d),over:this.isOver(d),customStyles:"",customClasses:"dojoxGrid-row"}},styleRowNode:function(d,b){var a=this.prepareStylingRow(d,b);this.grid.onStyleRow(a);this.applyStyles(a)},applyStyles:function(d){with(d)node.className=customClasses,d=node.style.height,dojox.grid.setStyleText(node,customStyles+";"+(node._style||"")),node.style.height=d},updateStyles:function(d){this.grid.updateRowStyles(d)},setOverRow:function(d){var b=this.overRow;this.overRow=d;b!=
this.overRow&&0<=b&&this.updateStyles(b);this.updateStyles(this.overRow)},isOver:function(d){return this.overRow==d}})})},"dojox/grid/_grid/selection":function(){define("dojox/grid/_grid/selection",["dojo/_base/declare","dojo"],function(f,k){return f("dojox.grid.selection",null,{constructor:function(d){this.grid=d;this.selected=[]},multiSelect:!0,selected:null,updating:0,selectedIndex:-1,onCanSelect:function(d){return this.grid.onCanSelect(d)},onCanDeselect:function(d){return this.grid.onCanDeselect(d)},
onSelected:function(d){return this.grid.onSelected(d)},onDeselected:function(d){return this.grid.onDeselected(d)},onChanging:function(){},onChanged:function(){return this.grid.onSelectionChanged()},isSelected:function(d){return this.selected[d]},getFirstSelected:function(){for(var d=0,b=this.selected.length;d<b;d++)if(this.selected[d])return d;return-1},getNextSelected:function(d){d+=1;for(var b=this.selected.length;d<b;d++)if(this.selected[d])return d;return-1},getSelected:function(){for(var d=[],
b=0,a=this.selected.length;b<a;b++)this.selected[b]&&d.push(b);return d},getSelectedCount:function(){for(var d=0,b=0;b<this.selected.length;b++)this.selected[b]&&d++;return d},beginUpdate:function(){if(0==this.updating)this.onChanging();this.updating++},endUpdate:function(){this.updating--;if(0==this.updating)this.onChanged()},select:function(d){this.unselectAll(d);this.addToSelection(d)},addToSelection:function(d){d=Number(d);this.selected[d]?this.selectedIndex=d:!1!==this.onCanSelect(d)&&(this.selectedIndex=
d,this.beginUpdate(),this.selected[d]=!0,this.grid.onSelected(d),this.endUpdate())},deselect:function(d){d=Number(d);this.selectedIndex==d&&(this.selectedIndex=-1);this.selected[d]&&!1!==this.onCanDeselect(d)&&(this.beginUpdate(),delete this.selected[d],this.grid.onDeselected(d),this.endUpdate())},setSelected:function(d,b){this[b?"addToSelection":"deselect"](d)},toggleSelect:function(d){this.setSelected(d,!this.selected[d])},insert:function(d){this.selected.splice(d,0,!1);this.selectedIndex>=d&&this.selectedIndex++},
remove:function(d){this.selected.splice(d,1);this.selectedIndex>=d&&this.selectedIndex--},unselectAll:function(d){for(var b in this.selected)b!=d&&!0===this.selected[b]&&this.deselect(b)},shiftSelect:function(d,b){var a=0<=d?d:b,f=b;a>f&&(f=a,a=b);for(;a<=f;a++)this.addToSelection(a)},clickSelect:function(d,b,a){this.beginUpdate();if(this.multiSelect){var f=this.selectedIndex;b||this.unselectAll(d);a?this.shiftSelect(f,d):b?this.toggleSelect(d):this.addToSelection(d)}else this.select(d);this.endUpdate()},
clickSelectEvent:function(d){this.clickSelect(d.rowIndex,d.ctrlKey,d.shiftKey)},clear:function(){this.beginUpdate();this.unselectAll();this.endUpdate()}})})},"dojox/grid/focus":function(){define("dojox/grid/focus",["dojo/_base/declare","dojo"],function(f,k){return f("dojox.grid.focus",null,{constructor:function(d){this.grid=d;this.cell=null;this.rowIndex=-1;k.connect(this.grid.domNode,"onfocus",this,"doFocus")},tabbingOut:!1,focusClass:"dojoxGrid-cell-focus",focusView:null,initFocusView:function(){this.focusView=
this.grid.views.getFirstScrollingView()},isFocusCell:function(d,b){return this.cell==d&&this.rowIndex==b},isLastFocusCell:function(){return this.rowIndex==this.grid.rowCount-1&&this.cell.index==this.grid.layout.cellCount-1},isFirstFocusCell:function(){return 0==this.rowIndex&&0==this.cell.index},isNoFocusCell:function(){return 0>this.rowIndex||!this.cell},_focusifyCellNode:function(d){var b=this.cell&&this.cell.getNode(this.rowIndex);if(b){k.toggleClass(b,this.focusClass,d);this.scrollIntoView();
try{this.grid.edit.isEditing()||dojox.grid.fire(b,"focus")}catch(a){}}},scrollIntoView:function(){if(this.cell){var d=this.cell,b=d.view.scrollboxNode,a=b.clientWidth,f=b.scrollLeft,l=b.scrollTop,e=b.clientHeight,k=d.getNode(this.rowIndex),d=d.view.getRowNode(this.rowIndex),g=this.grid.scroller.findScrollTop(this.rowIndex);k.offsetLeft+k.offsetWidth>f+a?b.scrollLeft=k.offsetLeft+k.offsetWidth-a:k.offsetLeft<f&&(b.scrollLeft=k.offsetLeft);g+d.offsetHeight>l+e?this.grid.setScrollTop(g+d.offsetHeight-
e):g<l&&this.grid.setScrollTop(g)}},styleRow:function(d){d.index==this.rowIndex&&this._focusifyCellNode(!0)},setFocusIndex:function(d,b){this.setFocusCell(this.grid.getCell(b),d)},setFocusCell:function(d,b){d&&!this.isFocusCell(d,b)&&(this.tabbingOut=!1,this.focusGrid(),this._focusifyCellNode(!1),this.cell=d,this.rowIndex=b,this._focusifyCellNode(!0));if(k.isOpera)setTimeout(k.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1);else this.grid.onCellFocus(this.cell,this.rowIndex)},next:function(){var d=
this.rowIndex,b=this.cell.index+1,a=this.grid.layout.cellCount-1,f=this.grid.rowCount-1;b>a&&(b=0,d++);d>f&&(b=a,d=f);this.setFocusIndex(d,b)},previous:function(){var d=this.rowIndex||0,b=(this.cell.index||0)-1;0>b&&(b=this.grid.layout.cellCount-1,d--);0>d&&(b=d=0);this.setFocusIndex(d,b)},move:function(d,b){var a=this.rowIndex;this.setFocusIndex(Math.min(this.grid.rowCount-1,Math.max(0,a+d)),Math.min(this.grid.layout.cellCount-1,Math.max(0,this.cell.index+b)));d&&this.grid.updateRow(a)},previousKey:function(d){this.isFirstFocusCell()?
this.tabOut(this.grid.domNode):(k.stopEvent(d),this.previous())},nextKey:function(d){this.isLastFocusCell()?this.tabOut(this.grid.lastFocusNode):(k.stopEvent(d),this.next())},tabOut:function(d){this.tabbingOut=!0;d.focus()},focusGrid:function(){dojox.grid.fire(this.focusView,"focus");this._focusifyCellNode(!0)},doFocus:function(d){d&&d.target!=d.currentTarget||(!this.tabbingOut&&this.isNoFocusCell()&&this.setFocusIndex(0,0),this.tabbingOut=!1)}})})},"dojox/grid/edit":function(){define("dojox/grid/edit",
["dojo/_base/declare","dojo"],function(f,k){return f("dojox.grid.edit",null,{constructor:function(d){this.grid=d;this.connections=[];k.isIE&&this.connections.push(k.connect(document.body,"onfocus",k.hitch(this,"_boomerangFocus")))},info:{},destroy:function(){k.forEach(this.connections,function(d){k.disconnect(d)})},cellFocus:function(d,b){this.grid.singleClickEdit||this.isEditRow(b)?this.setEditCell(d,b):this.apply();(this.isEditing()||d&&(d.editor||0).alwaysOn)&&this._focusEditor(d,b)},rowClick:function(d){this.isEditing()&&
!this.isEditRow(d.rowIndex)&&this.apply()},styleRow:function(d){d.index==this.info.rowIndex&&(d.customClasses+=" dojoxGrid-row-editing")},dispatchEvent:function(d){var b=d.cell;return(b=b&&b.editor)&&b.dispatchEvent(d.dispatch,d)},isEditing:function(){return void 0!==this.info.rowIndex},isEditCell:function(d,b){return this.info.rowIndex===d&&this.info.cell.index==b},isEditRow:function(d){return this.info.rowIndex===d},setEditCell:function(d,b){this.isEditCell(b,d.index)||this.start(d,b,this.isEditRow(b)||
d.editor)},_focusEditor:function(d,b){dojox.grid.fire(d.editor,"focus",[b])},focusEditor:function(){this.isEditing()&&this._focusEditor(this.info.cell,this.info.rowIndex)},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>(new Date).getTime()},_boomerangFocus:function(){this._shouldCatchBoomerang()&&(this.grid.focus.focusGrid(),this.focusEditor(),this._catchBoomerang=0)},_doCatchBoomerang:function(){k.isIE&&(this._catchBoomerang=(new Date).getTime()+this._boomerangWindow)},
start:function(d,b,a){this.grid.beginUpdate();this.editorApply();this.isEditing()&&!this.isEditRow(b)&&(this.applyRowEdit(),this.grid.updateRow(b));a?(this.info={cell:d,rowIndex:b},this.grid.doStartEdit(d,b),this.grid.updateRow(b)):this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(d,b);this._doCatchBoomerang()},_editorDo:function(d){var b=this.info.cell;b&&b.editor&&b.editor[d](this.info.rowIndex)},editorApply:function(){this._editorDo("apply")},editorCancel:function(){this._editorDo("cancel")},
applyCellEdit:function(d,b,a){this.grid.doApplyCellEdit(d,a,b.fieldIndex)},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex)},apply:function(){this.isEditing()&&(this.grid.beginUpdate(),this.editorApply(),this.applyRowEdit(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._doCatchBoomerang())},cancel:function(){this.isEditing()&&(this.grid.beginUpdate(),this.editorCancel(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._doCatchBoomerang())},
save:function(d,b){var a=this.info.cell;!this.isEditRow(d)||b&&a.view!=b||!a.editor||a.editor.save(a,this.info.rowIndex)},restore:function(d,b){var a=this.info.cell;this.isEditRow(b)&&a.view==d&&a.editor&&a.editor.restore(a,this.info.rowIndex)}})})},"dojox/grid/_grid/lib":function(){define("dojox/grid/_grid/lib",["dojo","dojo/_base/lang"],function(f,k){f.isNumber=function(d){return"number"==typeof d||d instanceof Number};f.mixin(dojox.grid,{na:"...",nop:function(){},getTdIndex:function(d){return 0<=
d.cellIndex?d.cellIndex:f.indexOf(d.parentNode.cells,d)},getTrIndex:function(d){return 0<=d.rowIndex?d.rowIndex:f.indexOf(d.parentNode.childNodes,d)},getTr:function(d,b){return d&&((d.rows||0)[b]||d.childNodes[b])},getTd:function(d,b,a){return(dojox.grid.getTr(inTable,b)||0)[a]},findTable:function(d){for(;d&&"TABLE"!=d.tagName;d=d.parentNode);return d},ascendDom:function(d,b){for(var a=d;a&&b(a);a=a.parentNode);return a},makeNotTagName:function(d){var b=d.toUpperCase();return function(a){return a.tagName!=
b}},fire:function(d,b,a){var f=d&&b&&d[b];return f&&(a?f.apply(d,a):d[b]())},setStyleText:function(d,b){void 0==d.style.cssText?d.setAttribute("style",b):d.style.cssText=b},getStyleText:function(d,b){return void 0==d.style.cssText?d.getAttribute("style"):d.style.cssText},setStyle:function(d,b,a){d&&d.style[b]!=a&&(d.style[b]=a)},setStyleHeightPx:function(d,b){0<=b&&dojox.grid.setStyle(d,"height",b+"px")},mouseEvents:"mouseover mouseout mousedown mouseup click dblclick contextmenu".split(" "),keyEvents:["keyup",
"keydown","keypress"],funnelEvents:function(d,b,a,h){h=h?h:dojox.grid.mouseEvents.concat(dojox.grid.keyEvents);for(var l=0,e=h.length;l<e;l++)f.connect(d,"on"+h[l],b,a)},removeNode:function(d){(d=f.byId(d))&&d.parentNode&&d.parentNode.removeChild(d);return d},getScrollbarWidth:function(){if(this._scrollBarWidth)return this._scrollBarWidth;this._scrollBarWidth=18;try{var d=document.createElement("div");d.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";
document.body.appendChild(d);this._scrollBarWidth=d.offsetWidth-d.clientWidth;document.body.removeChild(d);delete d}catch(b){}return this._scrollBarWidth},getRef:function(d,b,a){a=a||f.global;d=d.split(".");for(var h=d.pop(),l=0,e;a&&(e=d[l]);l++)a=e in a?a[e]:b?a[e]={}:void 0;return{obj:a,prop:h}},getProp:function(d,b,a){with(dojox.grid.getRef(d,b,a))return obj&&prop&&(prop in obj?obj[prop]:b?obj[prop]={}:void 0)},indexInParent:function(d){for(var b=0,a,f=d.parentNode;a=f.childNodes[b++];)if(a==
d)return b-1;return-1},cleanNode:function(d){if(d){for(var b=dijit.registry.filter(function(a){return a.domNode&&f.isDescendant(a.domNode,d,!0)}),a=0,h;h=b[a];a++)h.destroy();delete b}},getTagName:function(d){return(d=f.byId(d))&&d.tagName?d.tagName.toLowerCase():""},nodeKids:function(d,b){for(var a=[],f=0,l;l=d.childNodes[f++];)dojox.grid.getTagName(l)==b&&a.push(l);return a},divkids:function(d){return dojox.grid.nodeKids(d,"div")},focusSelectNode:function(d){try{dojox.grid.fire(d,"focus"),dojox.grid.fire(d,
"select")}catch(b){}},whenIdle:function(){setTimeout(f.hitch.apply(f,arguments),0)},arrayCompare:function(d,b){for(var a=0,f=d.length;a<f;a++)if(d[a]!=b[a])return!1;return d.length==b.length},arrayInsert:function(d,b,a){d.length<=b?d[b]=a:d.splice(b,0,a)},arrayRemove:function(d,b){d.splice(b,1)},arraySwap:function(d,b,a){var f=d[b];d[b]=d[a];d[a]=f},initTextSizePoll:function(d){var b=document.createElement("div");with(b.style)left=top="0px",position="absolute",visibility="hidden";b.innerHTML="TheQuickBrownFoxJumpedOverTheLazyDog";
document.body.appendChild(b);var a=b.offsetWidth;window.setInterval(function(){b.offsetWidth!=a&&(a=b.offsetWidth,dojox.grid.textSizeChanged())},d||200);dojox.grid.initTextSizePoll=dojox.grid.nop},textSizeChanged:function(){}});k.setObject("dojox.grid.jobs",{cancel:function(d){d&&window.clearTimeout(d)},jobs:[],job:function(d,b,a){dojox.grid.jobs.cancelJob(d);dojox.grid.jobs.jobs[d]=setTimeout(function(){delete dojox.grid.jobs.jobs[d];a()},b)},cancelJob:function(d){dojox.grid.jobs.cancel(dojox.grid.jobs.jobs[d])}})})},
"dojox/grid/_grid/GridView":function(){define("dojox/grid/_grid/GridView","dojo/_base/declare dojo dijit/_Widget dijit/_Templated dojox/grid/contentBuilder dojox/grid/headerBuilder".split(" "),function(f,k,d,b,a,h){return f("dojox.grid._grid.GridView",[d,b],{defaultWidth:"18em",viewWidth:"",templateString:'\x3cdiv class\x3d"dojoxGrid-view"\x3e\x3cdiv class\x3d"dojoxGrid-header" dojoAttachPoint\x3d"headerNode"\x3e\x3cdiv style\x3d"width: 9000em"\x3e\x3cdiv dojoAttachPoint\x3d"headerContentNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cinput type\x3d"checkbox" class\x3d"dojoxGrid-hidden-focus" dojoAttachPoint\x3d"hiddenFocusNode" /\x3e\x3cinput type\x3d"checkbox" class\x3d"dojoxGrid-hidden-focus" /\x3e\x3cdiv class\x3d"dojoxGrid-scrollbox" dojoAttachPoint\x3d"scrollboxNode"\x3e\x3cdiv class\x3d"dojoxGrid-content" dojoAttachPoint\x3d"contentNode" hidefocus\x3d"hidefocus"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
themeable:!1,classTag:"dojoxGrid",marginBottom:0,rowPad:2,postMixInProperties:function(){this.rowNodes=[]},postCreate:function(){k.connect(this.scrollboxNode,"onscroll",k.hitch(this,"doscroll"));dojox.grid.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu"]);dojox.grid.funnelEvents(this.headerNode,this,"doHeaderEvent","dblclick mouseover mouseout mousemove mousedown click contextmenu".split(" "));this.content=new a(this);this.header=new h(this)},
destroy:function(){dojox.grid.removeNode(this.headerNode);this.inherited("destroy",arguments)},focus:function(){k.isSafari||k.isOpera?this.hiddenFocusNode.focus():this.scrollboxNode.focus()},setStructure:function(a){a=this.structure=a;a.width&&k.isNumber(a.width)?this.viewWidth=a.width+"em":this.viewWidth=a.width||this.viewWidth;this.onBeforeRow=a.onBeforeRow;if(this.noscroll=a.noscroll)this.scrollboxNode.style.overflow="hidden";this.testFlexCells();this.updateStructure()},testFlexCells:function(){this.flexCells=
!1;for(var a=0,b;b=this.structure.rows[a];a++)for(var d=0,f;f=b[d];d++)f.view=this,this.flexCells=this.flexCells||f.isFlex();return this.flexCells},updateStructure:function(){this.header.update();this.content.update()},getScrollbarWidth:function(){return this.noscroll?0:dojox.grid.getScrollbarWidth()},getColumnsWidth:function(){return this.headerContentNode.firstChild.offsetWidth},getWidth:function(){return this.viewWidth||this.getColumnsWidth()+this.getScrollbarWidth()+"px"},getContentWidth:function(){return Math.max(0,
k._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px"},render:function(){this.scrollboxNode.style.height="";this.renderHeader()},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);if(0<this.headerContentNode.childNodes.length&&0<=this.grid.getSortIndex()){var a=this.grid.getSortIndex(),b=this.headerContentNode.childNodes[0].childNodes[0].childNodes[0].childNodes;b[a-1]&&k.addClass(b[a-1],"dojoxGrid-sort-col-prevSibling");b[a]&&k.addClass(b[a],
"dojoxGrid-sort-col")}},_getHeaderContent:function(a){var b=a.name||a.grid.getCellName(a);return a.index!=a.grid.getSortIndex()?b:['\x3cdiv class\x3d"',0<a.grid.sortInfo?"dojoxGrid-sort-down":"dojoxGrid-sort-up",'"\x3e',b,"\x3c/div\x3e"].join("")},resize:function(){this.resizeHeight();this.resizeWidth()},hasScrollbar:function(){return this.scrollboxNode.clientHeight!=this.scrollboxNode.offsetHeight},resizeHeight:function(){if(!this.grid.autoHeight){var a=this.domNode.clientHeight;this.hasScrollbar()||
(a-=dojox.grid.getScrollbarWidth());dojox.grid.setStyleHeightPx(this.scrollboxNode,a)}},resizeWidth:function(){this.flexCells&&(this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth);var a=this.scrollboxNode.offsetWidth-this.getScrollbarWidth(),a=Math.max(a,this.getColumnsWidth())+"px";with(this.contentNode)style.width="",offsetWidth,style.width=a},setSize:function(a,b){with(this.domNode.style)a&&(width=a),height=0<=b?b+"px":"";with(this.headerNode.style)a&&
(width=a)},renderRow:function(a,b){var d=this.createRowNode(a);this.buildRow(a,d,b);this.grid.edit.restore(this,a);return d},createRowNode:function(a){var b=document.createElement("div");b.className=this.classTag+"-row";b[dojox.grid.rowIndexTag]=a;return this.rowNodes[a]=b},buildRow:function(a,b){this.buildRowContent(a,b);this.styleRow(a,b)},buildRowContent:function(a,b){b.innerHTML=this.content.generateHtml(a,a);this.flexCells&&(b.firstChild.style.width=this.contentWidth)},rowRemoved:function(a){this.grid.edit.save(this,
a);delete this.rowNodes[a]},getRowNode:function(a){return this.rowNodes[a]},getCellNode:function(a,b){var d=this.getRowNode(a);if(d)return this.content.getCellNode(d,b)},styleRow:function(a,b){b._style=dojox.grid.getStyleText(b);this.styleRowNode(a,b)},styleRowNode:function(a,b){b&&this.doStyleRowNode(a,b)},doStyleRowNode:function(a,b){this.grid.styleRowNode(a,b)},updateRow:function(a,b,d){if(b=this.getRowNode(a))b.style.height="",this.buildRow(a,b);return b},updateRowStyles:function(a){this.styleRowNode(a,
this.getRowNode(a))},lastTop:0,doscroll:function(a){this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;a=this.scrollboxNode.scrollTop;a!=this.lastTop&&this.grid.scrollTo(a)},setScrollTop:function(a){this.lastTop=a;this.scrollboxNode.scrollTop=a;return this.scrollboxNode.scrollTop},doContentEvent:function(a){if(this.content.decorateEvent(a))this.grid.onContentEvent(a)},doHeaderEvent:function(a){k.isMac&&k.isFF&&"mousedown"==a.type&&2==a.button&&(a.type="contextmenu");if(this.header.decorateEvent(a))this.grid.onHeaderEvent(a)},
dispatchContentEvent:function(a){return this.content.dispatchEvent(a)},dispatchHeaderEvent:function(a){return this.header.dispatchEvent(a)},setColWidth:function(a,b){this.grid.setCellWidth(a,b+"px")},update:function(){var a=this.scrollboxNode.scrollLeft;this.content.update();this.grid.update();this.scrollboxNode.scrollLeft=a}})})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(f,k,d,b,a,h,l){h.extend(f,{waiRole:"",waiState:""});return a("dijit._Templated",[k,d],{constructor:function(){l.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(a,d){var e=this.inherited(arguments),f=d(a,"waiRole");f&&a.setAttribute("role",f);(f=d(a,"waiState"))&&b.forEach(f.split(/\s*,\s*/),function(b){-1!=b.indexOf("-")&&(b=b.split("-"),a.setAttribute("aria-"+b[0],b[1]))});
return e}})})},"dojox/grid/contentBuilder":function(){define("dojox/grid/contentBuilder",["dojo/_base/declare","dojo","dojox/grid/Builder"],function(f,k,d){return f("dojox.grid.contentBuilder",[d],{update:function(){this.prepareHtml()},prepareHtml:function(){for(var b=this.grid.get,a=this.view.structure.rows,d=0,f;f=a[d];d++)for(var e=0,k;k=f[e];e++)k.get=k.get||void 0==k.value&&b,k.markup=this.generateCellMarkup(k,k.cellStyles,k.cellClasses,!1)},generateHtml:function(b,a){var d=[this._table],f=this.view,
e=f.onBeforeRow,f=f.structure.rows;e&&e(a,f);for(var e=0,k;k=f[e];e++)if(!k.hidden&&!k.header){d.push(k.invisible?'\x3ctr class\x3d"dojoxGrid-invisible"\x3e':"\x3ctr\x3e");for(var g=0,n,t,q,m;n=k[g];g++)t=n.markup,q=n.customClasses=[],m=n.customStyles=[],t[5]=n.format(b),t[1]=q.join(" "),t[3]=m.join(";"),d.push.apply(d,t);d.push("\x3c/tr\x3e")}d.push("\x3c/table\x3e");return d.join("")},decorateEvent:function(b){b.rowNode=this.findRowTarget(b.target);if(!b.rowNode)return!1;b.rowIndex=b.rowNode[dojox.grid.rowIndexTag];
this.baseDecorateEvent(b);b.cell=this.grid.getCell(b.cellIndex);return!0}})})},"dojox/grid/Builder":function(){define("dojox/grid/Builder",["dojo/_base/declare","dojo"],function(f,k){dojox.grid.rowIndexTag="gridRowIndex";return f("dojox.grid.Builder",null,{constructor:function(d){this.view=d;this.grid=d.grid},view:null,_table:'\x3ctable class\x3d"dojoxGrid-row-table" border\x3d"0" cellspacing\x3d"0" cellpadding\x3d"0"\x3e',generateCellMarkup:function(d,b,a,f){var h=[];f=f?['\x3cth tabIndex\x3d"-1"']:
['\x3ctd tabIndex\x3d"-1"'];d.colSpan&&f.push(' colspan\x3d"',d.colSpan,'"');d.rowSpan&&f.push(' rowspan\x3d"',d.rowSpan,'"');f.push(' class\x3d"dojoxGrid-cell ');d.classes&&f.push(d.classes," ");a&&f.push(a," ");h.push(f.join(""));h.push("");f=['" idx\x3d"',d.index,'" style\x3d"'];f.push(d.styles,b||"");d.unitWidth&&f.push("width:",d.unitWidth,";");h.push(f.join(""));h.push("");f=['"'];d.attrs&&f.push(" ",d.attrs);f.push("\x3e");h.push(f.join(""));h.push("");h.push("\x3c/td\x3e");return h},isCellNode:function(d){return!!(d&&
d.getAttribute&&d.getAttribute("idx"))},getCellNodeIndex:function(d){return d?Number(d.getAttribute("idx")):-1},getCellNode:function(d,b){for(var a=0,f;f=dojox.grid.getTr(d.firstChild,a);a++)for(var k=0,e;e=f.cells[k];k++)if(this.getCellNodeIndex(e)==b)return e},findCellTarget:function(d,b){for(var a=d;a&&!this.isCellNode(a)&&a!=b;)a=a.parentNode;return a!=b?a:null},baseDecorateEvent:function(d){d.dispatch="do"+d.type;d.grid=this.grid;d.sourceView=this.view;d.cellNode=this.findCellTarget(d.target,
d.rowNode);d.cellIndex=this.getCellNodeIndex(d.cellNode);d.cell=0<=d.cellIndex?this.grid.getCell(d.cellIndex):null},findTarget:function(d,b){for(var a=d;a&&!(b in a)&&a!=this.domNode;)a=a.parentNode;return a!=this.domNode?a:null},findRowTarget:function(d){return this.findTarget(d,dojox.grid.rowIndexTag)},isIntraNodeEvent:function(d){try{return d.cellNode&&d.relatedTarget&&k.isDescendant(d.relatedTarget,d.cellNode)}catch(b){return!1}},isIntraRowEvent:function(d){try{var b=d.relatedTarget&&this.findRowTarget(d.relatedTarget);
return!b&&-1==d.rowIndex||b&&d.rowIndex==b.gridRowIndex}catch(a){return!1}},dispatchEvent:function(d){if(d.dispatch in this)return this[d.dispatch](d)},domouseover:function(d){d.cellNode&&d.cellNode!=this.lastOverCellNode&&(this.lastOverCellNode=d.cellNode,this.grid.onMouseOver(d));this.grid.onMouseOverRow(d)},domouseout:function(d){if(d.cellNode&&d.cellNode==this.lastOverCellNode&&!this.isIntraNodeEvent(d,this.lastOverCellNode)&&(this.lastOverCellNode=null,this.grid.onMouseOut(d),!this.isIntraRowEvent(d)))this.grid.onMouseOutRow(d)}})})},
"dojox/grid/headerBuilder":function(){define("dojox/grid/headerBuilder",["dojo/_base/declare","dojo","dojox/grid/Builder","dojox/grid/tableMap"],function(f,k,d,b){return f("dojox.grid.headerBuilder",d,{bogusClickTime:0,overResizeWidth:4,minColWidth:1,_table:'\x3ctable class\x3d"dojoxGrid-row-table" border\x3d"0" cellspacing\x3d"0" cellpadding\x3d"0"',update:function(){this.tableMap=new dojox.grid.tableMap(this.view.structure.rows)},generateHtml:function(a,b){var d=[this._table],e=this.view.structure.rows;
this.view.viewWidth&&d.push([' style\x3d"width:',this.view.viewWidth,';"'].join(""));d.push("\x3e");dojox.grid.fire(this.view,"onBeforeRow",[-1,e]);for(var f=0,g;g=e[f];f++)if(!g.hidden){d.push(g.invisible?'\x3ctr class\x3d"dojoxGrid-invisible"\x3e':"\x3ctr\x3e");for(var h=0,k,q;k=g[h];h++)k.customClasses=[],k.customStyles=[],q=this.generateCellMarkup(k,k.headerStyles,k.headerClasses,!0),q[5]=void 0!=b?b:a(k),q[3]=k.customStyles.join(";"),q[1]=k.customClasses.join(" "),d.push(q.join(""));d.push("\x3c/tr\x3e")}d.push("\x3c/table\x3e");
return d.join("")},getCellX:function(a){var b=a.layerX;if(k.isMoz)var d=dojox.grid.ascendDom(a.target,dojox.grid.makeNotTagName("th")),b=b-(d&&d.offsetLeft||0);d=dojox.grid.ascendDom(a.target,function(){if(!d||d==a.cellNode)return!1;b+=0>d.offsetLeft?0:d.offsetLeft;return!0});return b},decorateEvent:function(a){this.baseDecorateEvent(a);a.rowIndex=-1;a.cellX=this.getCellX(a);return!0},prepareLeftResize:function(a){var b=dojox.grid.getTdIndex(a.cellNode);a.cellNode=b?a.cellNode.parentNode.cells[b-
1]:null;a.cellIndex=a.cellNode?this.getCellNodeIndex(a.cellNode):-1;return!!a.cellNode},canResize:function(a){if(!a.cellNode||1<a.cellNode.colSpan)return!1;a=this.grid.getCell(a.cellIndex);return!a.noresize&&!a.isFlex()},overLeftResizeArea:function(a){return 0<a.cellIndex&&a.cellX<this.overResizeWidth&&this.prepareLeftResize(a)},overRightResizeArea:function(a){return a.cellNode&&a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth},domousemove:function(a){var b=this.overRightResizeArea(a)?"e-resize":
this.overLeftResizeArea(a)?"w-resize":"";b&&!this.canResize(a)&&(b="not-allowed");a.sourceView.headerNode.style.cursor=b||""},domousedown:function(a){dojox.grid.drag.dragging||(this.overRightResizeArea(a)||this.overLeftResizeArea(a))&&this.canResize(a)&&this.beginColumnResize(a)},doclick:function(a){if((new Date).getTime()<this.bogusClickTime)return k.stopEvent(a),!0},beginColumnResize:function(a){k.stopEvent(a);for(var b=[],d=this.tableMap.findOverlappingNodes(a.cellNode),e=0,f;f=d[e];e++)b.push({node:f,
index:this.getCellNodeIndex(f),width:f.offsetWidth});b={view:a.sourceView,node:a.cellNode,index:a.cellIndex,w:a.cellNode.clientWidth,spanners:b};dojox.grid.drag.start(a.cellNode,k.hitch(this,"doResizeColumn",b),k.hitch(this,"endResizeColumn",b),a)},doResizeColumn:function(a,b){var d=a.w+b.deltaX;if(d>=this.minColWidth){for(var e=0,f,g;f=a.spanners[e];e++)g=f.width+b.deltaX,f.node.style.width=g+"px",a.view.setColWidth(f.index,g);a.node.style.width=d+"px";a.view.setColWidth(a.index,d)}a.view.flexCells&&
!a.view.testFlexCells()&&(d=dojox.grid.findTable(a.node))&&(d.style.width="")},endResizeColumn:function(a){this.bogusClickTime=(new Date).getTime()+30;setTimeout(k.hitch(a.view,"update"),50)}})})},"dojox/grid/tableMap":function(){define("dojox/grid/tableMap",["dojo/_base/declare","dojo"],function(f,k){return f("dojox.grid.tableMap",null,{constructor:function(d){this.mapRows(d)},map:null,mapRows:function(d){if(d.length){this.map=[];for(var b=0,a;a=d[b];b++)this.map[b]=[];for(b=0;a=d[b];b++)for(var f=
0,k=0,e,p;e=a[f];f++){for(;this.map[b][k];)k++;this.map[b][k]={c:f,r:b};p=e.rowSpan||1;e=e.colSpan||1;for(var g=0;g<p;g++)for(var n=0;n<e;n++)this.map[b+g][k+n]=this.map[b][k];k+=e}}},dumpMap:function(){for(var d=0,b;b=this.map[d];d++)for(var a=0;b[a];a++);},getMapCoords:function(d,b){for(var a=0,f;f=this.map[a];a++)for(var k=0,e;e=f[k];k++)if(e.c==b&&e.r==d)return{j:a,i:k};return{j:-1,i:-1}},getNode:function(d,b,a){return(d=d&&d.rows[b])&&d.cells[a]},_findOverlappingNodes:function(d,b,a){var f=[];
b=this.getMapCoords(b,a);var k=this.map[b.j];for(a=0;k=this.map[a];a++)if(a!=b.j)with(k[b.i])(k=this.getNode(d,r,c))&&f.push(k);return f},findOverlappingNodes:function(d){return this._findOverlappingNodes(dojox.grid.findTable(d),dojox.grid.getTrIndex(d.parentNode),dojox.grid.getTdIndex(d))}})})},"dojox/grid/_grid/GridRowView":function(){define("dojox/grid/_grid/GridRowView",["dojo/_base/declare","dojo","dojox/grid/_grid/GridView"],function(f,k,d){return f("dojox.grid._grid.GridRowView",[d],{defaultWidth:"3em",
noscroll:!0,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden"},getWidth:function(){return this.viewWidth||this.defaultWidth},buildRowContent:function(b,a){a.innerHTML='\x3ctable style\x3d"width:'+(this.contentNode.offsetWidth-this.padBorderWidth)+'px;" \x3e\x3ctr\x3e\x3ctd class\x3d"dojoxGrid-rowbar-inner"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e'},renderHeader:function(){},resize:function(){this.resizeHeight()},
doStyleRowNode:function(b,a){var d=["dojoxGrid-rowbar"];this.grid.rows.isOver(b)&&d.push("dojoxGrid-rowbar-over");this.grid.selection.isSelected(b)&&d.push("dojoxGrid-rowbar-selected");a.className=d.join(" ")},domouseover:function(b){this.grid.onMouseOverRow(b)},domouseout:function(b){if(!this.isIntraRowEvent(b))this.grid.onMouseOutRow(b)}})})},"dojox/grid/_grid/publicEvents":function(){define("dojox/grid/_grid/publicEvents",["dojo/_base/declare","dojo"],function(f,k){dojox.grid.publicEvents={cellOverClass:"dojoxGrid-cell-over",
onKeyEvent:function(d){this.dispatchKeyEvent(d)},onContentEvent:function(d){this.dispatchContentEvent(d)},onHeaderEvent:function(d){this.dispatchHeaderEvent(d)},onStyleRow:function(d){with(d)customClasses+=(odd?" dojoxGrid-row-odd":"")+(selected?" dojoxGrid-row-selected":"")+(over?" dojoxGrid-row-over":"");this.focus.styleRow(d);this.edit.styleRow(d)},onKeyDown:function(d){if(!(d.altKey||d.ctrlKey||d.metaKey))switch(d.keyCode){case k.keys.ESCAPE:this.edit.cancel();break;case k.keys.ENTER:d.shiftKey||
(d=this.edit.isEditing(),this.edit.apply(),d||this.edit.setEditCell(this.focus.cell,this.focus.rowIndex));break;case k.keys.TAB:this.focus[d.shiftKey?"previousKey":"nextKey"](d);break;case k.keys.LEFT_ARROW:!this.edit.isEditing()&&this.focus.cell&&this.focus.move(0,-1);break;case k.keys.RIGHT_ARROW:!this.edit.isEditing()&&this.focus.cell&&this.focus.move(0,1);break;case k.keys.UP_ARROW:!this.edit.isEditing()&&this.focus.cell&&this.focus.move(-1,0);break;case k.keys.DOWN_ARROW:!this.edit.isEditing()&&
this.focus.cell&&this.focus.move(1,0)}},onMouseOver:function(d){-1==d.rowIndex?this.onHeaderCellMouseOver(d):this.onCellMouseOver(d)},onMouseOut:function(d){-1==d.rowIndex?this.onHeaderCellMouseOut(d):this.onCellMouseOut(d)},onMouseOverRow:function(d){this.rows.isOver(d.rowIndex)||(this.rows.setOverRow(d.rowIndex),-1==d.rowIndex?this.onHeaderMouseOver(d):this.onRowMouseOver(d))},onMouseOutRow:function(d){if(this.rows.isOver(-1))this.onHeaderMouseOut(d);else this.rows.isOver(-2)||(this.rows.setOverRow(-2),
this.onRowMouseOut(d))},onCellMouseOver:function(d){k.addClass(d.cellNode,this.cellOverClass)},onCellMouseOut:function(d){k.removeClass(d.cellNode,this.cellOverClass)},onCellClick:function(d){this.focus.setFocusCell(d.cell,d.rowIndex);this.onRowClick(d)},onCellDblClick:function(d){this.edit.setEditCell(d.cell,d.rowIndex);this.onRowDblClick(d)},onCellContextMenu:function(d){this.onRowContextMenu(d)},onCellFocus:function(d,b){this.edit.cellFocus(d,b)},onRowClick:function(d){this.edit.rowClick(d);this.selection.clickSelectEvent(d)},
onRowDblClick:function(d){},onRowMouseOver:function(d){},onRowMouseOut:function(d){},onRowContextMenu:function(d){k.stopEvent(d)},onHeaderMouseOver:function(d){},onHeaderMouseOut:function(d){},onHeaderCellMouseOver:function(d){k.addClass(d.cellNode,this.cellOverClass)},onHeaderCellMouseOut:function(d){k.removeClass(d.cellNode,this.cellOverClass)},onHeaderClick:function(d){},onHeaderCellClick:function(d){this.setSortIndex(d.cell.index);this.onHeaderClick(d)},onHeaderDblClick:function(d){},onHeaderCellDblClick:function(d){this.onHeaderDblClick(d)},
onHeaderCellContextMenu:function(d){this.onHeaderContextMenu(d)},onHeaderContextMenu:function(d){k.stopEvent(d)},onStartEdit:function(d,b){},onApplyCellEdit:function(d,b,a){},onCancelEdit:function(d){},onApplyEdit:function(d){},onCanSelect:function(d){return!0},onCanDeselect:function(d){return!0},onSelected:function(d){this.updateRowStyles(d)},onDeselected:function(d){this.updateRowStyles(d)},onSelectionChanged:function(){}}})},"dojox/grid/data/Dynamic":function(){define("dojox/grid/data/Dynamic",
["dojo/_base/declare","dojo","dojox/grid/data/Table"],function(f,k,d){f=f("dojox.grid.data.Dynamic",d,{constructor:function(){this.page=[];this.pages=[]},page:null,pages:null,rowsPerPage:100,requests:0,bop:-1,eop:-1,clearData:function(){this.pages=[];this.bop=this.eop=-1;this.setData([])},getRowCount:function(){return this.count},getColCount:function(){return this.fields.count()},setRowCount:function(b){this.count=b;this.change()},requestsPending:function(b){},rowToPage:function(b){return this.rowsPerPage?
Math.floor(b/this.rowsPerPage):b},pageToRow:function(b){return this.rowsPerPage?this.rowsPerPage*b:b},requestRows:function(b,a){},rowsProvided:function(b,a){this.requests--;0==this.requests&&this.requestsPending(!1)},requestPage:function(b){b=this.pageToRow(b);var a=Math.min(this.rowsPerPage,this.count-b);0<a&&(this.requests++,this.requestsPending(!0),setTimeout(k.hitch(this,"requestRows",b,a),1))},needPage:function(b){this.pages[b]||(this.pages[b]=!0,this.requestPage(b))},preparePage:function(b,
a){if(b<this.bop||b>=this.eop){var d=this.rowToPage(b);this.needPage(d);this.bop=d*this.rowsPerPage;this.eop=this.bop+(this.rowsPerPage||this.count)}},isRowLoaded:function(b){return!!this.data[b]},removePages:function(b){for(var a=0,d;void 0!=(d=b[a]);a++)this.pages[this.rowToPage(d)]=!1;this.bop=this.eop=-1},remove:function(b){this.removePages(b);dojox.grid.data.Table.prototype.remove.apply(this,arguments)},getRow:function(b){var a=this.data[b];a||this.preparePage(b);return a},getDatum:function(b,
a){var d=this.getRow(b);return d?d[a]:this.fields.get(a).na},setDatum:function(b,a,d){var f=this.getRow(a);f&&(f[d]=b,this.datumChange(b,a,d))},canSort:function(){return!1}});dojox.grid.data.dynamic=dojox.grid.data.Dyanamic;return f})},"dojox/grid/data/Table":function(){define("dojox/grid/data/Table",["dojo/_base/declare","dojo","dojox/grid/data/Rows"],function(f,k,d){f=f("dojox.grid.data.Table",d,{constructor:function(){this.cache=[]},colCount:0,data:null,cache:null,measure:function(){this.count=
this.getRowCount();this.colCount=this.getColCount();this.allChange()},getRowCount:function(){return this.data?this.data.length:0},getColCount:function(){return this.data&&this.data.length?this.data[0].length:this.fields.count()},badIndex:function(b,a){},isGoodIndex:function(b,a){return 0<=b&&b<this.count&&(2>arguments.length||0<=a&&a<this.colCount)},getRow:function(b){return this.data[b]},copyRow:function(b){return this.getRow(b).slice(0)},getDatum:function(b,a){return this.data[b][a]},get:function(){throw'Plain "get" no longer supported. Use "getRow" or "getDatum".';
},setData:function(b){this.data=b||[];this.allChange()},setRow:function(b,a){this.data[a]=b;this.rowChange(b,a);this.change()},setDatum:function(b,a,d){this.data[a][d]=b;this.datumChange(b,a,d)},set:function(){throw'Plain "set" no longer supported. Use "setData", "setRow", or "setDatum".';},setRows:function(b,a){for(var d=0,f=b.length,e=a;d<f;d++,e++)this.setRow(b[d],e)},update:function(b,a,d){return!0},_insert:function(b,a){dojox.grid.arrayInsert(this.data,a,b);this.count++;return!0},_remove:function(b){for(var a=
b.length-1;0<=a;a--)dojox.grid.arrayRemove(this.data,b[a]);this.count-=b.length;return!0},sort:function(){this.data.sort(this.makeComparator(arguments))},swap:function(b,a){dojox.grid.arraySwap(this.data,b,a);this.rowChange(this.getRow(b),b);this.rowChange(this.getRow(a),a);this.change()},dummy:0});dojox.grid.data.table=dojox.grid.data.Table;return f})},"dojox/grid/data/Rows":function(){define("dojox/grid/data/Rows",["dojo/_base/declare","dojo","dojox/grid/data/Model"],function(f,k,d){return f("dojox.grid.data.Rows",
d,{allChange:function(){this.notify("AllChange",arguments);this.notify("Change",arguments)},rowChange:function(){this.notify("RowChange",arguments)},datumChange:function(){this.notify("DatumChange",arguments)},beginModifyRow:function(b){this.cache[b]||(this.cache[b]=this.copyRow(b))},endModifyRow:function(b){var a=this.cache[b];if(a){var d=this.getRow(b);dojox.grid.arrayCompare(a,d)||this.update(a,d,b);delete this.cache[b]}},cancelModifyRow:function(b){var a=this.cache[b];a&&(this.setRow(a,b),delete this.cache[b])},
generateComparator:function(b,a,d,f){return function(e,h){var g=b(e[a],h[a]);return g?d?g:-g:f&&f(e,h)}}})})},"dojox/grid/data/Model":function(){define("dojox/grid/data/Model",["dojo/_base/declare","dojo","dojox/grid/data/Fields"],function(f,k,d){return f("dojox.grid.data.Model",null,{constructor:function(b,a){this.observers=[];this.fields=new d;b&&this.fields.set(b);this.setData(a)},count:0,updating:0,observer:function(b,a){this.observers.push({o:b,p:a||"model"})},notObserver:function(b){for(var a=
0,d;d=this.observers[a];a++)if(d.o==b){this.observers.splice(a,1);break}},notify:function(b,a){if(!this.isUpdating())for(var d=a||[],f=0,e,k;k=this.observers[f];f++)e=k.p+b,k=k.o,e in k&&k[e].apply(k,d)},clear:function(){this.fields.clear();this.clearData()},beginUpdate:function(){this.updating++},endUpdate:function(){this.updating&&this.updating--},isUpdating:function(){return!!this.updating},clearData:function(){this.setData(null)},change:function(){this.notify("Change",arguments)},insertion:function(){this.notify("Insertion",
arguments);this.notify("Change",arguments)},removal:function(){this.notify("Removal",arguments);this.notify("Change",arguments)},insert:function(b){if(!this._insert.apply(this,arguments))return!1;this.insertion.apply(this,k._toArray(arguments,1));return!0},remove:function(b){if(!this._remove.apply(this,arguments))return!1;this.removal.apply(this,arguments);return!0},canSort:function(){return null!=this.sort},makeComparator:function(b){for(var a,d,f=null,e=b.length-1;0<=e;e--)a=b[e],d=Math.abs(a)-
1,0<=d&&(d=this.fields.get(d),f=this.generateComparator(d.compare,d.key,0<a,f));return f},sort:null,dummy:0})})},"dojox/grid/data/Fields":function(){define("dojox/grid/data/Fields",["dojo/_base/declare","dojo","dojox/grid/data/Mixer","dojox/grid/data/Field"],function(f,k,d,b){return f("dojox.grid.data.Fields",d,{constructor:function(a){this.defaultValue=new (a?a:b)},indexOf:function(a){for(var b=0;b<this.values.length;b++){var d=this.values[b];if(d&&d.key==a)return b}return-1}})})},"dojox/grid/data/Mixer":function(){define("dojox/grid/data/Mixer",
["dojo/_base/declare","dojo"],function(f,k){var d=f("dojox.grid.data.Mixer",null,{constructor:function(){this.defaultValue={};this.values=[]},count:function(){return this.values.length},clear:function(){this.values=[]},build:function(b){var a=k.mixin({owner:this},this.defaultValue);a.key=b;return this.values[b]=a},getDefault:function(){return this.defaultValue},setDefault:function(b){for(var a=0,d;d=arguments[a];a++)k.mixin(this.defaultValue,d)},get:function(b){return this.values[b]||this.build(b)},
_set:function(b,a){for(var d=this.get(b),f=1;f<arguments.length;f++)k.mixin(d,arguments[f]);this.values[b]=d},set:function(){if(!(1>arguments.length)){var b=arguments[0];if(k.isArray(b)){b.length&&b[0]["default"]&&this.setDefault(b.shift());for(var a=0,d=b.length;a<d;a++)this._set(a,b[a])}else this._set.apply(this,arguments)}},insert:function(b,a){b>=this.values.length?this.values[b]=a:this.values.splice(b,0,a)},remove:function(b){this.values.splice(b,1)},swap:function(b,a){dojox.grid.arraySwap(this.values,
b,a)},move:function(b,a){dojox.grid.arrayMove(this.values,b,a)}});dojox.grid.data.compare=function(b,a){return b>a?1:b==a?0:-1};return d})},"dojox/grid/data/Field":function(){define("dojox/grid/data/Field",["dojo/_base/declare","dojo"],function(f,k){return f("dojox.grid.data.Field",null,{constructor:function(d){this.name=d;this.compare=dojox.grid.data.compare},na:dojox.grid.na})})},"dojox/grid/drag":function(){define("dojox/grid/drag",["dojo"],function(f){var k=dojox.grid.drag={};k.dragging=!1;k.hysteresis=
2;k.capture=function(d){d.setCapture?d.setCapture():(document.addEventListener("mousemove",d.onmousemove,!0),document.addEventListener("mouseup",d.onmouseup,!0),document.addEventListener("click",d.onclick,!0))};k.release=function(d){d.releaseCapture?d.releaseCapture():(document.removeEventListener("click",d.onclick,!0),document.removeEventListener("mouseup",d.onmouseup,!0),document.removeEventListener("mousemove",d.onmousemove,!0))};k.start=function(d,b,a,f,l){d&&!k.dragging&&(k.dragging=!0,k.elt=
d,k.events={drag:b||dojox.grid.nop,end:a||dojox.grid.nop,start:l||dojox.grid.nop,oldmove:d.onmousemove,oldup:d.onmouseup,oldclick:d.onclick},k.positionX=f&&"screenX"in f?f.screenX:!1,k.positionY=f&&"screenY"in f?f.screenY:!1,k.started=!1===k.position,d.onmousemove=k.mousemove,d.onmouseup=k.mouseup,d.onclick=k.click,k.capture(k.elt))};k.end=function(){k.release(k.elt);k.elt.onmousemove=k.events.oldmove;k.elt.onmouseup=k.events.oldup;k.elt.onclick=k.events.oldclick;k.elt=null;try{k.started&&k.events.end()}finally{k.dragging=
!1}};k.calcDelta=function(d){d.deltaX=d.screenX-k.positionX;d.deltaY=d.screenY-k.positionY};k.hasMoved=function(d){return Math.abs(d.deltaX)+Math.abs(d.deltaY)>k.hysteresis};k.mousemove=function(d){d=f.fixEvent(d);f.stopEvent(d);k.calcDelta(d);!k.started&&k.hasMoved(d)&&(k.events.start(d),k.started=!0);k.started&&k.events.drag(d)};k.mouseup=function(d){f.stopEvent(f.fixEvent(d));k.end()};k.click=function(d){f.stopEvent(f.fixEvent(d))}})},"ws/address/PeoplePickerGridModel":function(){define("ws/address/PeoplePickerGridModel",
["dojo/_base/declare","dojo","dojox/grid/data/Dynamic","dojox/grid/Grid","ws/string"],function(f,k,d){return f([d],{columns:{NameAndEmail:0},modelUpdated:function(){},constructor:function(b,a,d){this.model=d;k.connect(this.model,"modelUpdated",this,"modelUpdated")},getDatum:function(b,a){var d=this.model.getRow(b);if(null==d)return"Contact Error";switch(a){case this.columns.NameAndEmail:var f="c"==d.bType?d.composeValue:1==d.count?Config.Strings.OneAddress:ws.string.substituteParams(Config.Strings.NAddresses,
d.count);return"\x3cspan\x3e"+ws.string.escapeXml(d.name||f)+"\x3c/span\x3e "+ws.string.escapeXml(f)}},getRowCount:function(){return this.model.getRowCount()}})})},"ws/address/AutoComplete":function(){define("ws/address/AutoComplete","dojo/_base/declare dojo/text!ws/address/AutoComplete.html dojo/text!ws/address/AutoComplete.css dojo dijit dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ws/address/ABUtils ws/address/AddressModel dojo/on dojo/dom-geometry ws/widget/popup ws/string".split(" "),
function(f,k,d,b,a,h,l,e,p,g,n,t){return f([h,l,e],{templateString:k,css:{templateString:d},className:"",SELECTED_CLASS:"selected",isActive:!1,isOpen:!1,actionCB:null,getWidthCB:null,lastAutoComplete:null,anchorNode:null,data:[],addrFieldContactSelectedCB:null,reqSeqNum:0,reqLimitMax:!1,reqLimitTimout:null,startup:function(){this.inherited(arguments);this.domNode&&this.domNode.parentNode&&b.addClass(this.domNode.parentNode,"AutoCompleteDomNode");this.xobConfig={numResults:9,limitTimout:51,limitMaxTimout:12001,
reqTimout:5001};if(Config.XobniAutoCompConfig){var a=Config.XobniAutoCompConfig.split(",");4==a.length&&(this.xobConfig={numResults:a[0],limitTimout:a[1],limitMaxTimout:a[2],reqTimout:a[3]})}this.subscribe("wsresize","close")},activate:function(a,b){this.addrFieldContactSelectedCB=b;this.anchorNode=a;this.isActive=!0},onContactSelected:function(a){a&&this.addrFieldContactSelectedCB&&this.addrFieldContactSelectedCB(a)},onOpen:function(){this.domNode&&this.domNode.parentNode&&b.addClass(this.domNode.parentNode,
"AutoCompleteDomNode");this.isOpen=!0;this.getWidthCB&&this.choices&&(this.choices.style.width=this.getWidthCB()+"px");if(this.popupNode&&this.domNode&&this.anchorNode){var a=t.position(this.anchorNode),d=t.position(this.popupNode),a=a.y+a.h,e=d.y,f=Settings.ReadabilityMode&&Config.EnableReadability?263:245;this.domNode.style.overflowY="auto";0<=e&&3<a&&a&&e<a-3?(this.domNode.style.maxHeight=Math.max(70,Math.min(d.h-(a-e),f))+"px",this.popupNode.style.top=a-1+"px"):this.domNode.style.maxHeight=f+
"px"}},close:function(){this.isOpen=this.isActive=!1;ws.widget.popup.close(this)},onClose:function(){this.isOpen=this.isActive=!1},move:function(d,e){a.placeOnScreenAroundElement(this.choices,d,{BL:"TL",TL:"BL"});if(e){var f=b.marginBox(this.choices);e.offsetHeight&&(this.popupNchoicesode.style.top=f.t+e.offsetHeight+"px");e.offsetWidth&&(this.choices.style.left=f.l+e.offsetWidth+"px")}},processKeyPress:function(a,d){this.isActive&&(this.reqLimitTimout&&(window.clearTimeout(this.reqLimitTimout),this.reqLimitTimout=
null),this.reqLimitMax?this.getChoices(a,d):this.reqLimitTimout=window.setTimeout(b.hitch(this,this.getChoices,a,d),this.xobConfig.limitTimout),this.reqLimitMaxTimout||(this.reqLimitMaxTimout=window.setTimeout(b.hitch(this,function(){this.reqLimitMax=!0}),this.xobConfig.limitMaxTimout)))},processSpecialKeys:function(a){var d=!1;if(this.isActive&&this.isOpen){d=!0;switch(a.keyCode){case b.keys.TAB:case b.keys.ENTER:var e=this.getSelectedContact();this.onContactSelected(e);this.close();break;case b.keys.DOWN_ARROW:this.checkUpDownArrows(!1);
break;case b.keys.UP_ARROW:this.checkUpDownArrows(!0);break;case b.keys.ESCAPE:this.close();break;default:d=!1}d&&a.preventDefault()}},checkUpDownArrows:function(a){var b=this.getSelected(),d=this.choices.childNodes;-1==b?a?this.setSelected(0,d.length-1):this.setSelected(0,0):a?0<=b-1?this.setSelected(b,b-1):0<d.length&&this.setSelected(b,d.length-1):b+1<d.length?this.setSelected(b,b+1):this.setSelected(b,0)},getChoices:function(a,b){var d=!0;-1==Config.AutoCompleteSource?d=!1:0==Config.AutoCompleteSource&&
(d=ws.settings.loadConsolidated("EnhancedAutoComplete"));d?this.getChoicesXobni(a,b):this.getChoicesLocal(a,b)},getChoicesXobni:function(a,d){this.reqLimitMaxTimout&&(window.clearTimeout(this.reqLimitMaxTimout),this.reqLimitMaxTimout=null,this.reqLimitMax=!1);if(Config.XobniAutoCompURL){var e="";d&&d.length&&(e=d.join(","));this.reqSeqNum++;e={url:Config.XobniAutoCompURL,substiParam:{q:a,list:"true",hidden:"false",type:"smtp",filter:"name,email,otherid",cntxtTo:e,cntxtFrom:encodeURIComponent(Settings.ActiveUserEmailAddress),
key:this.reqSeqNum,count:""+parseInt(this.xobConfig.numResults)},withCredentials:!0,load:b.hitch(this,function(a){a&&this.reqSeqNum>a.k||(a&&a.r&&a.r.length?this.populateChoices(a.r):this.removeChoices(!0))}),error:b.hitch(this,function(){this.removeChoices(!0)}),timeout:this.xobConfig.reqTimout};p.doCXABReq(e)}},getChoicesLocal:function(a){this.addressModel||(this.addressModel=new g);this.addressModel.setABListReadyCB(b.hitch(this,function(){var b=this.addressModel.getAutoCompleteContacts(a,this.xobConfig.numResults);
b&&b.length?this.populateChoices(b):this.removeChoices(!0)}))},setSelected:function(a,d){var e=this.choices.childNodes;e&&e[d]&&(e[a]&&b.removeClass(e[a],this.SELECTED_CLASS),b.addClass(e[d],this.SELECTED_CLASS))},getSelected:function(){for(var a=null==this.choices.childNodes?0:this.choices.childNodes.length,d=0;d<a;d++)if(b.hasClass(this.choices.childNodes[d],this.SELECTED_CLASS))return d;return-1},addItem:function(a){var d="",e="";if(a){if("string"==typeof a.nd&&"string"==typeof a.e)d="\x3cspan\x3e"+
ws.string.escapeXml(a.nd)+"\x3c/span\x3e "+ws.string.escapeXml(a.e),Config.XobniAutoCompDenyURL&&a.f&&(d+='\x3cspan title\x3d"'+Config.Strings.AutoCompDenyList+'" class\x3d"denyBtn"\x3e\x3csvg class\x3d"svgIcon"\x3e\x3cuse xlink:href\x3d"#iconClose"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/span\x3e'),e=a.e;else if(a.i&&"LIST"===a.i&&a.es&&a.es.length){e=[];for(d=0;d<a.es.length;d++)e.push(a.es[d].e);d=1==e.length?Config.Strings.OneAddress:ws.string.substituteParams(Config.Strings.NAddresses,e.length);d="\x3cspan\x3e"+
ws.string.escapeXml(a.n)+"\x3c/span\x3e "+d;e.sort();e=e.join(", ")}if(d){var f=this.data.length,d=b.create("div",{innerHTML:d,className:"itemDiv"},this.choices);d.setAttribute("_wsACval",f);e={cmpsVal:e,overHndle:n(d,"mouseover",b.hitch(this,this.itemOnMouseOver)),clickHndle:n(d,"click",b.hitch(this,this.itemOnClick,f))};(d=b.query(".denyBtn",d))&&d.length&&a.c&&(e.denyClickHndle=n(d[0],"click",b.hitch(this,this.denyListItem,a.e,a.choiceIdx)));this.data.push(e)}}},removeItems:function(){if(this.data.length){for(var a=
0;a<this.data.length;a++)this.data[a].overHndle.remove(),this.data[a].clickHndle.remove(),this.data[a].denyClickHndle&&this.data[a].denyClickHndle.remove();this.data=[]}},populateChoices:function(a){this.removeItems();if(a&&a.length){this.removeChoices();Config.XobniAutoCompDenyURL&&(this.choiceList=a);for(var b=[],d=0;d<a.length;d++)a[d].choiceIdx=d,a[d].i&&"LIST"==a[d].i?this.addItem(a[d]):b.push(a[d]);for(d=0;d<b.length;d++)this.addItem(b[d]);this.data&&this.data.length?(this.setSelected(-1,0),
this.showChoices()):this.removeChoices(!0)}else this.removeChoices(!0)},showChoices:function(){this.isActive&&(ws.widget.popup({popup:this,parent:null,around:this.anchorNode,orient:{BL:"TL"},padding:[0,-1]}),this.choices.scrollTop=0)},removeChoices:function(a){this.choices.innerHTML="";a&&this.close()},itemOnMouseOver:function(a){var d=this.getSelected();-1!=d&&b.removeClass(this.choices.childNodes[d],this.SELECTED_CLASS);b.addClass(a.currentTarget,this.SELECTED_CLASS)},getSelectedContact:function(a){var b=
null;"number"==typeof a&&this.data[a]?b={composeValue:this.data[a].cmpsVal}:(a=this.getSelected(),-1<a&&(a=this.choices.childNodes[a].getAttribute("_wsACval"),"undefined"!=typeof a&&this.data[a]&&(b={composeValue:this.data[a].cmpsVal})));return b},itemOnClick:function(a,b){var d=this.getSelectedContact(a);this.onContactSelected(d);this.close();b.preventDefault();b.stopPropagation()},XobniAddEPDenyList:function(a){if(Config.XobniAutoCompDenyURL){var d=function(a){ws.reporting.reportDLAction("Contacts-XobniAutoCompDenyListFail");
window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.AjaxErr,"Error Handler for XobniAutoCompDeny",a,"AutoComplete.js")};a={url:Config.XobniAutoCompDenyURL,substiParam:{id:encodeURIComponent(a)},withCredentials:!0,usePost:!0,load:b.hitch(this,function(a){a&&"success"===a.status?ws.reporting.reportDLAction("Contacts-XobniAutoCompDenyListAdd"):d(a||"")}),error:b.hitch(this,function(a){d(a||"")}),timeout:this.xobConfig.reqTimout};p.doCXABReq(a)}},denyListItem:function(a,b,d){this.XobniAddEPDenyList(a);
this.choiceList&&this.choiceList.length&&b<this.choiceList.length&&(this.choiceList.splice(b,1),this.populateChoices(this.choiceList));d.preventDefault();d.stopPropagation()}})})},"ws/address/AllAddressModel":function(){define("ws/address/AllAddressModel","dojo/_base/declare dojo ws/address/AddressModel ws/address/record ws/io ws/lang".split(" "),function(f,k,d){return f([d],{getRow:function(b){return this.getRowForAllEmails(b)},getRowCount:function(){return this.getRowCountForAllEmails()},deleteAddresses:null,
_removeAddressesLocal:null,toggleSelectRow:null,toggleSelectUid:null,selectRange:function(){return!1},selectAll:function(){return!1},deselectAll:null,getSelectedUids:function(){return[]},isSelected:function(b){return!1},isAllSelected:function(){return!1},isAllSelReal:function(){return!1},getRowForUid:null,getRowsForUids:null})})},"ws/calendar/ColorPicker":function(){define("ws/calendar/ColorPicker","dojo/_base/declare dojo/text!ws/calendar/ColorPicker.css dojo dijit dijit/_Widget dijit/_TemplatedMixin ws/widget/CalendarColorPickerMenuItem ws/widget/WSMenu".split(" "),
function(f,k,d,b,a,h,l){return f([a,h],{templateString:'\x3cdiv class\x3d"calColorPicker" data-dojo-attach-event\x3d"onclick: showColorPicker"\x3e\x3cimg src\x3d"${spacer}" class\x3d"wsCalCB wsCalCB_009712"\x3e\x3csvg class\x3d"btnArrowImg"\x3e\x3cuse xlink:href\x3d"#iconDown"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e',css:{templateString:k},colorPickerMenu:null,selectedColor:null,defaultCalColor:"#0360EB",startup:function(){this.reset()},reset:function(){this.onCalColorSelected(this.defaultCalColor,
!0)},showColorPicker:function(a){a.preventDefault();this.colorPickerMenu?this.colorPickerMenu.isShowing()?this.colorPickerMenu.close():this.colorPickerMenu.open(this.domNode):(this.colorPickerMenu=ws.widget.createMenu([{dojoType:l,onClick:d.hitch(this,"onCalColorSelected")}]),this.colorPickerMenu.getChildren()[0].setCurrentColor(),this.colorPickerMenu.open(this.domNode))},onCalColorSelected:function(a,b){this.domNode.firstChild.className="wsCalCB wsCalCB_"+a.substring(1);this.selectedColor=a;if(!b)this.onColorSelected(a)},
setSelectedColor:function(a,b){this.onCalColorSelected(a,b)},getSelectedColor:function(){return this.selectedColor},onColorSelected:function(a){}})})},"ws/widget/WSDatePicker":function(){define("ws/widget/WSDatePicker","dojo/_base/declare dojo/text!ws/widget/WSDatePicker.html dojo/text!ws/widget/WSDatePicker.css dojo dijit dijit/_Widget dijit/_TemplatedMixin ws/string ws/date".split(" "),function(f,k,d,b,a,h,l){return f([h,l],{templateString:k,css:{templateString:d},gridHeadDateFormat:Config.Strings.DatePickerHeaderDateFormat,
gridFooterDateFormat:Config.Strings.DatePickerFooterDateFormat,hideTodayLink:!1,hideBorder:!1,yearMode:!1,startup:function(a,b){this.dateCells=this.dateRows=this.viewEnd=this.viewStart=this.selectedDate=this.displayDate=this.today=this.now=null;this.startRow=2;this.endRow=7;this.numRowsBeingDisplayed=5;this.dateRows=this.datePickerBody.rows;this.dateCells=[];for(var d,e=this.startRow;e<=this.endRow;e++){d=this.dateRows[e];this.dateCells[e-this.startRow]=[];d=d.cells;for(var f=0;f<d.length;f++)this.dateCells[e-
this.startRow][f]=d[f],this.dateCells[e-this.startRow][f]._dayOffset=7*(e-this.startRow)+f}f=0;for(d=[];f<ws.date.abbrevDays.length;)e=(ws.date.firstDayOfWeek+f)%ws.date.abbrevDays.length,d[f]=ws.date.abbrevDays[e],f++;f=this.datePickerDaysOfWeek.getElementsByTagName("span");for(e=0;e<f.length;e++)f[e].innerHTML=d[e];this.setDate(null);this.hideTodayLink&&(this.datePickerFoot.style.display="none");this.hideBorder&&(this.WSDatePickerDiv.style.border="none");this.yearMode&&this.setYearMode()},selectDateConnect:function(a){},
updateUI:function(a){var d={};a&&(d=a);this.yearMode?(this.monthYearNode.innerHTML=ws.date.formatDateTime(this.displayDate,"MMM"),this.year.innerHTML=ws.date.formatDateTime(this.displayDate,"yyyy")):this.monthYearNode.innerHTML=ws.date.formatDateTime(this.displayDate,this.gridHeadDateFormat);for(var e=a=null,f=this.viewStart,h=this.endRow-this.startRow+1,k=0,k=0;k<h;k++)if(k==h-1&&f.getMonth()!=this.displayDate.getMonth()){this.sixthWeekRow.style.display="none";break}else if(k==h-2&&f.getMonth()!=
this.displayDate.getMonth()){this.fifthWeekRow.style.display="none";break}else{k==h-1&&(this.sixthWeekRow.style.display="");k==h-2&&(this.fifthWeekRow.style.display="");for(var l=0;l<this.dateCells[k].length;l++){a=this.dateCells[k][l];b.removeClass(a);e=a.childNodes[0];if(f.getMonth()!=this.displayDate.getMonth())b.addClass(a,"empty"),e.innerHTML="";else{var w=f.getDate();e.style.fontWeight=d[w]?"bold":"normal";e.innerHTML=f.getDate()}e="";f.getTime()==this.today.getTime()&&(e="today");this.selectedDate&&
ws.date.isSameDay(f,this.selectedDate)&&(e="selected");e&&b.addClass(a,e);f=ws.date.add(f,ws.date.dateParts.DAY,1)}}this.numRowsBeingDisplayed=k;d=ws.date.formatDateTime(this.today,this.gridFooterDateFormat);this.todayNode.innerHTML=Config.Strings.TodayIs+d},getNumRows:function(){return this.numRowsBeingDisplayed},setDate:function(a){this.now=new Date;this.today=new Date(this.now.getFullYear(),this.now.getMonth(),this.now.getDate());this.displayDate=this.selectedDate=a;null==this.displayDate&&(this.displayDate=
new Date(this.now.getFullYear(),this.now.getMonth(),this.now.getDate()));null==this.selectedDate&&(this.selectedDate=new Date(this.now.getFullYear(),this.now.getMonth(),this.now.getDate()));this.viewStart=ws.date.getFirstDayInMonthView(this.displayDate);this.viewEnd=ws.date.getLastDayInMonthView(this.displayDate);this.updateUI()},decrementMonthYear:function(a){this.yearMode?(a=ws.date.add(this.displayDate,ws.date.dateParts.YEAR,-1),this.setDate(a)):this.decrementMonth(a)},incrementMonthYear:function(a){this.yearMode?
(a=ws.date.add(this.displayDate,ws.date.dateParts.YEAR,1),this.setDate(a)):this.incrementMonth(a)},decrementMonth:function(a){a=ws.date.add(this.displayDate,ws.date.dateParts.MONTH,-1);this.setDate(a)},incrementMonth:function(a){a=ws.date.incrementMonth(this.displayDate);this.setDate(a)},onSelectDate:function(a){(a=a.currentTarget)&&""!=a.childNodes[0].innerHTML&&(this.selectedDate=ws.date.add(this.viewStart,ws.date.dateParts.DAY,a._dayOffset),this.setDate(this.selectedDate),this.selectDateConnect(this.selectedDate))},
setYearMode:function(){this.year.style.display="inline-block";this.datePickerFoot.style.display="none";this.topNav.style.display="block";this.topNavChild.style.width="100px"},displayForPublicView:function(){this.datePickerFoot.style.display="none";this.WSDatePickerDiv.style.border="none";b.query(".nav",this.domNode).forEach(function(a){a.style.display="none"});b.style(this.datePickerMain,"float","none");this.topNav.style.display="block"},selectToday:function(a){this.selectedDate=this.today;this.setDate(this.selectedDate);
this.selectDateConnect(this.selectedDate)},onSelectDate2:function(a){}})})},"ws/widget/FTUTip":function(){define("ws/widget/FTUTip","dojo/_base/declare dojo/text!ws/widget/FTUTip.html dojo/text!ws/widget/FTUTip.css dojo dijit dijit/_Widget dijit/_TemplatedMixin".split(" "),function(f,k,d,b,a,h,l){return f([h,l],{templateString:k,css:{templateString:d},name:"",content:"",delayOnShow:10,className:"",dimensions:{w:264,h:null},positionOverNode:document.body,offset:{x:0,y:0},arrowPosition:"right",distanceArrowFromEdge:10,
saveAsSeenOnClose:!0,startup:function(){this.positionOverNode&&this.connect(window,"onresize","placeOnScreen");this.message.style.width=this.dimensions.w+"px";this.dimensions.height&&(this.message.style.height=this.dimensions.h+"px");this.domNode&&null!=this.balloonArrowNode&&(b.addClass(this.balloonArrowNode,"balloonArrow "+this.arrowPosition),"right"==this.arrowPosition||"left"==this.arrowPosition?this.balloonArrowNode.style.top=this.distanceArrowFromEdge+"px":this.balloonArrowNode.style.left=this.distanceArrowFromEdge+
"px");this.message&&(this.message.innerHTML=this.content,b.forEach(b.query("a",this.message),function(a){b.addClass(a,"wsLink")}));this.load&&this.load(this)},setContent:function(a){this.content=a;this.message&&(this.message.innerHTML=this.content,b.forEach(b.query("a",this.message),function(a){b.addClass(a,"wsLink")}))},placeOnScreen:function(){if(this.positionOverNode){this.tgtElId&&document.getElementById(this.tgtElId)!==this.positionOverNode&&(this.positionOverNode=document.getElementById(this.tgtElId));
var d=b.position(this.positionOverNode);a.placeOnScreen(this.domNode,{x:this.offset.x+d.x,y:this.offset.y+d.y},["TL"])}},showTip:function(){0<this.delayOnShow?setTimeout(b.hitch(this,function(){this.domNode.style.display="";this.placeOnScreen()}),this.delayOnShow):(this.domNode.style.display="",this.placeOnScreen())},onClick:function(a){"A"==a.target.tagName&&this.closeTip()},closeTip:function(){this.saveAsSeenOnClose&&ws.bubbleConfig.saveAsSeen(this.name);this.destroy()},isExisting:function(){return this.domNode}})})},
"ws/suite/TodayPage":function(){define("ws/suite/TodayPage","dojo/_base/declare dojo/text!ws/suite/TodayPage.html dojo/text!ws/suite/TodayPage.css dojo dijit dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/request/iframe dojo/request/xhr dojo/cookie dojo/Deferred ws/Spinner dijit/layout/BorderContainer ws/date ws/html ws/io ws/string ws/widget/Pane ws/widget/SingleLineNotification dojo/request/iframe ws/widget/WSSelect".split(" "),function(f,k,d,b,a,h,l,e,p,g,n,t,q){return f([h,
l,e],{templateString:k,css:{templateString:d},_earlyTemplatedStartup:!0,themeColorsDone:!1,hasIframeInited:!1,tempModes:["F","C"],currTempMode:Config.DefaultTempUnits,updatedLoc:!1,startup:function(){if(!this._started){this._started=!0;this.locale="en-us";ws.UserContext.Locale&&(this.locale=ws.UserContext.Locale);this.iframe=b.byId("todayIframe");"about:blank"==this.iframe.src&&(this.iframe.style.display="");this.citySelect.style.display="none";var a=b.hitch(this,function(){this.hasIframeInited=!0;
p.setSrc(this.iframe,this._getTodayUrl(),!0);this.setupWeather();""==this.iframe.style.display});Config.EnableThemes&&window._ws_theme&&!window._ws_theme.initialThemeLoaded?window._ws_theme.todayPageCallbackFunc=a:setTimeout(a,0);this.connect(this.mailModel,"modelUpdated","updateMailCount");this.subscribe("Theme/Change","updateTodayPageIframes");this.connect(this.zipInput.domNode,"onkeyup","onZipKey");this.subscribe("MegaMenuOpen",function(){this.iframeClickCatcher||(this.iframeClickCatcher=document.createElement("div"),
document.body.appendChild(this.iframeClickCatcher));var a=b.position(this.iframe);b.style(this.iframeClickCatcher,{position:"absolute",backgroundColor:"#fff",opacity:0,width:a.w+"px",height:a.h+"px",top:a.y+"px",left:a.x+"px",visibility:"visible",zIndex:1900})});this.subscribe("MegaMenuClose",function(){b.style(this.iframeClickCatcher,{visibility:"hidden",zIndex:0})})}},setupWeather:function(){Config.ShowWeatherInToday?(Config.BaseJASUrl.replace("webmail","weather_api"),this.getLocation().then(b.hitch(this,
function(a){this.loc=a;this.updatedLoc&&(this.saveLoc(),this.updatedLoc=!1);a.raw&&(this.rawWeather=a.raw,this._updateWeather())}))):ws.html.setShowing(this.clock,!0)},targetIframe:function(){Config.WelcomeMessage&&(this.iframe=ws.html.recreateIframe(this.iframePane.domNode,this._getTodayUrl()))},onHide:function(){this.iframe=ws.html.recreateIframe(this.iframePane.domNode);this.iframe.style.display="none";b.publish("Today/hide");ws.WebSuite.isRecordTimingData&&0==ws.WebSuite.todayPageUnloaded&&(ws.WebSuite.todayPageUnloaded=
new Date);this.clockTimer&&(clearInterval(this.clockTimer),this.clockTimer=null)},onShow:function(){this.inherited(arguments);"none"==this.iframe.style.display?this.targetIframe():this.iframe.style.display="";Config.ShowWeatherInToday||(this.updateClock(),this.clockTimer||(this.clockTimer=setInterval(b.hitch(this,this.updateClock),2E4)));this.updateMailCount();ws.WebSuite.isRecordTimingData&&0==ws.WebSuite.todayPageLoaded&&(ws.WebSuite.todayPageLoaded=new Date);b.publish("Today/show");this.mailCountUpdataCtr||
(this.mailCountUpdataCtr=b.connect(this.mailModel,"modelUpdated",this,"updateMailCount"))},blockAds:function(){},updateMailCount:function(){if("none"!=this.domNode.style.display&&this.mailModel){var a=this.mailModel.getFolderByName(this.mailModel.getInboxFolderName()),b="",d=this.mailCount,e=this.errMsgNode,f=this.mailCountNode;a?(a=a.unread,b=ws.string.substituteParams(Config.Strings[0==a?"MessageCountNone":1==a?"MessageCountSingular":"MessageCountPlural"],a)):this.mailModel.isLoading()?b=Config.Strings.Loading:
this.mailModel.isErrorState()&&(this.mailModel.getErrorObj(),b=Config.Strings.TodayPageErrNotAvailable,this.mailModel.isNetErrorState()&&(b=Config.Strings.TodayPageNetworkErr),b+="\x3cbr\x3e\x3cspan\x3e"+Config.Strings.TodayPageErrLoginAgain+"\x3c/span\x3e",f=d=this.errMsgNode,e=this.mailCount);f.innerHTML=b;ws.html.setShowing(d,!0);ws.html.setShowing(e,!1)}},onClickMailCount:function(){ws.reporting.reportDLAction("Mail-Today-NewMailCount");ws.WebSuite.displayFolder(this.mailModel.getInboxFolderName())},
_getTodayUrl:function(){var a=Config.WelcomeMessage;Config.EnableThemes&&(a+=(0<a.indexOf("?")?"\x26":"?")+this._getThemeColor(!1,!0));return a+=(0<a.indexOf("?")?"\x26":"?")+"ssl\x3dtrue"},updateClock:function(){this.dateNode.innerHTML=ws.date.formatDateTime(new Date,Config.Strings.CalYboxDateFormat2);ws.date.amAbb="\x3cspan class\x3d'ampm'\x3e"+Config.Strings.Date_am+"\x3c/span\x3e";ws.date.pmAbb="\x3cspan class\x3d'ampm'\x3e"+Config.Strings.Date_pm+"\x3c/span\x3e";this.timeNode.innerHTML=ws.date.formatTime(new Date,
Config.Strings.CalTimeFormatRange1);ws.date.amAbb=Config.Strings.Date_am;ws.date.pmAbb=Config.Strings.Date_pm},updateTodayPageIframes:function(){"none"!=this.iframe.style.display&&this.hasIframeInited&&this.targetIframe()},_getThemeColor:function(a,b){var d="tcb\x3d0096ef\x26tcad\x3d016db8\x26tca\x3d0096EF",e=window._ws_theme.getThemeColorQueryString(a,b);e||(a&&(d="tca\x3d0096EF\x26tcad\x3d0096Ef"),b&&(d="tcb\x3d0096ef\x26tca\x3d0096EF"),e=d);return e},updateWeather:function(a){this.rawWeather=a;
this._updateWeather()},_updateWeather:function(){try{var a=this.rawWeather.current_observations.result[0],d=this.rawWeather.daily_forecasts.result[0],e=0==this.currTempMode?a.temperature:this.convertToC(a.temperature),f=0==this.currTempMode?d.high_temperature:this.convertToC(d.high_temperature),g=0==this.currTempMode?d.low_temperature:this.convertToC(d.low_temperature);b.query(".degree",this.weather).innerHTML(e);b.query(".tempNotation",this.weather).innerHTML(this.tempModes[this.currTempMode]);b.query(".maxTempDiv",
this.weather).innerHTML(f+"\u00b0 H");b.query(".minTempDiv",this.weather).innerHTML(g+"\u00b0 L");var h,k=this.loc.country;h="US"==k||"United States"==k?this.loc.state:k;b.query(".cityName",this.weather).innerHTML(this.loc.city+",\x26nbsp;"+h);b.query("#weatherIcon",this.weather).attr("data-icon",String.fromCharCode(this.getIconCode(a.condition_code)));b.query("#weatherIcon",this.weather).attr("title",a.condition_description);ws.html.setShowing(this.weather,!0)}catch(D){}},formatLocale:function(a){return a&&
"en-ca"==a?"en-US":2==a.indexOf("-")?a.substr(0,3)+a.substr(3,2).toUpperCase():a},toggleTemp:function(a){this.currTempMode=0==this.currTempMode?1:0;this._updateWeather();a.stopPropagation()},onClickZipEdit:function(a){a.stopPropagation();this.zipSave.show();this.citySelect.hide();this.zipInput.show();ws.html.setShowing(this.weatherEdit,!0);ws.html.setShowing(this.weather,!1);this.loc&&(this.zipInput.setValue(this.loc.city+", "+this.loc.state),this.zipInput.select());navigator.geolocation?ws.html.setShowing(this.geoLocation,
!0):ws.html.setShowing(this.geoLocation,!1)},onZipKey:function(a){if(13==a.keyCode)this.onZipSave(a)},onZipEditCancel:function(a){a.stopPropagation();ws.html.setShowing(this.weatherEdit,!1);ws.html.setShowing(this.weather,!0)},redisplayLoc:function(a){this.loc={city:a.display_name,state:"",country:a.country_code,full:a.full_display_name,lat:""+a.centroid_latitude,lng:""+a.centroid_longitude,zip:"",woeid:a.woeid};this.updatedLoc=!0;this.setupWeather();ws.html.setShowing(this.weatherEdit,!1);ws.html.setShowing(this.weather,
!0)},redisplayFromGeo:function(a){this.loc={city:a.city,state:a.state,full:"",country:a.country,lat:a.lat,lng:a.lng,zip:"",woeid:a.woeid};this.updatedLoc=!0;this.setupWeather();ws.html.setShowing(this.weatherEdit,!1);ws.html.setShowing(this.weather,!0)},preprocessCities:function(a){for(var b=[],d=0;d<a.length;d++)0<a[d].display_name.length&&(0<a[d].country_code.length||0<a[d].full_display_name.length)&&b.push(a[d]);return b},onZipSave:function(a){a.stopPropagation();var d=ws.string.sanitize(this.zipInput.getValue());
this.geocodeByAddress(d).then(b.hitch(this,function(a){if(a&&a.geosearch&&0<a.geosearch.result.length)if(a=a.geosearch.result,this.cities=this.preprocessCities(a),1==this.cities.length)this.redisplayLoc(a[0]);else{if(0==this.cities.length)a=[],a.push({value:0,display:ws.string.substituteParams(Config.Strings.WeatherSearchNone,d)}),this.citySelect.setOptions(a),this.citySelect.currentValue=99,this.citySelect.setOption(0);else{a=[];a.push({value:0,display:ws.string.substituteParams(Config.Strings.WeatherSearchMany,
d)});for(var e=0;e<this.cities.length;e++)a.push({value:e+1,display:this.cities[e].full_display_name});this.citySelect.setOptions(a);this.citySelect.currentValue=99;this.citySelect.setOption(0);this.connect(this.citySelect,"valueChanged",b.hitch(this,function(){var a=this.citySelect.currentValue;0<a&&this.redisplayLoc(this.cities[a-1])}))}this.zipSave.hide();this.zipInput.hide();this.citySelect.show()}}))},convertToC:function(a){return Math.round((a-32)/1.8)},getIconCode:function(a){return"number"===
typeof a&&0===a%1&&0<=a&&a<=this.IconMap.length-1?this.IconMap[a]:58895},parseGeoCookie:function(a){a=a.replace(/\"/g,"").split("|");var b=null;5<=a.length&&(b={lat:a[0],lng:a[1],city:a[2],state:a[3],country:a[4]});6<=a.length&&(b.zip=a[5]);return 0==a[0]&&0==a[1]&&""==a[2]?null:b},setSpinner:function(a){a?(this.spinner||(this.spinner=new q("",this.spinnerNode,{width:"18px",height:"18px"})),ws.html.setShowing(this.geoLocation,!1),ws.html.setShowing(this.spinnerNode,!0),this.spinner.spin()):(ws.html.setShowing(this.geoLocation,
!0),ws.html.setShowing(this.spinnerNode,!1),this.spinner.stop())},useGeoLocation:function(){var a=new t;a.then(b.hitch(this,function(a){this.setSpinner(!1);this.redisplayFromGeo(a)}));this.setSpinner(!0);navigator.geolocation.getCurrentPosition(b.hitch(this,"getWeather",a),b.hitch(this,function(a){this.setSpinner(!1);ws.widget.Dialogs.ok(Config.Strings.WeatherLocPermission)}))},saveLoc:function(){this.writeGeoCookie()},writeGeoCookie:function(){var a=this.loc,b="0";a.zip&&5==a.zip.length&&(b=a.zip);
a&&n("weathergeo",'"'+a.lat+"|"+a.lng+"|"+a.city+"|"+a.state+"|"+a.country+"|"+b+"|"+(a.woeid?a.woeid:"")+'"',{path:"/",domain:"aol.com",expires:365})},processGeo:function(a,b,d){var e=null,e=a.unified_geo_locations.result[0];return e={city:e.display_name,state:e.state,country:e.country_code,lat:""+b,lng:""+d,zip:"",woeid:e.woeid,raw:a}},geocodeByAddress:function(a){var b=Config.BaseJASUrl.replace("webmail","weather_api"),b=ws.string.substituteParams(Config.WeatherGeocodeUrl,b);return g.get(b,{handleAs:"json",
query:{query:a}})},getLocation:function(){var a=n("weathergeo");this.locale.substr(3,2).toLowerCase();Config.BaseJASUrl.replace("webmail","weather_api");var b=new t;if(this.loc&&!this.updatedLoc)return b.resolve(this.loc);a&&!this.updatedLoc&&(this.loc=this.parseGeoCookie(a));this.loc?this.getWeather(b,{coords:{latitude:this.loc.lat,longitude:this.loc.lng}}):(a=Config.WeatherDefaultLoc.split(","),2<=a.length&&this.getWeather(b,{coords:{latitude:a[0],longitude:a[1]}}));return b.promise},getWeather:function(a,
d){var e=Config.BaseJASUrl.replace("webmail","weather_api");weatherUrl=ws.string.substituteParams(Config.WeatherGeocodeLocUrl,e);g.get(weatherUrl,{handleAs:"json",query:{format:"json",language:this.formatLocale(this.locale),lat:""+d.coords.latitude,lon:""+d.coords.longitude}}).then(b.hitch(this,b.hitch(this,function(b){a.resolve(this.processGeo(b,d.coords.latitude,d.coords.longitude))})),function(b){a.reject("failed to fetch weather")})},getForecastURL:function(){var a=Config.WeatherForecastUrl;if(this.loc){var b=
this.loc.city,d=this.loc.country,e=this.loc.state,f=this.loc.lat,g=this.loc.lng;if(a&&0<a.length&&b&&d&&f&&g)return b=b.replace(/\s+/g,"-").toLowerCase(),d=d.replace(/\s+/g,"-").toLowerCase(),f=Math.round(100*f)/100,g=Math.round(100*g)/100,e="geo"+f.toFixed(2)+"_"+g.toFixed(2),ws.string.substituteParams(a,d,b,e);if(a&&0<a.length&&b&&d&&e)return b=b.replace(/\s+/g,"-").toLowerCase(),d=d.replace(/\s+/g,"-").toLowerCase(),e=e.replace(/\s+/g,"-").toLowerCase(),ws.string.substituteParams(a,d,e,b)}return Config.WeatherHomeUrl},
openWeather:function(){var a=this.getForecastURL();window.open(a)},IconMap:[58882,58881,58897,58883,58883,58894,58894,58894,58894,58884,58894,58892,58892,58888,58890,58888,58890,58900,58894,58899,58899,58899,58891,58880,58880,58889,58885,58902,58901,58902,58901,58887,58887,58887,58887,58896,58898,58883,58893,58892,58892,58890,58890,58888,58895,58892,58890,58893]})})},"ws/widget/SingleLineNotification":function(){define("ws/widget/SingleLineNotification","dojo/_base/declare dojo/text!ws/widget/SingleLineNotification.html dojo/text!ws/widget/SingleLineNotification.css dojo dijit dijit/_Widget dijit/_TemplatedMixin dojo/_base/fx".split(" "),
function(f,k,d,b,a,h,l,e){return f([h,l],{templateString:k,css:{templateString:d},extraClassName:"",notificationData:null,prefSaved:!1,setup:function(a){if(a){this.notificationData=a;this.msg.innerHTML=a.msg;if(a.timeout){var d=1E3*a.timeout;setTimeout(b.hitch(this,function(){this.savePref("timeout");this.close(!0)}),d)}a.noticeBar&&(this.alertLeft.style.display="none",b.addClass(this.bar,"noticeBar"))}},show:function(){this.savePref("shown");this.inherited(arguments)},savePref:function(a){if(this.notificationData&&
this.notificationData.savePref){var b=this.notificationData.savePref.toLocaleLowerCase();!this.prefSaved&&b&&-1!=b.indexOf(a.toLowerCase())&&(this.prefSaved=!0,ws.WebSuite.setNotificationsSeenIds(this.notificationData.id))}},close:function(a){e.animateProperty({node:this.domNode,duration:300,properties:{height:{end:0,unit:"px"}},onEnd:b.hitch(this,function(){this.hide();b.publish("WebSuite/CloseNotification")})}).play();this.savePref("closex")}})})},"ws/mail/SendConfirmationPage":function(){define("ws/mail/SendConfirmationPage",
"dojo/_base/declare dojo/text!ws/mail/SendConfirmationPage.html dojo/text!ws/mail/SendConfirmationPage.css dojo dijit dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ws/mail/SendConfirmationCard ws/address/AddressModel ws/widget/Advertisement dijit/layout/BorderContainer ws/html ws/lang ws/string ws/adsUtils ws/widget/Pane ws/widget/util ws/widget/Button ws/widget/DefaultTextbox ws/widget/Dialogs ws/WebSuite".split(" "),function(f,k,d,b,a,h,l,e,p,g,n){return f([h,l,e],{templateString:k,
css:{templateString:d},_earlyTemplatedStartup:!0,toAddresses:[],ccAddresses:[],bccAddresses:[],defaultSendConf:null,_isShowing:!1,startup:function(){this.subscribe("Theme/Change","updateFullSendConfirmationIFrame");var a=ws.adsUtils.getAdConfig("sendconfirm");a&&("sendConfirmFullPane"==a.className?(a=b.hitch(this,function(a){if(a){a.style.width="100%";a.style.height="100%";var d=b.query("iframe",a);d&&d.length&&(d[0].style.width="100%",d[0].style.height="100%",d[0].setAttribute("scrolling","auto"))}if(Config.showAdChoice){var e=
d=null,f=b.query("\x3e div",a);f&&f.length&&(d=f[0],(f=b.query("\x3e a",d))&&f.length&&(e=f[0]));a=b.query("\x3e iframe",a);d&&e&&a&&a.length&&(b.style(a[0],{"padding-top":"15px"}),b.style(d,{position:"absolute",top:"0px",left:"0px",width:"80px"}),b.style(e,{position:"static",width:"auto"}))}}),this.confirmationAdvertisement=new n({adtype:"sendconfirm",region:"center",checkForHiddenB4Rotate:!0,adDivSetup:a}),(a=this.fullSendConfirmationPage.getChildren())&&a.length&&this.fullSendConfirmationPage.removeChild(a[0]),
this.fullSendConfirmationPage.addChild(this.confirmationAdvertisement),this.confirmationAdvertisement.startup(),Config.EnableFullSendConfirmationPage=!0):(this.confirmationAdvertisement=new n({adtype:"sendconfirm",region:"center",checkForHiddenB4Rotate:!0}),this.sendConfHistoric.addChild(this.confirmationAdvertisement),this.confirmationAdvertisement.startup()));this.defaultSendConf=Config.EnableFullSendConfirmationPage?this.fullSendConfirmationPage:this.sendConfHistoric},setupSendConfirmation:function(a){this.sendConfPages.selectedChildWidget!=
this.emptyPage&&this.sendConfPages.selectChild(this.emptyPage);this.layoutWidget.layout();a=a||{cancelCB:null,toAddresses:[],ccAddresses:[],bccAddresses:[]};this.cancelCB=a.cancelCB;this.toAddresses=a.toAddresses;this.ccAddresses=a.ccAddresses;this.bccAddresses=a.bccAddresses;this.createDistributionListButton.setShowing(1<this.toAddresses.length+this.ccAddresses.length+this.bccAddresses.length?!0:!1);this.isFullSendConfirmationShwowing=!1;this.sendConfPages.selectedChildWidget!=this.defaultSendConf&&
this.sendConfPages.selectChild(this.defaultSendConf);this.show();this._isShowing=!0;this.setDefaultPage()},updateFullSendConfirmationIFrame:function(){if(this._isShowing&&this.isFullSendConfirmationShwowing){var a=Config.SendConfirmationLink||Config.BaseResourcesURL+"SendConfirmation.htm";if("about:blank"!=a){var b=this.getOtherParams(!1);b&&(a+=(0<=a.indexOf("?")?"\x26":"?")+b);ws.html.recreateIframe(this.fullSendConfirmationPane.domNode,a)}}},setDefaultPage:function(){ws.reporting.report("Send_Confirmation",
"Mail");this.layoutWidget.layout();if(Config.EnableFullSendConfirmationPage)this.isFullSendConfirmationShwowing=!0,this.updateFullSendConfirmationIFrame();else{var a=Config.SendConfirmationLink||Config.BaseResourcesURL+"SendConfirmation.htm";"about:blank"==a&&(this.feedbackPane.domNode.style.display="none",this.layoutWidget.layout());this.confirmationAdvertisement&&this.confirmationAdvertisement.domNode&&(b.addClass(this.confirmationAdvertisement.domNode,"confirmationAdvertisement"),this.confirmationAdvertisement.block(!1,
!0));ws.html.recreateIframe(this.sendConfirmationPane,a)}},getOtherParams:function(a){var b="";Config.EnableThemes&&(b=this._getThemeColor());b&&a&&(b=b.replace(/&/g,";"));return b},_getThemeColor:function(){this.themeColorsDone=!0;var a=window._ws_theme.getThemeColorQueryString(!1,!1);a||(a="tcb\x3d0096ef\x26tca\x3d0096EF");return a},createCard:function(){this.sendConfirmationCard||(this.sendConfirmationCard=new p,this._supportingWidgets.push(this.sendConfirmationCard),this.sendConfirmationCard.startup())},
createDistributionList:function(){this.createCard();this.sendConfirmationCard.fillOutList(this.toAddresses,this.ccAddresses,this.bccAddresses);ws.widget.popup.closeAllPopups();ws.widget.popup({popup:this.sendConfirmationCard,orient:{BL:"TR"},around:this.createDistributionListButton.domNode,padding:[0,0]})},cancelToMessage:function(){this.cancelCB&&this.cancelCB(!0)},onShow:function(){this.inherited(arguments);this._isShowing=!0},_onHide:function(){this._isShowing&&(this._isShowing=!1,b.publish("SendConf/hide"),
this.sendConfPages.selectedChildWidget!=this.emptyPage&&this.sendConfPages.selectChild(this.emptyPage))}})})},"ws/mail/SendConfirmationCard":function(){define("ws/mail/SendConfirmationCard","dojo/_base/declare dojo/text!ws/mail/SendConfirmationCard.html dojo/text!ws/mail/SendConfirmationCard.css dojo dijit dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ws/address/AddressModel ws/widget/Checkbox ws/html ws/lang ws/widget/Dialogs ws/widget/Pane ws/widget/util ws/widget/Button ws/widget/WSToolbar".split(" "),
function(f,k,d,b,a,h,l,e,p,g){return f([h,l,e],{templateString:k,css:{templateString:d},_earlyTemplatedStartup:!0,addresses:null,maxEmailsToDisplay:10,startup:function(){this.addressModel=new p},fillOutList:function(a,d,e){this.createListPane.show();this.creatingList.show();this.listCreated.hide();this.createListButton.enable();this.domNode.className="createListPane";this.addresses=[];for(this.addresses=a.concat(d,e);this.listContacts.childNodes.length;)b._destroyElement(this.listContacts.firstChild);
this.errorMsg.innerHTML="";this.errorRow.style.display="none";b.style(this.listContacts,{overflow:"visible",maxHeight:"none",height:"auto",width:"auto"});this.listNameInput.style.width="auto";this.createListTable.style.width="auto";this.show();ws.widget.fixFFCursor(this.createListPane);for(a=0;a<this.addresses.length;a++)this["listItem"+a]=new g({label:ws.string.escapeXml(this.addresses[a]),checked:!0}),this["listItem"+a].startup(),this.listContacts.appendChild(this["listItem"+a].domNode);this.listNameInput.value=
Config.Strings.EnterListName;ws.lang.setTimeout(this,function(){if(this.addresses.length>this.maxEmailsToDisplay-1){var a=b._getMarginSize(this.listItem0.domNode).h*this.maxEmailsToDisplay;this.listContacts.style.height=a+"px";var d=b._getMarginSize(this.listContacts).w;b.style(this.listContacts,{overflow:"auto",maxHeight:a+"px",height:a+"px",width:d+20+"px"});this.listNameInput.style.width=d+16+"px";this.createListTable.style.width=d+20+"px"}else this.listNameInput.style.width=b._getMarginSize(this.listContacts).w+
"px",this.createListTable.style.width=b._getMarginSize(this.listContacts).w+"px";this.listNameInput.select();this.okToolBar.layout()},0)},onKeyPress:function(a){"none"!=this.errorRow.style.display&&(this.errorMsg.innerHTML="",this.errorRow.style.display="none");a.keyCode==b.keys.ENTER&&this.checkRequiredFields();a.stopPropagation()},checkRequiredFields:function(){var a=this.listNameInput.value,a=a.replace(/^\s+/,"");(a=a.replace(/\s+$/,""))&&a!=Config.Strings.EnterListName?this.saveDistributionList(a):
(this.errorMsg.innerHTML=Config.Strings.NameDistList,this.errorRow.style.display="block")},saveDistributionList:function(a){for(var d=[],e=0;e<this.addresses.length;e++)this["listItem"+e].checked&&d.push(this.addresses[e]);if(0==d.length)this.errorMsg.innerHTML=Config.Strings.IncludeEmailDistList,this.errorRow.style.display="block";else if(null!=this.addressModel.searchDLName(a))this.errorMsg.innerHTML=Config.Strings.DuplicateDistributionList,this.errorRow.style.display="block";else if(-1!=Config.MaxDistListSize&&
d.length>Config.MaxDistListSize)this.errorMsg.innerHTML=Config.Strings.DistListMaxAddr,this.errorRow.style.display="block";else{var f=this.addressModel.invalidAddresses(d);if(f&&f.length)d=null,d=f.length,d=3>=d?Config.Strings.DistListAddrInvalid+"\x3cbr\x3e\x3cbr\x3e"+f.join("\x3cbr\x3e"):ws.string.substituteParams(Config.Strings.DistListAddrInvalidOthers,d-3)+"\x3cbr\x3e\x3cbr\x3e"+f.slice(0,3).join("\x3cbr\x3e"),this.errorMsg.innerHTML=d,this.errorRow.style.display="block";else{this.createListButton.disable();
f={};for(e=0;e<d.length;e++)f[d[e].toLowerCase()]={};d=0;Object.keys&&(d=Object.keys(f).length);d&&(this.addressModel.distListCreateMissingContacts(f,{load:b.hitch(this,function(d){var e=[],f;for(f in d)e.push({ep:"smtp:"+f,name:d[f].name});e.length?setTimeout(b.hitch(this,function(){this.addressModel.distributionListAction("create",{postData:{name:a,endpoints:e},load:b.hitch(this,function(a){this.createListButton.enable();this.creatingList.hide();this.listCreated.show();window.setTimeout(b.hitch(this,
function(){this.listCreatedTB.layout()}),100)}),error:b.hitch(this,function(a){this.createListButton.enable();window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler for addressModel.distributionListAction-create",null,"SendConfirmationCard.js");ws.widget.Dialogs.ok(Config.Strings.ErrorSavingDistList)})})}),Config.XobniGroupListDelay):ws.widget.Dialogs.ok(Config.Strings.ErrorSavingDistList)}),error:b.hitch(this,function(a){this.createListButton.enable();this.creatingList.hide();
window.setTimeout(b.hitch(this,function(){this.listCreatedTB.layout()}),100);ws.widget.Dialogs.ok(Config.Strings.ErrorSavingDistList);window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.UserVisErr,"Dialogs.ok shown - Error Handler ErrorSavingDistList",null,"SendConfirmationCard.js")})}),ws.reporting.reportDLAction("Contacts-SendConf-CreateDistList"))}}},closeCard:function(){this.creatingList.hide();this.listCreated.hide();this.createListPane.hide();ws.widget.popup.close(this)}})})},"ws/widget/Advertisement":function(){define("ws/widget/Advertisement",
"dojo/_base/declare dojo dijit dijit/_Widget ws/browser ws/html ws/string ws/adsUtils ws/settings".split(" "),function(f,k,d,b){return f("ws.widget.Advertisement",[b],{adConfig:null,adtype:"",location:"",lastRotateTime:0,blocked:!1,screen:"large",adsDiv:null,alreadyShownAds:!1,hasAdContent:!1,currentMagic:"0",multiSize:!1,checkForHiddenB4Rotate:!1,networkIdSet:!1,adId:null,adDivSetup:null,preAdRender:null,postAdRender:null,windowFocused:!0,startup:function(a){this.alreadyStarted||(this.alreadyStarted=
!0,k.subscribe("Settings/show",k.hitch(this,function(){this.allAdsHidden=!0})),k.subscribe("Settings/hide",k.hitch(this,function(){this.allAdsHidden=!1})),k.subscribe("DspMsgSlideShow/start",k.hitch(this,function(){this.allAdsHidden=!0})),k.subscribe("DspMsgSlideShow/end",k.hitch(this,function(){this.allAdsHidden=!1})),k.subscribe("ws_view-selectChild",this,"onMainStackSelect"),this.setAdConfig(a))},destroy:function(){this.JACadCallReset()},resetAdConfig:function(){this.adConfig&&k.removeClass(this.domNode,
"adFrameDiv"+this.adConfig.location);this.onDocClk&&(k.disconnect(this.onDocClk),this.onDocClk=null);this.adConfig=null;this.location=this.adtype="";this.lastRotateTime=0;this.blocked=!1;this.screen="large";this.hasAdContent=this.alreadyShownAds=!1;this.currentMagic="0";this.networkIdSet=this.checkForHiddenB4Rotate=this.multiSize=!1;this.postAdRender=this.preAdRender=this.adDivSetup=this.adId=null;this.windowFocused=!0},setAdConfig:function(a,b,d,e,f,g,n){this.adtype=b||this.adtype;this.blocked=d||
this.blocked;this.checkForHiddenB4Rotate=e||this.checkForHiddenB4Rotate;this.adDivSetup=f||this.adDivSetup;this.preAdRender=g||this.preAdRender;this.postAdRender=n||this.postAdRender;this.screen=ws.adsUtils.getScreen();Config.AdInfo&&(this.adConfig=ws.adsUtils.getAdConfig(this.adtype))&&(this.currentMagic=this.adConfig.sslMagic);this.stackedAdShowCount=Config.StackedAdShowCount;this.JACadCallReset();this.adsDiv&&(this.adsDiv.removeAttribute("style"),this.adsDiv.style.position="relative",this.adsDiv.innerHTML=
"");this.adsDivAltL2=this.adsDivAltL1=this.adsDivAltM0=null;this.enabled()?(null!=this.adConfig.size.match(/^[0-9]/)&&(this.multiSize=!0),k.addClass(this.domNode,"adFrameDiv adFrameDiv"+this.adConfig.location),this.multiSize?(this.domNode.style.width="auto",this.domNode.style.height="auto"):(this.domNode.style.width=this.adConfig.iframeWidth+"px",this.domNode.style.height=this.adConfig.iframeHeight+"px"),0!=this.adConfig.interval&&(this.onDocClk=ws.browser.addDocumentOnClick(this,"onDocumentClick")),
k.connect(window,"focus",this,"onWindowActivate"),k.connect(window,"blur",this,"onWindowDeactivate"),a||(this.started=!0,this.rotateSoon())):this.domNode.style.display="none"},getAdId:function(){return this.adId},setAdId:function(a){this.adId=a},isHidden:function(){return this.domNode&&"none"==this.domNode.style.display},hideAd:function(a){var b="none"==this.domNode.style.display;b&&a||!b&&!a||(this.domNode.style.display=a?"none":"block")},block:function(a,b){this.pause(a,!0,b)},pause:function(a,
b,d){if(this.enabled())if(this.blocked=a,Config.EnableInPageIFrameAds&&!this.adConfig.url)try{a?(this.hasAdContent=!1,2==window.g_WS_adsLibLoadingState&&this.adsDiv&&(this.adsDiv.style.display="none")):(2==window.g_WS_adsLibLoadingState&&this.adsDiv&&(this.adsDiv.style.display="block"),this.rotate(d))}catch(e){}else a?(this.hasAdContent=!1,b&&(this.domNode.innerHTML=""),this.createdIframe=!1,this.lastRotateTime=0):this.rotate(d)},enabled:function(){return(this.adConfig?!0:!1)&&"0"!=this.currentMagic&&
!(Settings.SkipAds&&this.adConfig.skip)},loadAdsLib:function(a,b){window.g_WS_adsLibLoadingState?1==window.g_WS_adsLibLoadingState?window.g_WS_adsLibLoadCallBacks[a]=b:2==window.g_WS_adsLibLoadingState&&b():(window.g_WS_adsLibLoadingState=1,window.g_WS_adsLibLoadCallBacks||(window.g_WS_adsLibLoadCallBacks={}),window.g_WS_adsLibLoadCallBacks[a]=b,Config.JACadURL&&Settings.UserHash<Config.JACadThreshold?this.loadJACadScripts():this.loadAdsWrapperScripts())},adsLibLoadComplete:function(){if(2==window.g_WS_adsLibLoadingState&&
window.g_WS_adsLibLoadCallBacks)for(var a in window.g_WS_adsLibLoadCallBacks)window.g_WS_adsLibLoadCallBacks[a]()},loadJACadScripts:function(){var a=k.hitch(this,this.adsLibLoadComplete);window.JAC_CONFIG={service:{adServer:{"1AS":{region:Config.JACadRegion}},site:{name:"AOLWebmail_"+Config.PageLocale+"_"+(Config.UIVariant&&"aim"!=Config.UIVariant?Config.UIVariant:"aol"),spaceId:Config.RapidReportingSpaceID},debug:Config.JACadDebug},client:{onReady:function(){try{2!=window.g_WS_adsLibLoadingState&&
(window.g_WS_adsLibLoadingState=2,a())}catch(l){}}}};Config.JACadProvideEmail&&Settings&&Settings.ActiveUserEmailAddress&&-1!=Settings.ActiveUserEmailAddress.indexOf("@")&&(window.JAC_CONFIG.client.idProviders={verizonMedia:{email:Settings.ActiveUserEmailAddress}});var b=document.createElement("script");b.type="text/javascript";b.src=Config.JACadURL;k.hitch(this,this.adsWrapperLoaded);document.getElementsByTagName("head")[0].appendChild(b)},makeStackJACadCall:function(){var a=null;this.stackMagic1&&
this.stackMagic2||(a=this.adConfig.magicAlt.split(","),1<a.length&&(this.stackMagic1=a[0],this.stackMagic2=a[1]));this.adsDiv&&(0==this.stackedAdShowCount&&this.stackMagic1&&this.stackMagic2?(this.adsDivAltM0&&(this.adsDivAltM0.style.display="none"),this.adsDivAltL1&&this.adsDivAltL2?(this.adsDivAltL1.style.display="",this.adsDivAltL2.style.display=""):(a=document.createElement("div"),a.style.position="relative",a.style.marginBottom="5px",a.id=this.id+"AltL1",this.adsDiv.appendChild(a),this.adsDivAltL1=
a,a=document.createElement("div"),a.style.position="relative",a.id=this.id+"AltL2",this.adsDiv.appendChild(a),this.adsDivAltL2=a),a=["300x250"],this.JACadCall(this.adConfig.JACPOS+"L1",this.adsDivAltL1,this.stackMagic1,a),this.JACadCall(this.adConfig.JACPOS+"L2",this.adsDivAltL2,this.stackMagic2,a)):(this.adsDivAltL1&&(this.adsDivAltL1.style.display="none"),this.adsDivAltL2&&(this.adsDivAltL2.style.display="none"),this.adsDivAltM0?this.adsDivAltM0.style.display="":(a=document.createElement("div"),
a.style.position="relative",a.id=this.id+"AltM0",this.adsDiv.appendChild(a),this.adsDivAltM0=a),a=this.multiSize?this.adConfig.size.split(","):[this.adConfig.iframeWidth+"x"+this.adConfig.iframeHeight],this.JACadCall(this.adConfig.JACPOS+"M0",this.adsDivAltM0,this.currentMagic,a)),this.stackedAdShowCount--,0>this.stackedAdShowCount&&(this.stackedAdShowCount=Config.StackedAdShowCount))},JACadCallReset:function(){var a="";if(window.JAC&&this.JACPositions){try{for(a in this.JACPositions)JAC.destroyPosition(a)}catch(h){window.ws_ErrLgr&&
ws_ErrLgr.logError(ws_ErrLgr.cat.ExternalErr,"JAC:destroyPosition:"+a,h,"Advertisement.js")}this.JACPositions={}}},JACadCall:function(a,b,d,e){var f=!1;if(b&&b.id&&a&&d&&e)if(this.JACPositions&&this.JACPositions[a])try{JAC.fetch([a])}catch(g){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ExternalErr,"JAC:fetch:"+a,g,"Advertisement.js")}else{try{window._ws_JACPositions&&window._ws_JACPositions[a]&&(JAC.destroyPosition(a),window._ws_JACPositions[a]=null)}catch(g){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ExternalErr,
"JAC:destroyPosition:"+a,g,"Advertisement.js")}try{JAC.createPosition(a,{service:{alias:d,sizes:e},client:{targetElement:b.id,nonFriendlyIframe:{enabled:!0},rotation:{enabled:!1},render:{requireViewable:!1}}})}catch(g){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ExternalErr,"JAC:createPosition:"+a,g,"Advertisement.js")}f=!0;this.JACPositions||(this.JACPositions={});this.JACPositions[a]=!0;window._ws_JACPositions||(window._ws_JACPositions={});window._ws_JACPositions[a]=!0}return f},makeJACadCalls:function(){try{this.hasAdContent=
!0;this.preAdRender&&this.preAdRender();if(Settings.UserHash<Config.StackedAdThreshold&&this.adConfig.magicAlt)this.makeStackJACadCall();else{var a,b=this.currentMagic;a=this.multiSize?this.adConfig.size.split(","):[this.adConfig.iframeWidth+"x"+this.adConfig.iframeHeight];this.JACadCall(this.adConfig.JACPOS,this.adsDiv,b,a)&&this.adDivSetup&&this.adDivSetup(this.adsDiv)}this.postAdRender&&this.adsDiv&&this.postAdRender(this.adsDiv)}catch(l){}},adsWrapperLoaded:function(){try{2!=window.g_WS_adsLibLoadingState&&
(window.g_WS_adsLibLoadingState=2,window.adsDisableTacoda(),window.adsTacFn(),window.adsDisableEAN&&!Config.showAdChoice&&window.adsDisableEAN(),window.adSetOthAT&&window.adSetOthAT(Config.kvvertValue),window.adSetSpaceId&&Config.RapidReportingSpaceID&&window.adSetSpaceId(Config.RapidReportingSpaceID),window.adsEnableSandbox&&window.adsEnableSandbox(),this.adsLibLoadComplete())}catch(a){}},loadAdsWrapperScripts:function(){var a=document.createElement("script");a.type="text/javascript";a.src=Config.AdsWrapperJsURL;
var b=k.hitch(this,this.adsWrapperLoaded);a.onload=function(){window.setTimeout(b,0)};a.onreadystatechange=function(){"loaded"!=this.readyState&&"complete"!=this.readyState||window.setTimeout(b,0)};document.getElementsByTagName("head")[0].appendChild(a)},makeStackAdWrapperCall:function(){var a=null;this.stackMagic1&&this.stackMagic2||(a=this.adConfig.magicAlt.split(","),1<a.length&&(this.stackMagic1=a[0],this.stackMagic2=a[1]));this.adsDiv&&(0==this.stackedAdShowCount&&this.stackMagic1&&this.stackMagic2?
(this.adsDivAltM0&&(this.adsDivAltM0.style.display="none",this.adsDivAltM0.innerHTML=""),this.adsDivAltL1&&this.adsDivAltL2?(this.adsDivAltL1.style.display="",this.adsDivAltL2.style.display="",window.adsReloadAd(this.adsDivAltL1),window.adsReloadAd(this.adsDivAltL2)):(a=document.createElement("div"),a.style.position="relative",a.style.marginBottom="5px",a.id=this.id+"AltL1",this.adsDiv.appendChild(a),this.adsDivAltL1=a,a=document.createElement("div"),a.style.position="relative",a.id=this.id+"AltL2",
this.adsDiv.appendChild(a),this.adsDivAltL2=a,window.htmlAdWH(this.stackMagic1,300,250,"IFRAME",this.adsDivAltL1),window.htmlAdWH(this.stackMagic2,300,250,"IFRAME",this.adsDivAltL2))):(this.adsDivAltL1&&(this.adsDivAltL1.style.display="none",this.adsDivAltL1.style.innerHTML=""),this.adsDivAltL2&&(this.adsDivAltL2.style.display="none",this.adsDivAltL2.innerHTML=""),this.adsDivAltM0?(this.adsDivAltM0.style.display="",window.adsReloadAd(this.adsDivAltM0)):(a=document.createElement("div"),a.style.position=
"relative",a.id=this.id+"AltM0",this.adsDiv.appendChild(a),this.adsDivAltM0=a,this.multiSize?window.htmlAdWHDyn(this.currentMagic,this.adConfig.size,"IFRAME",this.adsDivAltM0):window.htmlAdWH(this.currentMagic,this.adConfig.iframeWidth,this.adConfig.iframeHeight,"IFRAME",this.adsDivAltM0))),this.stackedAdShowCount--,0>this.stackedAdShowCount&&(this.stackedAdShowCount=Config.StackedAdShowCount))},makeAdsWrapperCalls:function(){try{!this.networkIdSet&&Config.adServerNetworkID&&(this.networkIdSet=!0,
adSetNetId(Config.adServerNetworkID)),this.hasAdContent=!0,this.preAdRender&&this.preAdRender(),Settings.UserHash<Config.StackedAdThreshold&&this.adConfig.magicAlt?this.makeStackAdWrapperCall():this.alreadyShownAds?this.adsDiv&&window.adsReloadAd(this.adsDiv):(this.adsDiv&&(this.multiSize?window.htmlAdWHDyn(this.currentMagic,this.adConfig.size,"IFRAME",this.adsDiv):window.htmlAdWH(this.currentMagic,this.adConfig.iframeWidth,this.adConfig.iframeHeight,"IFRAME",this.adsDiv),this.adDivSetup&&this.adDivSetup(this.adsDiv)),
this.alreadyShownAds=!0),this.postAdRender&&this.adsDiv&&this.postAdRender(this.adsDiv)}catch(a){}},makeAdsLibCalls:function(){if(!this.adsDiv){var a=document.createElement("div");a.style.position="relative";a.id=this.adtype+"AdsDiv";this.domNode.appendChild(a);this.adsDiv=a}2==window.g_WS_adsLibLoadingState?this.__makeAdsLibCalls():this.loadAdsLib(this.id,k.hitch(this,this.__makeAdsLibCalls))},__makeAdsLibCalls:function(){Config.JACadURL&&Settings.UserHash<Config.JACadThreshold?this.makeJACadCalls():
this.makeAdsWrapperCalls()},checkLastClickInComposeMessage:function(){if(this.lastClickEvent.target)for(var a=this.lastClickEvent.target;a;){if(k.hasClass(a,"composeMessage"))return!0;a=a.parentNode}return!1},checkForComposeMessageOpen:function(){if(this.lastClickEvent&&this.hasAdContent&&Config.PauseAdRotateCompose&&("ie"==Config.PauseAdRotateCompose&&k.isIE||"all"==Config.PauseAdRotateCompose)){if(-1!=this.adConfig.name.indexOf("sidepanel")){var a=ws.WebSuite.getCurrentViewId();return a&&"composeMessage"==
a?!0:this.checkLastClickInComposeMessage()}if("displaymessage"==this.adConfig.name)return(a=window.DM)&&a.composeWidget&&a.notebook&&a.notebook.selectedChildWidget&&a.composeWidget==a.notebook.selectedChildWidget?!0:this.checkLastClickInComposeMessage()}return!1},isAdDspMsg:function(){if(this.adConfig&&this.adConfig.name){var a=this.adConfig.name;if(("sidepanel"==a||"sidepanelDouble"==a)&&"displayMessage"==ws.WebSuite._currentTab||"displaymessage"==a)return!0}return!1},onMainStackSelect:function(a){this.isAdDspMsg()&&
this.setupDspMsgAdForceRotate()},setupDspMsgAdForceRotate:function(a){0!=Config.DspMsgAdForceRotateTime&&(this.dspMsgAdForceTimeout&&window.clearTimeout(this.dspMsgAdForceTimeout),a||(this.dspMsgAdForceCount=1),this.isAdDspMsg()&&document.hasFocus()&&(this.dspMsgAdForceTimeout=window.setTimeout(k.hitch(this,this.doDspMsgAdForceRotate),1E3*Config.DspMsgAdForceRotateTime)))},doDspMsgAdForceRotate:function(){this.isAdDspMsg()&&this.dspMsgAdForceCount<Config.DspMsgAdForceRotateCount&&(this.setupDspMsgAdForceRotate(!0),
this.rotate(!0,!1,!0),this.dspMsgAdForceCount++)},rotate:function(a,b,d){if(!(!this.enabled()||this.blocked||!(Settings.UserHash>=Config.AdRotateWhileWindowBlurred||this.windowFocused)||this.checkForComposeMessageOpen()||this.checkForHiddenB4Rotate&&ws.dom.checkParentNodeForHidden(this.domNode)||this.allAdsHidden||(b=(new Date).getTime(),b-this.lastRotateTime<1E3*this.adConfig.interval&&!a))){d||this.setupDspMsgAdForceRotate();this.lastRotateTime=b;0==this.adConfig.interval&&(this.blocked=!0);a="about:blank";
"Yhoo"==Config.adServerType&&(this.adConfig.url=ws.string.substituteParams("%{base}?name\x3d%{name}\x26screen\x3d%{screen}",{base:Config.adPageURL,name:this.adtype,screen:this.screen}));this.createdIframe||Config.EnableInPageIFrameAds&&!this.adConfig.url||(this.domNode.innerHTML=ws.string.substituteParams("\x3ciframe src\x3d\"about:blank\" name\x3d'%{name}' style\x3d'width:%{width}; height:%{height}; background-color:transparent' marginwidth\x3d'0' marginheight\x3d'0' hspace\x3d'0' vspace\x3d'0' frameborder\x3d'0' scrolling\x3d'no' allowTransparency\x3d'true'\x3e\x3c/iframe\x3e",
{name:this.id+"frame",width:this.multiSize?"100%":this.adConfig.iframeWidth+"px",height:this.multiSize?"100%":this.adConfig.iframeHeight+"px"}),this.createdIframe=!0);if("0"!=this.currentMagic)if(this.adConfig.url)a=""+Math.random(),a=parseInt(a.substr(2),10),a=ws.string.substituteParams(this.adConfig.url,a);else if(Config.EnableInPageIFrameAds)this.makeAdsLibCalls();else if(d=Config.AdsWrapperJsURL.lastIndexOf("/"))a=Config.AdsWrapperJsURL.substr(0,d+1),a+=ws.string.substituteParams("adsLoader.html?mn\x3d{0}\x26w\x3d{1}\x26h\x3d{2}\x26awu\x3d{3}",
this.currentMagic,this.adConfig.iframeWidth,this.adConfig.iframeHeight,encodeURIComponent(a)),this.multiSize&&(a+="\x26ms\x3d"+encodeURIComponent(this.adConfig.size));this.createdIframe&&(this.hasAdContent=!0,ws.html.recreateIframe(this.domNode,a));Config.EnableInPageIFrameAds||!Config.EnableTacoda||this.tacodaInitiated||(a=document.createElement("div"),this.domNode.appendChild(a),a.innerHTML='\x3ciframe title\x3d"" width\x3d"1px" height\x3d"1px" frameborder\x3d0 border\x3d0 marginwidth\x3d0 marginheight\x3d0 scrolling\x3d"no"\x3e\x3c/iframe\x3e',
ws.html.recreateIframe(a,Config.SameDomainScriptsURL+Config.TacodaTagFile),ws.widget.Advertisement.prototype.tacodaInitiated=!0)}},onDocumentClick:function(a){this.lastClickEvent=a;setTimeout(k.hitch(this,function(){ws.io.openingWindow||this.rotateSoon(!0)}),100)},onWindowActivate:function(a){this.windowFocused=!0;this.enabled()&&this.adConfig.focusRotate&&setTimeout(k.hitch(this,function(){this.rotate(!1)}),100)},onWindowDeactivate:function(a){this.windowFocused=!1;this.dspMsgAdForceTimeout&&window.clearTimeout(this.dspMsgAdForceTimeout)},
rotateSoon:function(a){ws.lang.setTimeout(this,"rotate",1900,!1,a)},uninitialize:function(){this.onDocClk&&k.disconnect(this.onDocClk);this.adConfig=null}})})},"ws/adsUtils":function(){define("ws/adsUtils",["dojo","dojo/_base/lang"],function(f,k){k.setObject("ws.adsUtils",{getScreen:function(){return 1E3>screen.width?"small":"large"},getAdConfig:function(d){var b=null;Config.AdInfo&&(b=Config.AdInfo[d+"_"+this.getScreen()]||Config.AdInfo[d+"_all"]);return b}})})},"ws/widget/Splitter":function(){define("ws/widget/Splitter",
"dojo/_base/declare dojo/text!ws/widget/Splitter.css dojo dijit dojo/window dijit/_Widget ws/html".split(" "),function(f,k,d,b,a,h){return f([h],{css:{templateString:k},orientation:"left",splitterWidth:1,splitterMargin:3,minWidth:0,maxWidth:400,prefWidth:0,collapseThreshhold:0,collapsable:!1,isCollapsed:!1,expandTitle:"",collapseTitle:"",startup:function(){this.isOrientationRight=!1;this.startY=this.startX=0;this.bounds=this.resizeNodeSize=this.resizeNode=this.size=null;this.domNode.style.position=
"absolute";this.domNode.className="wsSplitter "+this.orientation;d.marginBox(this.domNode,{w:this.splitterWidth+2*this.splitterMargin});this.visibleNode=d.create("div",{className:"separator",style:{height:"100%",width:this.splitterWidth+"px",position:"absolute",left:this.splitterMargin+"px"}},this.domNode);this.collapsable&&(this.collapseNode=d.create("div",{className:"collapseButton",style:{position:"absolute",zIndex:this.domNode.style.zIndex+1}},this.domNode),this.connect(this.collapseNode,"onmousedown",
"onCollapse"));this.setCursor();this.connect(this.domNode,"onmousedown","onMouseDown");this.connect(this.domNode,"onmousemove","setCursor")},addSizerFunc:function(a){this.sizerFunc=a},addClickFunc:function(a){this.clickFunc=a},setCursor:function(){this.isDisabled?this.domNode.style.cursor="auto":"right"==this.orientation?(this.isOrientationRight=!0,this.domNode.style.cursor=9>d.isIE?"e-resize":"ew-resize"):(this.isOrientationRight=!1,this.domNode.style.cursor=9>d.isIE?"w-resize":"ew-resize")},setHeight:function(a){this.domNode.style.height=
a+"px";this.visibleNode.style.height=a+"px"},isLeftMouseDown:function(a){return a&&"undefined"!=typeof a.which&&1==a.which||a&&"undefined"!=typeof a.button&&1==a.button?!0:!1},onMouseDown:function(a){if(!this.isDisabled){this.startTime=+new Date;this.startPoint=a.pageX;this.startX=parseInt(this.domNode.offsetLeft)+this.splitterMargin;this.startY=parseInt(this.domNode.offsetTop);this.size={width:this.splitterWidth,height:d._getMarginSize(this.domNode).h};var b=null;if(this.isOrientationRight)for(b=
this.domNode.nextSibling;b&&1!=b.nodeType;)b=b.nextSibling;else for(b=this.domNode.previousSibling;b&&1!=b.nodeType;)b=b.previousSibling;this.resizeNode=b;this.resizeNodeSize={width:d._getMarginSize(this.resizeNode).w,height:d._getMarginSize(this.resizeNode).h};var f=b=0;this.isOrientationRight?(f=parseInt(this.domNode.offsetLeft)+this.size.width,f+=this.resizeNodeSize.width,b=f-this.maxWidth-this.size.width,f=f-this.minWidth-this.size.width):(f=parseInt(this.resizeNode.offsetLeft),b=f+this.minWidth,
f+=this.maxWidth);this.bounds={minLeft:b,maxLeft:f};this.backdrop&&d._destroyElement(this.backdrop);b=ws.WebSuite.viewportSize;this.backdrop=d.create("div",{className:"wsSplitterBackdrop",style:{width:b.w-2+"px",height:b.h-2+"px",zIndex:2099,cursor:this.domNode.style.cursor}},d.body());this.backdrop.tabIndex=-1;this.backdrop.focus();this.domNode.style.zIndex=2098;this.docHandles=[d.connect(this.backdrop,"onmousemove",this,"onMouseMove"),d.connect(this.backdrop,"onmouseup",this,"onMouseUp")];d.stopEvent(a)}},
onCollapse:function(b){if(!this.isDisabled){this.killCapturedEvent(b);if(this.isCollapsed){this.isCollapsed=!1;b=a.getBox().w-this.minWidth;0>=this.prefWidth&&(this.prefWidth=this.minWidth);var e=a.getBox().w-this.prefWidth;if(0>=e||e>b)e=b;this.domNode.style.left=e+"px";""!=this.collapseTitle&&this.collapseNode&&(this.collapseNode.title=this.collapseTitle)}else{this.isCollapsed=!0;this.startX=parseInt(this.domNode.offsetLeft)+this.splitterMargin;this.startY=parseInt(this.domNode.offsetTop);this.size=
{width:d._getMarginSize(this.domNode).w-this.splitterMargin,height:d._getMarginSize(this.domNode).h};if(this.isOrientationRight){for(b=this.domNode.nextSibling;b&&1!=b.nodeType;)b=b.nextSibling;this.resizeNode=b;this.resizeNodeSize={width:d._getMarginSize(this.resizeNode).w,height:d._getMarginSize(this.resizeNode).h}}b=a.getBox().w;d.isSafari&&(b-=5);this.domNode.style.left=b+"px";""!=this.expandTitle&&this.collapseNode&&(this.collapseNode.title=this.expandTitle)}d.toggleClass(this.collapseNode,"collapsed",
this.isCollapsed);this.resize(!this.isCollapsed);d.publish("Splitter/collapse",[{id:this.id,isCollapsed:this.isCollapsed}]);this._onCollapseCalled=!0}},onMouseUp:function(a){this.isDisabled||(this.lastTime=+new Date,this.lastPoint=a.pageX,d.forEach(this.docHandles,d.disconnect),this.docHandles=[],document.body.style.cursor="",d._destroyElement(this.backdrop),this.backdrop=null,this.isClick()&&this.clickFunc?this.clickFunc():this._onCollapseCalled?this._onCollapseCalled=!1:this.resize(),d.stopEvent(a))},
onMouseMove:function(a){if(!this._onCollapseCalled)if(this.isLeftMouseDown(a)){ws.html.clearSelection();this.killCapturedEvent(a);var b=a.pageX;this.isOrientationRight?(b>this.bounds.maxLeft-this.collapseThreshhold&&(b=this.bounds.maxLeft),b>this.bounds.maxLeft&&(b=this.bounds.maxLeft),b<this.bounds.minLeft&&(b=this.bounds.minLeft)):this.sizerFunc?b=this.sizerFunc(b):(b<this.bounds.minLeft+this.collapseThreshhold&&(b=this.bounds.minLeft),b<this.bounds.minLeft&&(b=this.bounds.minLeft),b>this.bounds.maxLeft&&
(b=this.bounds.maxLeft));this.domNode.style.left=b-this.splitterMargin+"px";d.stopEvent(a)}else this.onMouseUp(a)},isClick:function(){var a=this.lastTime-this.startTime;return 4>Math.abs(this.startPoint-this.lastPoint)&&1E3>a},killCapturedEvent:function(a){this.isLeftMouseDown(a)&&a&&d.stopEvent(a)},resize:function(b){var e=!1;this.isOrientationRight?(e=parseInt(this.domNode.offsetLeft)+this.size.width+this.splitterMargin,e=this.startX+this.size.width+this.resizeNodeSize.width-e,6==d.isIE&&(this.resizeNode.style.right=
"-1px"),d.marginBox(this.resizeNode,{w:e})):(e=parseInt(this.resizeNode.offsetLeft),e=parseInt(this.domNode.offsetLeft)+this.splitterMargin-e,e<this.minWidth?ws.WebSuite.Navigation.isMini||ws.WebSuite.Navigation.toggleNav("splitDrag"):(ws.WebSuite.Navigation.isMini&&ws.WebSuite.Navigation.toggleNav("splitDrag"),d.marginBox(this.resizeNode,{w:e})));e=0>=e?!0:!1;this.resizeNode.style.display=e?"none":"";this.domNode.style.zIndex="";e||b||(b=parseInt(this.domNode.style.left),e=d._getMarginSize(this.domNode).w,
b=a.getBox().w-b-e,b<this.minWidth&&(b=this.minWidth),d.publish("Splitter/resize",[{id:this.domNode.id,width:b+"px"}]))},cancel:function(){d.forEach(this.docHandles,d.disconnect);this.docHandles=[];d._destroyElement(this.backdrop);this.backdrop=null;this.domNode.style.left=this.startX+"px";this.domNode.style.zIndex=""},enableSizing:function(a){this.isDisabled=!a;this.setCursor()}})})},"ws/suite/SidePanel":function(){define("ws/suite/SidePanel","dojo/_base/declare dojo/text!ws/suite/SidePanel.html dojo/text!ws/suite/SidePanel.css dojo dijit dojo/window dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ws/widget/Advertisement ws/widget/ContainerPane dijit/_Container ws/widget/Pane".split(" "),
function(f,k,d,b,a,h,l,e,p,g){return f([l,e,p],{templateString:k,css:{templateString:d},adWidget:null,stationeryWidget:null,hasAdConfig:!0,scrollMods:{},isCompactWidth:!1,checkScreenResolutionTimer:null,initialScreenResolutionWidth:-1,todayPageShowing:!1,widthClasses:["spSmall","spSmall","spMedium","spLarge","spDoubleWide"],startup:function(){this.inherited(arguments);this.copyrightDIV.domNode.innerHTML=ws.string.substituteParams(Config.CopyrightString,(new Date).getFullYear());this.adWidget=new g({adtype:"sidepanel",
checkForHiddenB4Rotate:!0,preAdRender:b.hitch(this,this.resetAdScroll)});this.adWidget.startup();this.adWidget.adConfig&&(this.adWidget.layoutAlign=this.adWidget.adConfig.location,this.towerAd.addChild(this.adWidget),this.panelStack.selectChild(this.towerAd),ws.bubbleConfig.showPinBubble("AdFreePromo",this.towerAd.domNode,!0,b.hitch(this,function(){return!this.adWidget.isShowing()})));this.subscribe("ws_view-selectChild","handleMainStackSelect");this.connect(ws.WebSuite.theMailModel,"modelUpdated",
"resetAdScroll");this.lastScrollTime=(new Date).getTime();b.subscribe("cachedListUpdated",b.hitch(this,function(){this.adWidget&&this.adWidget.alreadyStarted&&this.adWidget.rotateSoon()}))},updateWidth:function(){var d=!1,e=ws.WebSuite.getCurrentViewId();this.hasAdConfig=this.adWidget.adConfig&&1<ws.WebSuite.widthMode?!0:!1;1==ws.WebSuite.widthMode&&this.hide();var f=ws.WebSuite.widthMode,g=ws.WebSuite.widthMode;if(this.hasAdConfig&&this.adWidget.adConfig&&Config.AdInfo.sidepanelDouble_large&&Settings.UserHash>=
Config.DoubleWideAdThresholdLow&&Settings.UserHash<=Config.DoubleWideAdThresholdHigh){var k="composeMessage"==e;h.getBox().w>=Config.DoubleWideAdPixelExtent&&(f=5);this.lastWidthMode==f&&5==f&&(g=f);k&&(g=ws.WebSuite.widthMode);var l=b.hitch(this,function(){"sidepanel"!=this.adWidget.adtype&&(this.adWidget.resetAdConfig(),this.adWidget.setAdConfig(!1,"sidepanel",!1,!0))});this.lastViewId!=e&&k&&Config.AdInfo.sidepanelCompose_large&&"sidepanelCompose"!=this.adWidget.adtype?(this.adWidget.resetAdConfig(),
this.adWidget.setAdConfig(!1,"sidepanelCompose",!1,!0),this.adWidget.adConfig||l()):this.lastWidthMode==f&&this.lastViewId==e||k||(5==f?(g=5,"sidepanelDouble"!=this.adWidget.adtype&&(this.adWidget.resetAdConfig(),this.adWidget.setAdConfig(!1,"sidepanelDouble",!1,!0),this.adWidget.adConfig||(g=4,l()))):l())}this.hasAdConfig&&this.isClosed()&&(k="messageList"==e&&a.byId("messageList").isShowingEmptyFolderAd,"composeMessage"==e?this.show():"todayPage"==e||k||this.show(!1,"messageList"==e?1E3:null));
this.lastViewId!=e&&(d=!0);this.domNode.className="SidePanel navTile24 "+this.widthClasses[g-1];this.lastWidthMode=f;this.lastViewId=e;return d},setupAdScroll:function(a,d){if(a&&d){this.scrollMods[d]&&b.disconnect(this.scrollMods[d].connect);var e={lastScrollTop:null};e.connect=b.connect(a,"onscroll",null,b.hitch(this,this.handleScroll,d));this.scrollMods[d]=e}},handleScroll:function(a,d){var e=ws.WebSuite.SidePanel,f=d.currentTarget?d.currentTarget:this,g=!1,h=0,k=0;if(this.scrollMods[a]){var f=
f.scrollTop,l=this.scrollMods[a].lastScrollTop;null!=l&&(l<f?(g=!0,h=e.towerAd.domNode.scrollTop,k=e.towerAd.domNode.scrollHeight):l>f&&(g=!0,h=e.towerAd.domNode.scrollTop,k=0));this.scrollMods[a].lastScrollTop=f;g&&b.hitch(e,e.isSelectedPanel)(e.towerAd)&&(new b.Animation({node:e.towerAd.domNode,duration:200,properties:{scrollTop:{start:h,end:k}},curve:[h,k],onAnimate:function(a){this.node.scrollTop=a}})).play()}},resetAdScroll:function(){ws.WebSuite.SidePanel.towerAd.domNode.scrollTop=0},handleMainStackSelect:function(b){b=
ws.WebSuite.getCurrentViewId();this.hasAdConfig?"todayPage"==b?this.hide():"messageList"==b&&a.byId("messageList").isShowingEmptyFolderAd?this.hide():"sendConfirmationPage"==b?this.hide():(this.show(!1,"messageList"==b?1E3:null),this.panelStack.selectChild(this.towerAd),this.adWidget&&this.adWidget.block(!1),this.updateWidth()&&ws.WebSuite.resize()):this.hide();this.resetAdScroll()},showStationery:function(a,d){require(["ws/mail/Stationery"],b.hitch(this,function(b){var e=!1;this.stationeryWidget||
(this.stationeryWidget=new b,this.stationeryWidget.startup(),this.stationery.addChild(this.stationeryWidget),e=!0);if(e||a||!this.isSelectedPanel(this.stationery))return this.panelStack.selectChild(this.stationery),this.adWidget&&this.adWidget.block(!0),this.updateWidth(!0),this.stationeryWidget.resize(),this.stationeryWidget.setShown(),this.show(!0),ws.reporting.reportDLAction("Mail-Compose-StationeryOpen"),d&&d(),!0;this.handleMainStackSelect();return!1}))},resetStationery:function(){this.stationeryWidget&&
this.stationeryWidget.reset()},show:function(a,d){if((this.hasAdConfig||a)&&""!=this.domNode.style.display){this.inherited(arguments);this.domNode.style.display="";if(this.adWidget){var e=d||100;this.pendingSidePanelAdShow&&clearTimeout(this.pendingSidePanelAdShow);this.pendingSidePanelAdShow=setTimeout(b.hitch(this,function(){this.adWidget.block(!1)}),e)}ws.WebSuite.resize()}},hide:function(){this.inherited(arguments);var a="none"==this.domNode.style.display;this.domNode.style.display="none";this.panelStack.selectChild(this.towerAd);
this.adWidget&&(this.pendingSidePanelAdShow&&clearTimeout(this.pendingSidePanelAdShow),this.pendingSidePanelAdShow=null,this.adWidget.block(!0));ws.WebSuite.resize(a)},resize:function(){this.inherited(arguments);this.updateWidth();if(this.isSelectedPanel(this.stationery))this.stationeryWidget.resize();else if(this.isSelectedPanel(this.towerAd)){var a=b.marginBox(this.domNode).h;b.style(this.towerAd.domNode,"height",a+"px")}},isSelectedPanel:function(a){return this.isClosed()||this.panelStack.selectedChildWidget!=
a?!1:!0},isClosed:function(){return"none"==this.domNode.style.display}})})},"ws/widget/ContainerPane":function(){define("ws/widget/ContainerPane",["dojo/_base/declare","dijit/_Widget","dijit/_Container"],function(f,k,d){return f([k,d],{})})},"ws/suite/Hat":function(){define("ws/suite/Hat","dojo/_base/declare dojo/text!ws/suite/Hat.html dojo/text!ws/suite/Hat.css dojo dijit dojo/window dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/request/script dojo/date/stamp ws/widget/FTUTip ws/widget/SearchAutoComplete ws/widget/WSMenuItem ws/widget/WSMenuSeparator ws/suite/Customize ws/io ws/lang ws/reporting ws/settings ws/string ws/UserContext ws/WebSuite ws/widget/Dialogs ws/widget/util".split(" "),
function(f,k,d,b,a,h,l,e,p,g,n,t,q,m,w,v){return f([l,e,p],{templateString:k,css:{templateString:d},_earlyTemplatedStartup:!0,minLogoAreaWidth:270,maxSearchFieldWidth:276,searchBarAdsBlocked:!1,loginUrl:Config.BaseDotNETPagesURL+"solo.aspx",whatsNewUrl:Config.WhatsNewURL,checkLinkedScreenNamesInterval:6E5,megaMenu:null,settingsWidget:null,mailModel:null,folderDataType:null,searchScope:"alltext",searchFieldColor:"#000",hatType:"mail",themePicker:null,hideSalutation:!1,setMailModel:function(a){this.mailModel=
a},createThemeSelector:function(){this.themePicker||require(["ws/themes/widget/ThemePicker"],b.hitch(this,function(a){var d="mail"!=this.hatType?"DEFAULT":null,e=document.createElement("div");this.leftHat.appendChild(e);this.themePicker=new a({overrideTheme:d},e);b.addClass(this.themePicker.domNode,"themePicker")}))},startup:function(){Config.WebSearchUiEnabled&&(this.searchAreaNode.appendChild(b.create("label",{innerHTML:ws.string.substituteParams(Config.Strings.SearchHint,b.isMac?"cntl+a":"cntl+alt+a"),
className:"hiddenEl","for":"searchInput"})),this.searchAreaNode.style.display="");if("pubcal"==this.hatType)this.signOutLink.innerHTML=ws.string.substituteParams("\x3ca href\x3d'{0}'\x3e{1}\x3c/a\x3e",this.loginUrl,Config.Strings.SignIn),this.screenNameNode.innerHTML="\x26nbsp;";else if(ws.UserContext.ActiveScreenName&&""!=ws.UserContext.ActiveScreenName){var a=ws.string.getScreenNameForAddress(ws.UserContext.ActiveScreenName);this.hideSalutation&&(a="");var d=Config.Strings.SignOut,e=Config.ClientLogoutUrl;
-1===e.indexOf("?")&&"aol"!==Config.UIVariant&&(e+="?uiv\x3d"+Config.UIVariant);this.screenNameNode.innerHTML=ws.string.escapeXml(a);this.signOutLink.innerHTML=ws.string.substituteParams("\x3ca href\x3d'javascript:void(0)'\x3e{1}\x3c/a\x3e",e,d);b.connect(b.query("a",this.signOutLink)[0],"onclick",b.hitch(this,function(a){if(a.shiftKey)return b.publish("WSSessionExpired",[Config.Strings.AuthTimeoutMain]),a.preventDefault(),a.stopPropagation(),!1;ws.reporting.reportDLAction("Mail-Header-SignOut");
document.location=e;return!1}))}Config.AddDomainToHatUrls&&(a=function(a){if(a&&0<a.length){var b=ws.UserContext.UserAddress.indexOf("@");-1!=b&&(b=ws.UserContext.UserAddress.substr(b+1),a+=0<a.indexOf("?")?"\x26":"?",a+="d\x3d"+encodeURIComponent(b))}return a},Config.MailTourURL=a(Config.MailTourURL),Config.WelcomeDialogMailTourURL=a(Config.WelcomeDialogMailTourURL),Config.HelpMenuTourURL=a(Config.HelpMenuTourURL),Config.MailTourPanelsURL=a(Config.MailTourPanelsURL));this.initNavIcons();this.initMegaMenu();
Config.WebSearchAutoCompleteEnabled&&(this.searchAutoComplete=new q({textbox:this.searchWebField,actionCB:b.hitch(this,"doSearchWeb"),getWidthCB:b.hitch(this,"getSearchWebFieldWidth")}),this.searchAutoComplete.startup());b.subscribe("WSDeferredInit",b.hitch(this,function(){ws.WebSuite.startupDlgDone||ws.bubbleConfig.canShowOtherBubbles&&Config.ShowMailExtPromotionForFF&&3<=b.isFF&&ws.bubbleConfig.isShowable("FF3MailTo")&&this._showFF3MailToDiscovery()}));this.searchWebField.focus();this.setWidth()},
openFeedbackDlg:function(){require(["ws/widget/FeedbackIframeDlg"],b.hitch(this,function(a){Config.FeedbackIframeDlgUrl?(a=new a,a.startup(),a.open()):Config.FeedbackUserVoiceExtURL&&(a=Config.FeedbackUserVoiceExtURL,a.indexOf(!0)&&(a=ws.string.substituteParams(a,escape(Config.ReportingDepartment+"-"+Config.Codename),Config.IsStaging?"stage":"prod",Settings.Locale)),a+="\x26ao\x3d"+(Settings.AccountMigratedToOath||!1),Settings.AccountMigratedToOath&&!Settings.OathCreated&&(a+="\x26mo\x3dtrue"),ws.io.openWindow(a,
null,null,null,null,!0))}))},showSoloLogo:function(){b.removeClass(this.logoArea,"logoArea");b.addClass(this.logoArea,"logoAreaCal");b.removeClass(this.leftHat,"leftHat");b.addClass(this.leftHat,"leftHatCal")},initNavIcons:function(){var a=function(a,d,e){a&&(d&&d.url?(a.onclick=b.hitch(e,e.openNavIconLink,d),d.caption?b.attr(a,"title",d.caption):d.id&&Config.Strings["NI_"+d.id]&&b.attr(a,"title",Config.Strings["NI_"+d.id]),d=b.query("use",a)[0].getAttributeNS("http://www.w3.org/1999/xlink","href"),
b.query("use",a)[0].setAttributeNS("http://www.w3.org/1999/xlink","href",d)):a.style.display="none")};a(this.homeIcon,Config.HatNavIconHome,this);a(this.favsIcon,Config.HatNavIconFavs,this)},openNavIconMail:function(){document.location="Suite.aspx"},openNavIconLink:function(a,b){ws.reporting.reportDLAction("Mail-Header-Icon"+a.id);window.open(a.url,"_blank");b.stopPropagation()},openMegaMenuLink:function(a,b){"AccessibleBasic"!=a&&"ResetBubblePins"!=a&&ws.reporting.reportDLAction("Mail-Options-"+
a);b&&b()},initMegaMenu:function(d){this.megaMenuDef||("mail"==this.hatType?this.megaMenuDef=b.filter(Config.MegaMenuLinks,b.hitch(this,function(a){a.className="ghMenuItem";a.mouseOverSamplingClass="btnHover";a.needsStyleUpdate=1;a.id&&Config.Strings["MM_"+a.id]&&(a.caption=Config.Strings["MM_"+a.id]);if("Feedback"==a.id)if(Config.FeedbackIframeDlgUrl||Config.FeedbackUserVoiceExtURL)a.onClick=b.hitch(this,"openFeedbackDlg");else return!1;else if("MyAccount"==a.id){var d=Config.PageLocale.split("-"),
d=ws.string.substituteParams(a.url,d[0],d[1].toUpperCase());a.onClick=b.hitch(ws.io,"openWindow",d,null,null,null,null,!0)}else{if("MyHome"==a.id&&-1!=navigator.userAgent.search(new RegExp(Config.ExcludeMakeHomeRegEx)))return!1;if("Help"==a.id)ws.reporting.makeFeedbackUrl(a.url),e=ws.reporting.getFeedbackUrl(),a.onClick=b.hitch(ws.io,"openWindow",e,null,null,null,null,!0);else if("MailTour"==a.id){d="aol";"en-ca"!=Config.PageLocale&&"es-us"!=Config.PageLocale||"AIM"!=Config.UIVariant||(d="aim");var e=
Config.HelpMenuTourURL||Config.MailTourURL,f=ws.string.substituteParams(e,d,Config.PageLocale);a.onClick=function(){ws.io.openWindow(f,"","status\x3dyes,resizable\x3dyes,menubar\x3dyes,scrollbars\x3dyes,location\x3dyes,toolbar\x3dyes,top\x3d50,left\x3d50")}}else if("Settings"==a.id)a.onClick=b.hitch(this,"onSettingsClick");else if("Themes"==a.id)if(Config.EnableThemes)this.createThemeSelector(),a.onClick=b.hitch(this,"onThemeClick");else return!1;else if("AccessibleBasic"==a.id)a.onClick=b.hitch(this,
"a11yPrompt");else{if("WelcomeFTE"==a.id)return!1;"ResetBubblePins"==a.id?(a.onClick=function(){ws.bubbleConfig.resetPinPref()},a.caption=""):"Customize"==a.id?(a.className+=" ghMenuCustomize",a.onClick=b.hitch(this,"openCustomize",a.url)):a.onClick=b.hitch(ws.io,"openWindow",a.url,null,null,null,null,!0)}}a.title="";a.onClick=b.hitch(this,this.openMegaMenuLink,a.id,a.onClick);return!0})):"pubcal"==this.hatType?(this.megaMenuArrow.style.display="none",Config.PubCalHelpURL?(this.optionsLink.innerHTML=
Config.Strings.Help,this.optionsLink.href=Config.PubCalHelpURL,b.attr(this.optionsLink,"target","_blank")):this.optionsLink.style.display="none"):(this.megaMenuDef=[],this.megaMenuDef.push({caption:Config.Strings.Settings,className:"ghMenuItem",mouseOverSamplingClass:"btnHover",needsStyleUpdate:1,onClick:b.hitch(this,"onSettingsClick")}),Config.PubCalHelpURL&&this.megaMenuDef.push({caption:Config.Strings.Help,className:"ghMenuItem",mouseOverSamplingClass:"btnHover",needsStyleUpdate:1,onClick:b.hitch(ws.io,
"openWindow",Config.PubCalHelpURL,null,null,null,null,!0)})));if(ws.UserContext.UserAddress&&"pubcal"!=this.hatType){var e="";Settings.FromDisplayName&&(e=ws.string.escapeXml(Settings.FromDisplayName)+"\x3cbr\x3e");e+=ws.UserContext.UserAddress;e="\x3cspan class\x3d'allowTextSelect'\x3e"+ws.string.escapeXml(e)+"\x3c/span\x3e";this.megaMenuDef.unshift({id:"ghSep",separator:!0,className:"ghMenuItem",hideLine:"#fff"});this.megaMenuDef.unshift({id:"UserName",caption:e,isLabel:!0,className:"ghMenuItemGlobal"})}if(d&&
d.length&&"pubcal"!=this.hatType&&(d.push({separator:!0}),this.megaMenu)){if(this.linkedScreenNamesInMenu&&0<this.linkedScreenNamesInMenu.length)for(e=0;e<this.linkedScreenNamesInMenu.length;e++)this.linkedScreenNamesInMenu[e].destroy();this.linkedScreenNamesInMenu=[];b.forEach(d,b.hitch(this,function(a,d){var e=new (a.separator?w:m)(a);e.startup();this.linkedScreenNamesInMenu.push(e);b.place(e.domNode,this.megaMenu.containerNode,d+2)}))}(d=window._jurisdiction)&&d.label&&d.url&&"pubcal"!==this.hatType&&
this.megaMenuDef.push({caption:d.label+(d.showIcon?"\x3cimg src\x3d'"+Config.CCPAIconUrl+"' /\x3e":""),className:"ghMenuItem ccpaMenuItem",mouseOverSamplingClass:"btnHover",needsStyleUpdate:1,onClick:b.hitch(ws.io,"openWindow",d.url,null,null,null,null,!0)});this.megaMenu||"pubcal"==this.hatType||(this.megaMenu=ws.widget.createMenu(this.megaMenuDef),this.megaMenu.enableA11yKey=!0,b.addClass(this.megaMenu.domNode,"megaMenu"),this.megaMenu.bindDomNode(this.megaMenuNode),this.megaMenu.menuOrient={BR:"TR"},
this.connect(this.megaMenuNode,"keyup","a11yKeyHndlr"),this.megaMenu.connect(this.megaMenu,"open",b.hitch(this,"onMegaMenuOpen")),this.megaMenu.connect(this.megaMenu,"onClose",b.hitch(this,"onMegaMenuClose")));this.customizeMenuItem=null;"mail"==this.hatType&&this.megaMenu&&(d=b.query(".ghMenuCustomize",this.megaMenu.domNode),0<d.length&&(this.customizeMenuItem=a.byNode(d[0])));setTimeout(function(){b.publish("Menu/StyleUpdate")},50)},a11yKeyHndlr:function(a){a&&(a.keyCode==b.keys.DOWN_ARROW&&!a.shiftKey||
"Down"==a.keyIdentifier)&&this.megaMenu&&(this.megaMenu.openMyself(),this.megaMenu.a11yMoveSelection(1))},getSearchWebFieldWidth:function(){return this.realSearchFieldWidth+8},setWidth:function(){var a="mail"!=this.hatType?255:Config.HatLogoWidth,d=h.getBox().w,e=508;this.searchWebButtonWidth||(this.searchWebButtonWidth=b._getMarginSize(this.searchWebButton.domNode).w+10,this.searchButtonContainer.style.right=-(this.searchWebButtonWidth-7)+"px");e=b._getMarginSize(this.navIconsDiv).w;this.rightHat.style.paddingLeft=
Math.floor(e)+4+"px";var f=b._getMarginSize(this.rightHat).w,e=Math.max(508,Math.min(d-(a+f),823));this.realSearchFieldWidth=e-33;this.searchWebField.style.width=e-this.searchWebButtonWidth-33+"px";d<a+508+f?(this.domNode.style.minWidth=a+508+f+"px",this.rightHat.style.right="auto",this.rightHat.style.left=a+508+"px"):1024>d?(this.domNode.style.minWidth=d+"px",this.rightHat.style.right="auto",this.rightHat.style.left=a+e+"px"):(this.domNode.style.minWidth=0,this.rightHat.style.left="auto",this.rightHat.style.right=
"3px");this.searchAreaNode.style.left=Math.floor(Math.max(a,(d-f-a)/2-e/2+a))+"px";this.megaMenu&&"none"!=this.megaMenu.domNode.style.display&&this.megaMenu.close();this.searchAutoComplete&&"none"!=this.searchAutoComplete.domNode.style.display&&ws.widget.popup.close(this.searchAutoComplete)},onKeyPressSearchWebField:function(a){a.keyCode==b.keys.ENTER&&(this.doSearchWeb(),a.preventDefault())},doSearchWeb:function(){this.searchWeb()},updateMenuPulldown:function(){},searchWeb:function(){var a=this.searchWebField.value,
d=896==Settings.Brandi?Config.WebSearchIdVerizon:Config.WebSearchId,e=Config.WebSearchUrl;0<=Config.WebSearchUrl.indexOf("{0}")&&(e=ws.string.substituteParams(e,d));e+=encodeURIComponent(a);this.searchAutoComplete&&this.searchAutoComplete.isAutoCompleteEntry&&(e+="\x26s_qt\x3dac");ws.reporting.reportDLAction("Mail-Header-Websearch");(this.newhw=ws.io.openWindow(e,null,null,null,null,!0))&&setTimeout(b.hitch(this,function(){this.newhw.focus()}),50)},onSettingsClick:function(){Settings.SettingsConnectError?
ws.widget.Dialogs.ok("undefined"!=typeof ws.CalSolo?Config.Strings.SettingsDisabledCal:Config.Strings.SettingsDisabled):this.openSettingsCB&&this.openSettingsCB()},onThemeClick:function(){if(this.themePicker)this.themePicker.onChangeTheme();else this.createThemeSelector()},a11yPrompt:function(){ws.WebSuite.setA11yPref(Config.AccessibleLink,"Mail-Options-AccessibleBasicVersion")},onMegaMenuOpen:function(){this.megaMenu&&this.megaMenu.domNode&&this.megaMenu.domNode.parentNode&&b.addClass(this.megaMenu.domNode.parentNode,
"megaMenuDomNode");window._ws_theme&&window._ws_theme.themePicker&&!window._ws_theme.themePicker.useDarkArrow?b.addClass(this.megaMenuArrow,"megaMenuArrowOpenLght"):b.addClass(this.megaMenuArrow,"megaMenuArrowOpenDrk");if(this.customizeMenuItem){var a=ws.WebSuite.settingsWidget&&ws.WebSuite.settingsWidget.isShowing();"messageList"!=ws.WebSuite.getCurrentViewId()||a?this.customizeMenuItem.disable():this.customizeMenuItem.enable()}b.publish("MegaMenuOpen")},onMegaMenuClose:function(){b.removeClass(this.megaMenuArrow,
"megaMenuArrowOpenDrk");b.removeClass(this.megaMenuArrow,"megaMenuArrowOpenLght");b.publish("MegaMenuClose")},onLogoClick:function(a){if(a.shiftKey)return ws.io.openWindow(Config.BasePagesURL+"support"),ws.html.clearSelection(),a.preventDefault(),a.stopPropagation(),!1;Config.MainLogoClickURL?ws.io.openWindow(Config.MainLogoClickURL,"_blank"):this.clickLogo()},clickLogo:function(){},composeMessage:function(){},checkMail:function(){},_showFF3MailToDiscovery:function(){this.ff3MailToTip||(this.ff3MailToTip=
new t({name:"FF3MailTo",content:Config.Strings.FF3MailTo_FTUTip+"\x3cdiv style\x3d'height:30px;margin-top:10px;'\x3e\x3cdiv class\x3d'btn' style\x3d'float:left;margin-left:40px'\x3e\x3cspan class\x3d'btnLabel'\x3e"+Config.Strings.FF3MailTo_ButtonYes+"\x3c/span\x3e\x3c/div\x3e\x3cdiv style\x3d'float:left;margin:5px 0 0 20px'\x3e\x3ca href\x3d'#'\x3e"+Config.Strings.NoThanks+"\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e",positionOverNode:this.screenNameNode,arrowPosition:"top",distanceArrowFromEdge:245,dimensions:{w:240},
offset:{x:-233,y:30},onClick:function(){},load:b.hitch(this,function(){this.ff3MailToTip.connect(b.query(".btn",this.ff3MailToTip.message)[0],"onclick",b.hitch(this,function(){ws.reporting.reportDLAction("Mail-Onboarding-FFMailTo");ws.browser.registerMailToHandler();this.ff3MailToTip.offset.y=2;this.ff3MailToTip.placeOnScreen();this.ff3MailToTip.message.innerHTML=ws.string.substituteParams("\x3cdiv style\x3d'margin-bottom:10px'\x3e"+Config.Strings.FF3MailTo_Added+"\x3cdiv class\x3d'btn' style\x3d'margin:5px 0 15px 90px'\x3e\x3cspan class\x3d'btnLabel'\x3e"+
Config.Strings.Done+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e","\x3cb\x3e","\x3c/b\x3e");this.ff3MailToTip.connect(b.query(".btn",this.ff3MailToTip.message)[0],"onclick",b.hitch(this,function(){this.ff3MailToTip.closeTip()}))}));this.ff3MailToTip.connect(b.query("a",this.ff3MailToTip.ftutip)[0],"onclick",b.hitch(this,function(){this.ff3MailToTip.closeTip()}))})}),b.body().appendChild(this.ff3MailToTip.domNode),this.ff3MailToTip.startup());this.ff3MailToTip.showTip()},_blockHatAds:function(){},searchBarAdsBlock:function(a){this.searchBarAdsBlocked=
a;this._blockHatAds(a)},hatAdsAreBlocked:function(){return this.searchBarAdsBlocked},showTip:function(a){b.addClass(b.byId("instatip"),"instatipGblHdr");ws.widget.showInstatip(a.target)},hideTip:function(a){b.removeClass(b.byId("instatip"),"instatipGblHdr");ws.widget.hideInstatip(a.target)},openCustomize:function(){this.customize||(this.customize=new v,b.body().appendChild(this.customize.domNode));this.customize.show()}})})},"ws/widget/SearchAutoComplete":function(){define("ws/widget/SearchAutoComplete",
"dojo/_base/declare dojo/text!ws/widget/SearchAutoComplete.html dojo/text!ws/widget/SearchAutoComplete.css dojo dijit dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/request/script ws/widget/popup".split(" "),function(f,k,d,b,a,h,l,e,p){return f([h,l,e],{templateString:k,css:{templateString:d},className:"",invocationType:null,SELECTED_CLASS:"selected",textbox:null,isOpen:!1,actionCB:null,getWidthCB:null,isAutoCompleteEntry:!1,lastAutoComplete:null,postCreate:function(){var a=
Config.WebSearchUrl.match(/s_it=.+&/i);a&&a[0]?this.invocationType=a[0].substring(5,a[0].length-1):(a=Config.WebSearchUrl.match(/invocationType=.+&/i))&&a[0]&&(this.invocationType=a[0].substring(15,a[0].length-1));this.invocationType&&(this.connect(document,"onclick","documentOnClick"),this.connect(this.textbox,"onkeypress","textboxOnKeyPress"),this.connect(this.textbox,"onkeydown","textboxOnKeyDown"),this.connect(this.textbox,"onkeyup","textboxOnKeyUp"))},textboxOnKeyPress:function(a){13==a.keyCode&&
"none"!=this.choices.style.display&&(this.choices.style.display="none",a.preventDefault())},documentOnClick:function(a){this.choices.style.display="none"},textboxOnKeyDown:function(a){"none"!=this.choices.style.display&&9==a.keyCode&&(this.choices.style.display="none")},isKey:function(){if(2>arguments.length)return!1;for(var a=1;a<arguments.length;a++)if(arguments[0]==arguments[a])return!0;return!1},textboxOnKeyUp:function(a){a.stopPropagation();this.isKey(a.keyCode,38,40)?this.checkUpDownArrows(a.keyCode):
(this.textbox.value!=this.lastAutoComplete&&(this.lastAutoComplete=null,this.isAutoCompleteEntry=!1),this.keypressTimeout&&clearTimeout(this.keypressTimeout),this.keypressTimeout=setTimeout(b.hitch(this,"_textboxOnKeyUp"),250))},_textboxOnKeyUp:function(){""!=b.trim(this.textbox.value)?this.getChoices():this.removeChoices(!0)},getChoices:function(a){a={command:this.textbox.value,t_stmp:(new Date).getTime(),nresults:"8",appid:"webmail.aol.com",output:"sd1",spaceId:Config.RapidReportingSpaceID};p.get(Config.WebSearchSuggestUrl,
{jsonp:"callback",query:a,timeout:5E3,preventCache:!0}).then(b.hitch(this,"populateChoicesY"),b.hitch(this,"removeChoices",!0))},checkUpDownArrows:function(a){if("none"!=this.choices.style.display){var b=this.getSelected(),d=this.choices.childNodes;-1==b?38==a?this.setSelected(0,d.length-1):40==a&&this.setSelected(0,0):38==a?0<=b-1?this.setSelected(b,b-1):0<d.length&&this.setSelected(b,d.length-1):40==a&&(b+1<d.length?this.setSelected(b,b+1):this.setSelected(b,0))}},setSelected:function(a,d){var e=
this.choices.childNodes;e&&e[d]&&(e[a]&&b.removeClass(e[a],this.SELECTED_CLASS),b.addClass(e[d],this.SELECTED_CLASS),e[d].getAttribute("_wsACval")?this.textbox.value=e[d].getAttribute("_wsACval"):this.textbox.value="",this.lastAutoComplete=this.textbox.value,this.isAutoCompleteEntry=!0)},getSelected:function(){for(var a=null==this.choices.childNodes?0:this.choices.childNodes.length,d=0;d<a;d++)if(b.hasClass(this.choices.childNodes[d],this.SELECTED_CLASS))return d;return-1},addItem:function(a){var d=
this.textbox.value.toLowerCase(),e=a.toLowerCase().indexOf(d),f=a;0<=e&&e<a.length&&(e+=d.length,f=[a.slice(0,e),"\x3cb\x3e",a.slice(e),"\x3c/b\x3e"].join(""));d=b.create("div",{innerHTML:f},this.choices);d.setAttribute("_wsACval",a);this.connect(d,"onmouseover","itemOnMouseOver");this.connect(d,"onclick","itemOnClick")},onOpen:function(){this.domNode&&this.domNode.parentNode&&b.addClass(this.domNode.parentNode,"SearchAutoCompleteDomNode");this.isOpen=!0;this.getWidthCB&&this.choices&&(this.choices.style.width=
this.getWidthCB()+"px")},onClose:function(){this.isOpen=!1},populateChoicesY:function(a){if(a&&a.r)if(this.removeChoices(),a=a.r,0<a.length){for(var b=0;b<a.length;b++)this.addItem(a[b].k);this.showChoices()}else this.removeChoices(!0)},showChoices:function(){this.choices.style.display=0<this.choices.childNodes.length?"block":"none";this.isOpen||ws.widget.popup({popup:this,parent:null,around:this.textbox,orient:{BL:"TL"},padding:[0,0]})},removeChoices:function(a){this.choices.innerHTML="";a&&(ws.widget.popup.close(this),
this.isOpen=!1)},itemOnMouseOver:function(a){var d=this.getSelected();-1!=d&&b.removeClass(this.choices.childNodes[d],this.SELECTED_CLASS);b.addClass(a.currentTarget,this.SELECTED_CLASS)},itemOnClick:function(a){this.textbox.focus();a&&a.currentTarget&&a.currentTarget.getAttribute("_wsACval")&&(a=a.currentTarget.getAttribute("_wsACval"),this.textbox.value=a,this.actionCB&&(this.isAutoCompleteEntry=!0,this.actionCB()));this.choices.style.display="none"}})})},"ws/suite/Customize":function(){define("ws/suite/Customize",
"dojo/_base/declare dojo/text!ws/suite/Customize.html dojo/text!ws/suite/Customize.css dojo/window dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/connect dijit/registry dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ws/lang ws/reporting ws/settings ws/string ws/UserContext ws/WebSuite ws/widget/Dialogs ws/widget/Checkbox ws/widget/util".split(" "),function(f,k,d,b,a,h,l,e,p,g,n,t){return f([g,n,t],{templateString:k,css:{templateString:d},_earlyTemplatedStartup:!0,show:function(){this.mouseConn=
e.connect(document,"onmousedown",this,"onDocumentMouseDown");this.keyConn=e.connect(document,"onkeypress",this,"onDocumentKeyPress");var a=h.position(ws.WebSuite.HatWidget.domNode);l.set(this.domNode,"top",a.y+a.h+"px");this.spacingAuto.checked=0==Settings.ListSpacingType;this.spacingCompact.checked=1==Settings.ListSpacingType;this.spacingComfortable.checked=2==Settings.ListSpacingType;this.spacingRelaxed.checked=3==Settings.ListSpacingType;this.msgColHeader.setChecked(Settings.DisplayColHeaders);
this.hoverNone.checked=0==Settings.MsgListHoverState;this.hoverColor.checked=2==Settings.MsgListHoverState;this.hoverShadow.checked=1==Settings.MsgListHoverState;this.msgSnippet.setChecked(Settings.ShowMessageSnippet);this.btnLabels.setChecked(3!=Settings.ToolbarButtonType);this.senderNames.setChecked(Settings.ShowSenderDisplayName);this.msgPreview.setChecked(Settings.EnablePreviewPane);this.inherited(arguments)},cleanup:function(){e.disconnect(this.mouseConn);e.disconnect(this.keyConn)},onDocumentMouseDown:function(a){ws.html.overElement(this.domNode,
a)||(this.cleanup(),this.hide())},onDocumentKeyPress:function(){this.cleanup();this.hide()},onMsgSnippet:function(){p.byId("messageList").toggleSnippet()},onMsgPreview:function(){p.byId("messageList").togglePreviewPane()},onButtonLabels:function(){p.byId("messageList").toggleButtonLabels()},onSenderNames:function(){Settings.ShowSenderDisplayName=!Settings.ShowSenderDisplayName;ws.settings.save({ShowSenderDisplayName:Settings.ShowSenderDisplayName});p.byId("messageList").model.modelUpdated()},onMsgSpacing:function(a){a&&
a.target&&p.byId("messageList").setSpacing(a.target.value)},onMsgHover:function(a){a&&a.target&&(Settings.MsgListHoverState=+a.target.value,p.byId("messageList").setHover(),ws.settings.save({MsgListHoverState:Settings.MsgListHoverState}))},onResetColumns:function(){p.byId("messageList").toggleColumn("RESET")},onShowColumns:function(){Settings.DisplayColHeaders=!Settings.DisplayColHeaders;ws.settings.save({DisplayColHeaders:Settings.DisplayColHeaders});var a=p.byId("messageList");a.showHeader=Settings.DisplayColHeaders;
a.onSelectionChange();a.autosizeColumns();a.splitContainer.layout()}})})},"ws/suite/Footer":function(){define("ws/suite/Footer","dojo/_base/declare dojo/text!ws/suite/Footer.html dojo/text!ws/suite/Footer.css dojo dijit dijit/_Widget dijit/_TemplatedMixin ws/Spinner ws/html ws/string ws/widget/util".split(" "),function(f,k,d,b,a,h,l,e){return f([h,l],{templateString:k,css:{templateString:d},spinner:null,startup:function(){this.feedbackDescriptions=[];this.feedbackPersistence=[];b.subscribe("WSFeedbackStart",
this,"onFeedbackStart");b.subscribe("WSFeedbackEnd",this,"onFeedbackEnd");b.subscribe("WSFeedbackHide",this,"hideFeedback");b.subscribe("WSEditor/BodyClick",this,"hideFeedback")},setWidth:function(a){b.marginBox(this.domNode,{w:a})},loginTime:new Date,onFeedbackStart:function(a,b,d,e,f){b||this.hideFeedbackNonPersist();this.feedbackDescriptions.push(a);this.feedbackPersistence.push(b);this.undoCB=d?d:null;this.cleanUpUndoCB=e?e:null;this.undoLabel=f||Config.Strings.Undo;this.updateFeedback()},onFeedbackEnd:function(a){a=
b.indexOf(this.feedbackDescriptions,a);-1!=a&&(this.feedbackDescriptions.splice(a,1),this.feedbackPersistence.splice(a,1));this.updateFeedback()},updateFeedback:function(){if(0==this.feedbackDescriptions.length)this.feedback&&this.feedback.style&&(this.feedback.style.display="none"),b.disconnect(this.docMouseDownHandle),b.disconnect(this.docKeyDownHandle),this.listenerConnected=!1,this.spinner&&this.spinner.stop();else{var a=this.feedbackDescriptions[this.feedbackDescriptions.length-1],d=this.feedbackPersistence[this.feedbackPersistence.length-
1];this.feedback&&this.feedback.style&&(this.feedback.style.display="block");ws.html.setShowing(this.undoLink,Config.EnableUndo&&this.undoCB);ws.html.setInnerText(this.undoLink,this.undoLabel);ws.html.setInnerText(this.feedbackTextNode,a);d?(ws.html.setShowing(this.progressNode,!1),ws.html.setShowing(this.persistentIcon,!0),this.spinner&&this.spinner.stop()):(ws.html.setShowing(this.progressNode,!0),ws.html.setShowing(this.persistentIcon,!1),this.spinner||(this.spinner=new e("Feedback",this.progressNode)),
this.spinner.spin());setTimeout(b.hitch(this,function(){this.listenerConnected||(this.docMouseDownHandle=b.connect(document.documentElement,"onmousedown",this,"hideFeedback"),this.docKeyDownHandle=b.connect(document.documentElement,"onkeydown",this,"hideFeedback"),this.listenerConnected=!0)}),0)}},hideFeedback:function(a){var b=!0;Config.EnableUndo&&(a&&ws.html.overElement(this.undoLink,a)?(this.undoLastAction(),b=!1):this.cleanUpUndo());this.cleanUpUndoCB=this.undoCB=null;if(this.feedbackDescriptions.length)if(b)for(;this.feedbackDescriptions.length;)this.onFeedbackEnd(this.feedbackDescriptions[this.feedbackDescriptions.length-
1]);else this.onFeedbackEnd(this.feedbackDescriptions[this.feedbackDescriptions.length-1]);else this.updateFeedback()},hideFeedbackNonPersist:function(){if(this.feedbackDescriptions.length){for(var a=[],b=[],d=0;d<this.feedbackDescriptions.length;d++)this.feedbackPersistence[d]&&(a.push(this.feedbackPersistence[d]),b.push(this.feedbackDescriptions[d]));this.feedbackPersistence=a;this.feedbackDescriptions=b}this.updateFeedback()},undoLastAction:function(){this.undoCB&&this.undoCB()},cleanUpUndo:function(){this.cleanUpUndoCB&&
this.cleanUpUndoCB()}})})},"ws/mail/MailFilters":function(){define("ws/mail/MailFilters",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","ws/mail/MailFilterModel","ws/io"],function(f,k,d,b){return f(null,{filters:[],lastPriority:0,addOld:function(a){var d=new b({priority:this.priority});a=d.setFilterOld(a);this.filters.push(d);return a},add:function(a){var d=new b({priority:this.priority});a=d.setFilter(a);this.filters.push(d);return a},addAllOld:function(a){for(var b=0;b<a.length;b++){var d=
this.addOld(a[b],b+1);d>this.lastPriority&&(this.lastPriority=d)}},addAllNew:function(a){for(var b=0;b<a.length;b++){var d=this.add(a[b],b+1);d>this.lastPriority&&(this.lastPriority=d)}},sort:function(){this.filters.sort(function(a,b){return a.priority<b.priority?-1:a.priority>b.priority?1:0})},clear:function(){this.filters=[]},get:function(a){return this.filters[a]},getById:function(a){for(var b=0;b<this.filters.length;b++)if(this.filters[b].id==a)return this.filters[b]},size:function(){return this.filters.length},
updatePriority:function(){var a=[];d.forEach(this.filters,function(b){1==b.type?ws.Jws.updateFilterPri(b.id,b.priority):a.push(b.makeOldFilter())},this);ws.Jws.jwsData.filtersAttr=a;return ws.Jws.updateFilters()},loadFromRpc:function(){ws.Jws.getMailFilters().then(k.hitch(this,function(a){}),k.hitch(this,function(a){}))}})})},"ws/mail/MailFilterModel":function(){define("ws/mail/MailFilterModel",["dojo/_base/declare","ws/io"],function(f){return f(null,{id:-1,priority:1501,filterName:"",from:"",to:"",
cc:"",bcc:"",subject:"",messageContains:"",moveToFolder:"",tagName:"",type:1,setFilterOld:function(f){this.type=2;this.id=this.priority=f.index;this.filterName=f.name;for(var d=0;d<f.actions.length;d++)if("MOVETOFOLDER"==f.actions[d].type){this.moveToFolder=f.actions[d].value.folderActionValueBean.folder.name;break}for(d=0;d<f.criterions.length;d++){var b=f.criterions[d];switch(b.field){case "SENDER":this.from=b.value;break;case "TO":this.to=b.value;break;case "CC":this.cc=b.value;break;case "BCC":this.bcc=
b.value;break;case "SUBJECT":this.subject=b.value;break;case "BODY":this.messageContains=b.value}}return this.priority},makeOldFilter:function(){if(2!=this.type)return null;var f={index:this.priority,matchType:"ALL",name:this.filterName,actions:[{type:"MOVETOFOLDER",value:{folderActionValueBean:{folder:{name:this.moveToFolder}}}}],criterions:[]},d=function(b,a){f.criterions.push({field:b,value:a,matchCase:!1,operator:"CONTAINS"})};this.from&&d("SENDER",this.from);this.to&&d("TO",this.to);this.cc&&
d("CC",this.cc);this.bcc&&d("BCC",this.bcc);this.subject&&d("SUBJECT",this.subject);this.messageContains&&d("BODY",this.messageContains);return f},setFilter:function(f){this.type=1;this.filterName=f.name;this.id=f.id;this.priority=1500<f.priority?f.priority-1500:f.priority;for(var d=0;d<f.decorations.length;d++)if("FOLDER"==f.decorations[d].type){var b=ws.WebSuite.theMailModel.getFolderById(f.decorations[d].id.substring(1));b&&(this.moveToFolder=b.name)}f=ws.Jws.parseQuery(f.query);for(var a in f)"body"==
a?this.messageContains=f[a]:"acctId"!=a&&(this[a]=f[a]);return this.priority},createFilter:function(f){dojo.mixin(f,this);ws.Jws.createFilter(f).then(function(d){f.load&&f.load()},function(d){f.error&&f.error(d)})},deleteFilter:function(f){dojo.mixin(f,this);ws.Jws.deleteFilter(f).then(function(){f.load&&f.load()},function(d){f.error&&f.error(d)})},modifyFilter:function(f){dojo.mixin(f,this);ws.Jws.modifyFilter(f).then(function(d){f.load&&f.load()},function(d){f.error&&f.error(d)})},clearCache:function(){var f=
function(d){if(d._g_ws_MailFilterCache)try{delete d._g_ws_MailFilterCache}catch(b){}d._g_ws_MailFilterCache=null};f(window);window._ws_isOpenerWS()&&f(window.opener)}})})},"ws/suite/InforOfferDialog":function(){define("ws/suite/InforOfferDialog","dojo/_base/declare dojo/text!ws/suite/InforOfferDialog.html dojo/text!ws/suite/InforOfferDialog.css dojo dijit dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/request/script ws/widget/WSModalPane ws/reporting ws/html".split(" "),function(f,
k,d,b,a,h,l,e,p,g){return f([g,l,e],{templateString:k,css:{templateString:d},_earlyTemplatedStartup:!0,offerName:null,dispAllowList:[],startup:function(){this.inherited(arguments);Config.InforDispAllowList&&(this.dispAllowList=Config.InforDispAllowList.toLowerCase().split(","))},setContent:function(a){ws.reporting.reportDLAction("Mail-Lightbox-InforImpression");this.content.innerHTML=a;this.resize();this.show()},contentAction:function(a,b){ws.io.openWindow(a);ws.reporting.reportDLAction("Mail-Lightbox-InforClicked");
this.reportDisposition(b);this._hideDlg()},reportDisposition:function(a){ws.lang.inArray(a.toLowerCase(),this.dispAllowList)&&Config.WIMKey&&(a={devId:Config.WIMKey,ChannelId:"Webmail",RequestData:JSON.stringify({offerName:this.offerName,disposition:a})},b.xhrPost({url:Config.InforOfferServer+Config.InforOfferDispositionURL,handleAs:"json",withCredentials:!0,content:a,timeout:Config.InforOfferDispositionTimeout}))},hideDlg:function(){this.reportDisposition("Declined");ws.reporting.reportDLAction("Mail-Lightbox-InforCancelled");
this._hideDlg()},_hideDlg:function(){this.hide()}})})},"ws/widget/ModalNotification":function(){define("ws/widget/ModalNotification",["dojo","ws/widget/WSToolbar","ws/widget/iframeModalPane","ws/widget/Button","ws/widget/Dialogs"],function(f,k,d,b){ws.widget.ModalNotification={iframePane:null,prefSaved:!1,setup:function(a){this.notificationData=a;this.savePref("shown");if(a.timeout){var h=1E3*a.timeout;setTimeout(f.hitch(this,function(){this.savePref("timeout");this.iframePane.hide()}),h)}this.iframePane=
new d({scrolling:"no"});f.body().appendChild(this.iframePane.domNode);this.iframePane.iframeNode.style.marginBottom="20px";var h=!!a.closeBtn,l={w:600,h:330};try{l={w:parseInt(a.width),h:parseInt(a.height)}}catch(p){}var e=null;a.closeX?e=f.hitch(this,function(){this.savePref("closeX")}):this.iframePane.closeX.style.display="none";this.iframePane.show(a.msg,l,{w:50,h:h?114:76},e);h&&(a="~"===a.closeBtn?Config.Strings.OK:a.closeBtn,h=new k({vizType:"Bare"}),f.query(".modalContainer",this.iframePane.domNode)[0].appendChild(h.domNode),
h.startup(),l=new b({toolbarPosition:"center",size:"Large"}),l.setLabel(a),l.onClick=f.hitch(this,function(){this.iframePane.hide();this.savePref("closeBtn")}),l.startup(),h.addToolbarItem(l),h.layout());f.publish("popup/open",[])},savePref:function(a){var b=this.notificationData.savePref.toLocaleLowerCase();!this.prefSaved&&b&&-1!=b.indexOf(a.toLowerCase())&&(this.prefSaved=!0,ws.WebSuite.setNotificationsSeenIds(this.notificationData.id))}}})},"ws/widget/AdvancedSearch":function(){define("ws/widget/AdvancedSearch",
"dojo/_base/declare dojo/text!ws/widget/AdvancedSearch.html dojo/text!ws/widget/AdvancedSearch.css dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/dom-geometry dojo/date dojo/_base/lang ws/widget/PopupDatePicker ws/widget/Button ws/widget/popup ws/widget/WSToolbar".split(" "),function(f,k,d,b,a,h,l,e,p,g){return f([b,a,h],{_earlyTemplatedStartup:!0,templateString:k,css:{templateString:d},displayDateFormat:Config.Strings.CalDateFormat,msgDateFormat:"mm/dd/yyyy",show:function(a){this.model=
ws.WebSuite.theMailModel;this.connect(this.domNode,"onkeypress","keyHandler");this.connect(this.inputDateStart,"onFocus","showDatePickerS");this.connect(this.inputDateStart,"onInputClick","showDatePickerS");this.connect(this.inputDateEnd,"onFocus","showDatePickerE");this.connect(this.inputDateEnd,"onInputClick","showDatePickerE");this.connect(this.inputSubject,"onFocus","hidePicker");this.connect(this.checkAttachments,"onFocus","hidePicker");this.resetButton.onBlur=p.hitch(this,"wrapFocus");this.inputDateStart.defaultValue=
this.displayDateFormat.toLowerCase();this.inputDateEnd.defaultValue=this.displayDateFormat.toLowerCase();this.inputDateStart._onBlur();this.inputDateEnd._onBlur();this.updateFolders();this.searchFolder.onKeyPress=function(){};this.pdp=new g;this.pdp.startup();this.connect(this.pdp.datePicker,"selectDateConnect","fillInStartDate");document.body.appendChild(this.domNode);this.domNode.style.display="";this.domNode.style.top=a.y+"px";this.domNode.style.left="-1000px";var b=l.position(this.domNode);this.domNode.style.left=
(a.w-b.w)/2+a.x+"px";this.searchFolder.sizeMyself();this.populateForm();this.inputKeyword.focus()},hide:function(){this.domNode.style.display="none";this.destroyRecursive();ws.WebSuite.advSearch=null},reset:function(){this.inputKeyword.setValue("");this.searchFolder.setOption(0);this.inputFrom.setValue("");this.inputTo.setValue("");this.inputSubject.setValue("");this.inputDateStart.setValue("");this.inputDateEnd.setValue("");this.checkAttachments.setChecked(!1);this.checkImages.setChecked(!1);this.inputKeyword.focus()},
onDocumentMouseDown:function(a){ws.html.overElement(this.domNode,a)||this.hide()},populateForm:function(){var a=this.model.getSearchArgs();a||(a={query:""});var b=ws.WebSuite.Navigation;a.searchIn=b.searchScope;var d=b.getSearchWidget().value;d!=b.getSearchGhostText(b.searchScope)&&(a.query=d);a.query&&("alltext"==a.searchIn?this.inputKeyword.setValue(a.query):"subject"==a.searchIn?this.inputSubject.setValue(a.query):"fromto"==a.searchIn&&this.inputFrom.setValue(a.query));a.folder&&this.searchFolder.setOptionByValue(a.folder);
a.from&&this.inputFrom.setValue(a.from);a.to&&this.inputTo.setValue(a.to);a.subject&&this.inputSubject.setValue(a.subject);a.startDate&&this.inputDateStart.setValue(ws.date.formatDateTime(a.startDate,this.displayDateFormat));a.endDate&&this.inputDateEnd.setValue(ws.date.formatDateTime(a.endDate,this.displayDateFormat));a.attachment&&this.checkAttachments.setChecked(a.attachment);a.image&&this.checkImages.setChecked(a.image)},updateFolders:function(){var a=[];a.push({display:Config.Strings.SearchFolderLabel+
"...",value:"",selected:!0});this.model.folders.forEach(dojo.hitch(this,function(b){if(!this.model.isFolderType(b,"INVISIBLE")){var d=this.model.getFolderDisplayName(b);a.push({display:ws.string.summary(d,40),value:b.name})}}));this.searchFolder.setOptions(a);this.searchFolder.setOption(0)},onSearch:function(){var a={},b=this.searchFolder.currentValue;""!=b&&(a.folder=b);b=this.inputKeyword.getValue();""!=b&&(a.query=b);b=this.inputFrom.getValue();""!=b&&(a.from=b);b=this.inputTo.getValue();""!=b&&
(a.to=b);b=this.inputSubject.getValue();""!=b&&(a.subject=b);ws.WebSuite.Navigation.searchScope=a.searchIn="alltext";var d=this.inputDateStart.getValue();if(""!=d){b=ws.date.ParseDateFromFormat(d,this.displayDateFormat);if(null==b){ws.widget.Dialogs.ok(ws.string.substituteParams(Config.Strings.ErrorDateNotValidFormat,d,this.msgDateFormat));return}a.startDate=b}d=this.inputDateEnd.getValue();if(""!=d){b=ws.date.ParseDateFromFormat(d,this.displayDateFormat);if(null==b){ws.widget.Dialogs.ok(ws.string.substituteParams(Config.Strings.ErrorDateNotValidFormat,
d,this.msgDateFormat));return}a.endDate=b}if(a.startDate&&a.endDate&&a.endDate<a.startDate)ws.widget.Dialogs.ok(Config.Strings.Calendar_AddEvent_InvalidStartAfterEnd);else{if(b=this.checkAttachments.checked)a.attachment=b;if(b=this.checkImages.checked)a.image=b;0<Object.keys(a).length&&ws.WebSuite.selectTab("messageList",dojo.hitch(this,function(){this.model.setFolder(this.model.currentFolder,a)}));this.hide()}},showDatePickerS:function(){this.showDatePicker(this.inputDateStart)},showDatePickerE:function(){this.showDatePicker(this.inputDateEnd)},
showDatePicker:function(a){this.currDateWidget=a;var b=a.getValue(),d=null;""!=b&&(d=ws.date.ParseDateFromFormat(b,this.displayDateFormat));this.pdp.datePicker.selectedDate=d?d:null;this.pdp.setDate(d?d:null);ws.widget.popup({popup:this.pdp,around:a.domNode,orient:{BL:"TL"}})},hidePicker:function(){ws.widget.popup.closeAllPopups()},wrapFocus:function(){this.inputKeyword.focus()},fillInStartDate:function(a){this.currDateWidget.setValue(ws.date.formatDateTime(new Date(a),this.displayDateFormat));ws.widget.popup.close(this.pdp)},
keyHandler:function(a){if("Enter"==a.key)this.onSearch(),a.preventDefault();else if("Esc"==a.key||"Escape"==a.key)this.hide(),a.preventDefault()}})})},"ws/widget/PopupDatePicker":function(){define("ws/widget/PopupDatePicker","dojo/_base/declare dojo dijit dijit/_Widget dijit/_TemplatedMixin ws/widget/WSDatePicker".split(" "),function(f,k,d,b,a,h){return f([b,a],{templateString:'\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"wsMenu" style\x3d"display:none"\x3e\x3cdiv style\x3d"display:none" class\x3d"wsCloseBtn" data-dojo-attach-event\x3d"onclick: closeDatePicker"\x3e\x3csvg class\x3d"svgIcon"\x3e\x3cuse xlink:href\x3d"#iconClose"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\x3c/div\x3e',
_earlyTemplatedStartup:!0,width:245,closeOnMouseOut:!1,displayDate:null,hidePickerOnSetDate:!1,useCloseButton:!1,yearMode:!1,startup:function(){this._started||(this._started=!0,this.hideTimeout=null,this.datePicker=new h({yearMode:this.yearMode}),this.containerNode.appendChild(this.datePicker.domNode),this.datePicker.startup(),k.marginBox(this.domNode,{w:this.width}),this.datePicker.setDate(this.displayDate),this.hidePickerOnSetDate&&this.connect(this.datePicker,"selectDateConnect","hidePopup"),this.setupCloseOnMouseOutHandlers(),
this.useCloseButton&&(this.containerNode.firstChild.style.display="block"))},onOpen:function(){},setupCloseOnMouseOutHandlers:function(){this.closeOnMouseOut&&(this.mouseOverEvt=this.connect(this.domNode,"onmouseover","cancelTimeouts"),this.mouseOutEvt=this.connect(this.domNode,"onmouseout","hidePopup"))},setDate:function(a){this.displayDate=a;this.datePicker.setDate(this.displayDate);this.hidePickerOnSetDate&&this.hidePopup()},clearSelectedDate:function(){this.datePicker.selectedDate=this.displayDate;
this.datePicker.updateUI()},initializeDate:function(a){this.displayDate=a;this.datePicker.setDate(this.displayDate)},cancelTimeouts:function(){null!=this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)},hidePopup:function(){this.cancelTimeouts();this.hideTimeout=ws.lang.setTimeout(this,"delayedHidePopup",10)},delayedHidePopup:function(){null!=this.hideTimeout&&(this.hideTimeout=null,ws.widget.popup.close(this))},getSelectedDate:function(){return this.datePicker.selectedDate},closeDatePicker:function(){ws.widget.popup.close(this)}})})},
"ws/bubbleConfig":function(){define("ws/bubbleConfig",["dojo","dijit","dojo/date","dojo/date/stamp","ws/settings"],function(f,k,d,b){ws.bubbleConfig={welcomeDialogIsShown:!1,openedPinNeeded:!1,canShowOtherBubbles:!1,pinBubblesEnabled:!1,bmLoaded:!1,inSetting:!1,historyList:[],snoozedList:[],bubbleHistory:null,bubbleHistoryLoaded:!1,requestedPins:{},allConfigedPins:null,pinGroupMap:null,init:function(a){f.subscribe("Settings/show",f.hitch(this,function(){this.inSetting=!0}));f.subscribe("Settings/hide",
f.hitch(this,function(){this.inSetting=!1;ws.widget.bubbleManager&&ws.widget.bubbleManager.updateAllPinsLocation()}))},isShowable:function(a){return!this.hasBeenSeen(a)},hasBeenSeen:function(a){return-1!=f.indexOf(this.historyList,a)||-1!=f.indexOf(this.snoozedList,a)},allPinsSeen:function(a){if((a=a||this.allConfigedPins)&&a.length)for(var b=0;b<a.length;b++)if(!this.hasBeenSeen(a[b]))return!1;return!0},isLastSeenPin:function(a){var b=!1;if(-1!=f.indexOf(this.allConfigedPins,a)&&!this.hasBeenSeen(a))for(var d=
this.allConfigedPins,b=!0,e=0;e<d.length;e++){var k=d[e];if(a!=k&&!this.hasBeenSeen(k)){b=!1;break}}return b},getGroupNameForPin:function(a){for(var b in this.pinGroupMap)if(this.pinGroupMap.hasOwnProperty(b)&&-1!=f.indexOf(this.pinGroupMap[b],a))return b;return null},markIntervalForGroup:function(a){this.loadHistory();var b=!1;(a=this.getGroupNameForPin(a))&&0!==Config.BubblePinsExpireInterval&&(b=!0,this.bubbleHistory[a].interval=Settings.time_UTC_ISO);return b},snoozeAllPinInGroup:function(a){if(a&&
a.length)for(var b=0;b<a.length;b++){var d=a[b];-1==f.indexOf(this.snoozedList,d)&&this.snoozedList.push(d)}},setAllPinsHistory:function(a,b){var d=b||this.allConfigedPins;if(d&&d.length)for(var e=0;e<d.length;e++){var h=d[e],g=f.indexOf(this.historyList,h);-1==g?a||this.historyList.push(h):a&&this.historyList.splice(g,1)}},deletePinBubble:function(a){this.pinBubblesEnabled&&ws.widget.bubbleManager&&ws.widget.bubbleManager.deletePinBubble(a)},showPinBubble:function(a,b,d,e){this.requestedPins[a]||
(this.requestedPins[a]={node:null,nodeUpdateFunc:null});b?(this.requestedPins[a].node=b,this.requestedPins[a].nodeUpdateFunc=e):(b=this.requestedPins[a].node,e=this.requestedPins[a].nodeUpdateFunc);d&&(this.requestedPins[a].couldBeShowing=!0);this.pinBubblesEnabled&&ws.widget.bubbleManager&&!this.hasBeenSeen(a)&&this.requestedPins[a].couldBeShowing&&ws.widget.bubbleManager.showPinBubble(a,b,e)},hidePinBubble:function(a,b){this.requestedPins[a]||(this.requestedPins[a]={});b&&(this.requestedPins[a].couldBeShowing=
!1);this.pinBubblesEnabled&&ws.widget.bubbleManager&&ws.widget.bubbleManager.hidePinBubble(a)},loadHistory:function(){!this.bubbleHistoryLoaded&&(this.bubbleHistoryLoaded=!0,this.bubbleHistory=ws.settings.loadConsolidated("bubbleTips")||{},this.bubbleHistory.SeenFTUTips)&&(this.historyList=this.bubbleHistory.SeenFTUTips.split(","))},saveHistory:function(){this.loadHistory();this.bubbleHistory.SeenFTUTips=this.historyList.join(",");ws.settings.saveConsolidated("bubbleTips",this.bubbleHistory)},saveAsSeen:function(a){-1==
f.indexOf(this.historyList,a)&&this.historyList.push(a);this.saveHistory()},bubblesInDateRange:function(){var a=!0;if(Config.BubblePinsDateRange){var a=!1,f=Config.BubblePinsDateRange.split("|"),k="",e="";2==f.length&&(f[0]&&(k=b.fromISOString(f[0])),f[1]&&(e=b.fromISOString(f[1])));f=b.fromISOString(Settings.time_UTC_ISO);k&&e?a=0<d.difference(k,f,"minute")&&0<d.difference(f,e,"minute"):k?a=0<d.difference(k,f,"minute"):e&&(a=0<d.difference(f,e,"minute"))}return a},checkPinBubblesEnable:function(){this.loadHistory();
this.pinGroupMap={};this.allConfigedPins=[];var a=this.canShowOtherBubbles=!1,f=!1;if(Config.BubblePinsEnabled&&this.bubblesInDateRange())for(var k in Config.BubblePins)Config.BubblePins.hasOwnProperty(k)&&Config.BubblePins[k].group&&(f=Config.BubblePins[k].group,this.allConfigedPins.push(k),this.pinGroupMap[f]||(this.pinGroupMap[f]=[]),this.pinGroupMap[f].push(k),f=!0);if(f){if(0!=Config.BubblePinsExpireMinutes||0!=Config.BubblePinsExpireLogins||0!=Config.BubblePinsExpireInterval){k=!1;for(var e in this.pinGroupMap)if(this.pinGroupMap.hasOwnProperty(e))if(this.bubbleHistory[e]){if(!this.allPinsSeen(this.pinGroupMap[e])){0!==
Config.BubblePinsExpireLogins&&(this.bubbleHistory[e].timesSeen>=Config.BubblePinsExpireLogins?(a=!0,this.setAllPinsHistory(!1,this.pinGroupMap[e])):(this.bubbleHistory[e].timesSeen++,k=!0));f=b.fromISOString(Settings.time_UTC_ISO);if(0!==Config.BubblePinsExpireMinutes){var p=null;this.bubbleHistory[e].firstSeenTime&&"string"===typeof this.bubbleHistory[e].firstSeenTime&&-1!=this.bubbleHistory[e].firstSeenTime.indexOf("T")&&(p=b.fromISOString(this.bubbleHistory[e].firstSeenTime));p&&d.difference(p,
f,"minute")>=Config.BubblePinsExpireMinutes&&(a=!0,this.setAllPinsHistory(!1,this.pinGroupMap[e]))}0!==Config.BubblePinsExpireInterval&&(p=null,this.bubbleHistory[e].interval&&"string"===typeof this.bubbleHistory[e].interval&&-1!=this.bubbleHistory[e].interval.indexOf("T")&&(p=b.fromISOString(this.bubbleHistory[e].interval)),p&&d.difference(p,f,"minute")<Config.BubblePinsExpireInterval&&this.snoozeAllPinInGroup(this.pinGroupMap[e]))}}else this.bubbleHistory[e]={firstSeenTime:Settings.time_UTC_ISO,
timesSeen:1},0!==Config.BubblePinsExpireInterval&&(this.bubbleHistory[e].interval=0),k=!0;(a||k)&&this.saveHistory()}this.allPinsSeen()?(this.pinBubblesEnabled=!1,this.canShowOtherBubbles=!0):(this.pinBubblesEnabled=!0,this.canShowOtherBubbles=!1)}else this.canShowOtherBubbles=!0},resetPinPref:function(){this.loadHistory();if(this.allConfigedPins){var a=this.allPinsSeen();this.setAllPinsHistory(a);if(a){ws.reporting.reportDLAction("Mail-Options-ShowQuickTips");this.pinBubblesEnabled=!0;for(var b in this.pinGroupMap)this.pinGroupMap.hasOwnProperty(b)&&
(this.bubbleHistory[b]={firstSeenTime:Settings.time_UTC_ISO,timesSeen:1},0!==Config.BubblePinsExpireInterval&&(this.bubbleHistory[b].interval=0));this.loadBubbleManager(f.hitch(this,this.showRequestedPins))}else{ws.reporting.reportDLAction("Mail-Options-HideQuickTips");for(var d in this.requestedPins)this.requestedPins.hasOwnProperty(d)&&this.hidePinBubble(d);this.pinBubblesEnabled=!1}ws.widget.bubbleManager&&ws.widget.bubbleManager.allClosedBubble&&ws.widget.bubbleManager.allClosedBubble.hide(0);
this.saveHistory()}},showRequestedPins:function(){for(var a in this.requestedPins)this.requestedPins.hasOwnProperty(a)&&this.showPinBubble(a)},loadBubbleManager:function(a){this.bmLoaded?a&&a():ws.WebSuite.ensureStartupPromoLayer(f.hitch(this,function(){require(["ws/widget/BubbleManager"],f.hitch(this,function(){this.bmLoaded=!0;ws.widget.bubbleManager.setUp();a&&a()}))}))},checkForBubblePins:function(){this.checkPinBubblesEnable();this.pinBubblesEnabled&&this.loadBubbleManager(f.hitch(this,this.showRequestedPins))},
openFirstBubble:function(a){this.welcomeDialogIsShown&&!a||!this.pinBubblesEnabled||(this.bmLoaded?(a=ws.widget.bubbleManager.getPinByName(this.openedPinId))?a.expandTip():this.openedPinNeeded=!0:this.openedPinNeeded=!0)}};ws.bubbleConfig.init()})},"ws/themes/widget/ThemePicker":function(){define("ws/themes/widget/ThemePicker","dojo/_base/declare dojo/text!ws/themes/widget/ThemePicker.html dojo/text!ws/themes/widget/ThemeStyles.css dojo/text!ws/themes/widget/ThemeStylesHighContrast.css dojo dijit dijit/registry dijit/_Widget dijit/_TemplatedMixin ws/widget/FTUTip ws/widget/Button ws/themes/ThemeConfig ws/lang ws/string ws/widget/util ws/reporting ws/settings".split(" "),
function(f,k,d,b,a,h,l,e,p,g,n){return f([e,p],{templateString:k,themeCss:{templateString:d},themeCssStr:"",highContrastCss:{templateString:b},highContrastThemeCssStr:null,isHighContrastTheme:!1,useDarkArrow:!0,isVisible:!0,postCreate:function(){window._ws_theme=ws.themes.ThemeConfig;this.tc=window._ws_theme;window._ws_theme.themePicker=this;this.themePickerDialog&&(a._destroyElement(this.themePickerDialog.domNode),this.themePickerDialog.destroy(),this.themePickerDialog=null);this.hatWidget=l.byId("HatWidget");
this.isVisible||(this.domNode.style.display="none",this.hide());this.themeCssStr=this.themeCss.templateString||a._getText(this.themeCss.templatePath);Config.DefaultLogoIsDark?(this.hatLogoUrl=Config.BaseAffinityResourcesURL+"images/hat_logo_gen_light.png",this.hatLogoUrl2X=Config.BaseAffinityResourcesURL+"images/hat_logo_gen_light@2x.png"):(this.hatLogoUrl=Config.BaseAffinityResourcesURL+"images/hat_logo_dark.png",this.hatLogoUrl2X=Config.BaseAffinityResourcesURL+"images/hat_logo_dark@2x.png");this.tc.initialThemeLoaded&&
(this.startUpThemeLoaded(),this.startUpThemeChangeDone=!0)},startUpThemeLoaded:function(a){this.tc.currentThemeId!=Config.ThemeDefault&&this.changeTheme(this.tc.currentThemeId)},sendTrackingURL:function(a){if(null!=a.trackingURL){var b="?rnd\x3d";0<=a.trackingURL.indexOf("?")&&(b="\x26rnd\x3d");a=a.trackingURL+b+Math.random();(new Image).src=a}},onChangeTheme:function(a){this.openThemePickerDialog(this.tc.currentThemeId)},openThemePickerDialog:function(b,d){Settings.SettingsConnectError?ws.widget.Dialogs.ok(Config.Strings.SettingsDisabledThm):
this.themePickerDialog?(this.themePickerDialog.show(b,this.tc.currentThemeId),d&&this.changeTheme(b)):ws.lang.ensureLayersLoaded(a.hitch(this,function(){require(["ws/themes/widget/ThemePickerDialog"],a.hitch(this,function(e){this.themePickerDialog=new e({themeWidget:this,currentSelected:b,originalSelection:this.tc.currentThemeId});a.body().appendChild(this.themePickerDialog.domNode);this.themePickerDialog.startup();d&&this.changeTheme(b)}))}))},changeTheme:function(b){this.isThemeValid(b)||(b=Config.ThemeDefault);
if(this.tc.themeData[b]||b==Config.ThemeDefault){var d=this.tc.themeData[b];this.tc.currentThemeId=d.id;this.tc.currentThemeData=d;this._changeTheme(b)}else this.tc.loadTheme(b,a.hitch(this,this._changeTheme,b))},_changeTheme:function(b){this.tc.themeData[b]&&(this.tc.currentThemeId=b,this.tc.currentThemeData=this.tc.themeData[b]);this._insertThemeCss(b);a.publish("Theme/Change",[b]);return b},isThemeValid:function(a){return this.tc.active[a]?!0:!1},saveTheme:function(a){this.tc.saveTheme()},_openSettings:function(){ws.WebSuite.openSettings();
this.themeOptTip.closeTip()},_insertThemeCss:function(b){this.isHighContrastTheme=!1;b="";var d=this.tc.currentThemeData;ws&&ws.WebSuite&&ws.WebSuite.HatWidget&&ws.WebSuite.HatWidget.rightHat&&a.removeClass(ws.WebSuite.HatWidget.rightHat,"rightHatLightForeColor");this.useDarkArrow=!0;if(!d.defaultTheme){var e=d.resourcePath,f=d.useDarkArrow?"-106px -83px":"-131px -307px";if(d.highContrast){this.isHighContrastTheme=!0;e={baseImage:Config.BaseImagesURL,themeDir:e};this.highContrastThemeCssStr||(this.highContrastThemeCssStr=
this.highContrastCss.templateString||a._getText(this.highContrastCss.templatePath));try{b=ws.string.substituteParams(this.highContrastThemeCssStr,e)}catch(z){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"ThemeStylesHighContrast.css error: targeted theme ("+this.tc.currentThemeId+") has invalid property",z,"ThemePicker.js")}}else{var e={themeDir:e,themeVer:Config.ThemeConfigVer},g;for(g in this.tc.map){var h=this.tc.map[g];e[g]=d.styleInfo[h[0]][h[1]]}try{b=ws.string.substituteParams(this.themeCssStr,
e)}catch(z){window.ws_ErrLgr&&ws_ErrLgr.logError(ws_ErrLgr.cat.ProgErr,"ThemeStyles.css error: targeted theme ("+this.tc.currentThemeId+") has invalid property",z,"ThemePicker.js")}}b+=""+(" body .WSHat .megaMenuArrow { background-position: "+f+";}");if(d.changeHatLogo)g=[' body .WSHat .logoArea, body .miniLogin .logoArea IMG { background-image: url("',d.resourcePath+"/hat_logo_std.png",'"); } '].join(""),b+=g;else if(Config.DefaultLogoIsDark&&!d.useDarkHatLogo||!Config.DefaultLogoIsDark&&d.useDarkHatLogo)g=
[' body .WSHat .logoArea, body .miniLogin .logoArea IMG { background-image: url("',this.hatLogoUrl,'"); } '],window._g_WS_MediaMatchHiDef&&window.matchMedia&&window.matchMedia(window._g_WS_MediaMatchHiDef).matches&&g.push(" @media "+window._g_WS_MediaMatchHiDef+'{ body .WSHat .logoArea, body .miniLogin .logoArea IMG { background-image: url("',this.hatLogoUrl2X,'"); background-size: 267px 57px; } } '),b+=g.join("");this.useDarkArrow=d.useDarkArrow;d.styleInfo&&"#fff"==d.styleInfo.Header.grtingTxt.toLowerCase()&&
ws&&ws.WebSuite&&ws.WebSuite.HatWidget&&ws.WebSuite.HatWidget.rightHat&&a.addClass(ws.WebSuite.HatWidget.rightHat,"rightHatLightForeColor")}a.isWebKit?(a._destroyElement(document.getElementById("themeCommon")),d=document.createElement("style"),d.setAttribute("id","themeCommon"),d.innerText=b,document.getElementsByTagName("head")[0].appendChild(d)):a.isIE?document.getElementById("themeCommon").styleSheet.cssText=b:document.getElementById("themeCommon").innerHTML=b}})})},"url:ws/widget/WSModalPane.css":"",
"url:ws/widget/Button.css":"","url:ws/widget/WSToolbar.css":"","url:ws/suite/Navigation.html":'\x3cdiv class\x3d"WSNavigation navTile24"\x3e\n\t\x3cdiv data-dojo-type\x3d"ws/widget/WSSplitContainer" data-dojo-attach-point\x3d"splitContainer" sizerWidth\x3d"10" orientation\x3d"vertical" persist\x3d"false"\x3e\n\t\t\x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"layoutWidget" class\x3d"folderPane"\x3e\n\t\t\t\x3cdiv data-dojo-props\x3d"region:\'top\'" data-dojo-type\x3d"ws/widget/Pane" class\x3d"controlsPane"\x3e\n\t\t\t\t\x3cdiv class\x3d"unselectable btn composeBtn" data-dojo-attach-point\x3d"composeBtn" data-dojo-attach-event\x3d"onclick:composeMessage"\x3e${ComposeButton}\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\n\t\t\t\x3cdiv data-dojo-props\x3d"region:\'center\'" data-dojo-type\x3d"ws/widget/Pane" class\x3d"mainPane" data-dojo-attach-point\x3d"mainPane"\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" data-dojo-attach-point\x3d"searchAreaPane" class\x3d"searchPane"\x3e\n\t\t\t\t\t\x3cdiv class\x3d"searchInputDiv" data-dojo-attach-point\x3d"searchArea"\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"searchArrow" data-dojo-attach-point\x3d"searchDropDown" data-dojo-attach-event\x3d"onclick: openSearchMenu"\x3e\n\t\t\t\t\t\t\t\x3csvg class\x3d"btnArrowSvg" data-dojo-attach-point\x3d"arrowImg"\x3e\x3cuse xlink:href\x3d"#iconDown"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\t\x3cinput class\x3d"wsInput searchInput" type\x3d"text" data-dojo-attach-point\x3d"searchField" data-dojo-attach-event\x3d"onkeyup: onKeyPressSearchField" /\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"goSearch" data-dojo-attach-point\x3d"searchBtn" data-dojo-attach-event\x3d"onclick: searchApp"\x3e\x3csvg class\x3d"svgIcon"\x3e\x3cuse xlink:href\x3d"#iconSearch"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"todayItemCntr" class\x3d"todayItemCntr"\x3e\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"todayItem" class\x3d"navItem navItemToday"\x3e\n\t\t\t\t\t\t\x3csvg class\x3d"svgIcon iconTodayOnAOL"\x3e\x3cuse xlink:href\x3d"#iconAOL"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"text"\x3e${TodayOnAOL}\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\n\t\t\t\t\x3c!-- Mail --\x3e\n\t\t\t\t\x3c!-- there are placeholder folder nodes here --\x3e\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"sysFoldersNode"\x3e\n\t\t\t\t\t\x3cdiv class\x3d"navItem navTempNode"\x3e\n\t\t\t\t\t\t\x3csvg class\x3d"svgIcon iconInbox" thefn\x3d"Inbox"\x3e\x3cuse xlink:href\x3d"#iconInbox"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"text"\x3e\n\t\t\t\t\t\t\t\x3cspan id\x3d"inboxNode"\x3e${Folder_Inbox}\x3c/span\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3cdiv class\x3d"navItem navTempNode"\x3e\n\t\t\t\t\t\t\x3csvg class\x3d"svgIcon iconDrafts" thefn\x3d"Drafts"\x3e\x3cuse xlink:href\x3d"#iconDrafts"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"text"\x3e\n\t\t\t\t\t\t\t\x3cspan\x3e${Folder_Drafts}\x3c/span\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3cdiv class\x3d"navItem navTempNode"\x3e\n\t\t\t\t\t\t\x3csvg class\x3d"svgIcon iconSent" thefn\x3d"Sent"\x3e\x3cuse xlink:href\x3d"#iconSent"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"text"\x3e\n\t\t\t\t\t\t\t\x3cspan\x3e${Folder_Sent}\x3c/span\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3cdiv class\x3d"navItem navTempNode"\x3e\n\t\t\t\t\t\t\x3csvg class\x3d"svgIcon iconSpam" thefn\x3d"Sent"\x3e\x3cuse xlink:href\x3d"#iconSpam"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"text"\x3e\n\t\t\t\t\t\t\t\x3cspan\x3e${Folder_Spam}\x3c/span\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3cdiv class\x3d"navItem navTempNode"\x3e\n\t\t\t\t\t\t\x3csvg class\x3d"svgIcon iconSpam" thefn\x3d"Sent"\x3e\x3cuse xlink:href\x3d"#iconTrash"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"text"\x3e\n\t\t\t\t\t\t\t\x3cspan\x3e${Folder_Deleted}\x3c/span\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\n\t\t\t\t\x3cdiv class\x3d"quotaWarning" data-dojo-attach-point\x3d"quotaWarningContainer" style\x3d"display: none;"\x3e\n\t\t\t\t\t\x3cdiv class\x3d"wsCloseBtn" data-dojo-attach-event\x3d"onclick: closeQuotaWarning"\x3e\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconClose\'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n\t\t\t\t\t\x3cspan data-dojo-attach-point\x3d"quotaWarningTextNode"\x3e\x3c/span\x3e\n\t\t\t\t\x3c/div\x3e\n\n\t\t\t\t\x3c!-- Contacts --\x3e\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"contactsItem" class\x3d"navItem"\x3e\n\t\t\t\t\t\x3csvg class\x3d"svgIcon iconContacts"\x3e\x3cuse xlink:href\x3d"#iconContact"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\t\x3cdiv class\x3d"text"\x3e${NavContacts}\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\n\t\t\t\t\x3c!-- Calendar --\x3e\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"calendarItem" class\x3d"navItem"\x3e\n\t\t\t\t\t\x3csvg class\x3d"svgIcon iconCalendar"\x3e\x3cuse xlink:href\x3d"#iconMonth"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\t\x3cdiv class\x3d"text"\x3e${NavCalendar}\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\n\t\t\t\t\x3c!-- My Folders --\x3e\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"myFoldersItem" data-dojo-attach-event\x3d"onclick: toggleMyFolders" class\x3d"navItem myFoldersItem"\x3e\n\t\t\t\t\t\x3csvg class\x3d"svgIcon iconToggle"\x3e\x3cuse xlink:href\x3d"#iconRight"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\t\x3cdiv class\x3d"text myFolderText"\x3e${NavMyFolders}\x3c/div\x3e\n\t\t\t\t\t\x3cspan data-dojo-attach-event\x3d"onclick: showCreateFolder" class\x3d"ctrl wsLink" style\x3d"display:none" title\x3d"${NavAdd}"\x3e\n\t\t\t\t\t\t\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconAdd\'\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\t\x3c/span\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"myFoldersContainer" style\x3d"display:none" class\x3d"myFoldersContainer"\x3e\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"myFoldersNode" style\x3d"overflow:hidden"\x3e\x3c/div\x3e\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"createFolderNode" class\x3d"createFolder" style\x3d"display:none"\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"wsInput createFolderPad"\x3e\n\t\t\t\t\t\t\t\x3cinput type\x3d"text" data-dojo-attach-event\x3d"onkeypress: onCreateFolderKeyPress" data-dojo-attach-point\x3d"createFolderInput" maxlength\x3d"${folderMaxLen}" /\x3e\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-event\x3d"onclick: createFolder" class\x3d"wsAdd wsLink"\x3e\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconAdd\'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d"appsPane" data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"appsPane" sizeMin\x3d"30"\x3e\n\t\t\t\x3cdiv class\x3d"appsToolbar" data-dojo-props\x3d"region:\'top\'" data-dojo-type\x3d"ws/widget/Pane"\x3e\n\t\t\t\t\x3cul class\x3d"apBtns"\x3e\n\t\t\t\t\t\x3cli class\x3d"ap-contact" data-dojo-attach-event\x3d"onclick:selectContactApp" data-dojo-attach-point\x3d"apContactBtn"\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"apBtn" data-title\x3d"${MiniNavTipPeople}" data-dojo-attach-event\x3d"onmouseenter:onmouseoverAP,onmouseleave:onmouseoutAP,onmousedown:onmousedownAP,onmouseup:onmouseupAP"\x3e\n\t\t\t\t\t\t\t\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconContact\'\x3e\x3c/use\x3e\x3c/svg\x3e\n                            \x3cdiv class\x3d"border"\x3e\x3c/div\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/li\x3e\n\t\t\t\t\t\x3cli class\x3d"ap-event" data-dojo-attach-point\x3d"apEventBtn" data-dojo-attach-event\x3d"onclick:selectEventApp"\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"apBtn" data-title\x3d"${MiniNavTipEvents}" data-dojo-attach-event\x3d"onmouseenter:onmouseoverAP,onmouseleave:onmouseoutAP,onmousedown:onmousedownAP,onmouseup:onmouseupAP"\x3e\n\t\t\t\t\t\t\t\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconMonth\'\x3e\x3c/use\x3e\x3c/svg\x3e\n                            \x3cdiv class\x3d"border"\x3e\x3c/div\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/li\x3e\n\t\t\t\t\t\x3cli class\x3d"ap-todo" data-dojo-attach-point\x3d"apTodoBtn" data-dojo-attach-event\x3d"onclick:selectTodoApp"\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"apBtn" data-title\x3d"${MiniNavTipTodos}" data-dojo-attach-event\x3d"onmouseenter:onmouseoverAP,onmouseleave:onmouseoutAP,onmousedown:onmousedownAP,onmouseup:onmouseupAP"\x3e\n\t\t\t\t\t\t\t\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconToDos\'\x3e\x3c/use\x3e\x3c/svg\x3e\n                            \x3cdiv class\x3d"border"\x3e\x3c/div\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/li\x3e\n\t\t\t\t\x3c/ul\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"appStack" data-dojo-attach-point\x3d"appStack" data-dojo-props\x3d"region:\'center\'" data-dojo-type\x3d"dijit/layout/StackContainer"\x3e\n\t\t\t\t\x3cdiv id\x3d"contactApp" data-dojo-type\x3d"ws/address/PeopleApp"\x3e\x3c/div\x3e\n\t\t\t\t\x3cdiv id\x3d"eventApp" data-dojo-type\x3d"ws/calendar/EventsApp"\x3e\x3c/div\x3e\n\t\t\t\t\x3cdiv id\x3d"todoApp" data-dojo-type\x3d"ws/calendar/TodoApp"\x3e\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\n\t\x3cdiv class\x3d"navToolbar" data-dojo-attach-point\x3d"navToolbar"\x3e\n\t\t\x3cdiv class\x3d"cpNavItem" data-dojo-attach-event\x3d"onclick:composeMessage,onmouseenter:onmouseoverMNC,onmouseleave:onmouseoutMNC"\x3e\n\t\t\t\x3csvg class\x3d"svgIcon"\x3e\x3cuse xlink:href\x3d"#iconCompose"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d"mnScrollCont" data-dojo-attach-point\x3d"mnScrollCont"\x3e\n\t\t\t\x3cdiv class\x3d"mnScroller" data-dojo-attach-point\x3d"mnMailDiv"\x3e\n\t\t\t\t\x3cdiv class\x3d"shNavItem" data-dojo-attach-point\x3d"shNavItem" data-title\x3d"${MiniNavTipSearch}" data-dojo-attach-event\x3d"onclick:miniNavSearch,onmouseenter:onmouseoverMNS,onmouseleave:onmouseoutMNS"\x3e\n\t\t\t\t\t\x3csvg class\x3d"svgIcon iconSearch"\x3e\x3cuse xlink:href\x3d"#iconSearch"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"navItem mnToday" data-dojo-attach-point\x3d"mnToday" data-title\x3d"${MiniNavTipToday}" data-dojo-attach-event\x3d"onmouseenter:onmouseoverMN,onmouseleave:onmouseoutMN"\x3e\n\t\t\t\t\t\x3csvg class\x3d"svgIcon iconTodayOnAOL"\x3e\x3cuse xlink:href\x3d"#iconAOL"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"mnSysFolders" data-dojo-attach-point\x3d"mnSysFolders"\x3e\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"navItem mnFolders" data-dojo-attach-point\x3d"mnFolders" data-title\x3d"${MiniNavTipFolders}" data-dojo-attach-event\x3d"onmouseenter:onmouseoverMN,onmouseleave:onmouseoutMN"\x3e\n\t\t\t\t\t\x3csvg class\x3d"svgIcon iconPersonal"\x3e\x3cuse xlink:href\x3d"#iconFolder"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\t\x3cdiv class\x3d"mnUnseen" style\x3d"display:none"\x3e\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"navItem mnContacts" data-dojo-attach-point\x3d"mnContacts" data-title\x3d"${MiniNavTipContacts}" data-dojo-attach-event\x3d"onmouseenter:onmouseoverMN,onmouseleave:onmouseoutMN"\x3e\n\t\t\t\t\t\x3csvg class\x3d"svgIcon iconContacts"\x3e\x3cuse xlink:href\x3d"#iconContact"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"navItem mnCalendar" data-dojo-attach-point\x3d"mnCalendar" data-title\x3d"${MiniNavTipCalendar}" data-dojo-attach-event\x3d"onmouseenter:onmouseoverMN,onmouseleave:onmouseoutMN"\x3e\n\t\t\t\t\t\x3csvg class\x3d"svgIcon iconCalendar"\x3e\x3cuse xlink:href\x3d"#iconMonth"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"mnAppsDiv" data-dojo-attach-point\x3d"mnAppsDiv"\x3e\n\t\t\t\t\x3cdiv class\x3d"mnSeparator"\x3e\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"navItem contactApp" data-title\x3d"${MiniNavTipPeople}" data-dojo-attach-event\x3d"onmouseenter:onmouseoverMN,onmouseleave:onmouseoutMN"\x3e\n\t\t\t\t\t\x3csvg class\x3d"svgIcon iconContacts"\x3e\x3cuse xlink:href\x3d"#iconContact"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"navItem eventApp" data-title\x3d"${MiniNavTipEvents}" data-dojo-attach-event\x3d"onmouseenter:onmouseoverMN,onmouseleave:onmouseoutMN"\x3e\n\t\t\t\t\t\x3csvg class\x3d"svgIcon iconCalendar"\x3e\x3cuse xlink:href\x3d"#iconMonth"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"navItem todoApp" data-title\x3d"${MiniNavTipTodos}" data-dojo-attach-event\x3d"onmouseenter:onmouseoverMN,onmouseleave:onmouseoutMN"\x3e\n\t\t\t\t\t\x3csvg class\x3d"svgIcon iconToDos"\x3e\x3cuse xlink:href\x3d"#iconToDos"\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d"mnScUp" data-dojo-attach-event\x3d"onmousedown:onmnScrollUp,onmouseup:onmnScrollEnd"\x3e\x3csvg class\x3d"svgIcon mnScrollUp"\x3e\x3cuse xlink:href\x3d"#iconUp"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"mnScDn" data-dojo-attach-event\x3d"onmousedown:onmnScrollDn,onmouseup:onmnScrollEnd"\x3e\x3csvg class\x3d"svgIcon mnScrollDn"\x3e\x3cuse xlink:href\x3d"#iconDown"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/suite/Navigation.css":"","url:ws/widget/WSMenu.css":"","url:ws/suite/UpgradeDialog.html":'\x3cdiv class\x3d"WSModalPane upgradeDlg"\x3e\n\t\x3cdiv class\x3d"WSModalPaneInner"\x3e\n\t\t\x3cdiv class\x3d"wsCloseBtn" data-dojo-attach-event\x3d"onclick: hideDlg"\x3e\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconClose\'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"modalContainer"\x3e\n\t\t\t\x3cdiv class\x3d"content" data-dojo-attach-point\x3d"content"\x3e\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"subtext" class\x3d"subtext"\x3e\x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"imgDiv" class\x3d"imgDiv"\x3e\n\t\t\t\t\t\x3cimg data-dojo-attach-point\x3d"demoImg" src\x3d"${spacer}"\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"btn" data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-event\x3d"onClick:hideDlg" \x3e${OK}\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/suite/UpgradeDialog.css":"","url:ws/address/PeopleApp.html":'\x3cdiv class\x3d"appNode appPpl"\x3e\n\t\x3cdiv class\x3d"layoutWidget" data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"layoutWidget"\x3e\n\t\t\x3cdiv class\x3d"appTitleBar" data-dojo-type\x3d"ws/widget/Pane" data-dojo-props\x3d"region:\'top\'"\x3e\n\t\t\t\x3cdiv class\x3d"appTitleLink" data-dojo-attach-point\x3d"appTitleLink" data-dojo-attach-event\x3d"onclick: appMenu"\x3e\x3cspan class\x3d"appTitle"\x3e${NavPeople}\x3c/span\x3e\x3csvg class\x3d"appTitleArrow"\x3e\x3cuse xlink:href\x3d"#iconDown"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n\t\t\t\x3cul\x3e\n\t\t\t\t\x3cli class\x3d"appTitleClose" data-dojo-attach-event\x3d"onclick: appClose"\x3e\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconClose\'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/li\x3e\n\t\t\t\t\x3cli class\x3d"appTitleSearch" data-dojo-attach-event\x3d"onclick: searchContacts,onmouseout: onMouseOut,onmouseover: onMouseOver" data-dojo-attach-point\x3d"appTitleSearch"\x3e\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconSearch\'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/li\x3e\n\t\t\t\x3c/ul\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" class\x3d"searchBox" style\x3d"display:none;" data-dojo-props\x3d"region:\'top\'"\x3e\n\t\t\t\x3cdiv class\x3d"cSearchInput" data-dojo-type\x3d"ws/widget/ClearableTextbox" data-dojo-attach-point\x3d"searchBox" defaultValue\x3d"${ContactAppSearchDef}"\x3e\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"appPplNode" data-dojo-type\x3d"ws/widget/Pane" class\x3d"appPplNode" data-dojo-props\x3d"region:\'center\'"\x3e\x3c/div\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"appPplNoResult" data-dojo-type\x3d"ws/widget/Pane" class\x3d"appPplNoResult" data-dojo-props\x3d"region:\'center\'" style\x3d"display:none;"\x3e\n\t\t\t\x3cdiv class\x3d"noResultMsg"\x3e${NoMatchesFound}\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d"appPplEmpty" data-dojo-attach-point\x3d"appPplEmpty" data-dojo-type\x3d"ws/widget/Pane" data-dojo-props\x3d"region:\'center\'" style\x3d"display:none;"\x3e\n\t\t\t\x3cdiv class\x3d"appPplEmptyMsg"\x3e${ContactAppEmpty}\x3c/div\x3e\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"toolbar" data-dojo-type\x3d"ws/widget/WSToolbar" vizType\x3d"Bare"\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" data-dojo-props\x3d"toolbarPosition: \'center\'"\x3e\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-event\x3d"onClick: addContact"\x3e${ContactAppEmptyBtn}\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/address/PeopleApp.css":"","url:ws/calendar/EventsApp.html":'\x3cdiv class\x3d"appNode appEvent"\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"layoutWidget" class\x3d"layoutWidget"\x3e\n\t\t\x3cdiv class\x3d"appTitleBar" data-dojo-type\x3d"ws/widget/Pane" data-dojo-props\x3d"region:\'top\'"\x3e\n\t\t\t\x3cdiv class\x3d"appTitleLink" data-dojo-attach-point\x3d"appTitleLink" data-dojo-attach-event\x3d"onclick: appMenu"\x3e\x3cspan class\x3d"appTitle"\x3e${NavEvents}\x3c/span\x3e\x3csvg class\x3d"appTitleArrow"\x3e\x3cuse xlink:href\x3d"#iconDown"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n\t\t\t\x3cul\x3e\n\t\t\t\t\x3cli class\x3d"appTitleClose" data-dojo-attach-event\x3d"onclick: restoreApp" style\x3d"display:none;"\x3e\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconClose\'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/li\x3e\n\t\t\t\t\x3cli class\x3d"appTitleAddEv" data-dojo-attach-event\x3d"onclick: addEventPlus,onmouseout: onMouseOut,onmouseover: onMouseOver" data-dojo-attach-point\x3d"appTitleAddEv"\x3e\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconAdd\'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/li\x3e\n\t\t\t\x3c/ul\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d"eventNode" data-dojo-type\x3d"ws/widget/Pane" data-dojo-attach-point\x3d"eventNode" data-dojo-attach-event\x3d"onClick: viewEvent" data-dojo-props\x3d"region:\'center\'"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"eventLoading" data-dojo-type\x3d"ws/widget/Pane" data-dojo-attach-point\x3d"eventLoading" data-dojo-props\x3d"region:\'center\'"\x3e\n\t\t\t\x3cdiv class\x3d"eventSpinner" data-dojo-attach-point\x3d"eventSpinner"\x3e\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"eventLoadingMsg"\x3e${Loading}\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"appEventEmpty" class\x3d"appEventEmpty" data-dojo-type\x3d"ws/widget/Pane" data-dojo-props\x3d"region:\'center\'" style\x3d"display:none;"\x3e\n\t\t\t\x3cdiv class\x3d"appEventEmptyMsg"\x3e${EventAppEmpty}\x3c/div\x3e\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"toolbar" data-dojo-type\x3d"ws/widget/WSToolbar" vizType\x3d"Bare"\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" data-dojo-props\x3d"toolbarPosition: \'center\'"\x3e\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-event\x3d"onClick: addEventBtn"\x3e${EventAppEmptyBtn}\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/calendar/EventsApp.css":"","url:ws/calendar/TodoApp.html":'\x3cdiv class\x3d"appNode appTodo"\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"layoutWidget" class\x3d"layoutWidget"\x3e\n\t\t\x3cdiv class\x3d"appTitleBar" data-dojo-type\x3d"ws/widget/Pane" data-dojo-props\x3d"region:\'top\'"\x3e\n\t\t\t\x3cdiv class\x3d"appTitleLink" data-dojo-attach-point\x3d"appTitleLink" data-dojo-attach-event\x3d"onclick: appMenu"\x3e\x3cspan class\x3d"appTitle"\x3e${Panel_TodoLabel}\x3c/span\x3e\x3csvg class\x3d"appTitleArrow"\x3e\x3cuse xlink:href\x3d"#iconDown"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n\t\t\t\x3cul\x3e\n\t\t\t\t\x3cli class\x3d"appTitleClose" data-dojo-attach-event\x3d"onclick: restoreApp" style\x3d"display:none;"\x3e\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconClose\'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/li\x3e\n\t\t\t\t\x3cli class\x3d"appTitleAddTask" data-dojo-attach-point\x3d"appTitleAddTask" data-dojo-attach-event\x3d"onclick: quickAdd,onmouseout: onMouseOut,onmouseover: onMouseOver"\x3e\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconAdd\'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/li\x3e\n\t\t\t\x3c/ul\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d"newItemBox" data-dojo-type\x3d"ws/widget/Pane" data-dojo-props\x3d"region:\'top\'" style\x3d"display:none;"\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/DefaultTextbox" data-dojo-attach-point\x3d"newTaskBox" defaultValue\x3d"${EnterTask}"\x3e\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d"todoLoading" data-dojo-type\x3d"ws/widget/Pane" data-dojo-attach-point\x3d"todoLoading" data-dojo-props\x3d"region:\'center\'"\x3e\n\t\t\t\x3cdiv class\x3d"todoSpinner" data-dojo-attach-point\x3d"todoSpinner"\x3e\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"todoLoadingMsg"\x3e${Loading}\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d"todoFail" data-dojo-type\x3d"ws/widget/Pane" data-dojo-attach-point\x3d"todoFail" data-dojo-props\x3d"region:\'center\'"\x3e\n\t\t\t\x3cdiv class\x3d"todoFailMsg"\x3e${ToDoLoadError}\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"todoRetryMsg wsLink" data-dojo-attach-event\x3d"onclick:restart"\x3e${TodoTryAgain}\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d"contentNode" data-dojo-type\x3d"ws/widget/Pane" data-dojo-attach-point\x3d"contentNode" data-dojo-props\x3d"region:\'center\'"\x3e\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"appTodoEmpty" data-dojo-type\x3d"ws/widget/Pane" data-dojo-props\x3d"region:\'center\'" style\x3d"display:none;"\x3e\n\t\t\t\t\x3cdiv class\x3d"appTodoEmptyMsg"\x3e${TodoAppEmpty}\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"todoNode" data-dojo-attach-point\x3d"todoNode" data-dojo-attach-event\x3d"onclick: onItemClick"\x3e\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/calendar/TodoApp.css":"","url:ws/widget/Checkbox.css":"","url:ws/calendar/CNavigation.html":'\x3cdiv class\x3d"WSCNavigation"\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"layoutWidget" style\x3d"height: 100%; width: 100%;" \x3e\n        \x3cdiv data-dojo-props\x3d"region:\'top\'" data-dojo-type\x3d"ws/widget/Pane" data-dojo-attach-point\x3d"searchAreaPane" class\x3d"searchPane"\x3e\n\t\t\t\x3cdiv class\x3d"searchInputDiv" data-dojo-attach-point\x3d"searchArea"\x3e\n\t\t\t\t\x3cinput class\x3d"wsInput searchInput" type\x3d"text" data-dojo-attach-point\x3d"searchField" data-dojo-attach-event\x3d"onkeyup: onKeyPressSearchField" /\x3e\n\t\t\t\t\x3cdiv class\x3d"goSearch" data-dojo-attach-point\x3d"searchBtn" data-dojo-attach-event\x3d"onclick: searchApp"\x3e\x3csvg class\x3d"svgIcon iconInbox" thefn\x3d"Inbox"\x3e\x3cuse xlink:href\x3d"#iconSearch"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv data-dojo-props\x3d"region:\'center\'" data-dojo-type\x3d"ws/widget/Pane" class\x3d"mainPane" data-dojo-attach-point\x3d"mainPane"\x3e\n\t\t\t\x3c!-- Calendar --\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/WSDatePicker" data-dojo-attach-point\x3d"navDatePicker" class\x3d"navDatePicker"\x3e\x3c/div\x3e\n\n            \x3cdiv class\x3d"wsSeparator"\x3e\x3c/div\x3e\n\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"calendarContainer" class\x3d"calendarContainer" style\x3d"display: none;"\x3e\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"myCalendarsNode" style\x3d"overflow: hidden;"\x3e\x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"subCalendarsNode" style\x3d"overflow: hidden;"\x3e\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv id\x3d"todoApp" data-dojo-type\x3d"ws/calendar/TodoApp" data-dojo-props\x3d"region:\'bottom\'" dojoAttachPoint\x3d"todoApp" style\x3d"height: 200px"\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/calendar/CNavigation.css":"","url:ws/calendar/EditCalendar.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"editCalendar" data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"layoutWidget" style\x3d"height: 100%; width: 100%;"\x3e\n        \x3cdiv data-dojo-type\x3d"ws/widget/WSToolbar" data-dojo-attach-point\x3d"toolbar" data-dojo-props\x3d"region:\'top\'" vizType\x3d"Controls"\x3e\n            \x3cdiv class\x3d"invertBtn" data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-event\x3d"onClick:backToCalendarView" title\x3d"${Cancel}" svgID\x3d"iconClose" data-dojo-props\x3d"toolbarPosition: \'right\'"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" data-dojo-props\x3d"region:\'center\'" class\x3d"editCalendarDiv" data-dojo-attach-point\x3d"editCalendarContent"\x3e\n            \x3cdiv style\x3d"position:relative;" data-dojo-attach-point\x3d"editCalendarTable"\x3e\n                \x3cdiv data-dojo-attach-point\x3d"leftBlock" class\x3d"editCalLeftBlock"\x3e\n                    \x3cdiv class\x3d"inputData"\x3e\n                        \x3ch3 data-dojo-attach-point\x3d"personalCalendarHeader" class\x3d"title"\x3e${EditCalendarHeader}\x3c/h3\x3e\n                        \x3ctable border\x3d"0" cellpadding\x3d"1" cellspacing\x3d"5"\x3e\n                            \x3ctr\x3e\n                                \x3ctd\x3e\n                                   \x3cdiv data-dojo-attach-point\x3d"errorCalendarName" class\x3d"error"\x3e\x3c/div\x3e\n                                    \x3cdiv data-dojo-type\x3d"ws/widget/DefaultTextbox" data-dojo-attach-point\x3d"calendarName" data-dojo-attach-event\x3d"onChange: onCalNameChange" maxlength\x3d"255" defaultValue\x3d"${EnterCalendarName}"\x3e\x3c/div\x3e\n                                   \x3cdiv class\x3d"calendarName" style\x3d"display:none" data-dojo-attach-point\x3d"readOnlyCalendarName"\x3e\x3c/div\x3e\n\t\t\t\t\t\t\t\t   \x3cdiv data-dojo-type\x3d"ws/calendar/ColorPicker" data-dojo-attach-point\x3d"colorPicker"\x3e\x3c/div\x3e\n                                \x3c/td\x3e\n                            \x3c/tr\x3e\n                            \x3ctr height\x3d"12" data-dojo-attach-point\x3d"accessLevelSeparator1"\x3e\n                               \x3ctd colspan\x3d"2"\x3e\n                                  \x3cdiv class\x3d"wsSeparator"\x3e\x3c/div\x3e\n                               \x3c/td\x3e\n                            \x3c/tr\x3e\n                            \x3ctr\x3e\n                                \x3ctd colspan\x3d"2"\x3e\n                                \x3cdiv style\x3d"display:none; white-space:nowrap;" data-dojo-attach-point\x3d"accessLevel"\x3e\n                                    \x3cdiv class\x3d"labelHeading"\x3e${Cal_EditCalendar_AccessLevel}:\x3c/div\x3e\n                                    \x3cspan class\x3d"accessLevelValue" data-dojo-attach-point\x3d"accessLevelValue"\x3e\x3c/span\x3e\n                                \x3c/div\x3e\n                                \x3c/td\x3e\n                            \x3c/tr\x3e\n                            \x3ctr height\x3d"25" data-dojo-attach-point\x3d"shareCalSeparator1"\x3e\n                               \x3ctd colspan\x3d"2"\x3e\n                                  \x3cdiv class\x3d"wsSeparator"\x3e\x3c/div\x3e\n                               \x3c/td\x3e\n                            \x3c/tr\x3e\n                            \x3c!-- publish row ---\x3e\n                            \x3ctr data-dojo-attach-point\x3d"publishRow"\x3e\n                                \x3ctd colspan\x3d"2"\x3e\n                                    \x3cdiv class\x3d"webIcalAccess labelHeading"\x3e${CalAddressLabelHeading}\x3c/div\x3e\n                                    \x3cdiv class\x3d"calLinkOptions"\x3e\n                                       \x3cdiv\x3e${CalAddressOptionLabel}\x3c/div\x3e\n                                       \x3cspan data-dojo-attach-point\x3d"calTypeOffBlock"\x3e\x3cinput name\x3d"calTypeSelect" type\x3d"radio" data-dojo-attach-event\x3d"onclick: offOptionSelected" data-dojo-attach-point\x3d"calTypeOffButton"/\x3e${CalAddressOptionOff}\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\n                                       \x3cinput name\x3d"calTypeSelect" type\x3d"radio" data-dojo-attach-event\x3d"onclick: privateOptionSelected" data-dojo-attach-point\x3d"calTypePrivateButton"/\x3e${CalAddressOptionPrivate}\x26nbsp;\x26nbsp;\n                                       \x3cinput name\x3d"calTypeSelect" type\x3d"radio" data-dojo-attach-event\x3d"onclick: publicOptionSelected" data-dojo-attach-point\x3d"calTypePublicButton"/\x3e${CalAddressOptionPublic}\n                                    \x3c/div\x3e\n                                    \x3cdiv class\x3d"calTypeMessage" data-dojo-attach-point\x3d"calTypeInfo"\x3e\n                                       \x3cspan data-dojo-attach-point\x3d"calTypeText"\x3e\x3c/span\x3e\n                                    \x3c/div\x3e\n                                    \x3cdiv class\x3d"calLinkBlock" data-dojo-attach-point\x3d"publishText"\x3e\n                                        \x3cdiv class\x3d"labelHeading"\x3eHTML:\x26nbsp;\x3cspan class\x3d"normalText"\x3e${AccessUrlText}\x3c/span\x3e\x3c/div\x3e\n                                        \x3cdiv class\x3d"pubCalLinkText" data-dojo-attach-point\x3d"pubCalLink"\x3e\x3c/div\x3e\n                                        \x3cdiv data-dojo-attach-point\x3d"mailHtmlLink" class\x3d"navItem" data-dojo-attach-event\x3d"onclick: openEmailWindow"\x3e\n                                           \x3cdiv class\x3d"text"\x3e${EmailThisText}\x3c/div\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                    \x3cdiv class\x3d"calLinkBlock" data-dojo-attach-point\x3d"publishTextData"\x3e\n                                        \x3cdiv class\x3d"labelHeading"\x3eICAL:\x26nbsp;\x3cspan class\x3d"normalText"\x3e${DownloadCalText}\x3c/span\x3e\x3c/div\x3e\n                                        \x3cdiv class\x3d"pubCalLinkText" data-dojo-attach-point\x3d"pubCalLinkData"\x3e\x3c/div\x3e\n                                        \x3cdiv data-dojo-attach-point\x3d"mailiCalLink" class\x3d"navItem" data-dojo-attach-event\x3d"onclick: openEmailWindowData"\x3e\n                                           \x3cdiv class\x3d"text"\x3e${EmailThisText}\x3c/div\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                    \x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-point\x3d"resetAddressButton" data-dojo-attach-event\x3d"onClick: onResetPrivateLink"\x3e${ResetAddressButtonLabel}\x3c/div\x3e\n                                \x3c/td\x3e\n                            \x3c/tr\x3e\n                            \x3ctr height\x3d"25" data-dojo-attach-point\x3d"shareCalSeparator2"\x3e\n                               \x3ctd colspan\x3d"2"\x3e\n                                 \x3cdiv class\x3d"wsSeparator"\x3e\x3c/div\x3e\n                               \x3c/td\x3e\n                            \x3c/tr\x3e\n                            \x3ctr data-dojo-attach-point\x3d"shareCalendarRow"\x3e\n                                \x3ctd colspan\x3d"2"\x3e\n                                    \x3cdiv class\x3d"labelHeading"\x3e${ShareMyCalenadrWith}\x3c/div\x3e\n                                    \x3cdiv data-dojo-attach-point\x3d"errorScreenName" class\x3d"error"\x3e\x3c/div\x3e\n                                    \x3cdiv class\x3d"addScreenName"\x3e\n                                        \x3cdiv data-dojo-type\x3d"ws/address/SingleAddressField" data-dojo-attach-point\x3d"screenName"\x3e\x3c/div\x3e\n                                        \x3cdiv class\x3d"wsLargeAddDisabled" data-dojo-attach-point\x3d"addImage" data-dojo-attach-event\x3d"onclick: onAddScreenName"\x3e\x3csvg\x3e\x3cuse xlink:href\x3d\'#iconAdd\'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/td\x3e\n                            \x3c/tr\x3e\n                            \x3ctr data-dojo-attach-point\x3d"screenNameRow"\x3e\n                                \x3ctd colspan\x3d"2"\x3e\n                                    \x3ctable data-dojo-attach-point\x3d"screenNameTable" border\x3d0 cellpadding\x3d0 cellspacing\x3d0\x3e\n                                    \x3cthead data-dojo-attach-point\x3d"screenNameTableHead" style\x3d"display:none"\x3e\n                                        \x3ctr\x3e\n                                        \x3ctd class\x3d"labelHeading" style\x3d"padding-left:8px" colSpan\x3d"3"\x3e${CalShareName}\x3c/td\x3e\n                                        \x3ctd \x3e\x3cb style\x3d"padding-left:5px"\x3e${CalSharePermission}\x3c/b\x3e\x3c/td\x3e\n                                        \x3c/tr\x3e\n                                    \x3c/thead\x3e\n                                    \x3ctbody data-dojo-attach-point\x3d"screenNameTableBody" class\x3d"screenNameTableBody"\x3e\n                                    \x3c/tbody\x3e\n                                    \x3c/table\x3e\n                                \x3c/td\x3e\n                            \x3c/tr\x3e\n                            \x3ctr\x3e\n                                \x3ctd colspan\x3d"2"\x3e\n                                    \x3cdiv class\x3d"buttonGroup" style\x3d"margin-top:20px;"\x3e\n                                        \x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-event\x3d"onClick: onUpdateCalendar" data-dojo-attach-point\x3d"updateCalendar"\x3e${Save}\x3c/div\x3e\n                                        \x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-event\x3d"onClick: onDeleteCalendar" data-dojo-attach-point\x3d"deleteCalendar"\x3e${Delete}\x3c/div\x3e\n                                        \x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-event\x3d"onClick: backToCalendarView" data-dojo-attach-point\x3d"cancel" type\x3d"Bare"\x3e${Cancel}\x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/td\x3e\n                            \x3c/tr\x3e\n                        \x3c/table\x3e\n                    \x3c/div\x3e\n                \x3c/div\x3e\n                \x3cdiv data-dojo-attach-point\x3d"rightBlock" class\x3d"rightBlock"\x3e\n                    \x3ch3 class\x3d"title"\x3e${PublishedCalendarHeader}\x3c/h3\x3e\n                    ${PublishedCalendarText}\x3cbr /\x3e\n                    \x3cul\x3e\n                        \x3cli\x3e${PublishedCalendarItem1}\x3c/li\x3e\n                        \x3cli\x3e${PublishedCalendarItem2}\x3c/li\x3e\n                        \x3cli\x3e${PublishedCalendarItem3}\x3c/li\x3e\n                        \x3cli\x3e${PublishedCalendarItem4}\x3c/li\x3e\n                    \x3c/ul\x3e\n                    \x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-event\x3d"onClick: onBrowserCalendars"\x3e${BrowseCalendars}\x3c/div\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n\n\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/calendar/EditCalendar.css":"","url:ws/widget/WSSelect.css":"","url:ws/address/PeoplePicker.html":'\x3cdiv style\x3d"display:none" class\x3d"wsMenu"\x3e\n\t\x3cdiv class\x3d"peoplePicker listView" data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"layoutWidget"\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"rolodexPane" data-dojo-type\x3d"ws/widget/Pane" data-dojo-props\x3d"region:\'bottom\'" class\x3d"rolodex"\x3e\x3c/div\x3e\n\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" data-dojo-props\x3d"region:\'center\'"\x3e\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"grid" data-dojo-type\x3d"dojox.grid.Grid"\x3e\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/address/PeoplePicker.css":"","url:ws/widget/ListView.css":"","url:dojox/grid/_grid/Grid.css":".dojoxGrid {position: relative; background-color: #EBEADB; -moz-outline-style: none; outline: none;}.dojoxGrid table {padding: 0;}.dojoxGrid td {-moz-outline: none;}.dojoxGrid-master-header {position: relative;}.dojoxGrid-master-view {position: relative;}.dojoxGrid-view {position: absolute; overflow: hidden;}.dojoxGrid-header {position: absolute; overflow: hidden;}.dojoxGrid-header {background-color: #E8E1CF;}.dojoxGrid-header table {text-align: center;}.dojoxGrid-header .dojoxGrid-cell-content {text-align: center;}.dojoxGrid-header .dojoxGrid-cell {border: 1px solid; border-color: #F6F4EB #ACA899 #ACA899 #F6F4EB; padding-bottom: 2px;}.dojoxGrid-header .dojoxGrid-cell-over {background-image: none; background-color: white; border-bottom-color: #FEBE47; margin-bottom: 0; padding-bottom: 0; border-bottom-width: 3px;}.dojoxGrid-sort-down {padding-left:16px; margin-left:4px;}.dojoxGrid-sort-up {padding-left:16px; margin-left:4px;}.dojoxGrid-scrollbox {position: relative; overflow: scroll; background-color: white; width: 100%;}.dojoxGrid-content {position: relative; overflow: hidden; -moz-outline-style: none; outline: none;}.dojoxGrid-rowbar {border: 1px solid; border-color: #F6F4EB #ACA899 #ACA899 #F6F4EB; border-top: none;}.dojoxGrid-rowbar-inner {border-top: 1px solid #F6F4EB;}.dojoxGrid-rowbar-over {background-image: none; background-color: white; border-top-color: #FEBE47; border-bottom-color: #FEBE47;}.dojoxGrid-rowbar-selected {background-color: #D9E8F9; background-image: none; background-position: center; background-repeat: no-repeat;}.dojoxGrid-row {position: relative; width: 9000em;}.dojoxGrid-row {border: 1px solid #E8E4D8; border-color: #F8F7F1; border-left: none; border-right: none; background-color: white; border-top: none;}.dojoxGrid-row-over {border-top-color: #FEBE47; border-bottom-color: #FEBE47;}.dojoxGrid-row-odd {background-color: #FFFDF3;}.dojoxGrid-row-selected {background-color: #D9E8F9;}.dojoxGrid-row-table {table-layout: fixed; width: 0;}.dojoxGrid-invisible {visibility: hidden;} .Xdojo-ie .dojoxGrid-invisible {display: none;} .dojoxGrid-invisible td, .dojoxGrid-header .dojoxGrid-invisible td {border-top-width: 0; border-bottom-width: 0; padding-top: 0; padding-bottom: 0; height: 0; overflow: hidden;}.dojoxGrid-cell {border: 1px solid; border-color: #EBEADB; border-right-color: #D5CDB5; padding: 3px 3px 3px 3px; text-align: left; overflow: hidden;}.dojoxGrid-cell-focus {border: 1px dashed blue;}.dojoxGrid-cell-over {border: 1px dotted #FEBE47;}.dojoxGrid-cell-focus.dojoxGrid-cell-over {border: 1px dotted green;}.dojoxGrid-cell-clip {width: 100%; overflow: hidden; white-space:nowrap; text-overflow: ellipsis;}.dojoxGrid-row-editing td {background-color: #F4FFF4;}.dojoxGrid-row-inserting td {background-color: #F4FFF4;}.dojoxGrid-row-inflight td {background-color: #F2F7B7;}.dojoxGrid-row-error td {background-color: #F8B8B6;}.dojoxGrid-input, .dojoxGrid-select, .dojoxGrid-textarea {margin: 0; padding: 0; border-style: none; width: 100%; font-size: 100%; font-family: inherit;}.dojoxGrid-hidden-focus {position: absolute; left: -1000px; top: -1000px; height: 0px; width: 0px;}",
"url:ws/address/AutoComplete.html":'\x3cdiv class\x3d"AutoComplete wsMenu ${className}" data-dojo-attach-point\x3d"choices"\x3e\x3c/div\x3e\n',"url:ws/address/AutoComplete.css":"","url:ws/calendar/ColorPicker.css":"","url:ws/widget/WSDatePicker.html":'\x3cdiv class\x3d"WSDatePicker" data-dojo-attach-point\x3d"WSDatePickerDiv" style\x3d"overflow: hidden;position:relative;"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"topNav" class\x3d"topNav"\x3e\n        \x3cdiv data-dojo-attach-point\x3d"topNavChild" class\x3d"topNavChild"\x3e\n            \x3cdiv class\x3d"prevButton" data-dojo-attach-event\x3d"onclick: decrementMonthYear"\x3e\x3csvg\x3e\x3cuse xlink:href\x3d"#iconLeft"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n            \x3cspan data-dojo-attach-point\x3d"year" class\x3d"year" style\x3d"display:none"\x3e\x3c/span\x3e\n            \x3cdiv class\x3d"nextButton" data-dojo-attach-event\x3d"onclick: incrementMonthYear"\x3e\x3csvg\x3e\x3cuse xlink:href\x3d"#iconRight"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"nav"\x3e\n\t\t\x3cdiv class\x3d"prevButton" data-dojo-attach-event\x3d"onclick: decrementMonth"\x3e\x3csvg\x3e\x3cuse xlink:href\x3d"#iconLeft"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"datePickerMain" style\x3d"float:left"\x3e\n        \x3ctable border\x3d"0" cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"calTable"\x3e\n            \x3ctbody data-dojo-attach-point\x3d"datePickerBody"\x3e\n                \x3ctr\x3e\n                    \x3ctd colspan\x3d"7" class\x3d"monthYear"\x3e\x3cspan data-dojo-attach-point\x3d"monthYearNode" class\x3d"monthyear"\x3e\x3c/span\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n                \x3ctr data-dojo-attach-point\x3d"datePickerDaysOfWeek" class\x3d"days"\x3e\n                    \x3ctd\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n                \x3ctr class\x3d"dates"\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n                \x3ctr class\x3d"dates"\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n                \x3ctr class\x3d"dates"\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n                \x3ctr class\x3d"dates"\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n                \x3ctr class\x3d"dates" style\x3d"display:none" data-dojo-attach-point\x3d"fifthWeekRow"\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n                \x3ctr class\x3d"dates" style\x3d"display:none" data-dojo-attach-point\x3d"sixthWeekRow"\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n            \x3c/tbody\x3e\n        \x3c/table\x3e\n        \x3cdiv class\x3d"verticalRule"\x3e\x3c/div\x3e\n        \x3ctable border\x3d"0" cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"calTable calTable2"\x3e\n            \x3ctbody data-dojo-attach-point\x3d"datePickerBody2"\x3e\n                \x3ctr style\x3d"display:none"\x3e\n                    \x3ctd  class\x3d"monthYear" colspan\x3d"7"\x3e\x3cspan data-dojo-attach-point\x3d"monthYearNode2" class\x3d"monthyear"\x3e\x3c/span\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n                \x3ctr style\x3d"display:none"  data-dojo-attach-point\x3d"datePickerDaysOfWeek2" class\x3d"days"\x3e\n                    \x3ctd\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n                \x3ctr class\x3d"dates" style\x3d"display:none"\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n                \x3ctr class\x3d"dates" style\x3d"display:none"\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n                \x3ctr class\x3d"dates" style\x3d"display:none"\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n                \x3ctr class\x3d"dates" style\x3d"display:none"\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n                \x3ctr class\x3d"dates" style\x3d"display:none" data-dojo-attach-point\x3d"fifthWeekRow2"\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n                \x3ctr class\x3d"dates" style\x3d"display:none" data-dojo-attach-point\x3d"sixthWeekRow2"\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                    \x3ctd data-dojo-attach-event\x3d"onclick: onSelectDate2"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/td\x3e\n                \x3c/tr\x3e\n            \x3c/tbody\x3e\n        \x3c/table\x3e\n\n    \x3c/div\x3e\n    \x3cdiv class\x3d"nav"\x3e\n\t\t\x3cdiv class\x3d"nextButton" data-dojo-attach-event\x3d"onclick: incrementMonth"\x3e\x3csvg\x3e\x3cuse xlink:href\x3d"#iconRight"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"datePickerFoot" style\x3d"clear:both;text-align: center;"\x3e\n            \x3cspan class\x3d"todayContainer" data-dojo-attach-event\x3d"onclick: selectToday"\x3e\x3cspan class\x3d"wsLink" data-dojo-attach-point\x3d"todayNode"\x3e\x3c/span\x3e\x3c/span\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/widget/WSDatePicker.css":"","url:ws/widget/FTUTip.html":'\x3cdiv class\x3d"FTUTip ${className}" data-dojo-attach-point\x3d"ftutip" data-dojo-attach-event\x3d"onclick: onClick" style\x3d"display:none"\x3e\n\t\x3cdiv class\x3d"padBox" data-dojo-attach-point\x3d"padBox"\x3e\n\t\t\x3cdiv class\x3d"message" data-dojo-attach-point\x3d"message"\x3e\x3c/div\x3e\n\t\t\x3cbutton class\x3d"wsCloseBtn" data-dojo-attach-point\x3d"closeButton" data-dojo-attach-event\x3d"onclick: closeTip"\x3e\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconClose\'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"balloonArrowNode"\x3e\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconPointer\'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/widget/FTUTip.css":"","url:ws/suite/TodayPage.html":'\x3cdiv\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" class\x3d"todayPage" data-dojo-attach-point\x3d"layoutWidget"\x3e\n        \x3cdiv data-dojo-type\x3d"ws/widget/SingleLineNotification" data-dojo-attach-point\x3d"notification" class\x3d"notification" data-dojo-props\x3d"region:\'top\'" style\x3d"display:none"\x3e\x3c/div\x3e\n\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" data-dojo-props\x3d"region:\'top\'" class\x3d"head" data-dojo-attach-point\x3d"headPane"\x3e\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"mailCount" data-dojo-attach-event\x3d"onclick: onClickMailCount" class\x3d"mailCount"\x3e\n\t\t\t\t\x3csvg class\x3d\'svgIcon icon\' data-dojo-attach-point\x3d"mailIcon"\x3e\x3cuse xlink:href\x3d\'#iconMail\'\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"mailCountNode" class\x3d"mailCountText" \x3e\x26nbsp;\x3c/span\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"errMsgNode" style\x3d"display:none" class\x3d"errMsgNode"\x3e\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"clock" data-dojo-attach-point\x3d"clock" style\x3d"display:none"\x3e\n\t\t\t\t\x3cdiv class\x3d"date" data-dojo-attach-point\x3d"dateNode"\x3e\x26nbsp;\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"time" data-dojo-attach-point\x3d"timeNode"\x3e\x26nbsp;\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"weather" data-dojo-attach-point\x3d"weather" style\x3d"display:none" data-dojo-attach-event\x3d"onclick: openWeather" title\x3d"${WeatherTipOpenExternal}"\x3e\n\t\t\t\t\x3cdiv class\x3d"tempVal"\x3e\n\t\t\t\t\t\x3cspan class\x3d"degree"\x3e\x3c/span\x3e\n\t\t\t\t\t\x3cspan class\x3d"tempNotation" data-dojo-attach-event\x3d"onclick: toggleTemp" title\x3d"${WeatherTipUnits}"\x3e\x3c/span\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3cdiv id\x3d"weatherIcon" class\x3d"sky-icon"\x3e\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"cityTemp"\x3e\n\t\t\t\t\t\x3cspan class\x3d"tempDiv"\x3e\n\t\t\t\t\t\t\x3cspan class\x3d"divider"\x3e\x3c/span\x3e\n\t\t\t\t\t\t\x3cspan class\x3d"maxTempDiv"\x3e\x3c/span\x3e\n\t\t\t\t\t\t\x3cspan class\x3d"divider"\x3e\x3c/span\x3e\n\t\t\t\t\t\t\x3cspan class\x3d"minTempDiv"\x3e\x3c/span\x3e\n\t\t\t\t\t\t\x3cspan class\x3d"divider"\x3e\x3c/span\x3e\n\t\t\t\t\t\x3c/span\x3e\n\t\t\t\t\t\x3cspan class\x3d"cityDiv"\x3e\n\t\t\t\t\t\t\x3cspan class\x3d"cityName"\x3e\x3c/span\x3e\n\t\t\t\t\t\t\x3cspan class\x3d"editDiv"\x3e\n\t\t\t\t\t\t\t\x3cspan class\x3d"editLink" data-dojo-attach-event\x3d"onclick: onClickZipEdit" title\x3d"${WeatherTipEdit}"\x3e${Edit}\x3c/span\x3e\n\t\t\t\t\t\t\x3c/span\x3e\n\t\t\t\t\t\x3c/span\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"weather" data-dojo-attach-point\x3d"weatherEdit" style\x3d"display:none"\x3e\n\t\t\t\t\x3cdiv class\x3d"spinnerNode" data-dojo-attach-point\x3d"spinnerNode"\x3e\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"wsLink geoLocation" data-dojo-attach-point\x3d"geoLocation" data-dojo-attach-event\x3d"onclick: useGeoLocation"\x3e${WeatherMyLocation}\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"zipInput" data-dojo-type\x3d"ws/widget/DefaultTextbox" data-dojo-attach-point\x3d"zipInput" defaultValue\x3d"${GetZipDlg_prompt}"\x3e\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"citySelect zipInput" data-dojo-type\x3d"ws/widget/WSSelect" data-dojo-attach-point\x3d"citySelect"\x3e\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"wsLink zipCancel" data-dojo-attach-event\x3d"onclick: onZipEditCancel"\x3e${Cancel}\x3c/div\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-point\x3d"zipSave" data-dojo-attach-event\x3d"onClick: onZipSave" size\x3d"Small" type\x3d"zipSave"\x3e${Save}\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" data-dojo-attach-point\x3d"iframePane" data-dojo-props\x3d"region:\'center\'"\x3e\n\t\t\t\x3ciframe src\x3d"about:blank" scrolling\x3d"auto" frameBorder\x3d"no" name\x3d"todayIframe" allowtransparency\x3d"true" id\x3d"todayIframe" style\x3d"display:none;background-color:#fff"\x3e\x3c/iframe\x3e\n\t\t\x3c/div\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/suite/TodayPage.css":"","url:ws/widget/SingleLineNotification.html":'\x3cdiv class\x3d"SingleLineNotification"\x3e\n\t\x3cdiv class\x3d"alertBar" data-dojo-attach-point\x3d"bar"\x3e\n\t\t\x3cspan class\x3d"alertLeft" data-dojo-attach-point\x3d"alertLeft"\x3e\x3csvg class\x3d"svgIcon slnAlertIcon"\x3e\x3cuse xlink:href\x3d\'#iconInfo\'/\x3e\x3c/svg\x3e\x3cspan data-dojo-attach-point\x3d"alertTxt"\x3e${NotificationHeadsUp}\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"barRight" data-dojo-attach-point\x3d"msg"\x3e\x3c/span\x3e\n\t\x3c/div\x3e\n\t\x3cspan class\x3d\'closeBtn\' data-dojo-attach-point\x3d"closeBtn" data-dojo-attach-event\x3d"onclick:close"\x3e\x3csvg\x3e\x3cuse xlink:href\x3d\'#iconClose\'/\x3e\x3c/svg\x3e\x3c/span\x3e\n\x3c/div\x3e\n',
"url:ws/widget/SingleLineNotification.css":"","url:ws/mail/SendConfirmationPage.html":'\x3cdiv\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" class\x3d"sendConfirmation" data-dojo-attach-point\x3d"layoutWidget"\x3e\n\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" class\x3d"confirmationHeader" data-dojo-props\x3d"region:\'top\'"\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane"  class\x3d"searchInfo" data-dojo-props\x3d"region:\'top\'" \x3e\n\n\t\t\t\t\x3cdiv class\x3d"backLine"\x3e\n\t\t\t\t\t\x3cdiv class\x3d"backArrow" data-dojo-attach-event\x3d\'onclick:cancelToMessage\'\x3e\n\t\t\t\t\t\t\x3csvg class\x3d\'wsArrowLeft\'\x3e\x3cuse xlink:href\x3d\'#iconLeft\'/\x3e\x3c/svg\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"backLabel"\x3e${Back}\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3cspan class\x3d"confirmMessage"\x3e${ComposeSentConf}\x3c/span\x3e\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-event\x3d"onClick: createDistributionList" data-dojo-attach-point\x3d"createDistributionListButton" svgID\x3d"iconAddList" title\x3d"${CreateDistListButton}" style\x3d"display:none"\x3e\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3c!-- End of header, start content variants --\x3e\n\t\t\x3cdiv data-dojo-type\x3d"dijit/layout/StackContainer" data-dojo-attach-point\x3d"sendConfPages" data-dojo-props\x3d"region:\'center\'" style\x3d"overflow:hidden"\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"emptyPage"\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"sendConfHistoric"\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" class\x3d"feedbackPane" data-dojo-props\x3d"region:\'left\'" data-dojo-attach-point\x3d"feedbackPane"\x3e\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"sendConfirmationPane"\x3e\x3ciframe src\x3d"about:blank" frameborder\x3d"0" scrolling\x3d"no" style\x3d"width: 340px; height: 270px;"\x3e\x3c/iframe\x3e\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"fullSendConfirmationPage"\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" data-dojo-attach-point\x3d"fullSendConfirmationPane" data-dojo-props\x3d"region:\'center\'"\x3e\x3ciframe data-dojo-attach-point\x3d"fullSendConfirmationPaneFrame" src\x3d"about:blank" frameborder\x3d"0" style\x3d"width: 100%; height: 100%;"\x3e\x3c/iframe\x3e\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/mail/SendConfirmationPage.css":"","url:ws/mail/SendConfirmationCard.html":'\x3cdiv\x3e\n\t\x3c!--\n\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" data-dojo-attach-point\x3d"invitePane" style\x3d"display: none;"\x3e\n\t\t\x3ctable class\x3d"sendConfirmationTable" border\x3d"0" cellpadding\x3d"4" cellspacing\x3d"1"\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd colspan\x3d"10"\x3e\x3cspan class\x3d"inputLabels"\x3e${To}: \x3c/span\x3e\x3c/td\x3e\n\t\t\t\t\x3ctd colspan\x3d"40"\x3e\x3cinput type\x3d"text" class\x3d"wsInput regularInput" data-dojo-attach-point\x3d"toInput" /\x3e\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd colspan\x3d"10"\x3e\x3cspan class\x3d"inputLabels"\x3e${Subject}: \x3c/span\x3e\x3c/td\x3e\n\t\t\t\t\x3ctd colspan\x3d"40"\x3e\x3cinput type\x3d"text" class\x3d"wsInput regularInput" data-dojo-attach-point\x3d"subjectInput" /\x3e\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd colspan\x3d"50"\x3e\n\t\t\t\t\t\x3ctextarea class\x3d"contentText" data-dojo-attach-point\x3d"inviteContent" rows\x3d"5" wrap\x3d"virtual"\x3e\x3c/textarea\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\x3ctd colspan\x3d"25" align\x3d"right"\x3e\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-event\x3d"onClick: sendInvite"\x3e${Invite}\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3ctd colspan\x3d"25" align\x3d"left"\x3e\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-event\x3d"onClick: hide"\x3e${Cancel}\x3c/div\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\x3c/table\x3e\n\t\x3c/div\x3e\n\t--\x3e\n\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" data-dojo-attach-point\x3d"createListPane" style\x3d"display: none; overflow: auto;"\x3e\n\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" data-dojo-attach-point\x3d"creatingList" class\x3d"creatingList" style\x3d"display:none"\x3e\n\t\t\t\x3cdiv class\x3d"wsCloseBtn" data-dojo-attach-event\x3d"onclick: closeCard"\x3e\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconClose\'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n\t\t\t\x3ctable class\x3d"createListTable" data-dojo-attach-point\x3d"createListTable"\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd valign\x3d"top" data-dojo-attach-point\x3d"listNameInputRow"\x3e\n\t\t\t\t\t\t\x3cinput type\x3d"text" class\x3d"wsInput listNameInput" data-dojo-attach-point\x3d"listNameInput" data-dojo-attach-event\x3d"onkeypress: onKeyPress"/\x3e\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"error" class\x3d"error"\x3e\x3c/div\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"errorRow"\x3e\n\t\t\t\t\t\x3ctd valign\x3d"top" class\x3d"error" data-dojo-attach-point\x3d"errorMsg"\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd valign\x3d"top"\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"listContacts" data-dojo-attach-point\x3d"listContacts"\x3e\x3c/div\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"okToolBar" data-dojo-type\x3d"ws/widget/WSToolbar" vizType\x3d"Bare"\x3e\n\t\t\t\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-point\x3d"createListButton" data-dojo-attach-event\x3d"onClick: checkRequiredFields" data-dojo-props\x3d"toolbarPosition: \'left\'"\x3e${Create}\x3c/div\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" data-dojo-attach-point\x3d"listCreated"  class\x3d"listCreated"\x3e\n\t\t\t\x3cdiv class\x3d"listCreatedText"\x3e\x3cspan\x3e${ListCreated}\x3c/span\x3e\x3c/div\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/WSToolbar" data-dojo-attach-point\x3d"listCreatedTB" vizType\x3d"Bare"\x3e\n\t\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-event\x3d"onClick:closeCard" data-dojo-props\x3d"toolbarPosition: \'center\'"\x3e${OK}\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/mail/SendConfirmationCard.css":"","url:ws/widget/Splitter.css":"","url:ws/suite/SidePanel.html":'\x3cdiv class\x3d"SidePanel navTile24"\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"layoutWidget" class\x3d"layoutWidget"\x3e\n\t\t\x3cdiv data-dojo-type\x3d"dijit/layout/StackContainer" data-dojo-props\x3d"region:\'center\'" data-dojo-attach-point\x3d"panelStack" style\x3d"overflow:hidden;"\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/ContainerPane" data-dojo-attach-point\x3d"towerAd" style\x3d"overflow:hidden;width:100%;"\x3e\x3c/div\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/ContainerPane" data-dojo-attach-point\x3d"stationery" style\x3d"height:100%;width:100%"\x3e\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Pane" data-dojo-props\x3d"region:\'bottom\'" data-dojo-attach-point\x3d"copyrightDIV" class\x3d"CopyRightDiv"\x3e\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/suite/SidePanel.css":"","url:ws/suite/Hat.html":'\x3cdiv class\x3d"WSHat"\x3e\n\t\x3cdiv class\x3d"leftHat" data-dojo-attach-point\x3d"leftHat"\x3e\n\t\t\x3cdiv class\x3d"logoArea" data-dojo-attach-point\x3d"logoArea" data-dojo-attach-event\x3d"onclick: onLogoClick"\x3e\n\t\t\t\x3cspan style\x3d"display: none;" class\x3d"CalSoloText" data-dojo-attach-point\x3d"CalSoloText"\x3e\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"searchArea" data-dojo-attach-point\x3d"searchAreaNode" style\x3d"display: none"\x3e\n\t\t\x3cinput id\x3d"searchInput" type\x3d"text" name\x3d"query" autocomplete\x3d"off" maxlength\x3d"256" class\x3d"wsInput search" value\x3d"" data-dojo-attach-point\x3d"searchWebField" data-dojo-attach-event\x3d"onkeypress: onKeyPressSearchWebField" /\x3e\n\t\t\x3cdiv class\x3d"searchButtonContainer" data-dojo-attach-point\x3d"searchButtonContainer"\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-attach-point\x3d"searchWebButton" id\x3d"searchButton" size\x3d"Large" data-dojo-attach-event\x3d"onClick: searchWeb"\x3e\n\t\t\t\t${SearchCaps}\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"rightHat" class\x3d"rightHat"\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"navIconsDiv" class\x3d"navIconsDiv" \x3e\n\t\t\t\x3cspan class\x3d"navIcon" data-dojo-attach-point\x3d"homeIcon"\x3e\x3csvg\x3e\x3cuse xlink:href\x3d"#iconAolHome"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/span\x3e\n\t\t\t\x3cspan class\x3d"navIcon" data-dojo-attach-point\x3d"favsIcon"\x3e\x3csvg\x3e\x3cuse xlink:href\x3d"#iconAolFav"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d"salutation"\x3e\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"screenNameNode" class\x3d"screenNameNode"\x3e\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"adminLinks" class\x3d"adminLinks"\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"signOutLink" class\x3d"signOutLink"\x3e\x3c/span\x3e\n\t\t\t\x3cspan class\x3d"pipe"\x3e\x26nbsp;\x3c/span\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"megaMenuNode" class\x3d"link"\x3e\x26nbsp;\x3ca href\x3d"#" data-dojo-attach-point\x3d"optionsLink" class\x3d"link" tabindex\x3d0\x3e${Options}\x3c/a\x3e\x3csvg class\x3d"btnArrowImg megaMenuArrow" data-dojo-attach-point\x3d"megaMenuArrow"\x3e\x3cuse xlink:href\x3d"#iconDown"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/suite/Hat.css":"","url:ws/widget/SearchAutoComplete.html":'\x3cdiv class\x3d"SearchAutoComplete wsMenu ${className}" data-dojo-attach-point\x3d"choices"\x3e\x3c/div\x3e\n',"url:ws/widget/SearchAutoComplete.css":"","url:ws/suite/Customize.html":'\x3cdiv class\x3d"customizePane noselect"\x3e\n\t\x3cdiv class\x3d"titleBar"\x3e\n\t\t\x3cspan class\x3d"titleLabel"\x3e${CustomizeListView}\x3c/span\x3e\n\t\t\x3cspan class\x3d"titleClose" data-dojo-attach-event\x3d"onclick: hide"\x3e\n\t\t\t\x3csvg\x3e\x3cuse xlink:href\x3d"#iconClose"/\x3e\x3c/svg\x3e\n\t\t\x3c/span\x3e\n\t\x3c/div\x3e\n\t\n\t\x3cdiv class\x3d"sectionTitle"\x3e${MsgSpacing}\x3c/div\x3e\n\t\x3clabel class\x3d"sectionIndent"\x3e\x3cinput type\x3d"radio" name\x3d"msgSpacingGroup" value\x3d0 data-dojo-attach-point\x3d"spacingAuto" data-dojo-attach-event\x3d"onClick: onMsgSpacing"/\x3e\x3cspan class\x3d"radioAlignText"\x3e${MsgSpacingMode0}\x3c/span\x3e\x3c/label\x3e\x3cbr\x3e\n\t\x3clabel class\x3d"sectionIndent"\x3e\x3cinput type\x3d"radio" name\x3d"msgSpacingGroup" value\x3d1 data-dojo-attach-point\x3d"spacingCompact" data-dojo-attach-event\x3d"onClick: onMsgSpacing"/\x3e\x3cspan class\x3d"radioAlignText"\x3e${MsgSpacingMode1}\x3c/span\x3e\x3c/label\x3e\x3cbr\x3e\n\t\x3clabel class\x3d"sectionIndent"\x3e\x3cinput type\x3d"radio" name\x3d"msgSpacingGroup" value\x3d2 data-dojo-attach-point\x3d"spacingComfortable" data-dojo-attach-event\x3d"onClick: onMsgSpacing"/\x3e\x3cspan class\x3d"radioAlignText"\x3e${MsgSpacingMode2}\x3c/span\x3e\x3c/label\x3e\x3cbr\x3e\n\t\x3clabel class\x3d"sectionIndent"\x3e\x3cinput type\x3d"radio" name\x3d"msgSpacingGroup" value\x3d3 data-dojo-attach-point\x3d"spacingRelaxed" data-dojo-attach-event\x3d"onClick: onMsgSpacing"/\x3e\x3cspan class\x3d"radioAlignText"\x3e${MsgSpacingMode3}\x3c/span\x3e\x3c/label\x3e\x3cbr\x3e\n\t\n\t\x3cdiv class\x3d"sectionSep"\x3e\x3c/div\x3e\n\t\n\t\x3cdiv class\x3d"sectionTitle"\x3e${MessageListColumnsLabel}\x3c/div\x3e\n\t\x3cdiv class\x3d"sectionIndent" data-dojo-type\x3d"ws/widget/Checkbox" data-dojo-attach-point\x3d"msgColHeader" label\x3d"${ShowColumnHeaders}" data-dojo-attach-event\x3d"onClick: onShowColumns"\x3e\x3c/div\x3e\n\t\x3cdiv class\x3d"sectionIndent wsLink" data-dojo-attach-event\x3d"onClick: onResetColumns"\x3e${ColumnReset}\x3c/div\x3e\n\t\n\t\x3cdiv class\x3d"sectionSep"\x3e\x3c/div\x3e\n\t\n\t\x3cdiv class\x3d"sectionTitle"\x3e${HoverStateTreatment}\x3c/div\x3e\n\t\x3clabel class\x3d"sectionIndent"\x3e\x3cinput type\x3d"radio" name\x3d"msgHoverGroup" value\x3d0 data-dojo-attach-point\x3d"hoverNone" data-dojo-attach-event\x3d"onClick: onMsgHover"/\x3e\x3cspan class\x3d"radioAlignText"\x3e${None}\x3c/span\x3e\x3c/label\x3e\x3cbr\x3e\n\t\x3clabel class\x3d"sectionIndent"\x3e\x3cinput type\x3d"radio" name\x3d"msgHoverGroup" value\x3d2 data-dojo-attach-point\x3d"hoverColor" data-dojo-attach-event\x3d"onClick: onMsgHover"/\x3e\x3cspan class\x3d"radioAlignText"\x3e${HoverColoredLabel}\x3c/span\x3e\x3c/label\x3e\x3cbr\x3e\n\t\x3clabel class\x3d"sectionIndent"\x3e\x3cinput type\x3d"radio" name\x3d"msgHoverGroup" value\x3d1 data-dojo-attach-point\x3d"hoverShadow" data-dojo-attach-event\x3d"onClick: onMsgHover"/\x3e\x3cspan class\x3d"radioAlignText"\x3e${HoverShadow}\x3c/span\x3e\x3c/label\x3e\x3cbr\x3e\n\t\n\t\x3cdiv class\x3d"sectionSep"\x3e\x3c/div\x3e\n\t\x3cdiv class\x3d"miscOptions"\x3e\n\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Checkbox" data-dojo-attach-point\x3d"msgSnippet" label\x3d"${MsgSpacingMode4}" data-dojo-attach-event\x3d"onClick: onMsgSnippet"\x3e\x3c/div\x3e\n\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Checkbox" data-dojo-attach-point\x3d"msgPreview" label\x3d"${PreviewPane_Show}" data-dojo-attach-event\x3d"onClick: onMsgPreview"\x3e\x3c/div\x3e\n\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Checkbox" data-dojo-attach-point\x3d"btnLabels" label\x3d"${ShowLabels}" data-dojo-attach-event\x3d"onClick: onButtonLabels"\x3e\x3c/div\x3e\n\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Checkbox" data-dojo-attach-point\x3d"senderNames" label\x3d"${ShowSenderNames}" data-dojo-attach-event\x3d"onClick: onSenderNames"\x3e\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n\n',
"url:ws/suite/Customize.css":"","url:ws/suite/Footer.html":'\x3cdiv class\x3d"footer_container"\x3e\n\t\x3cspan class\x3d"feedback" data-dojo-attach-point\x3d"feedback" style\x3d"display:none"\x3e\n\t\t\x3cspan class\x3d"feedbackBox"\x3e\n\t\t\t\x3cdiv class\x3d"progressNode" data-dojo-attach-point\x3d"progressNode"\x3e\x3c/div\x3e\n\t\t\t\x3csvg class\x3d\'svgIcon persistentIcon\' data-dojo-attach-point\x3d"persistentIcon"\x3e\x3cuse xlink:href\x3d\'#iconCheckMark\'\x3e\x3c/use\x3e\x3c/svg\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"feedbackTextNode" class\x3d"feedbackSpan"\x3e\x3c/span\x3e\n\t\t\t\x26nbsp;\x3ca href\x3d"#" data-dojo-attach-point\x3d"undoLink" class\x3d"wsLink undoLink"\x3e${Undo}\x3c/a\x3e\n\t\t\x3c/span\x3e\n\t\x3c/span\x3e\n\x3c/div\x3e\n',
"url:ws/suite/Footer.css":"","url:ws/suite/InforOfferDialog.html":'\x3cdiv class\x3d"WSModalPane inforOfferDlg"\x3e\n\t\x3cdiv class\x3d"WSModalPaneInner"\x3e\n\t\t\x3cdiv class\x3d"wsCloseBtn" data-dojo-attach-event\x3d"onclick:hideDlg"\x3e\x3csvg class\x3d\'svgIcon\'\x3e\x3cuse xlink:href\x3d\'#iconClose\'\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"modalContainer"\x3e\n\t\t\t\x3cdiv class\x3d"content" data-dojo-attach-point\x3d"content"\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/suite/InforOfferDialog.css":"","url:ws/widget/AdvancedSearch.html":'\x3cdiv class\x3d"advancedSearch" style\x3d"display:none"\x3e\n\t\x3cdiv class\x3d"wsCloseBtn" data-dojo-attach-event\x3d"onclick: hide"\x3e\x3csvg class\x3d"svgIcon"\x3e\x3cuse xlink:href\x3d"#iconClose"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/div\x3e\n\t\x3cdiv class\x3d"searchContainer"\x3e\n\t\t\x3ctable\x3e\x3ctbody\x3e\n\t\t\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"searchColTitle"\x3e${SearchKeyword}\x3c/span\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv data-dojo-type\x3d"ws/widget/DefaultTextbox" className\x3d"searchInput" data-dojo-attach-point\x3d"inputKeyword" maxlength\x3d"200" defaultValue\x3d"" tabindex\x3d1\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"searchColTitle"\x3e${SearchFolder}\x3c/span\x3e\x3c/td\x3e\x3ctd\x3e\x3cspan data-dojo-type\x3d"ws/widget/WSSelect" data-dojo-attach-point\x3d"searchFolder" tabindex\x3d2\x3e\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"searchColTitle"\x3e${From}\x3c/span\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv data-dojo-type\x3d"ws/widget/DefaultTextbox" className\x3d"searchInput" data-dojo-attach-point\x3d"inputFrom" maxlength\x3d"200" defaultValue\x3d"" tabindex\x3d3\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"searchColTitle"\x3e${To}\x3c/span\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv data-dojo-type\x3d"ws/widget/DefaultTextbox" className\x3d"searchInput" data-dojo-attach-point\x3d"inputTo" maxlength\x3d"200" defaultValue\x3d"" tabindex\x3d4\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"searchColTitle"\x3e${Subject}\x3c/span\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv data-dojo-type\x3d"ws/widget/DefaultTextbox" className\x3d"searchInput" data-dojo-attach-point\x3d"inputSubject" maxlength\x3d"200" defaultValue\x3d"" tabindex\x3d5\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"searchColTitle"\x3e${Date}\x3c/span\x3e\x3c/td\x3e\x3ctd\x3e\n\t\t\t\x3cspan className\x3d"searchInput searchDate" data-dojo-type\x3d"ws/widget/DefaultTextbox" data-dojo-attach-point\x3d"inputDateStart" defaultValue\x3d"" tabindex\x3d6\x3e\x3c/span\x3e\n\t\t\t\x3cspan class\x3d"searchCalTo"\x3e${CalTo}\x3c/span\x3e\n\t\t\t\x3cspan className\x3d"searchInput searchDate" data-dojo-type\x3d"ws/widget/DefaultTextbox" data-dojo-attach-point\x3d"inputDateEnd" defaultValue\x3d"" tabindex\x3d7\x3e\x3c/span\x3e\n\t\t\x3c/td\x3e\x3c/tr\x3e\n\n\t\t\x3ctr\x3e\x3ctd colspan\x3d"2"\x3e\n\t\t\t\x3cdiv class\x3d"searchColCheck" data-dojo-type\x3d"ws/widget/Checkbox" data-dojo-attach-point\x3d"checkAttachments" label\x3d"${SearchAttachments}" tabindex\x3d8\x3e\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d"searchColCheck" data-dojo-type\x3d"ws/widget/Checkbox" data-dojo-attach-point\x3d"checkImages" label\x3d"${SearchImages}" tabindex\x3d9\x3e\x3c/div\x3e\n\t\t\x3c/td\x3e\x3c/tr\x3e\n\t\t\x3c/tbody\x3e\x3c/table\x3e\n\n\t\t\x3cdiv data-dojo-type\x3d"ws/widget/WSToolbar" vizType\x3d"Bare" data-dojo-attach-point\x3d"toolbar"\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-props\x3d"toolbarPosition: \'right\'" data-dojo-attach-point\x3d"saveButton" data-dojo-attach-event\x3d"onClick: onSearch" tabindex\x3d10\x3e${Search}\x3c/div\x3e\n\t\t\t\x3cdiv data-dojo-type\x3d"ws/widget/Button" data-dojo-props\x3d"toolbarPosition: \'right\'" type\x3d"Bare" data-dojo-attach-point\x3d"resetButton" data-dojo-attach-event\x3d"onClick: reset" tabindex\x3d11\x3e${SearchReset}\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:ws/widget/AdvancedSearch.css":"","url:ws/themes/widget/ThemePicker.html":"\x3cdiv\x3e\x3c/div\x3e","url:ws/themes/widget/ThemeStyles.css":"body a,body .wsLink,body .wsLink:visited,body .wsSelect .option,body .buddyList .groupEdit,body .todayPage .editLink,body .todayPage .tempNotation{color: %{Gen_accent};}body .wsLink:hover, body .wsLink:focus{color: %{Gen_accent};}body .footer_container .feedback .undoLink,body .feedbackBox .wsLink,body .feedbackBox a,body .feedbackBox a:visited,body .feedbackBox .wsLink:hover,body .feedbackBox .wsLink:focus{color: %{Gen_light};}body .WSHat .signOutLink a,body .WSHat .signOutLink a:visited,body .WSHat .adminLinks .link,body .WSHat .adminLinks .pipe,body .WSHat .adminLinks span a,body .WSHat .adminLinks span a:visited {color: %{Hdr_link};}body .WSHat .adminLinks .btnArrowImg {fill: %{Hdr_link};}body .WSHat .salutation {color: %{Hdr_grtingText};}body .WSHat .navIcon svg {fill: %{Hdr_grtingText};}body .fdbkBadge .fdbkBadgeIcon,body .fdbkPaneEntry ul li:hover .feedbackSprite,body .fdbkPaneEntry ul li.fdbkOptionHover .feedbackSprite,body .WSNavigation .navItemCurrent,body .WSNavigation .shNavItemCurrent,body .settings .pageList .pageItem.current,body .WSNavigation .hasUnseen .text .unseen,body .appFolders .unseen,body .navToolbar .mnUnseen{background-color: %{Gen_accent};}body .WSNavigation .navItemCurrent .text {color: #fff;}body .WSNavigation .navItem.navItemCurrent .svgIcon {fill: #fff;}body .WSNavigation .hasUnseen.navItemCurrent .text .unseen {background-color: rgba(0, 0, 0, 0.35);}body .WSNavigation .shNavItemCurrent {background-color: %{Gen_base};}body .navToolbar .cpNavItem,body .wsToolbar,body .toastComposeTitleBar,body .todayPage .storyTitle,body .todayPage .story1 .storyDetail,body .messageListView .convCount{background-color: %{Gen_base};}body .navToolbar .cpNavItem.navItemHover {background-color: %{Gen_dark};}body .peoplePicker .showHighlight .row-highlight .dojoxGrid-cell,body .editCalendar .screenNameRowHover,body .messageListView .dojoxGrid-header-sort-up,body .messageListView .dojoxGrid-header-sort-down,body .buddyList h2.groupItemHover,body .buddyList .buddy h3:hover,body .wsMenuItemHover,body .addressListView .dojoxGrid-row-over,body .upcomingEventView .dojoxGrid-row-over,body .filterRow:hover,body .filterRow:hover td,body .appPplNode .appPplItem:hover,body .appTodo .taskItem:hover,.test {background-color: %{Gen_light} !important;}.messageListView .dojoxGrid-content .row-selected,.messageListView .dojoxGrid-content .row-current {background-color: %{Gen_light} !important;}body .wsToolbarControls .wsIconButton:hover .svgIcon {fill: #fff;}body .displayMessage .wsItemHover,body .displayMessage .wsItem:hover{background-color: %{Gen_light} !important; color: #202020 !important;}body #eventApp .eventRow:hover {background-color: %{Gen_light};}body .taskPanel .taskCloseBtnCntr {background-color: %{Gen_light} !important;}body .searchHighlight .searchTerm,body .dojoxGrid-row .searchTerm,body .displayMessage .searchTerm {background-color: %{Gen_searchResult};}body .appFolders .currFolderItem, body .appFolders .appFoldersNode .currFolderItem:hover {background-color: %{Gen_accent};}body .displayMessage .itemSelected{background-color:%{Gen_base};}body .inlineComposeNodeSelected {border: 1px solid %{Gen_base} !important;}body .inlineComposeNodeSelected .pinnedTB .inlineBottomTB {border-color: %{Gen_base} !important;}body .btn, body .btnHover, body .btnSmall, body .btnLarge {background-color: %{Gen_accent}; border: 1px solid %{Gen_accentDark};}body .btnHover, body .btnSmallHover, body .btnLargeHover {background-color: %{Gen_accent};}body .WSHat .searchButtonContainer .btnDisabled,body .WSHat .searchButtonContainer .btnSmall,body .WSHat .searchButtonContainer .btnLarge {background-color: %{Gen_search};}body .emptyFolderAdHeader,body .WSCalendarView .wsToolbarControls .dateSpanLabel .wsLink,body .WSCalendarView .wsToolbarControls .dateSpanLabel .wsLink:hover,body .wsToolbarControls .DropDownButton:hover .btnLabel{color: #fff;}body .wsToolbarControls .btn:hover {opacity: 0.7; color: #fff;}body .wsToolbarControls .btn.btnDisabled:hover {opacity: inherit;}body .wsToolbarControls .btn.invertBtn,body .wsToolbarControls .btn.invertBtn:hover,body .mnSearch {background-color: %{Gen_base};}body .wsToolbarControls .DropDownButton .btnArrowSvg,body .wsToolbarControls .DropDownButton:hover .btnArrowSvg {fill: #fff;}body .wsToolbarControls .DropDownButton .btnLabel,body .wsToolbarControls .btn {color: #fff;}body .wsToolbarControls .wsIconButton .svgIcon {fill: #fff;}body .wsToolbarControls .wsIconButton .svgIcon,body .wsToolbarControls .DropDownButton .btnArrowSvg,body .WSCalendarView .wsToolbarControls .prevButton svg,body .WSCalendarView .wsToolbarControls .nextButton svg,body .wsToolbarControls .DropDownButton .btnIconArrowCntr .btnArrowSvg{fill: #fff;}body .displayMessage_slideShowToolbar {background-color: %{Gen_base};}body .imPanel .AIMbtnSel{background-color: %{Gen_base} !important;}body .btn .btnSplitArrow {border-left: 1px solid %{Gen_accentDark};}body .btnClick .btnSplitArrow {border-left: 1px solid %{Gen_accentDark} !important;}body .WSNavigation .presence,body .WSNavigation .presence:hover {border:none; background: none repeat scroll 0 0 transparent;}body .WSHat {background-image:url(\"%{themeDir}/hat_bg1.png?v\x3d%{themeVer}\");}body .WSHat .leftHat,body .WSHat .affinityLeftHat{background-repeat:no-repeat; background-image:url(\"%{themeDir}/hat_bg2.png?v\x3d%{themeVer}\");}body .WSNavigation,body .SidePanel,body .settings .pageList {background-color: %{Gen_toneRGBA};}body .cp-compose.cpBtnClick .icon,body .cp-chat.cpBtnClick .icon,body .cp-sms.cpBtnClick .iconbody .btnLabelsOn2 .cp-compose.cpBtnClick .icon,body .btnLabelsOn2 .cp-chat.cpBtnClick .icon,body .btnLabelsOn2 .cp-sms.cpBtnClick .icon{background-color:%{Gen_accentDark};}body .dijitSplitterShadow,body .dijitSplitContainerVirtualSizerH,body .dijitSplitContainerVirtualSizerV {background-color:%{Gen_base};}body .emptyFolderAdDiv {background: #ffffff; background: -moz-linear-gradient(-45deg, #ffffff 0%, %{Gen_medium} 100%); background: -webkit-gradient(linear, left top, right bottom, color-stop(0%,#ffffff), color-stop(100%,%{Gen_medium})); background: -webkit-linear-gradient(-45deg, #ffffff 0%,%{Gen_medium} 100%); background: -ms-linear-gradient(-45deg, #ffffff 0%,%{Gen_medium} 100%); background: linear-gradient(135deg, #ffffff 0%,%{Gen_medium} 100%); filter: progid:DXImageTransform.Microsoft.gradient( startColorstr\x3d'#ffffff', endColorstr\x3d'%{Gen_medium}',GradientType\x3d1 );}body .WSNavigation .wsToolbarBare,body .WSCNavigation .wsToolbarBare {background-color:transparent; border-bottom:none;}body .settings .pageList.wsToolbar.wsToolbarBare {background-color:transparent !important;}body .WSModalPane .wsToolbar,body .imWidget .wsToolbar {background-color:transparent;}body .wsToolbarBare {background-color: transparent;}body .picturePicker .dojoxGrid-row-over .dojoxGrid-cell {background-color:transparent;}body .dojoxGrid-row,body .dojoxGrid-row, td {outline: none;}body .dojoxGrid-scrollbox, body .dojoxGrid-row {background-color: Transparent;}body .btnSmallBare,body .btnBare,body .btnLargeBare {background-image: none; background: none; border: none; color: #666;}body .appsToolbar ul .appCurr:hover,body .appsToolbar ul .appCurr {border-bottom: none; background-color: #fff; background-image: none;}body .WSNavigation .composeBtn,body .navToolbar .cpNavItem{background-color: %{Gen_search};}body .wsToolbarControls .searchData.btnDisabled .btnLabel {color: #fff;}body .messageListView .wsToolbarControls .selectBtn.chkBoxChecked .svgIcon {fill: #fff;}body .messageListView .wsToolbarControls .selectBtn:hover .svgIcon,body .messageListView .wsToolbarControls .selectBtn.btnHover .svgIcon {stroke: %{Gen_accent}; fill: #fff; background-color: transparent;}body .messageListView .wsToolbarControls .selectBtn:hover {opacity: 1.0;}",
"url:ws/themes/widget/ThemeStylesHighContrast.css":'html, body{color: #000;}body a,body .wsLink,body .wsLink:visited,body .wsSelect .option,body .buddyList .groupEdit{color: #006db0;}body .wsLink:hover, body .wsLink:focus{color: #006db0;}body .footer_container .feedback .undoLink,body .feedbackBox .wsLink,body .feedbackBox a,body .feedbackBox a:visited,body .feedbackBox .wsLink:hover,body .feedbackBox .wsLink:focus{color: #f2f2f2;}body .WSHat .signOutLink a,body .WSHat .signOutLink a:visited,body .WSHat .adminLinks .link,body .WSHat .adminLinks .pipe,body .WSHat .adminLinks span a,body .WSHat .adminLinks span a:visited {color: #000;}body .WSHat .salutation {color: #000;}body .wsToolbarControls .btn.invertBtn:hover {color: #fff; background-color: #0096ef;}body .wsToolbarControls .btn.invertBtn:hover .svgIcon {fill: #fff;}body .wsToolbarControls .btn.btnDisabled.invertBtn:hover {background-color: #006db0;}body .wsToolbarControls .btn.invertBtn {background-color: #006db0;}body .wsToolbarControls .wsIconButton .svgIcon,body .wsToolbarControls .wsIconButton.invertBtn .svgIcon,body .wsToolbarControls .DropDownButton .btnArrowSvg,body .WSCalendarView .wsToolbarControls .prevButton svg,body .WSCalendarView .wsToolbarControls .nextButton svg,body .wsToolbarControls .DropDownButton .btnIconArrowCntr .btnArrowSvg{fill: #fff;}body .wsToolbarControls .wsIconButton:hover .svgIcon,body .wsToolbarControls .DropDownButton:hover .btnArrowSvg,body .WSCalendarView .wsToolbarControls .prevButton:hover svg,body .WSCalendarView .wsToolbarControls .nextButton:hover svg,body .wsToolbarControls .DropDownButton:hover .btnIconArrowCntr .btnArrowSvg{fill: #0096ef;}body .WSCalendarView .wsToolbarControls .dateSpanLabel .wsLink {color: #fff;}body .WSCalendarView .wsToolbarControls .dateSpanLabel .wsLink:hover {color: #0096ef;}body .fdbkBadge .fdbkBadgeIcon,body .fdbkPaneEntry ul li:hover .feedbackSprite,body .fdbkPaneEntry ul li.fdbkOptionHover .feedbackSprite,body .WSNavigation .navItemCurrent,body .WSNavigation .shNavItemCurrent,body .settings .pageList .pageItem.current,body .WSNavigation .hasUnseen .text .unseen,body .appFolders .unseen,body .navToolbar .mnUnseen{background-color: #006db0;}body .emptyFolderAdHeader,body .WSNavigation .navItemCurrent .text {color: #fff;}body .WSNavigation .navItem.navItemCurrent .svgIcon {fill: #fff;}body .WSNavigation .hasUnseen.navItemCurrent .text .unseen {background-color: rgba(0, 0, 0, 1.0);}body .WSNavigation .shNavItemCurrent {background-color: #333;}body .navToolbar .cpNavItem{background-color: #333;}body .searchInfo,body .navToolbar .cpNavItem.navItemHover {background-color: #000;}.dj_ie7 body .navToolbar .navItemCurrent .mnUnseen,.dj_ie8 body .navToolbar .navItemCurrent .mnUnseen{background-color: #02182e;}body .peoplePicker .showHighlight .row-highlight .dojoxGrid-cell,body .editCalendar .screenNameRowHover,body .messageListView .dojoxGrid-header-sort-up,body .messageListView .dojoxGrid-header-sort-down,body .buddyList h2.groupItemHover,body .buddyList .buddy h3:hover,body .wsMenuItemHover,body .addressListView .dojoxGrid-row-over,body .upcomingEventView .dojoxGrid-row-over,body .filterRow:hover,body .filterRow:hover td,body .appPplNode .appPplItem:hover,body .appTodo .taskItem:hover,.test {background-color: #f2f2f2 !important;}body .messageListView .row-read {background-color: #fff;}body .messageListView .dojoxGrid-content .row-selected,body .messageListView .dojoxGrid-content .row-current {background-color: #006db0 !important; color: #fff !important;}body .displayMessage .wsItemHover,body .displayMessage .wsItem:hover{background-color: #f2f2f2 !important; color: #202020 !important;}body #eventApp .eventRow:hover {background-color:#f2f2f2;}body .taskPanel .taskCloseBtnCntr {background-color: #f2f2f2 !important;}body .searchInfo,body .wsToolbarControls .btn.searchDatabody .sendConfirmation .linkButton,body .wsToolbarControls .DropDownButton .btnLabel{color: #fff;}body .wsToolbarControls .btn.searchData:hoverbody .sendConfirmation .linkButton:hover,body .wsToolbarControls .DropDownButton:hover .btnLabel{color: #0096ef;}body .searchHighlight .searchTerm,body .dojoxGrid-row .searchTerm,body .displayMessage .searchTerm {background-color: #c6c8c9;}body .sendConfirmation .searchInfo .wsArrowLeft {fill: #fff;}body .sendConfirmation .wsIconButton {background-color: #333;}body .sendConfirmation .wsIconButton .svgIcon {fill: #fff;}body .appFolders .currFolderItem, body .appFolders .appFoldersNode .currFolderItem:hover {background-color: #006db0;}body .displayMessage .itemSelected{background-color:#333;}body .inlineComposeNodeSelected {border: 1px solid #333 !important;}body .inlineComposeNodeSelected .pinnedTB .inlineBottomTB {border-color: #333 !important;}body .btn, body .btnHover, body .btnSmall, body .btnLarge {background-color: #006db0; border: 1px solid #02182e;}body .btnHover, body .btnSmallHover, body .btnLargeHover {background-color: #006db0;}body .WSNavigation .composeBtn,body .navToolbar .cpNavItem,body .WSHat .searchButtonContainer .btnDisabled,body .WSHat .searchButtonContainer .btnSmall,body .WSHat .searchButtonContainer .btnLarge {background-color: #006db0;}body .wsToolbarControls .btn {background-color: #000; color: #fff;}body .wsToolbar,body .toastComposeTitleBar,body .displayMessage_slideShowToolbar {background-color: #000;}body .wsToolbarControls .btn:hover {background-color: #000;}body .wsToolbar, body .navCollapser {border-bottom: 1px solid #000; border-top: 1px solid #c9c9c9;}body .WSNavigation .controlsPane ul li {background-color: #333;}body .WSNavigation .controlsPane ul li.cpBtnHover,body .WSNavigation .controlsPane ul li.cpBtnClick ,body .WSNavigation .controlsPane ul li.cpBtnHover div.icon,body .WSNavigation .controlsPane ul li.cpBtnClick div.icon{background-color: #000;}body .WSNavigation .controlsPane ul li div.icon {background-color: #333;}body .imPanel .AIMbtnSel{background-color:#333 !important;}body .btn .btnSplitArrow {border-left: 1px solid #02182e;}body .btnClick .btnSplitArrow {border-left: 1px solid #02182e !important;}body .WSNavigation .presence,body .WSNavigation .presence:hover {border:none; background: none repeat scroll 0 0 transparent;}body .WSHat {background-image:url("%{themeDir}/hat_bg1.png");}body .WSHat .leftHat,body .WSHat .affinityLeftHat{background-repeat:no-repeat; background-image:url("%{themeDir}/hat_bg2.png");}body .WSNavigation,body .SidePanel,body .settings .pageList {background-color: transparent;}body .cp-compose.cpBtnClick .icon,body .cp-chat.cpBtnClick .icon,body .cp-sms.cpBtnClick .icon,body .btnLabelsOn2 .cp-compose.cpBtnClick .icon,body .btnLabelsOn2 .cp-chat.cpBtnClick .icon,body .btnLabelsOn2 .cp-sms.cpBtnClick .icon{background-color:#02182e;}body .dijitSplitterShadow,body .dijitSplitContainerVirtualSizerH,body .dijitSplitContainerVirtualSizerV {background-color:#333;}body .navTile24, body .navItem .navTile24 .navItemHover {background-image: none;}body .WSNavigation .wsToolbarBare,body .WSCNavigation .wsToolbarBare {background-color:transparent; border-bottom:none;}body .settings .pageList.wsToolbar.wsToolbarBare {background-color:transparent !important;}body .WSModalPane .wsToolbar,body .imWidget .wsToolbar {background-color:transparent;}body .sendConfirmation .wsToolbar {background-color:transparent;}body .wsToolbarBare {background-color: transparent;}body .picturePicker .dojoxGrid-row-over .dojoxGrid-cell {background-color:transparent;}body .dojoxGrid-row,body .dojoxGrid-row, td {outline: none;}body .dojoxGrid-scrollbox, body .dojoxGrid-row {background-color: Transparent;}body .btnSmallBare,body .btnBare,body .btnLargeBare {background-image: none; background: none; border: none; color: #666;}body .appsToolbar ul .appCurr:hover,body .appsToolbar ul .appCurr {border-bottom: none; background-color: #fff; background-image: none;}body .wsToolbarControls .searchData.btnDisabled .btnLabel {color: #fff;}body .messageListView .wsToolbarControls .selectBtn.chkBoxChecked .svgIcon {fill: #fff;}body .messageListView .row-current .gridColSub .frag,body .messageListView .row-selected .gridColSub .frag {color: #ddd;}.listView .row-current .gridColHov .gridSVGIcon,.listView .row-selected .gridColHov .gridSVGIcon,.messageListView .row-selected.dojoxGrid-row-over .msgUnflagged,.messageListView .row-current.dojoxGrid-row-over .msgUnflagged,.listView .row-current .gridColAttach .gridSVGIcon.iconAttach,.listView .row-current .gridColFrom .gridSVGIcon.iconReply,.listView .row-current .gridColFrom .gridSVGIcon.iconForward,.listView .row-selected .gridColAttach .gridSVGIcon.iconAttach,.listView .row-selected .gridColFrom .gridSVGIcon.iconReply,.listView .row-selected .gridColFrom .gridSVGIcon.iconForward {fill: #fff;}'}});
(function(){var f=this.require;f({cache:{}});!f.async&&f(["dojo"]);f.boot&&f.apply(null,f.boot)})();
//# sourceMappingURL=dojo.js.map